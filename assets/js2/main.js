
$(document).ready(function(){$('.track-group').data('wt1',{category:'WT.cg_n',dynamicEvent:'$("meta[name=\'WT.cg_n\']").attr("content")'});$('.track-group').data('wt2',{category:'WT.dl',event:'50'});$('.track-group').data('wt3',{category:'WT.z_cur',dynamicEvent:'$("meta[name=\'WT.z_cur\']").attr("content")'});$('.track-group').data('wt4',{category:'WT.z_mod',dynamicEvent:'$obj.attr("id")'});$('.track-group').data('wt5',{category:'WT.z_tgturl',dynamicEvent:'event.target.id'});$('.track-group').data('wt6',{category:'WT.dcsvid',dynamicEvent:'WebtrendsAsync.prototype.dcsGetCookie("PID")'});$('.track-group').data('ga3',{category:'WT.cg_n',dynamicEvent:'$("meta[name=\'WT.cg_n\']").attr("content")'});$('.track-group').data('ga1',{category:'WT.z_mod',dynamicEvent:'$obj.attr("id")'});$('.track-group').data('ga2',{category:'WT.z_tgturl',dynamicEvent:'event.target.id'});$('.track,.track-group').bind('click',function(event){doTracking($(this),event);});});function doTracking($obj,event){if(($(event.target).parents('a').length<=0)&&($(event.target).css('cursor')!="pointer")&&($(event.target).parents().css('cursor')!="pointer"))
{trace('No need to fire!');return;}
var dynEvent='';var i=0;var key='ga'
var wtkeyValPair='';var gakeyValPair='';var gaGroup='';for(i=1;i<=6;i++)
{dynEvent='';theEvent='';key='ga'+i;if($obj.data(key)!=null){theCategory=$obj.data(key).category;if($obj.data(key).event!=null){theEvent=$obj.data(key).event;if(gakeyValPair!='')gakeyValPair+=',';gakeyValPair+='\''+theEvent+'\'';}
if($obj.data(key).dynamicEvent!=null){try{if(theCategory=='WT.z_tgturl')
{dynEvent=unescape($(event.target).parents('a').attr('href'));if(dynEvent==null||dynEvent==''||dynEvent=='undefined')
{var $target=$(event.target);if($target.is("A")){dynEvent=$target.attr('href');}}
if(dynEvent==null||dynEvent==''||dynEvent=='undefined')
{var str=$target.attr("onclick")
dynEvent=str.substring(1+str.indexOf("'"),str.lastIndexOf("'"));}}
if(dynEvent==null||dynEvent==''||dynEvent=='undefined')
{dynEvent=eval($obj.data(key).dynamicEvent);}
if(dynEvent==null)dynEvent='';if(theCategory=='WT.cg_n')
{gaGroup=dynEvent;}
else
{if(gakeyValPair!='')gakeyValPair+=',';gakeyValPair+='\''+dynEvent+'\'';}}catch(err){dynEvent='';}}}
key='wt'+i;dynEvent='';theEvent='';if($obj.data(key)!=null){theCategory=$obj.data(key).category;if($obj.data(key).event!=null){theEvent=$obj.data(key).event;if(wtkeyValPair!='')wtkeyValPair+=',';wtkeyValPair+='\''+theCategory+'\',\''+theEvent+'\'';}
if($obj.data(key).dynamicEvent!=null){try{if(theCategory=='WT.z_tgturl')
{dynEvent=unescape($(event.target).parents('a').attr('href'));if(dynEvent==null||dynEvent==''||dynEvent=='undefined')
{var $target=$(event.target);if($target.is("A")){dynEvent=$target.attr('href');}
if(dynEvent==null||dynEvent==''||dynEvent=='undefined')
{var str=$target.attr("onclick")
dynEvent=str.substring(1+str.indexOf("'"),str.lastIndexOf("'"));}}}
if(dynEvent==null||dynEvent=='')
{dynEvent=eval($obj.data(key).dynamicEvent);}
if(dynEvent==null)dynEvent='';if(wtkeyValPair!='')wtkeyValPair+=',';wtkeyValPair+='\''+theCategory+'\',\''+dynEvent+'\'';}catch(err){dynEvent='';}}}}
trace('webtrendsparams: '+wtkeyValPair);trace('gaparams: '+gakeyValPair);if(typeof dcsMultiTrack!='undefined')
{if(wtkeyValPair!='')
eval("dcsMultiTrack("+wtkeyValPair+")");}
if(gakeyValPair!='')
{var ga=new com.art.core.tracking.GoogleAnalytics(gaGroup);if(typeof ga!='undefined')
{eval("ga.trackEventWithCategory("+gakeyValPair+")");}}}
function trace(msg){var showTrace=true;if(typeof showDebugTrace!='undefined'){showTrace=art.core.utils.boolparse(showDebugTrace);}
if(showTrace){if((window['console']!==undefined)){console.log(msg);}}}
function link(link){document.location=link;};(function(){var store={},win=window,doc=win.document,localStorageName='localStorage',globalStorageName='globalStorage',namespace='__storejs__',storage
store.disabled=false
store.set=function(key,value){}
store.get=function(key){}
store.remove=function(key){}
store.clear=function(){}
store.transact=function(key,defaultVal,transactionFn){var val=store.get(key)
if(transactionFn==null){transactionFn=defaultVal
defaultVal=null}
if(typeof val=='undefined'){val=defaultVal||{}}
transactionFn(val)
store.set(key,val)}
store.getAll=function(){}
store.serialize=function(value){return JSON.stringify(value)}
store.deserialize=function(value){if(typeof value!='string'){return undefined}
return JSON.parse(value)}
function isLocalStorageNameSupported(){try{return(localStorageName in win&&win[localStorageName])}
catch(err){return false}}
function isGlobalStorageNameSupported(){try{return(globalStorageName in win&&win[globalStorageName]&&win[globalStorageName][win.location.hostname])}
catch(err){return false}}
if(isLocalStorageNameSupported()){storage=win[localStorageName]
store.set=function(key,val){if(val===undefined){return store.remove(key)}
storage.setItem(key,store.serialize(val))}
store.get=function(key){return store.deserialize(storage.getItem(key))}
store.remove=function(key){storage.removeItem(key)}
store.clear=function(){storage.clear()}
store.getAll=function(){var ret={}
for(var i=0;i<storage.length;++i){var key=storage.key(i)
ret[key]=store.get(key)}
return ret}}else if(isGlobalStorageNameSupported()){storage=win[globalStorageName][win.location.hostname]
store.set=function(key,val){if(val===undefined){return store.remove(key)}
storage[key]=store.serialize(val)}
store.get=function(key){return store.deserialize(storage[key]&&storage[key].value)}
store.remove=function(key){delete storage[key]}
store.clear=function(){for(var key in storage){delete storage[key]}}
store.getAll=function(){var ret={}
for(var i=0;i<storage.length;++i){var key=storage.key(i)
ret[key]=store.get(key)}
return ret}}else if(doc.documentElement.addBehavior){var storageOwner,storageContainer
try{storageContainer=new ActiveXObject('htmlfile')
storageContainer.open()
storageContainer.write('<s'+'cript>document.w=window</s'+'cript><iframe src="/favicon.ico"></frame>')
storageContainer.close()
storageOwner=storageContainer.w.frames[0].document
storage=storageOwner.createElement('div')}catch(e){storage=doc.createElement('div')
storageOwner=doc.body}
function withIEStorage(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0)
args.unshift(storage)
storageOwner.appendChild(storage)
storage.addBehavior('#default#userData')
storage.load(localStorageName)
var result=storeFunction.apply(store,args)
storageOwner.removeChild(storage)
return result}}
function ieKeyFix(key){return'_'+key}
store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key)
if(val===undefined){return store.remove(key)}
storage.setAttribute(key,store.serialize(val))
storage.save(localStorageName)})
store.get=withIEStorage(function(storage,key){key=ieKeyFix(key)
return store.deserialize(storage.getAttribute(key))})
store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key)
storage.removeAttribute(key)
storage.save(localStorageName)})
store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes
storage.load(localStorageName)
for(var i=0,attr;attr=attributes[i];i++){storage.removeAttribute(attr.name)}
storage.save(localStorageName)})
store.getAll=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes
storage.load(localStorageName)
var ret={}
for(var i=0,attr;attr=attributes[i];++i){ret[attr]=store.get(attr)}
return ret})}
try{store.set(namespace,namespace)
if(store.get(namespace)!=namespace){store.disabled=true}
store.remove(namespace)}catch(e){store.disabled=true}
if(typeof module!='undefined'){module.exports=store}
else if(typeof define==='function'&&define.amd){define(store)}
else{this.store=store}})()
var htmlString;var autoSuggestDiv=null;var lastSearchTerm=null;var userSearchTerm=null;var howmanycharsearch=3;var isImage=1;var wt_EnabledSearchAhead='false'
var setMouseMoveFlag=false;$(document).ready(function(){wt_EnabledSearchAhead=$('#wtEnabledDiv').text();var x=GetCookieDictionary('arts','IsMuseumMode');if(x.length==0){AutoSuggest(document.getElementById("Search_String"),'#Search_String');$('body').click(function(){$('.searchSuggest').hide();setMouseMoveFlag=false;});$('.ssgItem').live('click',function(){goToCategory($(this));});$('#Search_String').keydown(function(event){if(event.keyCode=='13'){if($('.ssg_Selected').length){event.preventDefault();goToCategory($('.ssg_Selected'));}}});$('#Search_String').live('mouseover',function(){if($('#Search_String').val().length>0&&userSearchTerm!=null){$('#Search_String').val(userSearchTerm);}});$('.visualsearchsymbol').live('click',function(){$('.VisualSearchUL').slideToggle("slow");});}
$(window).resize(function(){if($('#autoSuggestDiv').is(':visible')){global_ssg.positionSearchSuggest();}});var oldX=0,oldY=0;$('body').mousemove(function(e){if(oldX!=e.pageX||oldY!=e.pageY){setMouseMoveFlag=true;oldX=e.pageX;oldY=e.pageY;}});});function fnMouseOver(item){if(setMouseMoveFlag){var $item=$(item);applyItemStyle($item,'over','focus');}}
function fnMouseOut(item){var $item=$(item);applyItemStyle($item,'out','focus');}
var global_ssg;function AutoSuggest(elem,jqueryobj){var me=this;global_ssg=me;this.elem=elem;var oElem=elem;this.div=null;this.highlighted=-1;var searchBox=$(jqueryobj);var KEYUP=38;var KEYDN=40;var ESC=27;var BACKSPACE=8;elem.setAttribute("autocomplete","off");elem.onkeydown=function(ev){var key=me.getKeyCode(ev);switch(key){case KEYUP:if(me.highlighted>0){me.highlighted--;}
else{$('#Search_String').val(userSearchTerm);me.highlighted=-1;}
if($('.searchSuggest').css('display')!='none'){me.changeHighlight(key);}
break;case KEYDN:if(me.highlighted<$('.ssg_results .ssgItem').length-1){me.highlighted++;}
if($('.searchSuggest').css('display')!='none'){me.changeHighlight(key);}
break;}};elem.onkeyup=function(ev){var key=me.getKeyCode(ev);switch(key){case ESC:me.hideDiv();break;case 40:break;case 38:break;case 37:break;case 39:break;case 13:break;default:if(this.value.length>0){me.createDiv();}
else{$('.searchSuggest').hide();setMouseMoveFlag=false;me.hideDiv();}
break;}};this.createDiv=function(){var url="/ADC.NET/root/Pages/Gallery/SearchSuggest.aspx?SearchValue=";var inputLength=oElem.value.length;userInput=oElem.value;var isItNumeric=false;if(inputLength<0){this.highlighted=-1;$('.searchSuggest').hide();setMouseMoveFlag=false;me.hideDiv();return;}
if(inputLength>0){this.highlighted=-1;userInput=RemoveNonAlphaNumericTerms(userInput);inputLength=userInput.length;var customerZoneIDStr="&CustomerZoneID="+GetCustomerZoneID()+"&endecagroup=2"+"&LanguageID="+GetLanguageID()+"&sby="+GetSearhByIfAvailable();var searchSuggestURL=url+userInput+customerZoneIDStr;isItNumeric=isnumeric(userInput);if(howmanycharsearch>1){if(autoSuggestDiv==null||autoSuggestDiv==" "){if(inputLength==howmanycharsearch||inputLength>howmanycharsearch+1&&ajaxCallNotMade(userInput)){userSearchTerm=userInput;if(!isItNumeric){me.callAjaxAutoSuggest(searchSuggestURL);lastSearchTerm=userInput.substring(0,howmanycharsearch);}}}
else{if(inputLength==howmanycharsearch&&(!isItNumeric)){userSearchTerm=userInput;me.callAjaxAutoSuggest(searchSuggestURL);me.refineResults(userInput);}}
if(inputLength<howmanycharsearch){$('.searchSuggest').hide();setMouseMoveFlag=false;me.hideDiv();}
if(inputLength>howmanycharsearch&&(!isItNumeric)){userSearchTerm=userInput;me.callAjaxAutoSuggest(searchSuggestURL);}}
else{if(!isItNumeric){userSearchTerm=userInput;me.callAjaxAutoSuggest(searchSuggestURL);}}}}
this.hideDiv=function(){if(autoSuggestDiv){document.body.removeChild(autoSuggestDiv);autoSuggestDiv=null;this.highlighted=-1;setMouseMoveFlag=false;}}
this.changeHighlight=function(key){$('.ssg_results').find('.ssgItem').each(function(i){if(i==highlighted){applyItemStyle($(this),'over','focus');}
else{if($(this).hasClass('ssg_Selected'))applyItemStyle($(this),'out','nofocus');}
if(key==13){goToCategory($(this));}});};this.callAjaxAutoSuggest=function(searchSuggestURL){makeAjaxCallToTealeafSS('Request');$.ajax({url:searchSuggestURL,processData:false,cache:false,type:"GET",beforeSend:function(){},success:function(callback){var flag=me.callBackAutoSuggest(callback);if(flag&&searchBox.val().length>0){makeAjaxCallToTealeafSS('Results');if(autoSuggestDiv==null||autoSuggestDiv==" "){autoSuggestDiv=me.fnDOMElementCreate("DIV","autoSuggestDiv","searchSuggest");this.div=autoSuggestDiv;autoSuggestDiv.innerHTML=htmlString;document.body.appendChild(autoSuggestDiv);}
else{autoSuggestDiv.innerHTML=htmlString;}
var temp=me.fnDOMElementCreate("UL","ssgmani","ssgmani");temp.innerHTML=$(".ssg_results").html();autoSuggestDiv.appendChild(temp);$(".ssgmani").hide();var oText=document.getElementById("Search_String");if(oText.value.length>howmanycharsearch){if($(".ssgmani").length<0){me.callAjaxAutoSuggest(searchSuggestURL);}}
if(htmlString.length>1){me.positionSearchSuggest();if($('.ssg_results').html().length>0){$('.searchSuggest').slideDown('normal');}}}},error:function(textStatus,errorThrown){}});}
this.callBackAutoSuggest=function(data){htmlString='';var temp=data;var startpos=temp.indexOf("<div",0);var endpos=temp.indexOf(">",startpos);var startpos=temp.indexOf("</div>",endpos);var tempstr=temp.substring(startpos,endpos+1);var tempboldcnt=searchBox.val().length;if(tempstr!="nodata"){var jsonobj=eval('('+tempstr+')');htmlString='<ul class="ssg_results">';for(var i=0;i<jsonobj.searchsuggest.items.item.length;i++){if(jsonobj.searchsuggest.items.item[i].itemcount!='0'){htmlString+='<li class="ssgItem ssgCurrent" onmouseover="fnMouseOver(this);" onmouseout="fnMouseOut(this);">';if(isImage==1)htmlString+='<div class="ssg_galleryThumb floatLeft" style="background-image:url('+jsonobj.searchsuggest.items.item[i].imagelocation+');"></div>';htmlString+='<div class="ssgTextBox floatLeft">';var temp=jsonobj.searchsuggest.items.item[i].categoryname;var result=GetHighlightedString(temp,searchBox.val());htmlString+='<div class="ssg_heading_hide" n="'+temp+'">'+result+'</div>';result=autoEllipseText(temp,'35');var result=GetHighlightedString(result,searchBox.val());htmlString+='<div class="ssg_heading" n="'+temp+'">'+result+'</div>';var txt=jsonobj.searchsuggest.items.item[i].itemcount;var itemCount=txt;var re1='.*?';var re2='(\\d+)';var p=new RegExp(re1+re2,["i"]);var m=p.exec(txt);if(m!=null){var int1=m[1];itemCount=int1;}
if(itemCount=='1')itemCount=me.insertCommaToCategoryCount(itemCount)+' item';else itemCount=me.insertCommaToCategoryCount(itemCount)+' items';htmlString+='<div class="ssg_byline">'+itemCount+'</div>';var sessionID=me.getCookie('CustSessionID');var ui="?ui="+sessionID;var t=jsonobj.searchsuggest.items.item[i].galleryurl;var t1=t.indexOf('?',0);var gUrl=t.substring(0,t1)+ui;if(wt_EnabledSearchAhead=='true'){var wt_OSS="";wt_OSS=temp.replace(" / ","/");wt_OSS=wt_OSS.replace("& ","");wt_OSS=wt_OSS.replace(/ /g,"+");var wt_Search="Search+Ahead";gUrl=gUrl+"&WT.cg_n="+wt_Search+"&WT.oss="+wt_OSS+"&SSK="+wt_OSS;}
htmlString+='<div class="ssgURL">'+gUrl+'</div>';htmlString+='</div><div class="clear" style="font-size:0;line-height:0;margin:0;font-weight:normal;height:0px;"></div></li>';}}
htmlString+='</ul>';return true;}
else{$('.searchSuggest').hide();setMouseMoveFlag=false;me.hideDiv();}}
this.getKeyCode=function(ev){if(ev)
{return ev.keyCode;}
if(window.event)
{return window.event.keyCode;}};this.getEventSource=function(ev){if(ev)
{return ev.target;}
if(window.event)
{return window.event.srcElement;}};this.cancelEvent=function(ev){if(ev)
{ev.preventDefault();ev.stopPropagation();}
if(window.event)
{window.event.returnValue=false;}}
this.fnDOMElementCreate=function(tag,id,classname){var robj=null;robj=document.createElement(tag);if(id)robj.id=id;if(classname)robj.className=classname;return robj;}
this.insertCommaToCategoryCount=function(number){number=''+number;if(number.length>3){var mod=number.length%3;var output=(mod>0?(number.substring(0,mod)):'');for(i=0;i<Math.floor(number.length/3);i++){if((mod==0)&&(i==0))output+=number.substring(mod+3*i,mod+3*i+3);else output+=','+number.substring(mod+3*i,mod+3*i+3);}
return(output);}
else{return number;}}
this.positionSearchSuggest=function(){searchBoxOffset=$('.hdr-nav-search').offset();searchBoxTopPos=searchBoxOffset.top;searchBoxLeftPos=searchBoxOffset.left;searchBoxHeight=$('#Search_String').height();searchSuggestTopPos=searchBoxTopPos+searchBoxHeight+10;searchSuggestLeftPos=searchBoxLeftPos;$('.searchSuggest').css('top',searchSuggestTopPos-7);$('.searchSuggest').css('left',searchSuggestLeftPos-8);}
this.getCookie=function(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return unescape(document.cookie.substring(c_start,c_end));}}
return"";}
this.refineResults=function(userInput){if($('.ssgmani').length>0){$('.ssg_results').empty();$('.ssgmani').find('.ssg_heading').each(function(){var headingText=$(this).attr("n");if(headingText.toLowerCase().indexOf(userInput.toLowerCase())>0){$(this).parents('li').addClass('ssgCurrent');$(this).parents('li').show();var boldText=headingText;var boldHtml="<b>"+boldText.substring(0,userInput.length)+"</b>"+boldText.substring(userInput.length,boldText.length);var result=GetHighlightedString(boldText,userInput);$(this).html(result);var temp="<li class='ssgItem ssgCurrent'>"+$(this).parents('li').html()+"</li>";$('.ssg_results').append(temp);}
else{$(this).parents('li').removeClass('ssgCurrent');$(this).parents('li').fadeOut('fast');}});if($('.ssg_results').html().length>0){$('.searchSuggest').slideDown('normal');}}}}
function applyItemStyle($item,action,param){if(action=='over'){$item.addClass('ssg_Selected');$item.find('.ssg_byline').addClass('ssgTextHover');$item.find('.ssgTextBox').addClass('ssgTextBoxSelected');$item.find('.ssg_heading').hide();$item.find('.ssg_heading_hide').show();if(param=='focus')$('#Search_String').val($item.find('.ssg_heading_hide').attr('n'));}
else if(action=='out'){$item.removeClass('ssg_Selected');$item.find('.ssg_byline').removeClass('ssgTextHover');$item.find('.ssgTextBox').removeClass('ssgTextBoxSelected');if(document.all){$item.find('.ssg_heading').css('width','203px');$item.find('.ssg_heading_hide').css('width','203px');}
else{$item.find('.ssg_heading').css('width','206px');$item.find('.ssg_heading_hide').css('width','206px');}
$item.find('.ssg_heading').show();$item.find('.ssg_heading_hide').hide();}}
function goToCategory($item){theCategory=$item.find('.ssg_heading').text();theURL=$item.find('.ssgURL').text();$('#Search_String').val(theCategory);$('.searchSuggest').slideUp('normal',function(){location.href=theURL;});makeAjaxCallToEndecaLogging();makeAjaxCallToTealeafSS(theCategory);}
function autoEllipseText(text,limit){var temp;if(text.length-1>limit){temp=text.substring(0,limit-3)+'...';}
else{temp=text;}
return temp;}
function ajaxCallNotMade(userInput){retval=false;var currentInput=userInput.substring(0,howmanycharsearch);if(lastSearchTerm!=currentInput){retval=true;}
return retval;}
function GetHighlightedString(categoryname,userinput){userinput=TrimSS(userinput);var tempToSearch=categoryname.toLowerCase();var mysearchTemp=userinput;var mytemppos=tempToSearch.indexOf(mysearchTemp.toLowerCase());var finalstring=categoryname;var str1,str2,str3;str1=tempToSearch.substring(0,mytemppos);str2=tempToSearch.substring(mytemppos,mytemppos+userinput.length);if(userinput.toLowerCase()==str2){finalstring=str1+'<b>';finalstring=finalstring+str2+'</b>';}
else{finalstring=str1+str2;}
str3=tempToSearch.substring(mytemppos+userinput.length);finalstring=finalstring+str3;return finalstring;}
function LTrimSS(str){var whitespace=new String(" \t\n\r");var s=new String(str);if(whitespace.indexOf(s.charAt(0))!=-1){var j=0,i=s.length;while(j<i&&whitespace.indexOf(s.charAt(j))!=-1)
j++;s=s.substring(j,i);}
return s;}
function RTrimSS(str){var whitespace=new String(" \t\n\r");var s=new String(str);if(whitespace.indexOf(s.charAt(s.length-1))!=-1){var i=s.length-1;while(i>=0&&whitespace.indexOf(s.charAt(i))!=-1)
i--;s=s.substring(0,i+1);}
return s;}
function TrimSS(str){return RTrimSS(LTrimSS(str));}
function makeAjaxCallToTealeafSS(dataToSend){if(dataToSend=="Request"){dataToSend=dataToSend+"=SearchRequest";}
else if(dataToSend=="Results"){dataToSend=dataToSend+"=SearchResults";}
else{dataToSend="Action=SearchSuggestClicked"+dataToSend;}
$.ajax({url:'/ADC.NET/Root/Pages/Checkout/tealeaf.aspx',processData:false,data:dataToSend,type:"GET"});}
function RemoveNonAlphaNumericTerms(SearchTerm){SearchTerm=SearchTerm.replace(/[^a-zA-Z 0-9]+/g,'');return SearchTerm;}
function isnumeric(theVal){var numericExpression=/^[0-9]+$/;if(theVal.match(numericExpression))
return true;else
return false;}
function setUserSearchString($item){var itemPosition=$item.find('.itemPosition').text();if(itemPosition=="1"){$('#Search_String').val(userSearchTerm);}}
function makeAjaxCallToEndecaLogging(){var sessionID=getCookie('CustSessionID');var customerZoneID="&CustomerZoneID="+GetCustomerZoneID();dataToSend="SearchStringForLog="+userSearchTerm+"&UI="+sessionID+customerZoneID+"&endecagroup=2"+"&LanguageID="+GetLanguageID();$.ajax({url:'/ADC.NET/root/Pages/Gallery/SearchSuggest.aspx',processData:false,data:dataToSend,type:"GET"});}
function GetCustomerZoneID(){var customerZoneID="3";customerZoneID=MyGalleriesCore.getModel().environment.customerZoneId||customerZoneID;return customerZoneID;}
function GetLanguageID()
{var LanguageID="1";LanguageID=MyGalleriesCore.getModel().environment.languageId||LanguageID;return LanguageID;}
function GetSearhByIfAvailable(){var searchByVal="";if($('#headerSearchDropdown')){searchByVal=$('#headerSearchDropdown').val();}
return searchByVal;}
function disablefilter()
{if(document.SearchForm.rbSearchOriginal.checked==false)
{document.SearchForm.filteroptions.disabled=false;}
else
{document.SearchForm.filteroptions.disabled=true;}}
function popOpen(url,name,attributes)
{windowHandle=window.open(url,name,attributes);}
function HideDiv(divID)
{if(document.getElementById(divID))
(document.getElementById(divID)).style.display="none";}
function ShowDiv(divID)
{if(document.getElementById(divID))
(document.getElementById(divID)).style.display="";}
function SwapDivs(outDivID,inDivID)
{HideDiv(outDivID);ShowDiv(inDivID);}
function SizeRadioChanged()
{sizeradio=document.filterform.size;if(sizeradio[0].checked)
{ChangeSizeForm(false);}
else if(sizeradio[1].checked)
{ChangeSizeForm(false);}
else if(sizeradio[2].checked)
{ChangeSizeForm(false);}
else if(sizeradio[3].checked)
{ChangeSizeForm(true);}}
function ChangeSizeForm(bEnabled)
{if(bEnabled)
{document.filterform.width_from.disabled=false;document.filterform.width_to.disabled=false;document.filterform.height_from.disabled=false;document.filterform.height_to.disabled=false;document.getElementById("width_from").style.backgroundColor="#ffffff";document.getElementById("width_to").style.backgroundColor="#ffffff";document.getElementById("height_from").style.backgroundColor="#ffffff";document.getElementById("height_to").style.backgroundColor="#ffffff";}
else
{document.filterform.width_from.disabled=true;document.filterform.width_to.disabled=true;document.filterform.height_from.disabled=true;document.filterform.height_to.disabled=true;document.getElementById("width_from").style.backgroundColor="#ededed";document.getElementById("width_to").style.backgroundColor="#ededed";document.getElementById("height_from").style.backgroundColor="#ededed";document.getElementById("height_to").style.backgroundColor="#ededed";}}
function PriceRadioChanged()
{priceradio=document.filterform.price;if(priceradio[0].checked)
{ChangePriceForm(false);}
else if(priceradio[1].checked)
{ChangePriceForm(true);}}
function ChangePriceForm(bEnabled)
{if(bEnabled)
{document.filterform.price_from.disabled=false;document.filterform.price_to.disabled=false;document.getElementById("price_from").style.backgroundColor="#ffffff";document.getElementById("price_to").style.backgroundColor="#ffffff";}
else
{document.getElementById("price_from").style.backgroundColor="#ededed";document.getElementById("price_to").style.backgroundColor="#ededed";document.filterform.price_from.disabled=true;document.filterform.price_to.disabled=true;}}
function ClearFilters()
{document.filter.clrfilters.value="Y";document.filter.action=top.location.href;document.filter.submit();}
function ShowFilter()
{ShowDiv('FilterFormPrice');HideDiv('applySort');SizeRadioChanged();PriceRadioChanged();}
function pickerSelectWallColor(newColor)
{if(navigator.appName!="Netscape")
{for(var i=0;i<bgItemArray.length;i++)
{var objColor=document.getElementById(eval("\""+bgItemArray[i]+"\""));var objColorsub=document.getElementById(eval("\""+bgItemArray[i]+"sub"+"\""));objColor.style.backgroundColor=newColor;objColorsub.style.backgroundColor=newColor;}}
document.displayform.gridWallColor.value=newColor;document.displayform.submit();}
function resetColor(resetColor)
{for(var i=0;i<bgItemArray.length;i++)
{var objColor=document.getElementById(eval("\""+bgItemArray[i]+"\""));objColor.style.backgroundColor=resetColor;}}
function isnumeric(theVal)
{var numericExpression=/^[0-9]+$/;if(theVal.match(numericExpression))
return true;else
return false;}
function isurl(theVal)
{if(theVal.match("http"))
return true;else
return false;}
function SFchangeAction(theVal)
{var newProdCount;var pageNum;var currPageNum;var currProdPerPageNum;var currUrlString;var pgString;if(!isnumeric(theVal)&&isurl(theVal))
top.location.href=theVal;else{currPageNum=parseFloat(document.filterform.currPageNum.value);currProdPerPageNum=parseFloat(document.filterform.currProdPerPageNum.value);currUrlString=top.location.href;newProdCount=parseFloat(theVal);if(newProdCount!=currProdPerPageNum)
{if(currPageNum==1)
{pageNum=1;}
else
{pageNum=((((currPageNum-1)*currProdPerPageNum)+1)/newProdCount);}
pageNum=Math.ceil(pageNum);pgString='PG--'+currPageNum;currUrlString=currUrlString.replace(pgString,'PG--'+pageNum);}
document.filterform.method="post";if(currUrlString.indexOf('isAdvanced--Y')<=0)
{document.filterform.action=currUrlString;}
document.filterform.submit();}}
function onCustomizeDisplay()
{document.filterform.action=top.location.href;document.filterform.submit();}
function VC_expand(pElementID){if(document.getElementById){document.getElementById(pElementID).style.display="";}}
function VC_close(pElementID){if(document.getElementById){document.getElementById(pElementID).style.display="none";}}
function onImgOver(imgId,imgOverSrc){document.images[imgId].src=imgOverSrc;}
function onImgOut(imgId,imgOverSrc){document.images[imgId].src=imgOverSrc;}
function onButOver(imgId,imgOverSrc){document.getElementById(imgId).src=imgOverSrc;}
function onButOut(imgId,imgOutSrc){document.getElementById(imgId).src=imgOutSrc;}
function ShipSameDayWindow(bOverrideSameDayMessage,customerZoneID){ShipWindow=window.open('','ShipTime','height=320,width=430,resizable=yes,top=100,left=500');var tmp=ShipWindow.document;tmp.write('<html><head>');tmp.write('<link rel=\"stylesheet\" href=\"/styles/global.css\" type=\"text/css\"/>');tmp.write('<title>Ship Time</title>');tmp.write('</head>');tmp.write('<body style=\"text-align:left\">');tmp.write('<div class=\"tts-block\">');tmp.write('<div class=\"tts-keyline\"></div>');tmp.write('<div class=\"floatLeft tts-title gCustomFont\">Ship Time</div>');tmp.write('<div class=\"clear\"></div>');if(!bOverrideSameDayMessage){var sTemp='<div class=\"tts-text\">Items that are designated by "Usually ships within 24 hours" normally leave our facilities on the same business day if the order is placed before 16:00GMT.</div>';if(customerZoneID==3){sTemp='<div class=\"tts-text\">Items that are designated by "Usually ships within 24 hours" normally leave our facilities on the same business day if the order is placed before 5:00pm EST.</div>';}
tmp.write(sTemp);}
tmp.write('<div class=\"tts-text\">Ship time indicates the typical number of business days it takes for your item(s) to leave our facilities but does not include transit time from our facilities to the final destination.</div>');tmp.write('<div class=\"tts-text\">Orders that contain multiple items with different ship times will be shipped out based on the item with the longest ship time.</div>');tmp.write('<div class=\"tts-text tts-text-bold\">Please note: Ship time is determined based on the method of payment chosen.</div>');tmp.write("<div class=\"tts-links-block\">");tmp.write("<div class=\"tts-links-link\" onmouseover=\"this.className='tts-links-hover'\" onmouseout=\"this.className='tts-links-link'\" onclick=\"javascript:window.open('\/asp\/customerservice\/shipping.asp','','height=678,width=1110,left=125,top=180,scrollbars=yes,resizable=yes,titlebar=yes,toolbar=yes,menubar=yes')\">Shipping FAQ</div>");tmp.write("<div class=\"tts-links-link\" onmouseover=\"this.className='tts-links-hover'\" onmouseout=\"this.className='tts-links-link'\" onclick=\"javascript:window.open('\/asp\/ship_rates.asp','','height=678,width=1110,left=125,top=180,scrollbars=yes,resizable=yes,titlebar=yes,toolbar=yes,menubar=yes')\">Shipping Rates</div>");tmp.write("</div>");tmp.write('</div>');tmp.write('</body></html>');tmp.close();}
function DisplayMaxBanner(){var ImagesPath;var FirstForm;var SecondForm;var StrMOver;var StrMOut;StrMOver="this.className=\'formLinkHover\'";StrMOut="this.className=\'formLink\'";FirstForm=getRandomNumber();SecondForm=getRandomNumber();var CountryCode=GetCookieDictionary('arts','CountryCode');if(GetCookieDictionary('arts','ImagesPath').length>0){ImagesPath=replaceAll(GetCookieDictionary('arts','ImagesPath'),[["%3A",":"],["%2F","/"],["%2E","."]]);}
if(CountryCode=="JP")
{document.getElementById('DivBanner').innerHTML="<table id='Table_01' width='779'   border='0' cellpadding='0' cellspacing='0' valign='top'>"+"<tr><td width='4' height='26' background='"+ImagesPath+"/images/art_intl/left_border.gif'></td>"+"<td width='43' height='26' background='"+ImagesPath+"/images/art_intl/center.gif' valign='middle' align='center'>"+"<Form name='A"+FirstForm+"' style = 'margin:0px;padding:0px;display:inline;' id = 'A"+FirstForm+"' action='http://affiliates.allposters.com/link/redirect.asp' method='get'><input type='hidden' name='AID' value='2017617078'><input type='hidden' name='LANG' value='6'><div class='formLink' onclick=document.forms['A"+FirstForm+"'].submit() style='display:inline;'><img src='"+ImagesPath+"/images/art_intl/japan.gif' width='24' height='14' border='0'></div></form></td>"+"<td width='620' height='26' background='"+ImagesPath+"/images/art_intl/center.gif' class='TopNavMenuItem'><img src='"+ImagesPath+"/images/art_intl/jp_image1.gif' width='168' height='14' border='0'> "+"<form name='A"+SecondForm+"' style='margin:0px;padding:0px;display:inline;' id = 'A"+SecondForm+"' + action='http://affiliates.allposters.com/link/redirect.asp' method='get'><input type='hidden' name='AID' value='2017617078'><input type='hidden' name='LANG' value='6'><div class='formLink' onmouseover = "+StrMOver+" onmouseout = "+StrMOut+" onclick=document.forms['A"+SecondForm+"'].submit() style='display:inline;'>allposters.fr</div></form> "+"<img src='"+ImagesPath+"/images/art_intl/jp_image2.gif' width='60' height='14' border='0'></b></td>"+"<td width='36' height='26' background='"+ImagesPath+"/images/art_intl/center.gif' valign='middle' align='right'>&nbsp;</td><td width='5' height='26' background='"+ImagesPath+"/images/art_intl/right_border.gif'></td></tr></table>";}}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
function replaceAll(str,replacements){for(i=0;i<replacements.length;i++){var idx=str.indexOf(replacements[i][0]);while(idx>-1){str=str.replace(replacements[i][0],replacements[i][1]);idx=str.indexOf(replacements[i][0]);}}
return str;}
function getRandomNumber(){var FormNumber;FormNumber=Math.round(100000*Math.random());return FormNumber;}
function launchStudio(pURL,pParameters,qs_sessionid,glbCustomerZoneID,sAltLink){var winPop;var newWindow=false;var mTop=10;var mLeft=10;if(screen.width>=1024){var WindowName="FrameStudio"+new Date().getTime();winPop=window.open(pURL+"?"+pParameters+"&ui="+qs_sessionid+"&customerzoneid="+glbCustomerZoneID,WindowName,'toolbar=no,location=no,status=no,statusbar=no,menubar=no,height=678,width=900,scrollbars=no,resizable=no,top='+mTop+',left='+mLeft);if(winPop){if(winPop.focus){winPop.focus()}}else{window.location.href="/FrameStudio/error.asp?error=popup&"+pParameters+"&ui="+qs_sessionid;}}else{document.location.href=sAltLink;}}
function launchInlineStudio(pURL,pParameters,qs_sessionid,glbCustomerZoneID,sAltLink){var theURL='/frameStep/?';theURL=theURL+pParameters+"&ui="+qs_sessionid+"&customerzoneid="+glbCustomerZoneID;window.location.href=theURL;}
function makeAjaxCallToAddToCart(action,frameStepURL,cartURL){var urlToSend=action;var destinationURL=frameStepURL;if(isiOSDevice()){if(cartURL!="undefined")
destinationURL=cartURL;}
$.ajax({url:urlToSend,processData:false,cache:false,type:"GET",dataType:"text",success:function(callback){if((callback.indexOf('added#')>-1)){theStatusSplit=callback.split('#');theCartCount=theStatusSplit[1];cartItemId=theStatusSplit[2];destinationURL+='&cartCount='+theCartCount;destinationURL+='&IID='+cartItemId;location.href=destinationURL;}
else{alert('error: ajax response OK, but no added text found.');}},error:function(textStatus,errorThrown){try{console.log('error in ajax response');}catch(e){}}});}
function FrameStudioInline(pURL,pParameters,qs_sessionid,glbCustomerZoneID,sAltLink){var url;url=pURL+"?"+pParameters+"&ui="+qs_sessionid+"&customerzoneid="+glbCustomerZoneID;window.location.href=url;}
function showFramingVideo(){window.open("/asp/landing/Framing_Video/showFramingVideo.html",'Video','height=270,width=480,left=200,top=200,resizable=no,titlebar=no');return false;}
function showFramingVideo_homepage(){showFramingVideo();}
var hasPurchased=false;var itemsInCart=false;var newsc=adjustCookieDictionaryValue("art","sc",-1);function handleExit(e){var bConditionsMet=itemsInCart&&!hasPurchased;var evt=e||window.event;var ClickedExit=userInitiateAppExit(e);if(ClickedExit){updatesurveycookies();}
if(ClickedExit&&bConditionsMet){var bSurveyConditionsMet=isessionpicked;if(bSurveyConditionsMet)
{var objSaveCartWindow='';objSaveCartWindow=popSurveyWindow();objSaveCartWindow.focus();}
else{var objSaveCartWindow='';objSaveCartWindow=popSaveCartWindow();objSaveCartWindow.focus();}}}
function updatesurveycookies(){eraseCookie("art");createCookie("art",newsc,1);}
function popSaveCartWindow(){var objWin;var winWidth=400;var winHeight=250;var winX;var winY;winY=(window.screen.availHeight/2)-(winHeight/2);winX=(window.screen.availWidth/2)-(winWidth/2);objWin=window.open("/asp/ViewCart_savecartpop.asp?ui="+SaveCartOnExistSessionID,'savecartpop','width='+winWidth+',height='+winHeight+',menu=no,address=no,status=no,location=no,top='+winY+',left='+winX);return objWin;}
function popSurveyWindow(){var objWin;var winWidth=700;var winHeight=550;var winX;var winY;winY=(window.screen.availHeight/2)-(winHeight/2);winX=(window.screen.availWidth/2)-(winWidth/2);objWin=window.open('/asp/view_surveypop.asp','surveypop','width='+winWidth+',height='+winHeight+',menu=no,address=no,status=no,location=no,top='+winY+',left='+winX);return objWin;}
function userInitiateAppExit(e){var retval=false;if(exitBy_ClickExitButton(e)||exitBy_HotKey(e)){retval=true;}
return retval;}
function exitBy_ClickExitButton(e){var retval=false;var evt=e||window.event;var exitButtonWidth=50;if(((returnWindowWidth()-evt.clientX)<=exitButtonWidth)&&(returnWindowWidth()-evt.clientX>-50)&&evt.clientY<-87&&evt.clientY>-170){retval=true;}
return retval;}
function exitBy_HotKey(e){var evt=e||window.event;var retval=false;if(evt.altKey){retval=true;}
return retval;}
function returnWindowWidth(){var winW;var winH;if(parseInt(navigator.appVersion)>3){if(navigator.appName=="Netscape"){winW=window.innerWidth;winH=window.innerHeight;}
if(navigator.appName.indexOf("Microsoft")!=-1){winW=top.document.body.offsetWidth;winH=top.document.body.offsetHeight;}}
return winW;}
function adjustCookieDictionaryValue(name,key,o)
{var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];if(c.indexOf(key)>=0&&c.indexOf(name)>=0){var art_cookie_str=c.replace(name+"=","");var art_cookie_array=art_cookie_str.split('&');var new_cookie_str;for(var j=0;j<art_cookie_array.length;j++){var art_cookie_c=art_cookie_array[j];if(art_cookie_c.indexOf(key)>=0&&art_cookie_c.indexOf(key)<=1){var art_cookie_c_arr=art_cookie_c.split("=");if(isNaN(art_cookie_c_arr[1])){art_cookie_c_arr[1]=art_cookie_c_arr[1]+o+'';}
else{art_cookie_c_arr[1]=parseInt(art_cookie_c_arr[1])+o+'';}
art_cookie_array[j]=art_cookie_c_arr.join("=");}}
var new_val=art_cookie_array.join("&").replace(" ","");ca[i]=new_cookie_str;}}
return new_val;}
function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}
else var expires="";document.cookie=name+"="+value+expires+"; path=/";}
function eraseCookie(name){createCookie(name,"",-1);}
if(window.addEventListener)
{window.addEventListener('unload',handleExit,false);}
else if(document.addEventListener)
{document.addEventListener('unload',handleExit,false);}
else if(window.attachEvent)
{window.attachEvent('onunload',handleExit);}
$(document).ready(function(){if(typeof GetproductString=="function")
{sProductString=GetproductString();LoadAdchemy(sProductString);}});(function($){$.extend({metadata:{defaults:{type:'class',name:'metadata',cre:/({.*})/,single:'metadata'},setType:function(type,name){this.defaults.type=type;this.defaults.name=name;},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length)settings.single='metadata';var data=$.data(elem,settings.single);if(data)return data;data="{}";var getData=function(data){if(typeof data!="string")return data;if(data.indexOf('{')<0){data=eval("("+data+")");}}
var getObject=function(data){if(typeof data!="string")return data;data=eval("("+data+")");return data;}
if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/))name=name.replace(/^data-/,'');else return true;object[name]=getObject(this.nodeValue);});}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m)
data=m[1];}else if(settings.type=="elem"){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);if(e.length)
data=$.trim(e[0].innerHTML);}else if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr)
data=attr;}
object=getObject(data.indexOf("{")<0?"{"+data+"}":data);}
$.data(elem,settings.single,object);return object;}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts);};})(jQuery);(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);function openLCCustomerForm(theURL,winName,features){var newwindowLC=window.open(theURL,winName,features);if(window.focus){newwindowLC.focus();}
return true;}
function LogIt(msg){try{console.info(msg);}
catch(e){}}
function trackLiveChat(eventAction,eventLabel,eventtype){var category="LiveChat";var msg='GA: Category: ['+category+'] EventAction: ['+eventAction+'] EventLabel: ['+eventLabel+']';if(typeof(_gaq)!="undefined"){LogIt(msg);_gaq.push(['t1._trackEvent',category,eventAction,eventLabel,undefined,eventtype]);}}
function track_lc_invite(eventLabel){trackLiveChat('Invitation',eventLabel,false);}
function track_lc_customer_form(eventLabel,deptID){trackLiveChat('CustomerForm - '+deptID,eventLabel,false);}
function track_chat_button(pagename,eventLabel,deptID,eventtype){if(deptID.toString()==" "){var eventAction=pagename;}
else{var eventAction=pagename+" - "+deptID.toString();}
trackLiveChat(eventAction,eventLabel,eventtype);}
function agents_available(divTag,img,custForm,pname,ename,deptID){var popUpPosition='';if(custForm.indexOf("newdesign=1",0)>0){var left=(screen.width-425)/2;var top=(screen.height-314)/2;popUpPosition='top='+top+',left='+left+',';}
track_chat_button(pname,'Available Chat Link Presented',deptID.toString(),true);var imgTag="";if(img.toString().length>0){imgTag='<img src="'+img+'" style="border-width: 0px;">';}
var cname="";try{if(className.toString().length>0)cname=className;}catch(Error){cname="";}
if(pname.toString().length>0){if(cname.length>0){document.getElementById(divTag).innerHTML='<a href="" style="outline: none;" class="standardLinkNoUnderline livechat '+cname+'" onclick="track_chat_button(\''+pname+'\',\''+ename+'\',\''+deptID+'\');openLCCustomerForm(\''+custForm+'\',\'custclient\',\'width=600,height=498,'+popUpPosition+'status=no,toolbar=no,titlebar=no,location=no,menubar=no\');return false;"></a>';}else{document.getElementById(divTag).innerHTML='<a href="" style="outline: none;" class="standardLinkNoUnderline livechat '+cname+'" onclick="track_chat_button(\''+pname+'\',\''+ename+'\',\''+deptID+'\');openLCCustomerForm(\''+custForm+'\',\'custclient\',\'width=600,height=498,'+popUpPosition+'status=no,toolbar=no,titlebar=no,location=no,menubar=no\');return false;">'+imgTag+'</a>';}}
document.getElementById(divTag).innerHTML='<a href="" style="outline: none;" class="standardLinkNoUnderline livechat" onclick="track_chat_button(\''+pname+'\',\''+ename+'\',\''+deptID+'\',false);openLCCustomerForm(\''+custForm+'\',\'custclient\',\'width=610,height=535,'+popUpPosition+'status=no,toolbar=no,titlebar=no,location=no,menubar=no\');return false;">'+imgTag+'</a>';return true;}
function agents_not_available(divTag,img,pname,hdiv,deptID){track_chat_button(pname,'Unavailable Chat Link Presented',deptID.toString(),true);var imgTag="";if((img.toString().length>0)&&(img.toString().indexOf('.gif',0)!=-1)){imgTag='<img src="'+img+'" style="border-width: 0px;">';}else{imgTag=img;}
document.getElementById(divTag).innerHTML=imgTag;return true;}
function LC_GetCookieVal(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1)
endstr=document.cookie.length;return unescape(document.cookie.substring(offset,endstr));}
function LC_GetCookieBase(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){return LC_GetCookieVal(j);}
i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}
return null;}
function LC_GetPersistantCookie(dictKey){var retval="";var tempString=String(LC_GetCookieBase("ap"));var arPairs;var arKeyValue;if(tempString!=null){arPairs=tempString.split("&");for(var i=0;i<arPairs.length;i++){arKeyValue=arPairs[i].split("=");if(arKeyValue[0]==dictKey){retval=arKeyValue[1];return retval;}}}
return retval;}
$(document).ready(function(){agentscheck();$(".live-chat-icon").live("mouseover",function(){if(!$(this).hasClass("live-chat-icon-hover")){$(this).addClass("live-chat-icon-hover");}});$(".live-chat-icon").live("mouseout",function(){if($(this).hasClass("live-chat-icon-hover")){$(this).removeClass("live-chat-icon-hover");}});});function isAgentAvailable(){try{return document.getElementById('agentdetect').innerHTML;}
catch(err){return"false";}}
function agentscheck(){var isagentavailable=isAgentAvailable();$(".params").each(function(index){var paramsall=$(this).text();var param_array=paramsall.split("|");var divName=param_array[0];var img=param_array[1];var urlCustForm=param_array[2];var pageName=param_array[3];var eventName=param_array[4];var deptID=param_array[5];var imgNA=param_array[6];var imgID_LC=param_array[7];if(isagentavailable=="true"){agents_available(divName,img,urlCustForm,pageName,eventName,deptID);}
else{agents_not_available(divName,imgNA,pageName,imgID_LC,deptID);}});}
function setLiveChatJavascriptVariables(){try{atgLCCartCount=parseInt(LC_GetPersistantCookie("ct"));atgLCCartTotal=parseFloat(LC_GetPersistantCookie("lcot"));atgLCCartLastItemType="'"+LC_GetPersistantCookie("lcit")+"'";}catch(e){}};function trace(msg)
{if((window['console']!==undefined)){console.log(msg);}}
if(typeof String.prototype.trim!=='function')
{String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');};}
jQuery.fn.scaleObjectToFitOrFill={Calculate:function(options){var ratioX,ratioY,scale,newWidth,newHeight;if(typeof options.srcWidth!=="number"||typeof options.srcHeight!=="number"||typeof options.destWidth!=="number"||typeof options.destHeight!=="number"||typeof options.method!=="string"){return;}
ratioX=options.destWidth/options.srcWidth;ratioY=options.destHeight/options.srcHeight;if(options.method==="fit"){scale=ratioX<ratioY?ratioX:ratioY;}else if(options.method==="fill"){scale=ratioX>ratioY?ratioX:ratioY;}
newWidth=parseInt(options.srcWidth*scale,10);newHeight=parseInt(options.srcHeight*scale,10);return{width:newWidth,height:newHeight,offset:{x:parseInt((options.destWidth-newWidth)/2,10),y:parseInt((options.destHeight-newHeight)/2,10)},fits:options.srcWidth>=options.destWidth&&options.srcHeight>=options.destHeight?true:false};}};jQuery.fn.resizeToParent=function(pixelMarginHorizontal,pixelMarginVertical)
{var parentObj=$(this).parent();var destinationWidth=parentObj.width();var destinationHeight=parentObj.height();if(this.width()>this.height())
destinationWidth=destinationWidth-pixelMarginHorizontal;else
destinationHeight=destinationHeight-pixelMarginVertical;var newValue=this.scaleObjectToFitOrFill.Calculate({srcWidth:this.width(),srcHeight:this.height(),destWidth:destinationWidth,destHeight:destinationHeight,method:"fit"});this.css({'width':newValue.width,'height':newValue.height});return this;};jQuery.fn.centerNoDropShadow=function(keepCentered){this.css("position","absolute");this.css("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px");this.css("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px");if(keepCentered)
{var _this=this;$(window).bind('resize',function(){_this.center(false);});}
return this;};jQuery.fn.center=function(keepCentered){var topValue=($(window).height()-this.height())/2+$(window).scrollTop();var leftValue=($(window).width()-this.width())/2+$(window).scrollLeft();if(topValue<0)topValue=0;this.css({"position":"absolute","top":topValue+"px","left":leftValue+"px"});$(this).addCenterOuterShadow();if(keepCentered)
{var _this=this;$(window).bind('resize',function(){_this.center(false);});}
return this;};jQuery.fn.centerWithHeight=function(keepCentered,intHeight)
{var topValue=($(window).height()-intHeight)/2+$(window).scrollTop();var leftValue=($(window).width()-this.width())/2+$(window).scrollLeft();if(topValue<0)topValue=0;this.css({"position":"absolute","top":topValue+"px","left":leftValue+"px"});$(this).addCenterOuterShadow();if(keepCentered)
{var _this=this;$(window).bind('resize',function(){_this.center(false);});}
return this;};jQuery.fn.centerElement=function(){this.css("position","relative");var parentObj=$(this).parent();this.css("top",(parentObj.height()-this.height())/2+"px");this.css("left",(parentObj.width()-this.width())/2+"px");return this;};jQuery.fn.addDropShadow=function(shadowType){if(shadowType!=undefined)
switch(shadowType.toLowerCase())
{case'none':break;case'angle':$(this).addAngleShadow();break;case'center':$(this).addCenterOuterShadow();break;default:$(this).addCenterOuterShadow();}
else
$(this).addCenterOuterShadow();return this;};jQuery.fn.addOuterGlow=function(blur,spread,opacity)
{this.css("-moz-box-shadow","0px 0px "+blur+"px "+spread+"px rgba(0,0,0,"+opacity+")");this.css("-webkit-box-shadow","0px 0px "+blur+"px "+spread+"px rgba(0,0,0,"+opacity+")");this.css("box-shadow","0px 0px "+blur+"px "+spread+"px rgba(0,0,0,"+opacity+")");return this;};jQuery.fn.addCenterOuterShadow=function(){var topV=0,leftV=0,spreadV=20,opacityV=.5;this.addDropShadowByValue(topV,leftV,spreadV,opacityV);return this;};jQuery.fn.addAngleShadow=function(){var topV=3,leftV=3,spreadV=7,opacityV=.6;this.addDropShadowByValue(topV,leftV,spreadV,opacityV);return this;};jQuery.fn.addDropShadowByValue=function(topValue,leftValue,spreadValue,opacityValue){this.css("-moz-box-shadow",topValue+"px "+leftValue+"px "+spreadValue+"px rgba(0,0,0,"+opacityValue+")");this.css("-webkit-box-shadow",topValue+"px "+leftValue+"px "+spreadValue+"px rgba(0,0,0,"+opacityValue+")");this.css("box-shadow",topValue+"px "+leftValue+"px "+spreadValue+"px rgba(0,0,0,"+opacityValue+")");return this;};jQuery.fn.centerOnResize=function()
{$(window).resize(function(theId)
{$($(this).attr('id')).center();});return this;};jQuery.fn.replaceClass=function(className)
{this.removeClass();this.addClass(className);};jQuery.fn.imagesLoaded=function(callback){var elems=this.filter('img'),len=elems.length;elems.bind('load',function(){if(--len<=0){callback.call(elems,this);}}).each(function(){if(this.complete||this.complete===undefined){var src=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=src;}});return this;};jQuery.updateObject=function(obj1,obj2)
{if(!com.art.core.utils.ObjectUtil.isNullOrEmpty(obj2)&&typeof(obj2)!='string')
{jQuery.each(obj2,function(j,valj){obj1[j]=valj;});}};jQuery.copyObject=function(obj)
{return jQuery.extend(true,{},obj);};jQuery.hasProperties=function(obj)
{var r=false;for(var prop in obj){if(obj.hasOwnProperty(prop)){r=true;break;}}
return r;};jQuery.cachedScript=function(url,options){options=$.extend(options||{},{dataType:"script",cache:true,url:url});return jQuery.ajax(options);};var JSON;if(!JSON){JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());var com={};com.art={};com.art.core={};com.art.core.VERSION="@VERSION@";com.art.core.vos={};com.art.core.utils={};com.art.core.tracking={};com.art.core.services={};com.art.core.interfaces={};com.art.core.cookie={};com.art.core.constants={};com.art.core.constants.ART="art";com.art.core.constants.APC="apc";com.art.core.components={};com.art.core.components.SECURE_HOST="";com.art.core.constants.SECURE_HOST="";com.art.core.constants.ART_HOST="http://cache1.artprintimages.com";com.art.core.constants.APC_HOST="http://cache1.allpostersimages.com";com.art.core.components.BaseComponent=function(){};com.art.core.components.BaseComponent.states={enabled:'enabled',disabled:'disabled',error:'error',loading:'loading'};com.art.core.components.BaseComponent.events={focus:'focus',blur:'blur',hover:'hover',keypress:{enter:'enter'}};com.art.core.components.BaseComponent.extend=function(subclass)
{for(var k in this)
{subclass[k]=this[k];};};com.art.core.components.BaseComponent.init=function()
{this.callbacks={};this.zindex=0;this.uid=com.art.core.utils.StringUtil.generateUID(15);this.states=com.art.core.components.BaseComponent.states;this.events=com.art.core.components.BaseComponent.events;this.validators=[];this.validatorsDisabled=[];this.cssClass={enabled:{blur:{field:'field-enabled-blur',label:'label-enabled-blur',error:'error-enabled-blur'},focus:{field:'field-enabled-focus',label:'label-enabled-focus',error:'error-enabled-focus'},hover:{field:'field-enabled-hover',label:'label-enabled-hover',error:'error-enabled-hover'}},disabled:{blur:{field:'field-disabled-blur',label:'label-disabled-blur',error:'error-disabled-blur'},focus:{field:'field-disabled-focus',label:'label-disabled-focus',error:'error-disabled-focus'},hover:{field:'field-disabled-hover',label:'label-disabled-hover',error:'error-disabled-hover'}},error:{blur:{field:'field-error-blur',label:'label-error-blur',error:'error-error-blur'},focus:{field:'field-error-focus',label:'label-error-focus',error:'error-error-focus'},hover:{field:'field-error-hover',label:'label-error-hover',error:'error-error-hover'}}};};com.art.core.components.BaseComponent.getImageHost=function(domain)
{var h=domain==com.art.core.constants.APC?com.art.core.constants.APC_HOST:com.art.core.constants.ART_HOST;return com.art.core.components.SECURE_HOST!=""?com.art.core.constants.SECURE_HOST:h;};com.art.core.components.BaseComponent.registerCallback=function(name,callback)
{this['callbacks'][name]=callback;};com.art.core.components.BaseComponent.setZIndex=function(value)
{this['zindex']=value;};com.art.core.components.BaseComponent.getUID=function()
{return this.uid;};com.art.core.components.BaseComponent.setValidators=function(arrayOfVal)
{this.validators=arrayOfVal;this.validatorsDisabled=arrayOfVal;};var traceLevel=3;var canConsole=typeof(console)=='object';var canLog=false;var canInfo=false;var canWarn=false;var canError=false;if(canConsole){canLog=typeof(console.log)!='undefined';canInfo=typeof(console.info)!='undefined';canWarn=typeof(console.warn)!='undefined';canError=typeof(console.error)!='undefined';};function error(str){if(traceLevel<1)return;if(canError)console.error(str);else if(canLog)console.log('ERROR: '+str);};function warning(str){return warn(str);};function warn(str){if(traceLevel<2)return;if(canWarn)console.warn(str);else if(canLog)console.log('WARNING: '+str);};function info(str){if(traceLevel<3)return;if(canInfo)console.info(str);else if(canLog)console.log('INFO: '+str);};function verbose(str){if(traceLevel<4)return;if(canInfo)console.info(str);else if(canLog)console.log('VERBOSE: '+str);};function superVerbose(str){if(traceLevel<5)return;if(canInfo)console.error(str);else if(canLog)console.log('SUPER-VERBOSE: '+str);};com.art.core.utils.StringUtil=function()
{};com.art.core.utils.StringUtil.substitute=function(base,arr)
{for(var i=0;i<arr.length;i++)
{base=base.replace("$"+i,arr[i]);}
return base;};com.art.core.utils.StringUtil.formatDimensions=function(width,height,convertToCm)
{var constant=2.54;var printWidth=width;var printHeight=height;if(convertToCm)
{printWidth=Math.round(width*constant,2);printHeight=Math.round(height*constant,2);return printWidth+" x "+printHeight+" cm";}
return Math.round(printWidth*2)/2+'" x '+Math.round(printHeight*2)/2+'"';};com.art.core.utils.StringUtil.formatDimension=function(dimension,convertToCm)
{var constant=2.54;var printSide=dimension;if(convertToCm)
{printSide=Math.round(dimension*constant,2);return printSide+" cm";}
return Math.round(dimension*2)/2+'"';};com.art.core.utils.StringUtil.generateUID=function(length)
{var alpha=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var alphaLen=alpha.length-1;var nums=["1","2","3","4","5","6","7","8","9","0"];var numsLength=nums.length-1;var len=(length!=undefined&&length>=10)?length:10;var str="";for(var i=0;i<len;i++)
{var s=Math.round(Math.random()*1);var rand=Math.random();if(s==1)
{var k=Math.floor(rand*alphaLen);str+=alpha[k];}
else
{var k=Math.floor(rand*numsLength);str+=nums[k];}
str=i%5==0&&i>0?str+="-":str;}
return str;};com.art.core.utils.StringUtil.autoEllipseText=function(text,limit)
{if(!text)
throw Error("art.core.Core.autoEllipseText(text,limit) text is undefined");var temp;if(text.length-1>limit)
{temp=text.substring(0,limit)+'...';}
else
{temp=text;}
return temp;};com.art.core.utils.StringUtil.getQueryStringFromHash=function(hash)
{var returnValue='';var firstLoop=true;for(property in hash)
{if(!firstLoop)
returnValue+="&";else
firstLoop=false;returnValue+=property+"="+hash[property];}
return returnValue;};com.art.core.utils.StringUtil.isValidEmailAddress=function(email)
{if(email==undefined||email=="")
return false;var pattern=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return pattern.test(email);};com.art.core.utils.StringUtil.isAlphaNumeric=function(value)
{if(value==undefined||value=="")
return false;var pattern=/^[a-zA-Z0-9_\-]+$/;return pattern.test(value);};com.art.core.utils.StringUtil.newLineToBr=function(value)
{return value.replace(/[\n|\r]/g,'<br />');};com.art.core.utils.StringUtil.brToNewLine=function(value)
{return value.replace(/\<br \/\>/g,'\n');};com.art.core.utils.StringUtil.replaceKeys=function(value,keyArray,replaceArray)
{var r=value;for(var i=0;i<keyArray.length;i++)
{r=r.replace(new RegExp('\\'+keyArray[i],"gi"),replaceArray[i]);}
return r;};com.art.core.utils.StringUtil.findInvalidChars=function(haystack,needle,outputStringInvalid,outputStringValid){var n;if(typeof(needle)=='string')n=needle.split('');var ns='(';for(var i=0;i<n.length;i++){ns+=n[i].replace(/(\[|\\|\^|\$|\.|\||\?|\*|\+|\(|\))/g,'\\$1');if(i+1<n.length)ns+='|';}
ns+=')';var re=new RegExp(ns,'g');var matches=haystack.match(re);if(matches==null||matches.length<1){if(outputStringValid)return outputStringValid;else if(outputStringInvalid)return'';else return[];}else{var retArr=[];for(var i=0;i<matches.length;i++){var inc=false;for(var j=0;j<retArr.length;j++){if(retArr[j].char==matches[i]){retArr[j].count++;inc=true;break;}}
if(!inc)retArr.push({char:matches[i],count:1});}
if(!outputStringInvalid)return retArr;else{if(outputStringInvalid.indexOf('{~listOfInvalidChars~}')>-1){var list='';for(var i=0;i<retArr.length;i++){list+=retArr[i].char;if(i+1<retArr.length)list+=', ';}
return outputStringInvalid.replace('{~listOfInvalidChars~}',list);}else return retArr;}}
return matches[1];};com.art.core.utils.StringUtil.trimLeft=function(str){return str.replace(/^\s+/,'');};com.art.core.utils.StringUtil.trimRight=function(str){return str.replace(/\s+$/,'');};com.art.core.utils.StringUtil.trim=function(str){return str.replace(/^\s+/,'').replace(/\s+$/,'');};com.art.core.utils.StringUtil.generateRandomNumber=function(){return Math.floor((Math.random()*1000000)+1);};com.art.core.utils.StringUtil.queryStringChr=function(requestedUrl){if(requestedUrl.indexOf("?")>-1){return"&";}
else{return"?";}};String.prototype.trimLeft=function(){return com.art.core.utils.StringUtil.trimLeft(this);};String.prototype.trimRight=function(){return com.art.core.utils.StringUtil.trimRight(this);};String.prototype.trim=function(){return com.art.core.utils.StringUtil.trim(this);};com.art.core.utils.BrowserUtil=function(){};com.art.core.utils.BrowserUtil.cropperModes={};com.art.core.utils.BrowserUtil.cropperModes.NONE="none";com.art.core.utils.BrowserUtil.cropperModes.SQUARE="square";com.art.core.utils.BrowserUtil.getQueryString=function(name)
{name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var url=location.href;var results=regex.exec(url);if(results==null)
return"";else
return decodeURIComponent(results[1].replace(/\+/g," "));};com.art.core.utils.BrowserUtil.getRESTParameter=function(url,parameter){var re=new RegExp('/'+parameter+'/([^\/?$]+)');var matches=url.match(re);if(matches==null)return'';if(matches.length<1)return'';return matches[1];};com.art.core.utils.BrowserUtil.getCroppedImageUrl=function(url,maxW,maxH,mode,width,height)
{var w=width==undefined?1000:width;var h=height==undefined?1000:height;var aspectRatio=w/h;if(url.indexOf('frameimage')>-1)
{var finalUrl=url.replace(/MXW:[0-9]+/,"MXW:"+maxW).replace(/MXH:[0-9]+/,"MXH:"+maxH);}
else
{var mode=mode==com.art.core.utils.BrowserUtil.cropperModes.NONE?"":"mode=sq&";var finalUrl=url.replace(/x=[0-9]+/,"x=0").replace(/y=[0-9]+/,"y=0").replace(/w=[0-9]+/,"w="+w).replace(/h=[0-9]+/,"h="+h).replace(/maxw=[0-9]+/,"maxw="+(maxW)).replace(/maxh=[0-9]+/,"maxh="+(maxH)).replace("mode=sq&",mode);}
return finalUrl;};com.art.core.utils.BrowserUtil.getNextHighestZIndex=function()
{var z=1;var count=0;$("*").each(function(){var zindex=parseInt($(this).css("z-index"));if(zindex>=z&&zindex!=Number.NaN)
z=zindex+1;});return z;};com.art.core.utils.BrowserUtil.removehashfromurl=function(browserUrl)
{var finalUrl=browserUrl;var pos=finalUrl.indexOf("#");if(pos>-1){finalUrl=finalUrl.substring(0,pos)}
return finalUrl;};com.art.core.utils.BrowserUtil.checkIfRemoteImageExists=function(passThruObject,url,successCallback,failureCallback,context)
{var uid=com.art.core.utils.StringUtil.generateUID(32);var key="_"+uid;$("body").append("<img id='"+key+"'/>");var o=$("#"+key);o.css("opacity","0");o.css({width:"0px",height:"0px"});o.imagesLoaded(function(){o.remove();context[successCallback](passThruObject,url);}).error(function(){o.remove();context[failureCallback](passThruObject,url);});o.attr("src",url);};com.art.core.utils.Flash=function()
{};com.art.core.utils.Flash.getMovie=function(name)
{var obj=swfobject.getObjectById(name);if(obj)
{return obj;}
else
{if(navigator.appName.indexOf("Microsoft")!=-1)
{return swfobject.getObjectById[name];}
else
{return document[name];}}};function Test1()
{};function Test2()
{};function Test3()
{};com.art.core.utils.LocalizationManager=function(environment,suffix)
{this.init();this.suffix=suffix!=undefined?suffix:"";this.environment=environment;this.serviceProvider=new com.art.core.services.ServiceProvider(this.environment);this.apiKey="";this.sessionId="";this.localizationAppId="";this.dictionary={};this.culture=this.environment.languageIso;this.defaultPattern="[LANG]";this.isLoaded=false;this.LOADED=com.art.core.utils.LocalizationManager.LOADED;this.ERROR=com.art.core.utils.LocalizationManager.ERROR;this.countryListActive={data:{},loaded:false};this.statesList=[];this.statesList['US']={data:{},loaded:false};this.events=com.art.core.utils.LocalizationManager.events;};com.art.core.utils.LocalizationManager.LOADED="loaded";com.art.core.utils.LocalizationManager.ERROR="error";com.art.core.utils.LocalizationManager.events={loadCountry:{loaded:'cload',error:'cerr'},loadState:{loaded:'sload',error:'serr'}};com.art.core.utils.LocalizationManager.prototype.setLanguageDictionary=function(apiKey,sessionId,appId)
{this.apiKey=apiKey;this.sessionId=sessionId;this.localizationAppId=(appId==undefined)?"16":appId;};com.art.core.utils.LocalizationManager.prototype.load=function()
{this.getDictionaryData(this.apiKey,this.sessionId,this.localizationAppId);};com.art.core.utils.LocalizationManager.prototype.getString=function(baseString)
{var testString=baseString.replace(/ /gi,"_");var returnValue=this.dictionary[testString+this.suffix];if(returnValue===undefined)
returnValue=this.dictionary[testString];if(returnValue===undefined)
returnValue=baseString.replace(/_/gi," ");return returnValue;};com.art.core.utils.LocalizationManager.prototype.getImageSrcByPattern=function(imagePath,pattern)
{return imagePath.replace(pattern,this.culture);};com.art.core.utils.LocalizationManager.prototype.getImageSrc=function(imagePath)
{return this.getImageSrcByPattern(imagePath,this.defaultPattern);};com.art.core.utils.LocalizationManager.convertLanguageIsoToLanguageId=function(languageIso)
{var n="1";switch(languageIso.toLowerCase())
{case'en':n='1';break;case'fr':n='2';break;case'de':n='3';break;case'es':n='4';break;case'it':n='5';break;case'ja':n='6';break;case'nl':n='7';break;case'se':n='8';break;case'da':n='9';break;case'no':n='10';break;case'fi':n='11';break;case'pt':n='12';break;case'pl':n='13';break;case'zh':n='14';break;case'tr':n='15';break;case'cs':n='16';break;}
return n;};com.art.core.utils.LocalizationManager.getTimeToShipString=function(timeToShipEnglish,languageIso)
{timeToShipEnglish=timeToShipEnglish.toLowerCase();languageIso=languageIso.toLowerCase();var returnValue=timeToShipEnglish;if(languageIso.length>0&&languageIso!='en')
{var dict={'10-12 days':{'fr':'10 &#224; 12 jours','de':'10 bis 12 tage'},'10-14 days':{'fr':'10 &#224; 14 jours','de':'10 bis 14 tage'},'1-2 days':{'fr':'1 &#224; 2 ours','de':'1 bis 2 tage'},'12-17 days':{'fr':'12 &#224; 17 jours','de':'12 bis 17 tage'},'14-19 days':{'fr':'14 &#224; 19 jours','de':'14 bis 19 tage'},'2-3 days':{'fr':'2 &#224; 3 jours','de':'2 bis 3 tage'},'2-3 weeks':{'fr':'2 &#224; 3 semaines','de':'2 bis 3 wochen'},'24 hours':{'fr':'24 heures','de':'24 stunden'},'3-4 weeks':{'fr':'3 &#224; 4 semaines','de':'3 bis 4 wochen'},'3-5 days':{'fr':'3 &#224; 5 jours','de':'3 bis 5 werktage'},'4-5 weeks':{'fr':'4 &#224; 5 semaines','de':'4 bis 5 wochen'},'4-6 days':{'fr':'4 &#224; 6 jours','de':'4 bis 6 tage'},'5+ weeks':{'fr':'plus de 5 semaines','de':'ca. 5 wochen'},'5-10 days':{'fr':'5 &#224; 10 jours','de':'5 bis 10 tage'},'5-6 days':{'fr':'5 &#224; 6 jours','de':'5 bis 6 tage'},'5-7 days':{'fr':'5 &#224; 7 jours','de':'5 bis 7 tage'},'7-9 days':{'fr':'7 &#224; 9 jours','de':'7 bis 9 tage'}};var phraseRow=dict[timeToShipEnglish];if(phraseRow!=undefined)
{var phrase=phraseRow[languageIso];if(phrase!=undefined)
returnValue=phrase;}}
return returnValue;};com.art.core.utils.LocalizationManager.prototype.getCountryList=function()
{if(jQuery.isEmptyObject(this.countryListActive.data))
{this.getCountriesData();}
else
return this.countryListActive.data;};com.art.core.utils.LocalizationManager.prototype.getStateList=function(countryIsoA2)
{var retDefault=false;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(this.statesList[countryIsoA2]))
retDefault=true;else
{if(com.art.core.utils.ObjectUtil.isNullOrEmpty(this.statesList[countryIsoA2].data))
retDefault=true;}
if(retDefault)
this.getStatesDataGivenCountry(countryIsoA2);else
return this.statesList[countryIsoA2].data;};com.art.core.utils.LocalizationManager.convertCountryIsoA2ToCountryIsoNumber=function(countryIsoA2)
{var n="840";switch(countryIsoA2.toUpperCase())
{case'AD':n='20';break;case'AE':n='784';break;case'AF':n='4';break;case'AG':n='28';break;case'AI':n='660';break;case'AL':n='8';break;case'AM':n='51';break;case'AN':n='530';break;case'AO':n='24';break;case'AQ':n='10';break;case'AR':n='32';break;case'AS':n='16';break;case'AT':n='40';break;case'AU':n='36';break;case'AW':n='533';break;case'AZ':n='31';break;case'BA':n='70';break;case'BB':n='52';break;case'BD':n='50';break;case'BE':n='56';break;case'BF':n='854';break;case'BG':n='100';break;case'BH':n='48';break;case'BI':n='108';break;case'BJ':n='204';break;case'BM':n='60';break;case'BN':n='96';break;case'BO':n='68';break;case'BR':n='76';break;case'BS':n='44';break;case'BT':n='64';break;case'BV':n='74';break;case'BW':n='72';break;case'BY':n='112';break;case'BZ':n='84';break;case'CA':n='124';break;case'CC':n='166';break;case'CD':n='180';break;case'CF':n='140';break;case'CG':n='178';break;case'CH':n='756';break;case'CI':n='384';break;case'CK':n='184';break;case'CL':n='152';break;case'CM':n='120';break;case'CN':n='156';break;case'CO':n='170';break;case'CR':n='188';break;case'CS':n='891';break;case'CU':n='192';break;case'CV':n='132';break;case'CX':n='162';break;case'CY':n='196';break;case'CZ':n='203';break;case'DE':n='276';break;case'DJ':n='262';break;case'DK':n='208';break;case'DM':n='212';break;case'DO':n='214';break;case'DZ':n='12';break;case'EC':n='218';break;case'EE':n='233';break;case'EG':n='818';break;case'EH':n='732';break;case'ER':n='232';break;case'ES':n='724';break;case'ET':n='231';break;case'EU':n='*';break;case'FI':n='246';break;case'FJ':n='242';break;case'FK':n='238';break;case'FM':n='583';break;case'FO':n='234';break;case'FR':n='250';break;case'FX':n='249';break;case'GA':n='266';break;case'GB':n='826';break;case'GD':n='308';break;case'GE':n='268';break;case'GF':n='254';break;case'GH':n='288';break;case'GI':n='292';break;case'GL':n='304';break;case'GM':n='270';break;case'GN':n='324';break;case'GP':n='312';break;case'GQ':n='226';break;case'GR':n='300';break;case'GS':n='239';break;case'GT':n='320';break;case'GU':n='316';break;case'GW':n='624';break;case'GY':n='328';break;case'HK':n='344';break;case'HM':n='334';break;case'HN':n='340';break;case'HR':n='191';break;case'HT':n='332';break;case'HU':n='348';break;case'ID':n='360';break;case'IE':n='372';break;case'IL':n='376';break;case'IN':n='356';break;case'IO':n='86';break;case'IQ':n='368';break;case'IR':n='364';break;case'IS':n='352';break;case'IT':n='380';break;case'JM':n='388';break;case'JO':n='400';break;case'JP':n='392';break;case'KE':n='404';break;case'KG':n='417';break;case'KH':n='116';break;case'KI':n='296';break;case'KM':n='174';break;case'KN':n='659';break;case'KP':n='408';break;case'KR':n='410';break;case'KW':n='414';break;case'KY':n='136';break;case'KZ':n='398';break;case'LA':n='418';break;case'LB':n='422';break;case'LC':n='662';break;case'LI':n='438';break;case'LK':n='144';break;case'LR':n='430';break;case'LS':n='426';break;case'LT':n='440';break;case'LU':n='442';break;case'LV':n='428';break;case'LY':n='434';break;case'MA':n='504';break;case'MC':n='492';break;case'MD':n='498';break;case'MG':n='450';break;case'MH':n='584';break;case'MK':n='807';break;case'ML':n='466';break;case'MM':n='104';break;case'MN':n='496';break;case'MO':n='446';break;case'MP':n='580';break;case'MQ':n='474';break;case'MR':n='478';break;case'MS':n='500';break;case'MT':n='470';break;case'MU':n='480';break;case'MV':n='462';break;case'MW':n='454';break;case'MX':n='484';break;case'MY':n='458';break;case'MZ':n='508';break;case'NA':n='516';break;case'NC':n='540';break;case'NE':n='562';break;case'NF':n='574';break;case'NG':n='566';break;case'NI':n='558';break;case'NL':n='528';break;case'NO':n='578';break;case'NP':n='524';break;case'NR':n='520';break;case'NU':n='570';break;case'NZ':n='554';break;case'OM':n='512';break;case'PA':n='591';break;case'PE':n='604';break;case'PF':n='258';break;case'PG':n='598';break;case'PH':n='608';break;case'PK':n='586';break;case'PL':n='616';break;case'PM':n='666';break;case'PN':n='612';break;case'PR':n='630';break;case'PT':n='620';break;case'PW':n='585';break;case'PY':n='600';break;case'QA':n='634';break;case'RE':n='638';break;case'RO':n='642';break;case'RU':n='643';break;case'RW':n='646';break;case'SA':n='682';break;case'SB':n='90';break;case'SC':n='690';break;case'SD':n='736';break;case'SE':n='752';break;case'SG':n='702';break;case'SH':n='654';break;case'SI':n='705';break;case'SJ':n='744';break;case'SK':n='703';break;case'SL':n='694';break;case'SM':n='674';break;case'SN':n='686';break;case'SO':n='706';break;case'SR':n='740';break;case'ST':n='678';break;case'SV':n='222';break;case'SY':n='760';break;case'SZ':n='748';break;case'TC':n='796';break;case'TD':n='148';break;case'TF':n='260';break;case'TG':n='768';break;case'TH':n='764';break;case'TJ':n='762';break;case'TK':n='772';break;case'TM':n='795';break;case'TN':n='788';break;case'TO':n='776';break;case'TP':n='626';break;case'TR':n='792';break;case'TT':n='780';break;case'TV':n='798';break;case'TW':n='158';break;case'TZ':n='834';break;case'UA':n='804';break;case'UG':n='800';break;case'UM':n='581';break;case'US':n='840';break;case'UY':n='858';break;case'UZ':n='860';break;case'VA':n='336';break;case'VC':n='670';break;case'VE':n='862';break;case'VG':n='92';break;case'VI':n='850';break;case'VN':n='704';break;case'VU':n='548';break;case'WF':n='876';break;case'WS':n='882';break;case'YE':n='887';break;case'YT':n='175';break;case'ZA':n='710';break;case'ZM':n='894';break;case'ZW':n='716';break;}
return n;};com.art.core.utils.LocalizationManager.determineConvertToCm=function(userCountry,userCurrency,userLanguage)
{var returnValue=true;if(userCurrency.toLowerCase()=='usd')
returnValue=false;return returnValue;};com.art.core.utils.LocalizationManager.prototype.getCountriesData=function()
{var handlers=this.serviceProvider.createHandlers(this.getCountriesDataSuccess,this.getCountriesDataFailure,function(){});handlers.localizationManager=this;this.serviceProvider.ecommerceAPIService.cartGetActiveCountryList(handlers,this.apiKey,this.sessionId);};com.art.core.utils.LocalizationManager.prototype.getCountriesDataFailure=function(response)
{var l;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(this.localizationManager))
{l=this;}
else
{l=this.localizationManager;}
l.countryListActive.data={'CA':{a2:'CA',a3:'CAN',name:'Canada'},'US':{a2:'US',a3:'USA',name:'United States'},'UK':{a2:'GB',a3:'GBR',name:'United Kingdom'}};l.countryListActive.loaded=false;if(l.callbacks[l.events.loadCountry.error]!=undefined)
{l.callbacks[l.events.loadCountry.error](response);}};com.art.core.utils.LocalizationManager.prototype.getCountriesDataSuccess=function(response)
{var l=this.localizationManager;try
{for(var i=0;i<response.Countries.length;i++)
{var tmp=response.Countries[i];l.countryListActive.data[tmp.IsoA2]={a2:tmp.IsoA2,a3:tmp.IsoA3,name:tmp.Name};}
l.countryListActive.loaded=true;if(l.callbacks[l.events.loadCountry.loaded]!=undefined)
{l.callbacks[l.events.loadCountry.loaded]();}}
catch(err){l.getCountriesDataFailure(response);}};com.art.core.utils.LocalizationManager.prototype.getStatesDataGivenCountry=function(countryIsoA2)
{var handlers=this.serviceProvider.createHandlers(this.getStatesDataGivenCountrySuccess,this.getStatesDataGivenCountryFailure,function(){});handlers.localizationManager=this;handlers.fromCountry=countryIsoA2;this.serviceProvider.ecommerceAPIService.cartGetActiveStateListByCountryCode(handlers,this.apiKey,this.sessionId,countryIsoA2);};com.art.core.utils.LocalizationManager.prototype.getStatesDataGivenCountryFailure=function(response,fromCountry)
{var l,c;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(this.localizationManager))
{l=this;c=fromCountry;}
else
{l=this.localizationManager;c=this.fromCountry;}
if(c=='US')
l.statesList[c].data={"AL":{"a2":"AL","name":"Alabama"},"AK":{"a2":"AK","name":"Alaska"},"AZ":{"a2":"AZ","name":"Arizona"},"AR":{"a2":"AR","name":"Arkansas"},"CA":{"a2":"CA","name":"California"},"CO":{"a2":"CO","name":"Colorado"},"CT":{"a2":"CT","name":"Connecticut"},"DE":{"a2":"DE","name":"Delaware"},"DC":{"a2":"DC","name":"District of Columbia"},"FL":{"a2":"FL","name":"Florida"},"GA":{"a2":"GA","name":"Georgia"},"ID":{"a2":"ID","name":"Idaho"},"IL":{"a2":"IL","name":"Illinois"},"IN":{"a2":"IN","name":"Indiana"},"IA":{"a2":"IA","name":"Iowa"},"KS":{"a2":"KS","name":"Kansas"},"KY":{"a2":"KY","name":"Kentucky"},"LA":{"a2":"LA","name":"Louisiana"},"ME":{"a2":"ME","name":"Maine"},"MD":{"a2":"MD","name":"Maryland"},"MA":{"a2":"MA","name":"Massachusetts"},"MI":{"a2":"MI","name":"Michigan"},"MN":{"a2":"MN","name":"Minnesota"},"MS":{"a2":"MS","name":"Mississippi"},"MO":{"a2":"MO","name":"Missouri"},"MT":{"a2":"MT","name":"Montana"},"NE":{"a2":"NE","name":"Nebraska"},"NV":{"a2":"NV","name":"Nevada"},"NH":{"a2":"NH","name":"New Hampshire"},"NJ":{"a2":"NJ","name":"New Jersey"},"NM":{"a2":"NM","name":"New Mexico"},"NY":{"a2":"NY","name":"New York"},"NC":{"a2":"NC","name":"North Carolina"},"ND":{"a2":"ND","name":"North Dakota"},"OH":{"a2":"OH","name":"Ohio"},"OK":{"a2":"OK","name":"Oklahoma"},"OR":{"a2":"OR","name":"Oregon"},"PA":{"a2":"PA","name":"Pennsylvania"},"RI":{"a2":"RI","name":"Rhode Island"},"SC":{"a2":"SC","name":"South Carolina"},"SD":{"a2":"SD","name":"South Dakota"},"TN":{"a2":"TN","name":"Tennessee"},"TX":{"a2":"TX","name":"Texas"},"UT":{"a2":"UT","name":"Utah"},"VT":{"a2":"VT","name":"Vermont"},"VA":{"a2":"VA","name":"Virginia"},"WA":{"a2":"WA","name":"Washington"},"WV":{"a2":"WV","name":"West Virginia"},"WI":{"a2":"WI","name":"Wisconsin"},"WY":{"a2":"WY","name":"Wyoming"},"AS":{"a2":"AS","name":"American Samoa"},"GU":{"a2":"GU","name":"Guam"},"HI":{"a2":"HI","name":"Hawaii"},"MH":{"a2":"MH","name":"Marshall Islands"},"MP":{"a2":"MP","name":"Northern Mariana Islands"},"PR":{"a2":"PR","name":"Puerto Rico"},"VI":{"a2":"VI","name":"Virgin Islands"},"AP":{"a2":"AP","name":"Armed Forces Pacific"},"AE":{"a2":"AE","name":"Armed Forces Europe"},"AA":{"a2":"AA","name":"Armed Forces Americas"}};l.statesList[c].loaded=false;if(l.callbacks[l.events.loadState.error]!=undefined)
l.callbacks[l.events.loadState.error](response);};com.art.core.utils.LocalizationManager.prototype.getStatesDataGivenCountrySuccess=function(response)
{var fromCountry=this.fromCountry;var l=this.localizationManager;try
{for(var i=0;i<response.States.length;i++)
{var tmp=response.States[i];l.statesList[fromCountry].data[tmp.StateCode]={a2:tmp.StateCode,name:tmp.Name};}
l.statesList[fromCountry].loaded=true;if(l.callbacks[l.events.loadState.loaded]!=undefined)
{l.callbacks[l.events.loadState.loaded]();}}
catch(err){l.getStatesDataGivenCountryFailure(response,fromCountry);}};com.art.core.utils.LocalizationManager.prototype.getDictionaryData=function(apiKey,sessionId,appId)
{var handlers=this.serviceProvider.createHandlers(this.getLanguageTranslationsSuccess,this.getLanguageTranslationsFailure,function(){});handlers.localizationManager=this;this.serviceProvider.ecommerceAPIService.getLanguageTranslations(handlers,apiKey,sessionId,appId);};com.art.core.utils.LocalizationManager.prototype.getLanguageTranslationsFailure=function(response)
{var l=this.localizationManager;if(l.callbacks[l.ERROR]!=undefined)
l.callbacks[l.ERROR](response);};com.art.core.utils.LocalizationManager.prototype.getLanguageTranslationsSuccess=function(response)
{var l=this.localizationManager;try
{for(var i=0;i<response.LanguageKeyValuePairs.length;i++)
{var tmp=response.LanguageKeyValuePairs[i];l.dictionary[tmp.Key]=tmp.Value;}
if(l.callbacks[l.LOADED]!=undefined)
{l.callbacks[l.LOADED]();}}
catch(err){if(l.callbacks[l.ERROR]!=undefined)
l.callbacks[l.ERROR](response);}};com.art.core.utils.LocalizationManager.getLocale=function(isFacebook)
{var host=location.host;var domains=[{locale:"cs_CZ",domain:"cz",zoneID:"2",currencyCode:"CZK",currencyID:"203",langID:"16",system:"metric"},{locale:"da_DK",domain:"dk",zoneID:"2",currencyCode:"DKK",currencyID:"208",langID:"9",system:"metric"},{locale:"de_AT",domain:"at",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"3",system:"metric"},{locale:"de_CH",domain:"ch",zoneID:"2",currencyCode:"CHF",currencyID:"978",langID:"3",system:"metric"},{locale:"de_DE",domain:"de",zoneID:"13",currencyCode:"EUR",currencyID:"978",langID:"3",system:"metric"},{locale:"en_AU",domain:"com.au",zoneID:"1",currencyCode:"AUD",currencyID:"36",langID:"1",system:"metric"},{locale:"en_CA",domain:"ca",zoneID:"1",currencyCode:"CAD",currencyID:"124",langID:"1",system:"metric"},{locale:"en_IE",domain:"ie",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"1",system:"metric"},{locale:"en_GB",domain:"co.uk",zoneID:"2",currencyCode:"GBP",currencyID:"826",langID:"1",system:"metric"},{locale:"en_US",domain:"com",zoneID:"1",currencyCode:"USD",currencyID:"840",langID:"1",system:"imperial"},{locale:"es_AR",domain:"com.ar",zoneID:"1",currencyCode:"ARS",currencyID:"32",langID:"4",system:"metric"},{locale:"es_ES",domain:"es",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"4",system:"metric"},{locale:"es_MX",domain:"com.mx",zoneID:"1",currencyCode:"MXN",currencyID:"484",langID:"4",system:"metric"},{locale:"es_US",domain:"com",zoneID:"1",currencyCode:"USD",currencyID:"840",langID:"4",system:"metric"},{locale:"fi_FI",domain:"fi",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"11",system:"metric"},{locale:"fr_BE",domain:"be",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"2",system:"metric"},{locale:"fr_CA",domain:"ca",zoneID:"1",currencyCode:"CAD",currencyID:"124",langID:"2",system:"metric"},{locale:"fr_CH",domain:"ch",zoneID:"2",currencyCode:"CHF",currencyID:"756",langID:"2",system:"metric"},{locale:"fr_FR",domain:"fr",zoneID:"12",currencyCode:"EUR",currencyID:"978",langID:"2",system:"metric"},{locale:"it_CH",domain:"ch",zoneID:"2",currencyCode:"CHF",currencyID:"756",langID:"5",system:"metric"},{locale:"it_IT",domain:"it",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"5",system:"metric"},{locale:"ja_JP",domain:"co.jp",zoneID:"5",currencyCode:"JPY",currencyID:"392",langID:"6",system:"metric"},{locale:"nl_BE",domain:"be",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"7",system:"metric"},{locale:"nl_NL",domain:"nl",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"7",system:"metric"},{locale:"no_NO",domain:"no",zoneID:"2",currencyCode:"NOK",currencyID:"578",langID:"10",system:"metric"},{locale:"pl_PL",domain:"pl",zoneID:"2",currencyCode:"PLN",currencyID:"985",langID:"13",system:"metric"},{locale:"pt_BR",domain:"com.br",zoneID:"1",currencyCode:"BRL",currencyID:"986",langID:"12",system:"metric"},{locale:"pt_PT",domain:"pt",zoneID:"2",currencyCode:"EUR",currencyID:"978",langID:"12",system:"metric"},{locale:"sv_SE",domain:"se",zoneID:"2",currencyCode:"SEK",currencyID:"752",langID:"8",system:"metric"},{locale:"tr_TR",domain:"com.tr",zoneID:"2",currencyCode:"TRY",currencyID:"949",langID:"15",system:"metric"},{locale:"zh_CN",domain:"cn",zoneID:"?",currencyCode:"CNY",currencyID:"000",langID:"",system:"metric"},{locale:"en_GB_art",domain:"co.uk",zoneID:"4",currencyCode:"GBP",currencyID:"826",langID:"1",system:"metric"},{locale:"en_US_art",domain:"com",zoneID:"3",currencyCode:"USD",currencyID:"840",langID:"1",system:"imperial"}];for(var i=0;i<domains.length;i++)
{var d="."+domains[i].domain;if(host.indexOf(d)>-1)
{var locale=domains[i].locale;if(isFacebook)
return(locale=="es_AR"||locale=="es_MX"||locale=="es_US")?"es_LA":locale;else
return locale;}}
return"en_US";};com.art.core.components.BaseComponent.extend(com.art.core.utils.LocalizationManager.prototype);com.art.core.utils.LoggingManager=function(environment)
{this.environment=environment;this.serviceProvider=new com.art.core.services.ServiceProvider(this.environment);this.apiKey=(environment.apiKey==undefined)?"":environment.apiKey;this.sessionId="";};com.art.core.utils.LoggingManager.prototype.logError=function(errObj,apiKey,sessionId)
{var methodInputs=this.errorObjToInputs(errObj);var errorMessage=methodInputs.errorMessage;var errorSource=methodInputs.errorSource;var description=methodInputs.description;if(apiKey==undefined)var apiKey=this.apiKey;if(sessionId==undefined)var sessionId=this.sessionId;var handlers=this.serviceProvider.createHandlers(function(){},function(){},function(){});this.serviceProvider.loggingAPIService.logError(handlers,apiKey,sessionId,methodInputs.errorMessage,methodInputs.errorSource,methodInputs.errorName,methodInputs.errorLocation,methodInputs.errorObjectAsString);};com.art.core.utils.LoggingManager.prototype.apiKeySet=function(apiKey)
{this.apiKey=apiKey;};com.art.core.utils.LoggingManager.prototype.sessionIdSet=function(sessionId)
{this.sessionId=sessionId;};com.art.core.utils.LoggingManager.prototype.errorObjToString=function(errorObject)
{var errObj=this.errorObjValidate(errorObject);return"fileName: "+errObj.fileName
+"\n"
+"lineNumber: "+errObj.lineNumber
+"\n"
+"message: "+errObj.message
+"\n"
+"name: "+errObj.name
+"\n"
+"stack: "+errObj.stack;};com.art.core.utils.LoggingManager.prototype.errorObjValidate=function(errObj)
{var returnObj={};(errObj.fileName===undefined)?returnObj.fileName='':returnObj.fileName=errObj.fileName;(errObj.lineNumber===undefined)?returnObj.lineNumber='':returnObj.lineNumber=errObj.lineNumber;(errObj.message===undefined)?returnObj.message='':returnObj.message=errObj.message;(errObj.name===undefined)?returnObj.name='':returnObj.name=errObj.name;(errObj.stack===undefined)?returnObj.stack='':returnObj.stack=errObj.stack;return returnObj;};com.art.core.utils.LoggingManager.prototype.errorObjToInputs=function(errorObject)
{var methodInputs={errorMessage:'',errorSource:'',errorName:'',errorLocation:'',errorObjectAsString:''};var errObj=this.errorObjValidate(errorObject);methodInputs.errorName=errObj.name;methodInputs.errorSource=location.host;methodInputs.errorLocation=errObj.fileName+" | lineNumber: "+errObj.lineNumber;methodInputs.errorObjectAsString=errObj.message;methodInputs.errorMessage=errObj.stack;return methodInputs;};com.art.core.utils.LoggingManager.prototype.createError=function(name,message)
{var newError=new Error();newError.message=message;newError.name=name;return newError;};com.art.core.utils.MarkupUtil=function(appName)
{this.prefix=appName;this.ButtonStates={ACTIVE:'1',INACTIVE:'2',OVER:'3',SELECTED:'4',HIDDEN:'5'};};com.art.core.utils.MarkupUtil.prototype.getClassName=function(name,module,state)
{var returnValue=this.getPrefix(module)+name;switch(state)
{case this.ButtonStates.HIDDEN:returnValue+="_hide";break;case this.ButtonStates.INACTIVE:returnValue+="_inactive";break;case this.ButtonStates.OVER:returnValue+="_over";break;case this.ButtonStates.SELECTED:returnValue+="_select";break;case this.ButtonStates.ACTIVE:default:break;}
return returnValue;};com.art.core.utils.MarkupUtil.prototype.getIdName=function(name,module)
{var returnValue=this.getPrefix(module)+name;return returnValue;};com.art.core.utils.MarkupUtil.prototype.getPrefix=function(module)
{var sectionName="x";if(module)
{if(module.NAME)
sectionName=module.NAME.replace(/([a-z])/g,"").toLowerCase();else if(typeof module==='string'&&module.length>0)
sectionName=module.replace(/([a-z])/g,"").toLowerCase();}
var returnValue=this.prefix+"_"+sectionName+"_";return returnValue;};com.art.core.utils.MarkupUtil.prototype.getInstance=function(module)
{var _this=this;return{"getName":function(name,state)
{if(state&&state.length>0)
return(_this.getClassName(name,module,state));else
return(_this.getIdName(name,module));},"buttonStates":_this.ButtonStates,"getPrefix":function(){return _this.getPrefix(module);},"getGenericClassName":function(name,state)
{if(state&&state.length>0)
return(_this.getClassName(name,'',state));else
return(_this.getIdName(name,''));},"getModuleId":function()
{return _this.getPrefix(module)+"container";}};};com.art.core.utils.Note=function(name,body,type)
{this.name=name;this.body=body;this.type=type;};com.art.core.utils.XMLUtil=function(){};com.art.core.utils.XMLUtil.getXMLFromString=function(xmlString){var xmlDoc=null;if(window.DOMParser){var parser=new DOMParser();xmlDoc=parser.parseFromString(xmlString,"text/xml");}else if(window.ActiveXObject){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(xmlString);}
return xmlDoc;};com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml=function(xml,tagName){if(isNullOrEmpty(xml))return'';var nodeList=xml.getElementsByTagName(tagName);if(nodeList.length<1)return'';if(!nodeList[0].textContent){if(nodeList[0].text)return nodeList[0].text;else return'';}
return nodeList[0].textContent;};com.art.core.utils.ObjectUtil=function(){};com.art.core.utils.ObjectUtil.isNull=function(variable,returnIfNull){var isItNull=false;if(!isItNull&&variable==null)isItNull=true;if(!isItNull&&typeof(variable)=='undefined')isItNull=true;var isReturnNull=false;if(returnIfNull==null)isReturnNull=true;if(typeof(returnIfNull)=='undefined')isReturnNull=true;if(isReturnNull)return isItNull;else return isItNull?returnIfNull:variable;};com.art.core.utils.ObjectUtil.isNullOrEmpty=function(variable,returnIfNull){var isItNull=com.art.core.utils.ObjectUtil.isNull(variable);if(!isItNull&&typeof(variable)=='string'&&variable=='')isItNull=true;try{if(!isItNull&&typeof(variable)=='object'&&!isNaN(variable)&&variable.length==0)isItNull=true;}catch(e){}
if(!isItNull&&typeof(variable)=='object'&&com.art.core.utils.ObjectUtil.isEmptyObject(variable))isItNull=true;var isReturnNull=false;if(returnIfNull==null)isReturnNull=true;if(typeof(returnIfNull)=='undefined')isReturnNull=true;if(isReturnNull)return isItNull;else return isItNull?returnIfNull:variable;};com.art.core.utils.ObjectUtil.isEmptyObject=function(obj){if(obj instanceof Object==false)return false;for(var i in obj){return false;};return true;};function isNull(variable,returnIfNull){return com.art.core.utils.ObjectUtil.isNull(variable,returnIfNull);};function isNullOrEmpty(variable,returnIfNull){return com.art.core.utils.ObjectUtil.isNullOrEmpty(variable,returnIfNull);};com.art.core.utils.ObjectUtil.addEventSimple=function(obj,evt,fn){if(obj.addEventListener)
obj.addEventListener(evt,fn,false);else if(obj.attachEvent)
obj.attachEvent('on'+evt,fn);};com.art.core.utils.ObjectUtil.removeEventSimple=function(obj,evt,fn){if(obj.removeEventListener)
obj.removeEventListener(evt,fn,false);else if(obj.detachEvent)
obj.detachEvent('on'+evt,fn);};com.art.core.utils.SuperZoom=function(){};com.art.core.utils.SuperZoom.prototype.show=function(zoomUrl){var id=Math.ceil(Math.random()*1000);var closeButton='<img id="zoomImgClose'+id+'" class="zoomImgClose" src="http://cache1.artprintimages.com/images/photostoart/closebox.png" style="display:none;z-index:2001" onmouseover="this.style.cursor=\'-moz-zoom-out\'" onmouseout="this.style.cursor=\'hand\'" />';var zoomWidth=Math.floor($(window).width()*0.9);var zoomHeight=Math.floor($(window).height()*0.9);var windowWidth=$(window).width();var windowHeight=$(window).height();var divClickBlock="";$('body').append(divClickBlock+closeButton+'<img id="zoomImg'+id+'" class="zoomImg" src="'+zoomUrl
+'" style="display:none;z-index:2000" onmouseover="this.style.cursor=\'-moz-zoom-out\'" onmouseout="this.style.cursor=\'hand\'" />');var lightbox=new com.art.core.components.LightBox('superzoomlb','body','0.7');lightbox.show();var superzoomZIndex=lightbox.getLightBoxZIndex()+1;$('#zoomImg'+id).load(function(){$('#zoomImgBlock').show();var newValue=$(this).scaleObjectToFitOrFill.Calculate({srcWidth:$(this).width(),srcHeight:$(this).height(),destWidth:zoomWidth,destHeight:zoomHeight,method:"fit"});$(this).css({'position':'absolute','z-index':superzoomZIndex,'width':newValue.width,'height':newValue.height});$(this).center(true);var _this=this;var functionPutTopRight=function(){var positionClose={top:Math.ceil((($(window).height()-$('#zoomImgClose'+id).height())/2+$(window).scrollTop())-($(_this).height()/2)),left:Math.ceil((($(window).width()-$('#zoomImgClose'+id).width())/2+$(window).scrollLeft())+($(_this).width()/2))};$('#zoomImgClose'+id).css({'position':'absolute','top':positionClose.top,'left':positionClose.left,'z-index':superzoomZIndex+1});};functionPutTopRight();$(window).bind('resize',function(){functionPutTopRight();});$(this).fadeIn(300);$('#zoomImgClose'+id).fadeIn(300);$('#zoomImg'+id+',#zoomImgClose'+id).bind('click',function(){$(this).fadeOut(300);lightbox.close();$('#zoomImgBlock').hide();$('#zoomImg'+id).unbind('click');$('#zoomImgClose'+id).unbind('click');$('.zoomImg').remove();$('.zoomImgClose').remove();});});};com.art.core.utils.SuperZoom.prototype.showWithWaterMark=function(zoomUrl){var id=Math.ceil(Math.random()*1000);var closeButton='<img id="zoomImgClose'+id+'" class="zoomImgClose" src="http://cache1.artprintimages.com/images/photostoart/closebox.png" style="display:none;z-index:2001" onmouseover="this.style.cursor=\'-moz-zoom-out\'" onmouseout="this.style.cursor=\'hand\'" />';var zoomWidth=Math.floor($(window).width()*0.9);var zoomHeight=Math.floor($(window).height()*0.9);var windowWidth=$(window).width();var windowHeight=$(window).height();var divClickBlock="";var divCopywrite='<div id="watermark'+id+'" class="watermarknote">Note - The watermark below ("ART.COM") will not appear on the artwork itself.</div>';$('body').append(divClickBlock+closeButton+divCopywrite+'<img id="zoomImg'+id+'" class="zoomImg" src="'+zoomUrl
+'" style="display:none;z-index:2000" onmouseover="this.style.cursor=\'-moz-zoom-out\'" onmouseout="this.style.cursor=\'hand\'" />');var lightbox=new com.art.core.components.LightBox('superzoomlb','body','0.7');lightbox.show();var superzoomZIndex=lightbox.getLightBoxZIndex()+1;$('#zoomImg'+id).load(function(){$('#zoomImgBlock').show();var newValue=$(this).scaleObjectToFitOrFill.Calculate({srcWidth:$(this).width(),srcHeight:$(this).height(),destWidth:zoomWidth,destHeight:zoomHeight,method:"fit"});$(this).css({'position':'absolute','z-index':superzoomZIndex,'width':newValue.width,'height':newValue.height});$(this).center(true);var functionAddcopywrite=function(){var positionCloseCopywrite={top:(($(window).height()-$(_this).height())/2+$(window).scrollTop()),left:(($(window).width()-$(_this).width())/2+$(window).scrollLeft()+"px")};$('#watermark'+id).css({'position':'absolute','z-index':superzoomZIndex+1,'width':((newValue.width)),'top':(positionCloseCopywrite.top-20)+"px",'left':positionCloseCopywrite.left});}
var _this=this;var functionPutTopRightForCopyRight=function(){var positionClose={top:Math.ceil((($(window).height()-$('#zoomImgClose'+id).height())/2+$(window).scrollTop())-($(_this).height()/2)),left:Math.ceil((($(window).width()-$('#zoomImgClose'+id).width())/2+$(window).scrollLeft())+($(_this).width()/2))};$('#zoomImgClose'+id).css({'position':'absolute','top':positionClose.top,'left':positionClose.left,'z-index':superzoomZIndex+2});};functionPutTopRightForCopyRight();functionAddcopywrite();$(window).bind('resize',function(){functionPutTopRightForCopyRight();functionAddcopywrite();});$(this).fadeIn(300);$('#zoomImgClose'+id).fadeIn(300);$('#zoomImg'+id+',#zoomImgClose'+id+',#watermark'+id).bind('click',function(){$(this).fadeOut(300);lightbox.close();$('#zoomImgBlock').hide();$('#zoomImg'+id).unbind('click');$('#zoomImgClose'+id).unbind('click');$('#watermark'+id).unbind('click');$('.zoomImg').remove();$('.zoomImgClose').remove();$('.watermarknote').remove();});});};com.art.core.utils.BusinessUtil=function(){};com.art.core.utils.BusinessUtil.getFramedItemAddToCartUrl=function(frameid,apNum,sessionId)
{return"/asp/place_order.asp/_/posters.htm?CREATE_BSK=Y&MasterNum="+apNum+"&ui="+sessionId+"&FrameID="+frameid;};com.art.core.utils.BusinessUtil.getSimpleAddToCartUrl=function(sku,podconfigid,specialHandlingID,sessionId)
{var podQueryString="";if(podconfigid!=undefined&&podconfigid>0)
{podQueryString="&PODConfigID="+podconfigid;}
else
{podQueryString="&PODConfigID=0";}
var serviceType="";switch(specialHandlingID)
{case 2:serviceType="M";break;case 6:serviceType="L";break;}
if(sku!=null&&sku.trim().length>0)
{var pdta=sku.substring(0,sku.length-1);var specID=sku.substring(sku.length-1,sku.length);var url="/asp/place_order.asp/_/pdta--"+pdta+"/sp--"+specID+"/posters.htm?add_to_cart=Y&ui="+sessionId+"&IID="+podQueryString;if(serviceType.trim().length>0)
{url+="&ServiceType="+serviceType+"";}
return url;}
else
{return"/asp/place_order.asp";}};com.art.core.utils.BusinessUtil.GetApnumFromFrameSku=function(FrameSku){var apnum;if(FrameSku.length>0)
{var frameSkuArr=FrameSku.split('-');var framSkuArrFirstVal=frameSkuArr[0];if(framSkuArrFirstVal.indexOf("_")>-1)
{var apnumArr=framSkuArrFirstVal.split('_');apnum=apnumArr[0];}
else
apnum=frameSkuArr[0];}
return apnum;};com.art.core.utils.BusinessUtil.doShowLoginLink=function(cookieNames)
{var u=new com.art.core.vos.User(cookieNames);if(u.isLoggedIn()==false)
return true;if(u.isAccountTypeAnonymous()==true)
return true;return false;};com.art.core.utils.BusinessUtil.isAnonymousAccount=function(userVo)
{if(userVo.getAccountType()==com.art.core.vos.User.accountTypes.Anonymous)
{return true;}
else if(userVo.getAccountType()=='')
{return false;}
else
{var examine=userVo.getUserName().length>0?userVo.getUserName():userVo.getEmail();return com.art.core.utils.BusinessUtil.isAnonymousUsername(examine,userVo.getPersistentId);}};com.art.core.utils.BusinessUtil.isAnonymousUsername=function(examine,persistentId)
{var suffixPattern='@art.com';if(examine.length==0)
return false;if(examine.indexOf(suffixPattern,0)>0)
{if(persistentId!=undefined&&persistentId.length>0&&examine.indexOf(persistentId)==0)
{return true;}
var a=examine.replace(suffixPattern,'');if(!isNaN(a))
{return true;}
if(examine.length==32+suffixPattern.length)
{return true;}}
return false;};com.art.core.utils.BusinessUtil.isCountryForStateDropDown=function(country)
{if(country&&country.length&&country.toUpperCase()=="US")
return true;else
return false;};com.art.core.utils.BusinessUtil.showMessage=function(element,message,className,millisec)
{element.hide();element.removeClass();element.html(message);element.addClass(className);element.fadeIn();if(millisec&&!isNaN(millisec))
{setTimeout(function(){element.fadeOut();},millisec);}};com.art.core.utils.Facebook=function(serviceProvider,id,configuration,cookieNames)
{this.onSuccessCallback;this.onShareSuccessCallback=[];this.service=serviceProvider;this.apiKey;this.sessionId;this.FB_LOGIN_SCOPE=com.art.core.utils.Facebook.FB_LOGIN_SCOPE;this.config={defaultFacebookAccountId:'133465040008099',defaultFBMissingBehavior:'load'};$.updateObject(this.config,configuration);this.cookieNames={};$.updateObject(this.cookieNames,cookieNames);this.config.facebookAppId=this.getFacebookAppId();if(com.art.core.utils.ObjectUtil.isNullOrEmpty(window.artfb))
{window.artfb={};window.artfb.connectCalled=true;this.getConnectScript();}};com.art.core.utils.Facebook.prototype.userdata={};com.art.core.utils.Facebook.FB_LOGIN_SCOPE="email,publish_stream,offline_access,user_about_me,user_birthday,user_education_history,user_photos";com.art.core.utils.Facebook.STANDARD='standard';com.art.core.utils.Facebook.BUTTON_COUNT='button_count';com.art.core.utils.Facebook.BOX_COUNT='box_count';com.art.core.utils.Facebook.prototype.getFacebookAppId=function()
{try
{var m=$('meta[name="fb:app_id"]').attr("content");if(!com.art.core.utils.ObjectUtil.isNullOrEmpty(m))
{return m;}
if(!com.art.core.utils.ObjectUtil.isNullOrEmpty(window.FacebookAppID))
{return window.FacebookAppID;}}
catch(e){}
return this.config.defaultFacebookAccountId;};com.art.core.utils.Facebook.prototype.getConnectScript=function()
{var r=document.getElementById('fb-root');if(r==undefined||r==null)
{r=document.createElement('div');r.setAttribute("id","fb-root");$('body').prepend(r);}
var _this=this;if(typeof window.fbAsyncInit!='function'&&this.config.defaultFBMissingBehavior=='load')
{window.fbAsyncInit=function(){FB.init({appId:_this.config.facebookAppId,status:true,cookie:true,xfbml:true,oauth:true});};}
if(r.children.length==0)
{var locale=com.art.core.utils.LocalizationManager.getLocale(true);(function(d){var js,id='facebook-jssdk',ref=d.getElementsByTagName('script')[0];if(d.getElementById(id)){return;}
js=d.createElement('script');js.id=id;js.async=true;js.src="//connect.facebook.net/"+locale+"/all.js";ref.parentNode.insertBefore(js,ref);}(document));}};com.art.core.utils.Facebook.prototype.setLoginLink=function(apiKey,sessionId,target,text,useSocialPlugin)
{var _this=this;try{if(!_this.isFbObjectLoaded())
FB.init({appId:_this.config.facebookAppId,status:true,cookie:true,xfbml:true,oauth:true});}
catch(e)
{}
if(apiKey==undefined||sessionId==undefined)
throw new Error("Facebook.setLoginLink failed! missing required params apiKey and/or sessionId.");this.apiKey=apiKey;this.sessionId=sessionId;var useXFBML=!($.browser.msie&&!jQuery.support.boxModel);if(useSocialPlugin&&useXFBML)
{$(target).html("<fb:login-button size='medium' width='200' max-rows='1' id='"+target+"_fb' scope='"+this.FB_LOGIN_SCOPE+"' onlogin='com.art.core.utils.Facebook.handleLogin()'>"+text+"</fb:login-button>");var ranonce=false;var iid=setInterval(function()
{if(_this.isFbObjectLoaded()&&!ranonce)
{clearInterval(iid);ranonce=true;FB.XFBML.parse();FB.getLoginStatus(function(response)
{if(response.status=="connected")
{var accessToken=response.authResponse.accessToken;FB.api('/me',function(response){if(_this.onSuccessCallback.length>0)
{_this.facebookResponse=response;_this.facebookResponse.accessToken=accessToken;FB.Event.custom=function(){_this.authenticate(_this);};}});}
else
{FB.Event.subscribe('auth.login',function(response){var accessToken=response.authResponse.accessToken;FB.api('/me',function(response){if(_this.onSuccessCallback.length>0)
{_this.facebookResponse=response;_this.facebookResponse.accessToken=accessToken;_this.authenticate(_this);}});});}});}},400);}
else
{$(target).html(text);$(target).css({textDecoration:'underline',color:'blue',cursor:'pointer'});$(target).die('click');$(target).unbind('click');$(target).bind('click',function(){_this.login();});}};com.art.core.utils.Facebook.handleLogin=function()
{FB.getLoginStatus(function(response)
{if(response.status=="connected")
{if(FB.Event.custom!=null)
{FB.Event.custom();}}});};com.art.core.utils.Facebook.prototype.onLoginSuccess=function(fn){this.onSuccessCallback=fn;};com.art.core.utils.Facebook.prototype.login=function()
{var _this=this;FB.login(function(response){var accessToken=response.authResponse.accessToken;if(response.authResponse==undefined){throw new Error("Unable to retrieve user details.");}
FB.api('/me',function(response){if(_this.onSuccessCallback.length>0)
{_this.facebookResponse=response;_this.facebookResponse.accessToken=accessToken;_this.authenticate(_this);}});},{scope:_this.FB_LOGIN_SCOPE});};com.art.core.utils.Facebook.prototype.authenticate=function(obj)
{var handlers=this.service.createHandlers(this.authenticateResponse,this.authenticateResponse,function(){});handlers.fb=this;this.service.accountAuthorizationAPIService.accountAuthenticateWithFacebookUID(handlers,obj.apiKey,obj.sessionId,obj.facebookResponse.id,obj.facebookResponse.email,obj.facebookResponse.first_name,obj.facebookResponse.last_name,obj.facebookResponse.accessToken);};com.art.core.utils.Facebook.prototype.authenticateResponse=function(response)
{var a=response;if(a.Account!=undefined&&a.Account.ProfileInfo!=undefined)
a.Account.ProfileInfo.UserName=this.fb.facebookResponse.email;var r={facebookResponse:this.fb.facebookResponse,artComResponse:a};var ch=new com.art.core.cookie.Cookie(this.cookieNames);ch.cookieSetLogin(response);com.art.core.vos.Environment.logIn();this.fb.mapFbToArt(r.artComResponse,r.facebookResponse);this.fb.onSuccessCallback(r);};com.art.core.utils.Facebook.prototype.mapFbToArt=function(art,fb)
{art.Account.ProfileInfo.EmailAddress=fb.email;art.Account.ProfileInfo.UserName=fb.email;art.Account.ProfileInfo.FirstName=this.normalizeEmpty(fb.first_name);art.Account.ProfileInfo.LastName=this.normalizeEmpty(fb.last_name);if(typeof fb.hometown=='object'&&fb.hometown.name!=undefined&&fb.hometown.name.indexOf(", ")>0)
{var p=fb.hometown.name.split(', ');if(art.Account.CuratorInfo==undefined)
art.Account.CuratorInfo={};if(art.Account.CuratorInfo.Location==undefined)
art.Account.CuratorInfo.Location={};art.Account.CuratorInfo.City=p[0];art.Account.CuratorInfo.State=p[1];}};com.art.core.utils.Facebook.prototype.normalizeEmpty=function(v)
{return(v==undefined||v==null?'':v);};com.art.core.utils.Facebook.prototype.isFbObjectLoaded=function()
{var r=false;try
{if(!com.art.core.utils.ObjectUtil.isNullOrEmpty(FB))
{r=true;}}
catch(e){}
return r;};com.art.core.utils.Facebook.prototype.logout=function(callback)
{var _this=this;var iid=setInterval(function()
{if(_this.isFbObjectLoaded())
{clearInterval(iid);FB.getLoginStatus(function(response){try
{if(response.status==='connected')
{FB.logout(function(response){callback();});}
else
{callback();}}
catch(e){}});}},400);};com.art.core.utils.Facebook.prototype.shareButton=function(target,callback)
{var uuid=com.art.core.utils.StringUtil.generateUID(10);$(target).html("<div id='"+uuid+"' style='cursor:pointer;width:20px;height:19px;background-image:url(http://cache1.artprintimages.com/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-542px -14px;'></div>");$("#"+uuid).mouseover(function(){$(this).css("backgroundPosition","-562px -14px");});$("#"+uuid).mouseout(function(){$(this).css("backgroundPosition","-542px -14px");});$("#"+uuid).bind("click",function(){callback();});};com.art.core.utils.Facebook.prototype.share=function(name,destinationURL,caption,imageURL,description,usegraphservice,data)
{var _this=this;var args={app_id:_this.config.facebookAppId,display:'popup',method:'feed',name:name,link:destinationURL,caption:caption,picture:imageURL,description:description};FB.ui(args,function(response){if(response&&response.post_id)
{if(usegraphservice){data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_SHARED);_this.callGraphService(response,data);}}
else
{}});};com.art.core.utils.Facebook.prototype.shareSuccess=function(callback)
{this.onShareSuccessCallback[0]=callback;};com.art.core.utils.Facebook.prototype.like=function(target,data,userGraphService,includeSend,ogurl,style){var _this=this;var str='false';var strWidth="150";var fblikeStyle=com.art.core.utils.Facebook.BUTTON_COUNT;if(includeSend){str='true';strWidth="450";}
if($("#fb-like-width-override").length>0){strWidth=$("#fb-like-width-override").text();}
if(style){fblikeStyle=style;}
if(ogurl)
hrefogurl=ogurl;else
hrefogurl=location.href;var targetId=target.replace("#","");str='<fb:like id="'+targetId+'-module" send="'+str+'" href="'+hrefogurl+'" width="'+strWidth+'" show_faces="false" layout="'+fblikeStyle+'"/>';$(target).html(str);var iid=setInterval(function(){var isReady=false;try{if(FB)isReady=true;}catch(e){}
if(!isReady)return;FB.XFBML.parse();clearInterval(iid);try{$(target+"-module > span > iframe").addClass(targetId+"-override");}catch(e){}
FB.Event.subscribe('edge.create',function(response){if(_this.service==undefined)
throw new Error("Facebook.like() callback failed! ServiceProvider is not defined.");if(userGraphService){_gaq.push(['_trackSocial','facebook','like','My Galleries']);var dataString=JSON.stringify(data);dataString=dataString.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);dataString=dataString.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_LIKED);_this.callGraphService(response,JSON.parse(dataString));}});FB.Event.subscribe('edge.remove',function(response){if(_this.service==undefined)
throw new Error("Facebook.like() callback failed! ServiceProvider is not defined.");if(userGraphService){_gaq.push(['_trackSocial','facebook','unlike','My Galleries']);var dataString=JSON.stringify(data);dataString=dataString.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);dataString=dataString.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_UNLIKED);_this.callGraphService(response,JSON.parse(dataString));}});if(includeSend){FB.Event.subscribe('message.send',function(response){if(_this.service==undefined)
throw new Error("Facebook.like() callback failed! ServiceProvider is not defined.");if(userGraphService){_gaq.push(['_trackSocial','facebook','share','My Galleries']);var dataString=JSON.stringify(data);dataString=dataString.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);dataString=dataString.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_SHARED);_this.callGraphService(response,JSON.parse(dataString));}});}},200);};com.art.core.utils.Facebook.prototype.comment=function(target,data,userGraphService,wide,hrefogurl){var _this=this;var posts="10";var str='<fb:comments candelete="false" href="'+hrefogurl+'" num_posts="'+posts+'" width="'+wide+'" migrated=1></fb:comments>';$(target).html(str);var iid=setInterval(function(){var isReady=false;try{if(FB)isReady=true;}catch(e){}
if(!isReady)return;FB.XFBML.parse();clearInterval(iid);FB.Event.subscribe('comment.create',function(response){if(_this.service==undefined)
throw new Error("Facebook.like() callback failed! ServiceProvider is not defined.");if(userGraphService){_gaq.push(['_trackSocial','facebook','comment','My Galleries']);data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_COMMENTED);_this.callGraphService(response,data);}});},200);};com.art.core.utils.Facebook.prototype.comments=function(target,url,width,postscount,data,userGraphService){var _this=this;var posts="10";var wide="752";var href="http://www.art.com";try{posts=(postscount.length>0)?postscount:"10";wide=(width.length>0)?width:"752";href=(url.length>0)?url:"http://www.art.com";}catch(Error){}
var str='<fb:comments candelete="false" href="'+href+'" num_posts="'+posts+'" width="'+wide+'" migrated=1></fb:comments>';$(target).html(str);setTimeout(function(){FB.Event.subscribe('comment.create',function(response){if(_this.service==undefined)
throw new Error("Facebook.like() callback failed! ServiceProvider is not defined.");if(userGraphService){_gaq.push(['_trackSocial','facebook','comments','My Galleries']);var dataString=JSON.stringify(data);dataString=dataString.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);dataString=dataString.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_COMMENTED);_this.callGraphService(response,JSON.parse(dataString));}});},250);};com.art.core.utils.Facebook.prototype.callGraphService=function(response,data)
{this.service.graphServiceAPI.UpdateUserRelationship(data);};com.art.core.utils.Facebook.getLocale=function()
{var supportedLocales=[{domain:"fr",locale:"fr_FR"},{domain:"de",locale:"de_DE"},{domain:"co.uk",locale:"en_GB"},{domain:"dk",locale:"dk_DK"}];var url="art.de_DE";for(var i=0;i<supportedLocales.length;i++)
{var d="."+supportedLocales[i].domain;if(url.indexOf(d)>-1)
{var locale=supportedLocales[i].locale;return locale;}}
return"en_US";};com.art.core.utils.Google=function()
{this.scriptLoaded=false;this.loadScript();};com.art.core.utils.Google.prototype.loadScript=function()
{var loadScript=true;if(typeof window.gapi!="undefined"){loadScript=false;}
if(loadScript)
{(function(){var po=document.createElement('script');po.type='text/javascript';po.async=true;po.src='https://apis.google.com/js/plusone.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);})();}
else
{this.scriptLoaded=true;}};com.art.core.utils.Google.prototype.GooglePlus=function(target,width){var str='<div class="g-plusone" data-size="medium" data-annotation="none"></div>';$(target).html(str);};com.art.core.utils.InputValidation=function()
{this.NAME=com.art.core.utils.InputValidation.NAME;};com.art.core.utils.InputValidation.NAME="InputValidation";com.art.core.utils.InputValidation.prototype.getValidationObject=function(func,criteria,msg)
{return{func:func,criteria:criteria,msg:msg};};com.art.core.utils.InputValidation.prototype.getRequired=function(errorMsg)
{return this.getValidationObject(this.required,'',errorMsg);};com.art.core.utils.InputValidation.prototype.required=function(criteria,testValue)
{var retval=false;if(testValue&&testValue.length!=undefined)
if(testValue.length>0)
retval=true;return retval;};com.art.core.utils.InputValidation.prototype.getIsEqual=function(criteria,errorMsg)
{return this.getValidationObject(this.isEqual,criteria,errorMsg);};com.art.core.utils.InputValidation.prototype.isEqual=function(criteria,testValue)
{var retval=false;if(testValue)
if(testValue==criteria.getValue())
retval=true;return retval;};com.art.core.utils.InputValidation.prototype.getMinLength=function(minLength,errorMsg)
{return this.getValidationObject(this.minLength,minLength,errorMsg);};com.art.core.utils.InputValidation.prototype.minLength=function(criteria,testValue)
{var retval=false;if(testValue!=undefined&&testValue.length!=undefined)
if(testValue.length>=criteria)
retval=true;return retval;};com.art.core.utils.InputValidation.prototype.getMaxLength=function(maxLength,errorMsg)
{return this.getValidationObject(this.maxLength,maxLength,errorMsg);};com.art.core.utils.InputValidation.prototype.maxLength=function(criteria,testValue)
{var retval=false;if(testValue!=undefined&&testValue.length!=undefined)
if(testValue.length<=criteria)
retval=true;return retval;};com.art.core.utils.InputValidation.prototype.getValidEmail=function(errorMsg)
{return this.getValidationObject(this.validEmail,'',errorMsg);};com.art.core.utils.InputValidation.prototype.validEmail=function(criteria,testValue)
{return com.art.core.utils.StringUtil.isValidEmailAddress(testValue);};com.art.core.utils.InputValidation.prototype.getAlphaNumeric=function(errorMsg)
{return this.getValidationObject(this.alphaNumeric,'',errorMsg);};com.art.core.utils.InputValidation.prototype.alphaNumeric=function(criteria,testValue)
{return com.art.core.utils.StringUtil.isAlphaNumeric(testValue);};com.art.core.utils.InputValidation.prototype.getNotEqual=function(criteria,errorMsg)
{return this.getValidationObject(this.notEqual,criteria,errorMsg);};com.art.core.utils.InputValidation.prototype.notEqual=function(criteria,testValue)
{var retval=false;var crit=typeof criteria=='string'?criteria:criteria.getValue();if(testValue)
if(testValue!=crit)
retval=true;return retval;};com.art.core.components.BaseButton=function()
{this.init();this.CLICK=com.art.core.components.BaseButton.CLICK;this.HOVER=com.art.core.components.BaseButton.HOVER;this.MOUSEDOWN=com.art.core.components.BaseButton.MOUSEDOWN;this.MOUSEUP=com.art.core.components.BaseButton.MOUSEUP;this.DISABLED=com.art.core.components.BaseButton.DISABLED;};com.art.core.components.BaseButton.extend=function(subclass)
{var bb=new com.art.core.components.BaseButton();for(var k in bb)
{subclass[k]=bb[k];};};com.art.core.components.BaseButton.CLICK="click";com.art.core.components.BaseButton.HOVER="hover";com.art.core.components.BaseButton.MOUSEDOWN="down";com.art.core.components.BaseButton.MOUSEUP="default";com.art.core.components.BaseButton.DISABLED="disabled";com.art.core.components.BaseComponent.extend(com.art.core.components.BaseButton.prototype);com.art.core.components.BaseModal=function(id,width,bgcolorOrCssClass,useButtonBar,disableDropShadow,translatedContent){this.init();this.id=id;this.width=width;this.useButtonBar=useButtonBar;this.disableDropShadow=disableDropShadow!=undefined?disableDropShadow:false;this.translatedContent={title:''};$.updateObject(this.translatedContent,translatedContent);this.cssClass={bgcolor:"#f1f1f1",headerAndFooter:"modal_hdrftr",header:"modal_header",headerText:"modal_header_text",close:"baseModalCloseBtn",closeHover:"modal_close_hover",closeClick:"modal_close_click"};if(typeof bgcolorOrCssClass=='string')
this.cssClass.bgcolor=bgcolorOrCssClass;else
$.updateObject(this.cssClass,bgcolorOrCssClass);this.CLOSE_CLICKED=com.art.core.components.BaseModal.CLOSE_CLICKED;this.BODY_CLICKED=com.art.core.components.BaseModal.BODY_CLICKED;com.art.core.components.BaseComponent.extend(this);this.zindex=-1;this.skin=com.art.core.components.BaseModal.ART_SKIN;this.ART_SKIN=com.art.core.components.BaseModal.ART_SKIN;this.APC_SKIN=com.art.core.components.BaseModal.APC_SKIN;this.buttons={};};com.art.core.components.BaseModal.APC_SKIN="apc_skin";com.art.core.components.BaseModal.ART_SKIN="art_skin";com.art.core.components.BaseModal.CLOSE_CLICKED='BaseModalCloseClicked';com.art.core.components.BaseModal.BODY_CLICKED='BaseModalBodyClicked';com.art.core.components.BaseModal.extend=function(obj)
{var m=new com.art.core.components.BaseModal(obj.id,obj.width);for(var n in obj)
{if(n=='template')
{obj[n]=m.getTemplate().replace("$EXTEND",obj[n]);}}
for(var i in m)
{if(i!='render'&&i!='getTemplate'&&i!='template')
{obj[i]=m[i];}}};com.art.core.components.BaseModal.prototype.getButtonById=function(id)
{return this.buttons[id];};com.art.core.components.BaseModal.prototype.removeButtonById=function(id)
{var b=this.buttons[id];if(b!=null)
{this.buttons[id].destroy();delete this.buttons[id];$("#"+id).remove();}};com.art.core.components.BaseModal.prototype.setContents=function(str)
{if($("#"+this.id).attr("id")==this.id)
{$("#baseExtend").html(str);}
else
{this.template=this.template.replace("$EXTEND",str);}};com.art.core.components.BaseModal.prototype.render=function(zindex)
{var str=this.getTemplate(zindex);return str;};com.art.core.components.BaseModal.prototype.registerEvents=function(){var _this=this;$('#baseModalCloseBtn_'+this.id).mouseenter(function(){$(this).addClass(_this.cssClass.closeHover);});$('#baseModalCloseBtn_'+this.id).mouseleave(function(){$(this).removeClass(_this.cssClass.closeHover);});$('#baseModalCloseBtn_'+this.id).mousedown(function(){$(this).addClass(_this.cssClass.closeClick);});$('#baseModalCloseBtn_'+this.id).mouseup(function(){$(this).removeClass(_this.cssClass.closeClick);if(_this.callbacks[_this.CLOSE_CLICKED]!=undefined)
_this.callbacks[_this.CLOSE_CLICKED]();_this.close();});$("#"+_this.id).live("click",function(e){if(_this.callbacks[_this.BODY_CLICKED]!=undefined)
{e.stopPropagation();_this.callbacks[_this.BODY_CLICKED]();}});if(this.disableDropShadow){$("#"+this.id).centerNoDropShadow(true);}
else{$("#"+this.id).addDropShadow().center(true);}};com.art.core.components.BaseModal.prototype.removeCloseButton=function()
{$("#baseModalCloseBtn_"+this.id).remove();};com.art.core.components.BaseModal.prototype.draggable=function(id,mover)
{var o=com.art.core.utils.ObjectUtil;dD={iMX:undefined,iMY:undefined,startX:undefined,startY:undefined,dObj:undefined,initElement:function(el){if(typeof el=='string')
el=document.getElementById(el);el.style.position="relative";el.style.cursor="pointer";el.onmousedown=dD.startDragMouse;},startDragMouse:function(e){var el=this;if(!o.isNullOrEmpty(mover))
{el=document.getElementById(mover);}
dD.startDrag(el);var evt=e||window.event;dD.iMX=evt.clientX;dD.iMY=evt.clientY;o.addEventSimple(document,'mousemove',dD.dragMouse);o.addEventSimple(document,'mouseup',dD.releaseElement);return false;},startDrag:function(obj){if(dD.dObj)
dD.releaseElement();dD.startX=obj.offsetLeft;dD.startY=obj.offsetTop;dD.dObj=obj;obj.className+=' dragged';},dragMouse:function(e){var evt=e||window.event;var dX=evt.clientX-dD.iMX;var dY=evt.clientY-dD.iMY;dD.setPosition(dX,dY);return false;},setPosition:function(dx,dy){var x=dD.startX+dx;var y=dD.startY+dy;var w=$(window).width();var h=$(window).height();if(y<1)y=1;if(x<1)x=1;if(y>h)y=h-20;if(x>w)x=w-20;dD.dObj.style.left=x+'px';dD.dObj.style.top=y+'px';},releaseElement:function(){o.removeEventSimple(document,'mousemove',dD.dragMouse);o.removeEventSimple(document,'mouseup',dD.releaseElement);dD.dObj.className=dD.dObj.className.replace(/dragged/,'');dD.dObj=null;}};dD.initElement(id);};com.art.core.components.BaseModal.prototype.close=function(){$("#"+this.id).die();$("#"+this.id).unbind("click");$("#"+this.id).remove();};com.art.core.components.BaseModal.prototype.registerButton=function(id,style,label,callback,arrowStyle)
{var as=(arrowStyle!=undefined)?arrowStyle:undefined;var _this=this;this.buttons[id]=new com.art.core.components.ArtButton(id,style,label,as);$("#btnBarClear").before("<div style='float:right'>"+this.buttons[id].render()+"</div>");this.buttons[id].registerEvents();this.buttons[id].registerCallback(com.art.core.components.BaseButton.CLICK,function(){callback(_this.buttons[id]);});$("#baseModalButtonBarRight_"+this.id+" > div").css("margin-left","5px");};com.art.core.components.BaseModal.prototype.getButtonById=function(id)
{return this.buttons[id];};com.art.core.components.BaseModal.prototype.setDefaultButtons=function()
{var b=new com.art.core.components.ArtButton('someID',com.art.core.components.ArtButton.ART_BLUE,'Submit');$("#baseModalButtonBarRight_"+this.id).html(b.render());};com.art.core.components.BaseModal.prototype.setLeftButtonBarContent=function(str)
{$("#baseModalButtonBarLeft_"+this.id).html(str);};com.art.core.components.BaseModal.prototype.getTemplate=function(zindex){var z=zindex!=undefined?"z-index:"+zindex+";":"z-index:1000";var domain=this.skin==this.ART_SKIN?com.art.core.constants.ART:com.art.core.constants.APC;var btnStr=this.useButtonBar?this.buttonBarTemplate.replace(/\$ID/g,this.id):"";var str=this.template.replace(/\$title/gi,this.translatedContent.title).replace(/\$ID/g,this.id).replace("$W",this.width).replace("[WW]",this.width-28).replace("$BGC",this.cssClass.bgcolor).replace("$BTN_BAR",btnStr).replace("$ZNDX",z).replace("[HDRCLS]",this.cssClass.header).replace("[HDRFTRCLS]",this.cssClass.headerAndFooter).replace("[HDRTXT]",this.cssClass.headerText).replace("[CLOSECLS]",this.cssClass.close).replace(/\$IMAGE_HOST/g,this.getImageHost(domain));return str;};com.art.core.components.BaseModal.prototype.buttonBarTemplate="<div class='buttonBarTemplate' style='padding:5px;'>"+"<div id='baseModalButtonBarLeft_$ID' style='float:left;margin-top: 7px;'></div>"+"<div id='baseModalButtonBarRight_$ID' style='float:right;width:70%'><div id='btnBarClear' style='clear:both'></div></div>"+"<div style='clear:both;font-size:0px;'></div>"+"</div>";com.art.core.components.BaseModal.prototype.template="<div id='$ID' style='width:$Wpx;background-color:$BGC;position:absolute;$ZNDX;' class='[HDRFTRCLS]'>"+"<div id='baseModalTitleBar_$ID' class='[HDRCLS]'>"+"<div id='baseModalTitleBar_$ID_text' style='float:left;width:[WW]px' class='[HDRTXT]'>$title</div>"+"<span id='baseModalCloseBtn_$ID' class='[CLOSECLS]' style='margin-right:10px;margin-top:15px;float:right;cursor:pointer;'></span>"+"</div>"+"<div style='clear:both;font-size:0px;'></div>"+"<div id='baseExtend' style='width:100%;#width:100%;height:100%;'>$EXTEND</div>"+"<div style='clear:both;font-size:0px;'></div>"+"$BTN_BAR"+"</div>";com.art.core.components.BaseComponent.extend(com.art.core.components.BaseModal.prototype);com.art.core.components.LoginModal=function(id,loginTitle,registerTitle,brandOrCssClass,defaultTab,translatedContent,cookieNames,configuration){this.init();this.id=id;this.loginTitle=loginTitle;this.registerTitle=registerTitle;if(typeof brandOrCssClass=='string')
this.brand=brandOrCssClass;else
this.brand=brandOrCssClass.brand!=undefined?brandOrCssClass.brand:com.art.core.components.LoginModal.ART_BRAND;this.cssClass={closeButton:'modal_close_button',link:'link',linkHover:'linkHover'};$.updateObject(this.cssClass,brandOrCssClass);this.config={defaultFacebookAccountId:'133465040008099',defaultFBMissingBehavior:'load'};$.updateObject(this.config,configuration);this.selectedTab=defaultTab;this.startPassword=false;if(defaultTab==com.art.core.components.LoginModal.PASSWORD)
{this.selectedTab=com.art.core.components.LoginModal.LOGIN;this.startPassword=true;}
this.base=new com.art.core.components.BaseModal(id,320,{bgcolor:"#FFFFFF",headerAndFooter:'',header:'',headerText:''},true);this.CLOSE_CLICKED=com.art.core.components.LoginModal.CLOSE_CLICKED;this.REGISTER_CLICKED=com.art.core.components.LoginModal.REGISTER_CLICKED;this.LOGIN_CLICKED=com.art.core.components.LoginModal.LOGIN_CLICKED;this.ON_FACEBOOK_LOGIN_SUCCESS=com.art.core.components.LoginModal.ON_FACEBOOK_LOGIN_SUCCESS;this.FORGOT_PASSWORD_CLICKED=com.art.core.components.LoginModal.FORGOT_PASSWORD_CLICKED;this.translatedContent=com.art.core.components.LoginModal.prototype.translatedContent;$.updateObject(this.translatedContent,translatedContent);this.loginCallback;this.regCallback;this.serviceDetails;this.fb;this.renderedLoginForm;this.mainActionButton;this.service;this.LOGIN=com.art.core.components.LoginModal.LOGIN;this.REGISTER=com.art.core.components.LoginModal.REGISTER;this.ART_BRAND=com.art.core.components.LoginModal.ART_BRAND;this.APC_BRAND=com.art.core.components.LoginModal.APC_BRAND;this.OTHER_BRAND=com.art.core.components.LoginModal.OTHER_BRAND;this.actionButtonName=this.id+"ActionBtn";this.cancelButtonName=this.id+"CancelBtn";this.selectedButtonLabel="";this.closeCallback;this.fields={};this.fields.loginEmail=new com.art.core.components.TextField("loginEmail",{},{label:'',position:'left'},this.translatedContent.EmailAddressHint);this.fields.loginPassword=new com.art.core.components.PasswordField("loginPassword",{},{label:'',position:'left'},this.translatedContent.PasswordHint);this.fields.createEmail=new com.art.core.components.TextField("createEmail",{},{label:'',position:'left'},this.translatedContent.EmailAddressHint);this.fields.createPassword=new com.art.core.components.PasswordField("createPassword",{},{label:'',position:'left'},this.translatedContent.PasswordHint);this.fields.createPasswordConfirm=new com.art.core.components.PasswordField("createPasswordConfirm",{},{label:'',position:'left'},this.translatedContent.ConfirmPasswordHint);this.fields.forgotEmail=new com.art.core.components.TextField("forgotEmail",{},{label:'',position:'left'},this.translatedContent.EmailAddressHint);this.cookieNames={};if(cookieNames==undefined||typeof cookieNames=='string')
cookieNames={};$.updateObject(this.cookieNames,cookieNames);};com.art.core.components.LoginModal.LOGIN="LOGIN";com.art.core.components.LoginModal.REGISTER="REGISTER";com.art.core.components.LoginModal.PASSWORD="PASSWORD";com.art.core.components.LoginModal.ART_BRAND="ART";com.art.core.components.LoginModal.APC_BRAND="APC";com.art.core.components.LoginModal.OTHER_BRAND="OTHER";com.art.core.components.LoginModal.CLOSE_CLICKED="LoginModalCloseClicked";com.art.core.components.LoginModal.REGISTER_CLICKED="RegisterButtonClicked";com.art.core.components.LoginModal.LOGIN_CLICKED="LoginButtonClicked";com.art.core.components.LoginModal.ON_FACEBOOK_LOGIN_SUCCESS="onFaceBookLoginSuccess";com.art.core.components.LoginModal.FORGOT_PASSWORD_CLICKED="LoginModalForgotPasswordClicked";com.art.core.components.LoginModal.prototype.translatedContent={SubmitText:'Submit',BackText:'Go Back',LoginButtonText:'Log in',RegisterButtonText:'Sign up',EmailAddressHint:'Email address',PasswordHint:'Password',CancelButtonText:'Cancel',ProcessingText:'Processing...',ConfirmPasswordHint:'Confirm password',ValidateEmailAndPasswordMissing:'Email and Password are blank.',ValidateEmailMissing:'Please enter an email address.',ValidateInvalidEmail:'Please enter a valid email address.',ValidatePasswordMissing:'Please enter a password.',ValidateConfirmMissing:'Please enter and confirm password',ValidatePasswordsDontMatch:'The passwords do not match',LoginToFacebook:'',PrivacyPolicy:'Privacy Policy',PasswordMissingText:'Forgot your password?',LogInText:'Log in',forgotPasswordTitle:'Retrieve your password',loginWithFacebook:'Log in with Facebook',RegWithFacebook:"Sign up using Facebook",locationPrivacyPolicy:"/asp/customerservice/privacy_policy.asp",tabLogin:"Log in",tabSignup:"Sign up",loginTitle:"Log in with an Art.com account",registerTitle:"Sign up using your email address"};com.art.core.components.LoginModal.prototype.setServiceDetails=function(obj)
{this.serviceDetails=obj;this.service=new com.art.core.services.ServiceProvider(this.serviceDetails);};com.art.core.components.LoginModal.prototype.isInDOM=function()
{if($('#'+this.id).length>0)
return true;else
return false;};com.art.core.components.LoginModal.prototype.render=function(zindex){this.base.setContents(this.getTemplate(zindex));return this.base.render(zindex+1);};com.art.core.components.LoginModal.prototype.initSubmitButtons=function()
{var _this=this;$('#'+this.id+this.actionButtonName).unbind().die();$('#'+this.id+this.cancelButtonName).unbind().die();this.base.registerButton(this.actionButtonName,com.art.core.components.ArtButton.ART_ORANGE,this.translatedContent.LoginButtonText,function(btn){var btn=_this.base.getButtonById(_this.actionButtonName);});this.base.registerButton(this.cancelButtonName,com.art.core.components.ArtButton.ART_BLUE,this.translatedContent.CancelButtonText,function(){});};com.art.core.components.LoginModal.prototype.register=function(callback)
{this.regCallback=callback;};com.art.core.components.LoginModal.prototype.doRegister=function(username,password)
{var handlers=this.service.createHandlers(this.doRegisterSuccess,this.doRegisterFailure,function(){});handlers.comp=this;this.service.accountAuthorizationAPIService.accountCreate(handlers,this.serviceDetails.apiKey,this.serviceDetails.sessionId,username,password);};com.art.core.components.LoginModal.prototype.doRegisterSuccess=function(response)
{if(response.OperationResponse.ResponseCode==200)
{if(this.comp.regCallback!=undefined)
{var ch=new com.art.core.cookie.Cookie(this.cookieNames);ch.cookieSetLogin(response);com.art.core.vos.Environment.logIn();this.comp.regCallback(response);this.comp.doClose();}}
else
{var str=response.OperationResponse.ResponseMessage;this.comp.setErrorMessage(str);}};com.art.core.components.LoginModal.prototype.doRegisterFailure=function(response)
{};com.art.core.components.LoginModal.prototype.retrievePassword=function(email)
{if(this.serviceDetails.serviceUrlAccountAuthenticationApi==null||this.serviceDetails.sessionId==null||this.serviceDetails.apiKey==null||email==null)
{throw new Error("LoginModal retrievePassword failed! missing required arguments.");}
var handlers=this.service.createHandlers(this.retrievePasswordSuccess,this.retrievePasswordFailure,function(){});handlers.comp=this;this.service.accountAuthorizationAPIService.accountRetrievePassword(handlers,this.serviceDetails.apiKey,this.serviceDetails.sessionId,email);};com.art.core.components.LoginModal.prototype.retrievePasswordSuccess=function(response)
{if(response.ResponseCode==200)
{this.comp.setSuccessMessage('Your password has been sent');}
else
{this.comp.setErrorMessage(response.ResponseMessage);}};com.art.core.components.LoginModal.prototype.retrievePasswordFailure=function(response)
{};com.art.core.components.LoginModal.prototype.authenticate=function(email,password)
{var sp=new com.art.core.services.ServiceProvider(this.serviceDetails);var handlers=sp.createHandlers(this.authenticateSuccess,this.authenticateFailure,function(){});handlers.comp=this;if(this.serviceDetails.serviceUrlAccountAuthenticationApi==null||this.serviceDetails.serviceUrlAccountAuthenticationApi==""||this.serviceDetails.sessionId==null||this.serviceDetails.sessionId==""||this.serviceDetails.apiKey==null||this.serviceDetails.apiKey==""||email==null||email==""||password==null||password==""){throw new Error("LoginModal authenticate failed! missing required arguments.");}
else
{sp.accountAuthorizationAPIService.accountAuthenticate(handlers,this.serviceDetails.apiKey,this.serviceDetails.sessionId,email,password);}};com.art.core.components.LoginModal.prototype.authenticateSuccess=function(response)
{var _this=this;if(response.OperationResponse.ResponseCode==200)
{response.success=true;setTimeout(function(){_this.comp.doClose();},250);var ch=new com.art.core.cookie.Cookie(this.cookieNames);ch.cookieSetLogin(response);com.art.core.vos.Environment.logIn();this.comp.loginCallback(response);}
else
{this.comp.setErrorMessage(response.OperationResponse.ResponseMessage);}};com.art.core.components.LoginModal.prototype.authenticateFailure=function(response)
{_this.setErrorMessage(response.OperationResponse.ResponseMessage);};com.art.core.components.LoginModal.prototype.bindInputs=function()
{var _this=this;this.bindValidation();var k=com.art.core.components.BaseComponent.events.keypress.enter;this.fields.loginEmail.registerCallback(k,function(){_this.clickActionButton();});this.fields.loginPassword.registerCallback(k,function(){_this.clickActionButton();});this.fields.createEmail.registerCallback(k,function(){_this.clickActionButton();});this.fields.createPassword.registerCallback(k,function(){_this.clickActionButton();});this.fields.createPasswordConfirm.registerCallback(k,function(){_this.clickActionButton();});this.fields.forgotEmail.registerCallback(k,function(){_this.clickActionButton();});var b=this.base.getButtonById(this.actionButtonName);b.registerCallback(k,function(){_this.clickActionButton();});this.fields.loginEmail.registerEvents();this.fields.loginPassword.registerEvents();this.fields.createEmail.registerEvents();this.fields.createPassword.registerEvents();this.fields.createPasswordConfirm.registerEvents();this.fields.forgotEmail.registerEvents();};com.art.core.components.LoginModal.prototype.clickActionButton=function()
{var b=this.base.getButtonById(this.actionButtonName);b.click();};com.art.core.components.LoginModal.prototype.tabToggle=function(tab)
{this.selectedTab=tab;$("#"+this.id+"_tabs li[id!="+this.id+"_close]").replaceClass(this.styles["activeTab"]+" "+this.styles.tabs);$("#"+this.id+"_tabs li").find("a").css("cursor","pointer");var selectedTab=this.selectedTab==this.LOGIN?$("#"+this.id+"_tabs li:first"):$("#"+this.id+"_tabs li:nth-child(2)");var selectedContent=this.selectedTab==this.LOGIN?$("#"+this.id+"_loginTabContent"):$("#"+this.id+"_registerTabContent");var activeContent=this.selectedTab==this.LOGIN?$("#"+this.id+"_registerTabContent"):$("#"+this.id+"_loginTabContent");$("#"+this.id+"_tabs li a").unbind('mouseenter mouseleave');selectedTab.find("a").css("cursor","default");selectedTab.replaceClass(this.styles["selectedTab"]+" "+this.styles.tabs);selectedContent.show();activeContent.hide();this.updateActionButton();this.getErrorMsgSelector().hide();};com.art.core.components.LoginModal.prototype.enableButtons=function()
{var c=this.base.getButtonById(this.cancelButtonName);c.enable();var b=this.base.getButtonById(this.actionButtonName);b.enable(this.selectedButtonLabel);};com.art.core.components.LoginModal.prototype.updateActionButton=function(isForgotPassword)
{this.bindInputs();if(this.renderedLoginForm!=""&&!isForgotPassword)
{$("#"+this.id+"_MainContent").html(this.renderedLoginForm);this.renderedLoginForm="";}
var _this=this;var b=this.base.getButtonById(this.actionButtonName);b.label=isForgotPassword?this.translatedContent.SubmitText:this.selectedTab==this.LOGIN?this.translatedContent.LoginButtonText:this.translatedContent.RegisterButtonText;this.selectedButtonLabel=b.label;b.enable(this.selectedButtonLabel);var c=this.base.getButtonById(this.cancelButtonName);c.enable(this.translatedContent.CancelButtonText);c.registerCallback(com.art.core.components.BaseButton.CLICK,function(btn){_this.doClose();});c.hide();if(isForgotPassword)
{b.registerCallback(com.art.core.components.BaseButton.CLICK,function(btn){b.disable(_this.translatedContent.ProcessingText);c.disable();if(_this.forgotValidation())
{_this.retrievePassword(_this.fields.forgotEmail.getValue());}
else
{_this.enableButtons();}});c.enable(this.translatedContent.BackText);c.show();c.registerCallback(com.art.core.components.BaseButton.CLICK,function(){$("#"+_this.id+"_MainContent").html(_this.renderedLoginForm);_this.renderedLoginForm="";_this.getErrorMsgSelector().hide();_this.updateActionButton();});}
else if(this.selectedTab==this.LOGIN)
{b.registerCallback(com.art.core.components.BaseButton.CLICK,function(btn){b.disable(_this.translatedContent.ProcessingText);c.disable();if(_this.loginValidation()){_this.authenticate(_this.fields.loginEmail.getValue(),_this.fields.loginPassword.getValue());}
else
{_this.enableButtons();}});}
else
{b.registerCallback(com.art.core.components.BaseButton.CLICK,function(btn){b.disable(_this.translatedContent.ProcessingText);c.disable();if(_this.createValidation()){_this.doRegister(_this.fields.createEmail.getValue(),_this.fields.createPassword.getValue());}
else
{_this.enableButtons();}});}};com.art.core.components.LoginModal.prototype.validateAndTransmit=function(enterKey,valData,callback)
{var _this=this;if(enterKey.which==13||enterKey.keyCode==13){if(_this.loginValidation(valData)){if(_this.callbacks[callback]!=undefined)
{_this.callbacks[callback]();}}}};com.art.core.components.LoginModal.prototype.bindKeyDowns=function()
{var _this=this;$("#"+_this.id+"_password").bind('keydown',function(enterKey){_this.validateAndTransmit(enterKey,{username:$("#"+_this.id+"_username").val(),pass1:$("#"+_this.id+"_password").val(),pass2:false},_this.LOGIN_CLICKED);});$("#"+_this.id+"_regconfirmpassword").bind('keydown',function(enterKey){_this.validateAndTransmit(enterKey,{username:$("#"+_this.id+"_username").val(),pass1:$("#"+_this.id+"_password").val(),pass2:$("#"+_this.id+"_regconfirmpassword").val()},_this.REGISTER_CLICKED);});};com.art.core.components.LoginModal.prototype.forgotPasswordServiceResponse=function(serviceResponse)
{$('#'+this.id+'_forgetPassResponse').show();$('#'+this.id+'_forgetpasswordresponse').text(serviceResponse);};com.art.core.components.LoginModal.prototype.registerEvents=function()
{var _this=this;this.getErrorMsgSelector().hide();this.initStyles();this.tabToggle(this.selectedTab);this.bindKeyDowns();$("#"+this.id+"_loginTab").live('click',function(){_this.tabToggle(_this.LOGIN);});$("#"+this.id+"_registerTab").live('click',function(){_this.tabToggle(_this.REGISTER);});$(document).bind('keydown',function(escapeKey){if(escapeKey.which==27||escapeKey.keyCode==27){_this.doClose();}});$("#"+this.id+"_forgetPassLink").live('click',function(){_this.renderedLoginForm=$("#"+_this.id+"_MainContent").html();setTimeout(function(){var f=_this.getForgotPasswordFormTemplate();$("#"+_this.id+"_MainContent").html(f);$(".LoginModalTitle").addClass(_this.styles['title']);_this.updateActionButton(true);_this.getErrorMsgSelector().hide();},200);});$("#"+this.id+"_viewTerm").click(function(){window.open(_this.translatedContent.locationPrivacyPolicy,"","left=20,top=20,width=800,height=500,toolbar=0,resizable=0,menubar=0,scrollbars=1");});$('.'+this.styles.tabs).bind('mouseover',function(){if(!$(this).hasClass(_this.styles.selectedTab))
$(this).addClass(_this.styles.activeTabHover);});$('.'+this.styles.tabs).bind('mouseout',function(){if(!$(this).hasClass(_this.styles.selectedTab))
$(this).removeClass(_this.styles.activeTabHover);});this.base.registerEvents();this.fb=new com.art.core.utils.Facebook(this.service,'fb',this.config);this.fb.setLoginLink(this.serviceDetails.apiKey,this.serviceDetails.sessionId,"#facebookBtn",this.translatedContent.loginWithFacebook,true);this.fb.setLoginLink(this.serviceDetails.apiKey,this.serviceDetails.sessionId,"#regFacebookBtn",this.translatedContent.loginWithFacebook,true);this.fb.onLoginSuccess(function(response){response.success=response.artComResponse.OperationResponse.ResponseCode==200;setTimeout(function(){_this.doClose();},250);var ch=new com.art.core.cookie.Cookie(_this.cookieNames);ch.cookieSetLogin(response.artComResponse);com.art.core.vos.Environment.logIn();_this.loginCallback(response);});$("#"+this.id+"_tabs li:nth-child(3)").css("cursor","pointer");$("#"+this.id+"_tabs li:nth-child(3)").unbind("click");$("#"+this.id+"_tabs li:nth-child(3)").bind("click",function(){_this.doClose();});var isQuirksMode=$.browser.msie&&!jQuery.support.boxModel;if(isQuirksMode)
{$("input[name$='EmailAddressHint']").css("height","28px");$("input[name$='PasswordHint']").css("height","28px");}
if(this.startPassword)
$("#"+this.id+"_forgetPassLink").trigger('click');};com.art.core.components.LoginModal.prototype.initStyles=function()
{this.base.removeCloseButton();$("#"+this.id+"_tabs").replaceClass(this.styles['tabBar']);$("#"+this.id+"_registerTab").replaceClass(this.styles['tabs']);$("#"+this.id+"_registerTab a").replaceClass(this.styles['tabLinks']);$("#"+this.id+"_loginTab").replaceClass(this.styles['tabs']);$("#"+this.id+"_loginTab a").replaceClass(this.styles['tabLinks']);$("#"+this.id+"_loginTabContent").replaceClass(this.styles['container']);$("#"+this.id+"_registerTabContent").replaceClass(this.styles['container']);$(".LoginModalTitle").addClass(this.styles['title']);$("#"+this.id+"_loginTabContainer").css("margin-top",$.browser.msie?"-9px":"0px");$(".buttonBarTemplate").css({'padding-right':'20px','padding-bottom':'20px'});};com.art.core.components.LoginModal.prototype.restoreLoginForm=function()
{$("#"+this.id+"_MainContent").html(this.renderedLoginForm);this.mainActionButton.label=this.translatedContent.LogInText;this.mainActionButton.enable();this.base.removeButtonById(this.id+"_cancelbutton");};com.art.core.components.LoginModal.prototype.bindValidation=function()
{var inputValidation=new com.art.core.utils.InputValidation();var validateRequired=inputValidation.getRequired(this.translatedContent.ValidateEmailMissing);var validateEmail=inputValidation.getValidEmail(this.translatedContent.ValidateInvalidEmail);this.fields.loginEmail.setValidators([validateRequired,validateEmail]);this.fields.createEmail.setValidators([validateRequired,validateEmail]);this.fields.forgotEmail.setValidators([validateRequired,validateEmail]);validateRequired=inputValidation.getRequired(this.translatedContent.ValidatePasswordMissing);this.fields.loginPassword.setValidators([validateRequired]);this.fields.createPassword.setValidators([validateRequired]);validateRequired=inputValidation.getRequired(this.translatedContent.ValidateConfirmMissing);var match=inputValidation.getIsEqual(this.fields.createPassword,this.translatedContent.ValidatePasswordsDontMatch);this.fields.createPasswordConfirm.setValidators([validateRequired,match]);};com.art.core.components.LoginModal.prototype.clearErrorMessage=function()
{this.getErrorMsgSelector().text("");this.fields.loginEmail.clearError();this.fields.loginPassword.clearError();};com.art.core.components.LoginModal.prototype.setSuccessMessage=function(msg)
{this.getErrorMsgSelector().css({"backgroundColor":"#8ac184","color":"#FFFFFF"}).show().html('<div style="background-image:url(http://cache1.artprintimages.com/images/coreimages/greenCheckCircle.png);background-repeat:no-repeat;padding-left: 20px;height: 15px;padding-top: 1px;">'+msg+'</div>');this.enableButtons();};com.art.core.components.LoginModal.prototype.setErrorMessage=function(errorMessage)
{this.getErrorMsgSelector().css({"backgroundColor":"#F7D7C6","color":"#000000"}).show().text(errorMessage);this.enableButtons();};com.art.core.components.LoginModal.prototype.forgotValidation=function(){this.getErrorMsgSelector().hide();this.clearErrorMessage('');var u=this.fields.forgotEmail.inputValidation();if(u)
return true;else
return false;};com.art.core.components.LoginModal.prototype.createValidation=function(){this.getErrorMsgSelector().hide();this.clearErrorMessage('');var u=this.fields.createEmail.inputValidation();var p=this.fields.createPassword.inputValidation();var c=this.fields.createPasswordConfirm.inputValidation();if(u&&p&&c)
return true;else
return false;};com.art.core.components.LoginModal.prototype.loginValidation=function(){this.getErrorMsgSelector().hide();this.clearErrorMessage('');var u=this.fields.loginEmail.inputValidation();var p=this.fields.loginPassword.inputValidation();if(u&&p)
return true;else
return false;};com.art.core.components.LoginModal.prototype.setColor=function(color)
{return'color:'+color;};com.art.core.components.LoginModal.prototype.getForgotPasswordFormTemplate=function()
{return this.forgotPasswordFormTemplate.replace(/\$NAME/g,this.id).replace("$LOGINTITLE",this.translatedContent.forgotPasswordTitle).replace(/\[EMAILHINT]/gi,this.translatedContent.EmailAddressHint).replace(/\$FIELD1/gi,this.fields.forgotEmail.getTemplate());};com.art.core.components.LoginModal.prototype.getTemplate=function(zindex){var z=zindex!=undefined?"z-index:"+zindex+";":"z-index:1000";var dividerMarkup="<div id='contentDivider' style='border-bottom: 1px solid #CECECE;left: -20px;margin-bottom: 15px;margin-top: 15px;overflow: visible;position: relative;width: 320px;'></div>";var strLogin=this.loginTemplate.replace(/\$NAME/g,this.id).replace("$LOGINTITLE",this.translatedContent.loginTitle).replace(/\[EMAILHINT]/gi,this.translatedContent.EmailAddressHint).replace(/\[PASSWORDHINT\]/gi,this.translatedContent.PasswordHint).replace(/\[PASSWORDMISSINGHINT\]/gi,this.translatedContent.PasswordMissingText).replace(/\[DIVLINE\]/gi,dividerMarkup).replace(/\[LOGINTOFACEBOOK\]/gi,this.translatedContent.LoginToFacebook).replace("[FLDEMAIL]",this.fields.loginEmail.getTemplate()).replace("[FLDPWD]",this.fields.loginPassword.getTemplate()).replace(/\[CLSPWDHINT\]/gi,this.cssClass.link).replace("[CLSPWDHINTHOVER]",this.cssClass.linkHover);var strRegister=this.registerTemplate.replace(/\$NAME/g,this.id).replace("$REGISTERTITLE",this.translatedContent.registerTitle).replace(/\[EMAILHINT]/gi,this.translatedContent.EmailAddressHint).replace(/\[PASSWORDHINT\]/gi,this.translatedContent.PasswordHint).replace(/\[PASSWORDMISSINGHINT\]/gi,this.translatedContent.PasswordMissingText).replace(/\[DIVLINE\]/gi,dividerMarkup).replace(/\[REGFB\]/gi,this.translatedContent.RegWithFacebook).replace(/\[PRIVACYPOLICY\]/gi,this.translatedContent.PrivacyPolicy).replace(/\[CONFIRMPASSWORDHINT\]/gi,this.translatedContent.ConfirmPasswordHint).replace(/\$FIELD1/gi,this.fields.createEmail.getTemplate()).replace(/\$FIELD2/gi,this.fields.createPassword.getTemplate()).replace(/\$FIELD3/gi,this.fields.createPasswordConfirm.getTemplate()).replace(/\[CLSPWDHINT\]/gi,this.cssClass.link).replace("[CLSPWDHINTHOVER]",this.cssClass.linkHover);var str=this.template.replace(/\$NAME/g,this.id).replace("$loginContent",strLogin).replace("$registerContent",strRegister).replace("$ZNDX",z).replace("$CLOSECLS",this.cssClass.closeButton).replace("[TABSIGNUP]",this.translatedContent.tabSignup).replace("[TABLOGIN]",this.translatedContent.tabLogin).replace("$CLOSECLS",this.cssClass.closeButton).replace(/\$IMAGE_HOST/g,this.getImageHost());return str;};com.art.core.components.LoginModal.prototype.setStyle=function(key,value)
{this.styles[key]=value;};com.art.core.components.LoginModal.prototype.styles={tabBar:'login_tabbar',tabs:'login_tabs',tabLinks:'login_tablinks',tabLinksOver:'login_tablinksover',tabLinksOff:'login_tablinksoff',container:'login_container',title:'login_title',selectedTab:'login_selectedtab',activeTab:'login_activetab',activeTabHover:'login_activetabhover'};com.art.core.components.LoginModal.prototype.template="<ul id='$NAME_tabs'>"+"<li id='$NAME_loginTab'><a href='#tab1'>[TABLOGIN]</a></li>"+"<li id='$NAME_registerTab'><a href='#tab2'>[TABSIGNUP]</a></li>"+"<li id='$NAME_close'><div class='$CLOSECLS'></div></li>"+"</ul>"+"<div style='clear:both;font-size:0px;'></div>"+"<div id='$NAME_loginTabContainer' class='tab_container' style='$ZNDX;min-height:320px;'>"+"<div id='$NAME_loginTabContent' class='logintab_content'>$loginContent</div>"+"<div id='$NAME_registerTabContent' class='registertab_content'>$registerContent</div>"+"</div>";com.art.core.components.LoginModal.prototype.loginTemplate="<div id='$NAME_ErrorMsg' style='background-color:#F7D7C6;font-family:arial,sans-serif;font-size:12px;padding:5px;margin-bottom:5px;display:none;'></div>"
+"<div id='$NAME_MainContent'>"
+"<div id='$NAME_facebookTitle' class='LoginModalTitle'>[LOGINTOFACEBOOK]</div>"
+"<div id='facebookBtn' style='margin-top:5px;text-align:left;'></div>"
+"[DIVLINE]"
+"<div style='clear:both'></div>"
+"<div id='$NAME_Title' class='LoginModalTitle'>$LOGINTITLE</div>"
+"<div id='$NAME_loginfields'>"
+"   [FLDEMAIL]"
+"   [FLDPWD]"
+"</div>"
+"<div id='$NAME_forgetPassLink' style='float:left;cursor:pointer;font-size:13px;' class='[CLSPWDHINT]' onmouseover='this.className=\"[CLSPWDHINTHOVER]\"' onmouseout='this.className=\"[CLSPWDHINT]\"'>[PASSWORDMISSINGHINT]</div>"
+"<div style='clear:both'></div>"
+"</div>";com.art.core.components.LoginModal.prototype.forgotPasswordFormTemplate="<div id='$NAME_Title' class='LoginModalTitle'>$LOGINTITLE</div>"
+"<div id='$NAME_forgetPassForm' class='loginModalForgetPassword'>"
+"     <div style='margin-top:10px;margin-bottom:10px;'>"
+"         $FIELD1"
+"         <div style='margin: 5px;float:right;' id='$NAME_forgetPasswordButton' ></div>"
+"     </div>"
+"</div>"
+"<div id='$NAME_forgetPassResponse' class='loginModalForgetPassword'>"
+"     <div style='margin-top:10px;margin-bottom:10px;'>"
+"         <span id='$NAME_forgetpasswordresponse' style='float:left;#padding-top:8px;' ></span>"
+"         <div style='margin: 5px;float:right;' id='$NAME_forgetpasswordok' ></div>"
+"     </div>"
+"</div>";com.art.core.components.LoginModal.prototype.registerTemplate=""
+"<div id='$NAME_RegisterErrorMsg' style='background-color:#F7D7C6;font-family:arial,sans-serif;font-size:12px;padding:5px;margin-bottom:5px;display:none;'></div>"
+"<div id='$NAME_MainContent_reg'>"
+"    <div id='$NAME_regFacebookTitle' class='LoginModalTitle'>[REGFB]</div>"
+"    <div id='regFacebookBtn' style='margin-top:5px;text-align:left'></div>"
+"    [DIVLINE]"
+"    <div id='$NAME_Title' class='LoginModalTitle'>$REGISTERTITLE</div>"
+"    $FIELD1"
+"    $FIELD2"
+"    $FIELD3"
+"    <div class='clear'></div>"
+'    <div id="$NAME_viewTerm" style="float:left;cursor:pointer;font-size:13px;margin-top:47px;" class="[CLSPWDHINT]" onmouseover="this.className=\'[CLSPWDHINTHOVER]\'" onmouseout="this.className=\'[CLSPWDHINT]\'">'
+"[PRIVACYPOLICY]"
+"    </div>"
+"    <div class='clear'></div>"
+"</div>";com.art.core.components.LoginModal.prototype.getErrorMsgSelector=function()
{return this.selectedTab==this.LOGIN?$('#'+this.id+'_ErrorMsg'):$("#"+this.id+"_RegisterErrorMsg");};com.art.core.components.LoginModal.prototype.close=function(callback)
{var _this=this;this.closeCallback=callback;this.base.registerCallback(com.art.core.components.BaseModal.CLOSE_CLICKED,function()
{_this.doClose();});};com.art.core.components.LoginModal.prototype.getLoginAccountData=function(){return{username:this.fields.loginEmail.getValue(),password:this.fields.loginPassword.getValue()};};com.art.core.components.LoginModal.prototype.doClose=function()
{$("#"+this.id).unbind("keypress");$("#"+this.id).die();$("#"+this.id).remove();if(this.closeCallback!=undefined)
this.closeCallback();};com.art.core.components.LoginModal.displayLoginPopupStatic=function(apiKey,sessionId,serviceUrlAccountAuthApi,cssClass,translatedContent,tab)
{if(tab==undefined)
{tab=com.art.core.components.LoginModal.LOGIN;}
var tc={loginTitle:'Login with an Art.com Account',registerTitle:'Signup Using Your Email'};$.updateObject(tc,translatedContent);if(cssClass==undefined||typeof cssClass=='string')cssClass={};var lightboxId='art_x_lb';if($("#"+lightboxId).attr("id")!=lightboxId)
var lightbox=new com.art.core.components.LightBox(lightboxId,'body',.4);lightbox.zindex=20;lightbox.show();loginComponent={};loginComponent=new com.art.core.components.LoginModal('art_x_login',tc.loginTitle,tc.registerTitle,cssClass,tab);loginComponent.setServiceDetails({serviceUrlAccountAuthenticationApi:serviceUrlAccountAuthApi,sessionId:sessionId,apiKey:apiKey});$("body").append(loginComponent.render(21));loginComponent.initSubmitButtons();loginComponent.registerEvents();loginComponent.lightbox=lightbox;loginComponent.close(function(){lightbox.close();});return loginComponent;};com.art.core.components.LoginModal.prototype.login=function(callback)
{this.loginCallback=callback;};com.art.core.components.BaseComponent.extend(com.art.core.components.LoginModal.prototype);com.art.core.components.Logout=function(id,cssClass,translatedContent,cookieNames,configuration)
{this.init();this.id=id;this.cssClass=com.art.core.components.Logout.cssClass;$.updateObject(this.cssClass,cssClass);this.translatedContent=com.art.core.components.Logout.translatedContent;$.updateObject(this.translatedContent,translatedContent);this.cookieNames={};$.updateObject(this.cookieNames,cookieNames);com.art.core.components.Logout.cookieNames=this.cookieNames;this.nullValue=com.art.core.components.Logout.nullValue;this.cookieHelper=new com.art.core.cookie.Cookie(this.cookieNames);this.config={defaultFacebookAccountId:'133465040008099',defaultFBMissingBehavior:'load'};$.updateObject(this.config,configuration);};com.art.core.components.Logout.cssClass={};com.art.core.components.Logout.translatedContent={};com.art.core.components.Logout.cookieNames={};com.art.core.components.Logout.nullValue='';com.art.core.components.Logout.events={'LOGOUT':'LOGOUT'};com.art.core.components.Logout.logOutStatic=function(cookieNames,configuration)
{if(cookieNames==undefined||typeof cookieNames=='string')
{cookieNames={};}
var logout=new com.art.core.components.Logout('lg',{},{},cookieNames);logout.registerCallback(com.art.core.components.Logout.events.LOGOUT,function(){logout.reloadPage();});logout.logOut();};com.art.core.components.Logout.prototype.logOut=function()
{var _this=this;this.cookieHelper.cookieSetLogout();com.art.core.vos.Environment.logOut();try
{var fb=new com.art.core.utils.Facebook('','fb',this.config);fb.logout(function(){_this.logoutCallback();});}
catch(err)
{this.logoutCallback();}};com.art.core.components.Logout.prototype.logoutCallback=function()
{if(this["callbacks"][com.art.core.components.Logout.events.LOGOUT]!=undefined)
{this["callbacks"][com.art.core.components.Logout.events.LOGOUT]();}};com.art.core.components.Logout.prototype.reloadPage=function()
{var qs=['pagetype=ep','pagetype=ac','ac=true','logout=y'];var path=['/settings','/profile'];var l=window.location;var h=com.art.core.utils.StringUtil.replaceKeys(l.pathname,path,['','']);var s=com.art.core.utils.StringUtil.replaceKeys(l.search,qs,['','','','']);var a=l.hash;var url=h+s+(s.indexOf('logout=y')<0?(s.length>0?"&":"?")+"logout=y"+a:''+a);url=com.art.core.utils.StringUtil.replaceKeys(url,['&&','?&'],['&','?']);window.location=url;};com.art.core.components.BaseComponent.extend(com.art.core.components.Logout.prototype);com.art.core.components.ToolTip=function(markupId)
{com.art.core.components.BaseComponent.extend(this);this.NAME=com.art.core.components.ToolTip.NAME;this.callbacks=[];this.title="";this.message="";this.markupId=markupId+(Math.ceil(Math.random()*1000)).toString();this.toolTipContent={'title':'','message':''};};com.art.core.components.ToolTip.NAME="ToolTip";com.art.core.components.ToolTip.prototype.init=function(module)
{this.registerEvents(module);return this.getTemplate();};com.art.core.components.ToolTip.prototype.setToolTip=function(title,message)
{this.toolTipContent.title=title;this.toolTipContent.message=message;};com.art.core.components.ToolTip.prototype.render=function(x,y,w){var markup=this.getTemplate();$('body').append(markup);$("#"+this.markupId).css({'position':'absolute','background':'#F5F5DC','width':w,'top':y,'left':x,'padding':'10px','z-index':'10000','border':'1px solid #DCD4CD','font':'Times New Roman','color':'#000000','text-align':'left'});$("#"+this.markupId).addDropShadow('angle');};com.art.core.components.ToolTip.prototype.registerCallback=function(name,callback)
{this.callbacks[name]=callback;};com.art.core.components.ToolTip.prototype.destroy=function()
{$("#"+this.markupId).empty();$("#"+this.markupId).remove();};com.art.core.components.ToolTip.prototype.registerEvents=function(module)
{var _this=this;$("#"+this.markupId).live('click',function()
{});$("#"+this.markupId).live('mouseover',function(){_this.getToolTip();});$("#"+this.markupId).live('mouseout',function(){_this.destroy();});};com.art.core.components.ToolTip.prototype.getTemplate=function(){var returnValue="";returnValue+='<div class="toolTipComponent" id="'+this.markupId+'">'
+this.toolTipContent.message+'</div>';return returnValue;};com.art.core.components.ArtButton=function(id,buttonColor,label,arrowStyle)
{if(typeof id!="string")
throw new Error("ArtButton Failed! id param is NOT a string.");if((buttonColor!=com.art.core.components.ArtButton.ART_ORANGE)&&(buttonColor!=com.art.core.components.ArtButton.ART_BLUE)&&(buttonColor!=com.art.core.components.ArtButton.ART_SILVER)&&(buttonColor!=com.art.core.components.ArtButton.APC_RED)&&(buttonColor!=com.art.core.components.ArtButton.APC_BLUE))
throw new Error("ArtButton Failed! buttonColor specified is not supported.");var flavor;switch(buttonColor)
{case com.art.core.components.ArtButton.ART_ORANGE:case com.art.core.components.ArtButton.APC_RED:flavor=com.art.core.components.Button.Flavors.PRIMARY;break;case com.art.core.components.ArtButton.APC_BLUE:case com.art.core.components.ArtButton.ART_BLUE:flavor=com.art.core.components.Button.Flavors.SECONDARY;break;}
return new com.art.core.components.Button(id,label,com.art.core.components.Button.Sizes.MEDIUM,flavor,{});};com.art.core.components.ArtButton.ART_ORANGE='art_orange';com.art.core.components.ArtButton.ART_BLUE='art_blue';com.art.core.components.ArtButton.APC_RED='apc_red';com.art.core.components.ArtButton.APC_BLUE='apc_blue';com.art.core.components.Button=function(id,label,size,flavor,cssClass,fixedWidth)
{if(typeof id!="string")
throw new Error("Button Failed! id param is NOT a string.");this.NAME=com.art.core.components.Button.NAME;this.sizes={};this.sizes.SMALL=com.art.core.components.Button.Sizes.SMALL;this.sizes.MEDIUM=com.art.core.components.Button.Sizes.MEDIUM;this.sizes.LARGE=com.art.core.components.Button.Sizes.LARGE;this.flavors={};this.flavors.PRIMARY=com.art.core.components.Button.Flavors.PRIMARY;this.flavors.SECONDARY=com.art.core.components.Button.Flavors.SECONDARY;this.init();this.id=id;this.label=label;this.stateCurrent=this.states.enabled;this.eventCurrent=this.events.blur;this.label=label;if(fixedWidth!=undefined&&!isNaN(fixedWidth))
this.fixedWidth=fixedWidth;else
this.fixedWidth=0;if(size!=undefined)
this.size=size;else
this.size=this.sizes.MEDIUM;if(flavor!=undefined)
this.flavor=flavor;else
this.flavor=this.flavors.PRIMARY;this.cssClass=this.initializeCss();$.updateObject(this.cssClass,cssClass);};com.art.core.components.Button.NAME='Button';com.art.core.components.Button.Sizes={};com.art.core.components.Button.Sizes.SMALL='small';com.art.core.components.Button.Sizes.MEDIUM='medium';com.art.core.components.Button.Sizes.LARGE='large';com.art.core.components.Button.Flavors={};com.art.core.components.Button.Flavors.PRIMARY='primary';com.art.core.components.Button.Flavors.SECONDARY='secondary';com.art.core.components.Button.prototype.template="";com.art.core.components.Button.prototype.render=function(zindex)
{return this.getTemplate(zindex);};com.art.core.components.Button.prototype.loading=function(icon)
{this.disable();this.updateStyle(this.states.loading,this.eventCurrent);};com.art.core.components.Button.prototype.hide=function()
{$("#"+this.id).hide();};com.art.core.components.Button.prototype.click=function()
{$("#"+this.id).trigger('mouseup');};com.art.core.components.Button.prototype.show=function(buttonText)
{if(buttonText!=undefined)
$("#"+this.id).attr('value',buttonText);$("#"+this.id).show();};com.art.core.components.Button.prototype.disable=function(buttonText)
{this.updateStyle(this.states.disabled,this.eventCurrent);$("#"+this.id).attr('disabled','disabled');if(buttonText!=undefined)
$("#"+this.id).attr('value',buttonText);};com.art.core.components.Button.prototype.enable=function(buttonText)
{this.updateStyle(this.states.enabled,this.eventCurrent);$("#"+this.id).removeAttr('disabled');if(buttonText!=undefined)
$("#"+this.id).attr('value',buttonText);};com.art.core.components.Button.prototype.getPosition=function(state)
{var s=this.states[this.color][state];return s;};com.art.core.components.Button.prototype.getTemplate=function(zindex)
{var label=this.label;var z=zindex!=undefined?"z-index:"+zindex+";":"";return this.template.replace(/\[ID]/g,this.id).replace("[LABEL]",label).replace(/\[ZNDX]/g,z).replace('[CSSFIELD]',this.cssClass.enabled.blur.field).replace('[CSSLABEL]',this.cssClass.enabled.blur.label).replace('[FXWDTH]',(this.fixedWidth>0?'width: '+this.fixedWidth+'px;':''));};com.art.core.components.Button.prototype.getImageFile=function()
{var f=this.color.indexOf("art")>-1?this.ART_SPRITE:this.APC_SPRITE;return f;};com.art.core.components.Button.prototype.template='<input type="button" id="[ID]" class="[CSSFIELD]" value="[LABEL]" style="[ZNDX][FXWDTH]"/>';com.art.core.components.Button.prototype.updateStyle=function(state,event)
{var field=$('#'+this.id);var fieldLabel=$('#'+this.id+'_label');var fieldError=$('#'+this.id+"_err");var which={};switch(state)
{case this.states.error:which=this.cssClass.error;break;case this.states.disabled:which=this.cssClass.disabled;break;case this.states.loading:which=this.cssClass.loading;break;default:which=this.cssClass.enabled;break;}
switch(event)
{case this.events.focus:which=which.focus;break;case this.events.hover:which=which.hover;break;default:which=which.blur;break;}
field.removeClass();fieldLabel.removeClass();field.addClass(which.field);fieldLabel.addClass(which.label);};com.art.core.components.Button.prototype.registerEvents=function()
{var _this=this;var id="#"+this.id;$(id).unbind("mouseover");$(id).mouseover(function(){_this.updateStyle(_this.stateCurrent,_this.events.hover);});$(id).unbind("mouseout");$(id).mouseout(function(){_this.updateStyle(_this.stateCurrent,_this.events.blur);});$(id).mousedown(function(){});$(id).unbind("mouseup");$(id).mouseup(function(){this.blur();if(_this["callbacks"][_this.CLICK]!=undefined)
{_this["callbacks"][_this.CLICK]();}});$(id).die("click");$(id).live("click",function(e){e.stopPropagation();e.preventDefault();});$(id).bind('keydown',function(e){if(e.keyCode==13)
{if(_this.callbacks[_this.events.keypress.enter]!=undefined)
{_this.callbacks[_this.events.keypress.enter]();}}});var isQuirksMode=$.browser.msie&&!jQuery.support.boxModel;if(isQuirksMode)
{$(id+"_label").css("height","31px");$(id+"_rightcap").css("height","31px");}};com.art.core.components.Button.prototype.initializeCss=function()
{return{enabled:{blur:{field:this.flavor+' '+this.size},hover:{field:this.flavor+'hover '+this.size}},disabled:{blur:{field:this.flavor+' '+this.size+' disabled'},hover:{field:this.flavor+'hover '+this.size+' disabled'}},loading:{blur:{field:this.flavor+' '+this.size+' loading'},hover:{field:this.flavor+'hover '+this.size+' loading'}}};};com.art.core.components.Button.prototype.destroy=function()
{$("#"+this.id).die();$("#"+this.id).remove();};com.art.core.components.BaseButton.extend(com.art.core.components.Button.prototype);com.art.core.components.SlideShow=function(id,w,h,images,startingImageIndex){this.init();this.id=id;this.width=w;this.height=h;this.margin=40;this.backgroundColor="#FFFFFF";this.bottomControlsPadding=30;this.ADD_TO_CART_CLICKED=com.art.core.components.SlideShow.ADD_TO_CART_CLICKED;this.CLOSE_BUTTON_CLICKED=com.art.core.components.SlideShow.CLOSE_BUTTON_CLICKED;this.ESC_KEY_CLICKED=com.art.core.components.SlideShow.ESC_KEY_CLICKED;this.delayTimerID;this.requestTimeoutDuration=10*1000;this.shareBtn;this.controlsTimer;this.slideShowTimerID;this.mouseX=0;this.mouseY=0;this.images=images;this.imageDomain='http://pwl-vm-uapp01/ue/galleries_v2/assets/';this.slideShowToggle=true;this.slideShowControlsIsPaused=false;this.slideShowControls={play:{enabled:"-385px -157px",disabled:"-45px -565px",width:"17px",height:"20px"},pause:{enabled:"-450px -158px",disabled:"0px -565px",width:"14px",height:"18px"},previous:{enabled:"-348px -161px",disabled:"-90px -565px",width:"16px",height:"15px"},next:{enabled:"-419px -161px",disabled:"-120px -565px",width:"15px",height:"15px"}};this.slideShowCursor=startingImageIndex==undefined?-1:startingImageIndex-1;this.ssScrollDirectionOptions={LEFT:'left',RIGHT:'right'};this.ssScrollDirection=this.ssScrollDirectionOptions.LEFT;this.controlsInit=false;this.ssCurrentCursor=0;this.ssIsPaused=false;this.ssProcessing=false;this.ssCurrent;this.SlideShowNext;this.playPause=false;this.ssContainerWidth;this.ssContainerHeight;this.ssW=58;this.ssH=70;this.newImages;this.addToCartBtn;this.closeBtn;this.imageInfo;};com.art.core.components.SlideShow.ADD_TO_CART_CLICKED="slideShowAddToCart";com.art.core.components.SlideShow.CLOSE_BUTTON_CLICKED="slideShowCloseButtonClicked";com.art.core.components.SlideShow.ESC_KEY_CLICKED="escKeyClicked";com.art.core.components.SlideShow.prototype.getTotalImages=function(){return this.images.length;};com.art.core.components.SlideShow.prototype.registerEvents=function(){var x=setTimeout("");for(var i=0;i<=x;i++){clearTimeout(i);}
var _this=this;$("#"+this.id).bind("contextmenu",function(e){e.preventDefault();});this.centerControls();$("body").mousemove(function(e){if(e.pageX!=_this.mouseX&&e.pageY!=_this.mouseY)
{_this.mouseX=e.pageX;_this.mouseY=e.pageY;_this.hideShowMainControl();}});$("#"+this.id+"_CONTROL_BAR").live("click",function(e){e.preventDefault();e.stopPropagation();});$(window).resize(function(){if(typeof window.innerWidth!='undefined'){_this.width=window.innerWidth-_this.ssW;_this.height=window.innerHeight-_this.ssH;}
else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){_this.width=document.documentElement.clientWidth-_this.ssW;_this.height=document.documentElement.clientHeight-_this.ssH;}
$('#'+_this.id).css("width",_this.width);$('#'+_this.id).css("height",_this.height);_this.centerControls();});$("#ssCloseSlideshow").live("click",function(){_this.close();});$('.imgClip').live("click",function(event){event.stopPropagation();});$(document).bind('keydown',function(escapeKey){if(escapeKey.which==27||escapeKey.keyCode==27){_this.close();if(_this.callbacks[_this.ESC_KEY_CLICKED]!=null)
_this.callbacks[_this.ESC_KEY_CLICKED]();}});this.slideShowStartupMainControls();this.addToCartBtn.registerEvents();this.addToCartBtn.registerCallback(com.art.core.components.BaseButton.CLICK,function(){_this.callbacks[_this.ADD_TO_CART_CLICKED]();});this.closeBtn.registerEvents();this.closeBtn.registerCallback(com.art.core.components.BaseButton.CLICK,function(){_this.callbacks[_this.CLOSE_BUTTON_CLICKED]();});};com.art.core.components.SlideShow.prototype.close=function()
{clearTimeout(this.slideShowTimerID);$("body").unbind("mousemove");$("#"+this.id+"_CONTROL_BAR").die("click");$("#ssCloseSlideshow").die("click");$("#"+this.id).die();$("#"+this.id+"_CONTROL_BAR").remove();$("#"+this.id).remove();var x=setTimeout("");for(var i=0;i<=x;i++)
{clearTimeout(i);}};com.art.core.components.SlideShow.prototype.start=function(){this.loadImage();};com.art.core.components.SlideShow.prototype.appendImages=function(arr){this.newImages=arr;};com.art.core.components.SlideShow.prototype.loadImage=function(){clearTimeout(this.slideShowTimerID);var _this=this;if(this.ssProcessing)
return;this.ssProcessing=true;var _this=this;var randid="id_"+Math.round(Math.random()*10000);this.SlideShowNext=randid;if(this.ssScrollDirection==this.ssScrollDirectionOptions.LEFT){this.slideShowCursor=this.slideShowCursor==this.images.length-1?0:this.slideShowCursor+1;}
else{this.slideShowCursor=(this.slideShowCursor<=0)?this.images.length-1:this.slideShowCursor-1;}
$("#"+this.id+"_CLIP").append('<img id="'+randid+'" class="imgClip" src="'+this.images[this.slideShowCursor].url+'" style="position:absolute;left:0px"/>');var initPos=this.ssScrollDirection==this.ssScrollDirectionOptions.LEFT?$("#"+this.id+"_CLIP").width()+10:-($("#"+this.id+"_CLIP").width()+10);if(this.ssScrollDirection==this.ssScrollDirectionOptions.LEFT){if($("#"+randid).width()>initPos)
initPos=$("#"+randid).width();}
else{if(-$("#"+randid).width()<initPos)
initPos=-$("#"+randid).width();}
$("#"+randid).css("left",initPos+"px");$("#"+randid).live('click',function(){_this.playPauseToggle();});$("#"+randid).imagesLoaded(function(img){var newTop=Math.round(($("#"+_this.id+"_CLIP").height()-$("#"+randid).height())/2);$(this).unbind('load');$("#"+randid).css("top",newTop+"px");$(_this).addCenterOuterShadow();if(_this.controlsInit==false){_this.slideShowStartupMainControls('mySlideShow_CONTROL_BAR');_this.controlsInit=true;}
if(_this.images[_this.slideShowCursor].showMarkDownPrice==false||_this.images[_this.slideShowCursor].showMarkDownPrice==undefined){$("#ssImagePrice").css("margin-right","35px");var strPrice=_this.images[_this.slideShowCursor].price;$("#ssImagePrice").css("color","#000000");$("#ssImagePrice").css("font-weight","normal");$("#ssImagePrice").html(strPrice);$("#ssDiscountImagePrice").text('');}
else{$("#ssImagePrice").css("margin-right","15px");$("#ssImagePrice").css("font-weight","bold");var strDiscountPrice=_this.images[_this.slideShowCursor].DisplayMSRP;$("#ssDiscountImagePrice").html(strDiscountPrice);var strMarkDownPrice=_this.images[_this.slideShowCursor].price;$("#ssImagePrice").css("color","#EF4523");$("#ssImagePrice").html(strMarkDownPrice);}
$("#mySlideShow_AddToCartBtn").show();$('#addToCart').show();$('#mg-ooscontainer').html('');if(_this.images[_this.slideShowCursor].ItemStatus!=2)
{$("#ssImagePrice").html('');$("#ssDiscountImagePrice").text('');$('#addToCart').hide();$("#mySlideShow_AddToCartBtn").hide();trace("cs:"+_this.slideShowCursor+"oos:"+$('#mg-ooscontainer').length);if(_this.images[_this.slideShowCursor].ItemStatus==4)
{$('#mg-ooscontainer').html('Print temporarily out of stock');}
else if(_this.images[_this.slideShowCursor].ItemStatus==5)
{$('#mg-ooscontainer').html('Print no longer available');}}
var tmp=_this.ssCurrent;if(_this.ssCurrent!=undefined&&!_this.ssIsPaused){var left=_this.ssScrollDirection==_this.ssScrollDirectionOptions.LEFT?-$("#"+_this.id+"_CLIP").width():$("#"+_this.id+"_CLIP").width();$("#"+tmp).animate({"left":left+"px"},2000,function(){$("#"+tmp).die();$("#"+tmp).remove();});}
if(!_this.ssIsPaused){var newLeft=Math.round(($("#"+_this.id+"_CLIP").width()-$("#"+randid).width())/2);$("#"+_this.SlideShowNext).animate({"left":newLeft},2000,function(){$("#"+_this.ssCurrent).remove();_this.ssCurrent=_this.SlideShowNext;_this.SlideShowNext='';_this.ssScrollDirection=_this.ssScrollDirectionOptions.LEFT;_this.continueSlideShow();});}});};com.art.core.components.SlideShow.prototype.getCurrentImageIndex=function(){return this.slideShowCursor;};com.art.core.components.SlideShow.prototype.continueSlideShow=function(){this.ssProcessing=false;var _this=this;if(this.slideShowToggle&&!this.ssIsPaused){this.slideShowTimerID=setTimeout(function(){_this.loadImage();},4000);}};com.art.core.components.SlideShow.prototype.render=function(){return this.getTemplate();};com.art.core.components.SlideShow.prototype.centerControls=function(){var cbw=$("#"+this.id+"_CONTROL_BAR").width();var ssw=$("#"+this.id).width()-10;var newLeft=Math.round((ssw-cbw)/2);$("#"+this.id+"_CONTROL_BAR").css("left",newLeft);var cbh=$("#"+this.id+"_CONTROL_BAR").height();var ssh=$("#"+this.id).height();var newTop=Math.round(ssh-(cbh+this.bottomControlsPadding));$("#"+this.id+"_CONTROL_BAR").css("top",newTop);};com.art.core.components.SlideShow.prototype.hideShowMainControl=function()
{var _this=this;clearTimeout(this.controlsTimer);if($('#'+_this.id+'_CONTROL_BAR').is(':hidden'))
$('#'+_this.id+'_CONTROL_BAR').fadeIn();this.controlsTimer=setTimeout(function(){$('#'+_this.id+"_CONTROL_BAR").fadeOut();},1500);};com.art.core.components.SlideShow.prototype.getTemplate=function(){this.addToCartBtn=new com.art.core.components.ArtButton(this.id+"_AddToCartBtn",com.art.core.components.ArtButton.ART_ORANGE,'Add To Cart');this.closeBtn=new com.art.core.components.ArtButton(this.id+"_CloseBtn",com.art.core.components.ArtButton.ART_BLUE,'Close Slideshow');var tmp=this.shellTemplate.replace("$CLIP",this.clipTemplate)+this.controlsTemplate.replace("$CONTROL_BAR",this.populateControlBar()).replace(/\$IMAGE_HOST/g,this.getImageHost());var str=tmp.replace("$SSW",this.width).replace("$SSH",this.height).replace(/\$ID/g,this.id).replace("$ADD_BTN",this.addToCartBtn.render()).replace("$CLOSE_BTN",this.closeBtn.render()).replace(/\$IMAGE_HOST/g,this.getImageHost());return str;};com.art.core.components.SlideShow.prototype.slideShowStartupMainControls=function(){var _this=this;var p=$('#SlideShowPrev');this.setSlideShowHover(p,'previous');p.live('click',function(){_this.resetPlayPause();clearTimeout(_this.slideShowTimerID);_this.ssScrollDirection=_this.ssScrollDirectionOptions.RIGHT;_this.loadImage();});var pl=$('#SlideShowPlayPause');this.setSlideShowHover(pl,'pause');pl.live('click',function(){_this.playPauseToggle();});var n=$('#SlideShowNext');this.setSlideShowHover(n,'next');n.live('click',function(){_this.resetPlayPause();clearTimeout(_this.slideShowTimerID);_this.ssScrollDirection=_this.ssScrollDirectionOptions.LEFT;_this.loadImage();});};com.art.core.components.SlideShow.prototype.attachExternalComponent=function(str)
{$("#externalButtonContainer").html(str);};com.art.core.components.SlideShow.prototype.resetPlayPause=function(){if(this.ssIsPaused){this.ssIsPaused=false;this.setSlideShowHover($('#SlideShowPlayPause'),'pause');var _this=this;$('#SlideShowPlayPause').die();$('#SlideShowPlayPause').live('click',function(){_this.playPauseToggle();});_this.resetPlayPause();}};com.art.core.components.SlideShow.prototype.playPauseToggle=function(){this.ssIsPaused=!this.ssIsPaused;if(this.ssIsPaused){clearTimeout(this.slideShowTimerID);}
else{this.loadImage();}
var key=this.ssIsPaused?'play':'pause';var _this=this;this.setSlideShowHover($('#SlideShowPlayPause'),key);$('#SlideShowPlayPause').live('click',function(){_this.playPauseToggle();});};com.art.core.components.SlideShow.prototype.setSlideShowHover=function(obj,key){var _this=this;obj.css("backgroundPosition",this.slideShowControls[key].enabled);obj.unbind('mousedown');obj.unbind('mouseup');obj.die();obj.mousedown(function(){obj.css("backgroundPosition",_this.slideShowControls[key].disabled);});obj.mouseup(function(){obj.css("backgroundPosition",_this.slideShowControls[key].enabled);});};com.art.core.components.SlideShow.prototype.shellTemplate="<div id='$ID' style='height:$SSHpx;'>$CLIP</div>";com.art.core.components.SlideShow.prototype.clipTemplate="<div id='$ID_CLIP' style='height:100%;overflow:hidden;position:relative;'></div>";com.art.core.components.SlideShow.prototype.getControlButtons=function(){var controls="<div id='SlideShowButtons'>"+"<div id='SlideShowPrev' style='background-image:url($IMAGE_HOST/images/mygallery/mygalleries_sprite_branding.png);'></div>"+"<div id='SlideShowPlayPause' style='background-image:url($IMAGE_HOST/images/mygallery/mygalleries_sprite_branding.png);'></div>"+"<div id='SlideShowNext' style='background-image:url($IMAGE_HOST/images/mygallery/mygalleries_sprite_branding.png);'></div>"+"</div>";return controls;};com.art.core.components.SlideShow.prototype.populateControlBar=function(){var Price="<div id='ssImagePrice'></div>"
+"<div id='mg-ooscontainer'></div>"
+"<div id='ssDiscountImagePrice'></div>";var closeBtn="<div id='closeSlideShow'>$CLOSE_BTN</div>";var addToCartBtn="<div id='addToCart'>$ADD_BTN</div>";var controlBar="<div id='controlbar'>"+
this.getControlButtons()+
closeBtn+
addToCartBtn+
Price+"<div style='clear:both;'></div></div>";return controlBar;};com.art.core.components.SlideShow.prototype.controlsTemplate="<div id='$ID_CONTROL_BAR'>$CONTROL_BAR</div>";com.art.core.components.BaseComponent.extend(com.art.core.components.SlideShow.prototype);com.art.core.components.LightBox=function(id,target,opacity){this.init();this.id=id;this.target=target;this.opacity=opacity;this.CLICK=com.art.core.components.LightBox.CLICK;this.zindex=-1;};com.art.core.components.LightBox.CLICK="LightBoxClicked";com.art.core.components.LightBox.NAME="LightBox";com.art.core.components.LightBox.prototype.opacity=0.4;com.art.core.components.LightBox.prototype.getTemplate=function()
{return this.template.replace('$ID',this.id).replace("$CONTENTS","").replace(/\$IMAGE_HOST/g,this.getImageHost());};com.art.core.components.LightBox.prototype.close=function(){$("#"+this.id).die("click");$("#"+this.id).unbind("click");$("#"+this.id).remove();$("#"+this.id).empty();};com.art.core.components.LightBox.prototype.getDocHeight=function(){var calc=Math.max($(document).height(),$(window).height(),document.documentElement.clientHeight);if($.browser.msie&&parseInt($.browser.version)==7&&(calc>3000))
{calc=3000;}
return calc;};com.art.core.components.LightBox.prototype.getDocWidth=function(){return Math.max($(document).width(),$(window).width(),document.documentElement.clientWidth);};com.art.core.components.LightBox.prototype.render=function(){this.show();};com.art.core.components.LightBox.prototype.show=function()
{var theTarget=this.target=='body'?this.target:'#'+this.target;if($("#"+this.id).width()==null)
$(theTarget).append(this.getTemplate());var _this=this;var nw=(this.target=="body")?this.getDocWidth():parseInt($(this.target).width())+"px";var nh=(this.target=="body")?this.getDocHeight():parseInt($(this.target).height())+"px";$("#"+this.id).css({"position":"absolute","top":"0px","left":"0px","background-color":"#000000","z-index":_this.getLightBoxZIndex(),"height":nh,"width":nw,"filter":"alpha (opacity="+this.opacity+")","filter":"progid:DXImageTransform.Microsoft.Alpha(style=0, opacity="+(this.opacity*100)+")","-moz-opacity":this.opacity,"opacity":this.opacity,"-khtml-opacity":this.opacity});var _this=this;if(this.target=='body')
{$(window).resize(function(){$("#"+_this.id).css({"height":_this.getDocHeight(),"width":_this.getDocWidth()});});}};com.art.core.components.LightBox.prototype.changeOpacity=function(opacity)
{this.opacity=opacity;$("#"+this.id).css({"filter":"alpha (opacity="+this.opacity+")","filter":"progid:DXImageTransform.Microsoft.Alpha(style=0, opacity="+(this.opacity*100)+")","-moz-opacity":this.opacity,"opacity":this.opacity,"-khtml-opacity":this.opacity});};com.art.core.components.LightBox.prototype.setLightBoxZIndex=function(value)
{if(value!=undefined)
{this.zindex=value;}
else
{var _this=this;var count=0;$("*:visible").each(function(){if($(this).attr('id')!=_this.id)
{var zindex=parseInt($(this).css("z-index"));if(zindex>=_this.zindex&&zindex!=Number.NaN)
{_this.zindex=zindex+1;}}
count++;});if(this.zindex==-1)
this.zindex=1;}};com.art.core.components.LightBox.prototype.getLightBoxZIndex=function()
{if(this.zindex==-1)
this.setLightBoxZIndex();return this.zindex;};com.art.core.components.LightBox.prototype.registerEvents=function()
{var _this=this;$("#"+this.id).unbind("click");$("#"+this.id).click(function(){_this.close();if(_this.callbacks[_this.CLICK]!=undefined)
_this.callbacks[_this.CLICK]();});};com.art.core.components.LightBox.prototype.template='<div id="$ID" class="core_lightbox"></div>';com.art.core.components.BaseComponent.extend(com.art.core.components.LightBox.prototype);com.art.core.components.CheckBox=function(id,value,label,isSelected){this.init();this.id=id;this.value=value;this.label=label;this.NAME=com.art.core.components.CheckBox.NAME;this.selected=isSelected==true;this.CHECKED=com.art.core.components.CheckBox.CHECKED;this.enabled=true;};com.art.core.components.CheckBox.NAME="CheckBox";com.art.core.components.CheckBox.CHECKED="CheckBoxChecked";com.art.core.components.CheckBox.prototype.registerEvents=function()
{if(!this.enabled)
return;var _this=this;$("#"+this.id).mouseover(function(){var pos=_this.selected?'-412px -44px':'-358px -44px';$(this).css('background-position',pos);});$("#"+this.id).mouseout(function(){var pos=_this.selected?'-394px -44px':'-340px -44px';$(this).css('background-position',pos);});$("#"+this.id).mousedown(function(){var pos=_this.selected?'-430px -44px':'-376px -44px';$(this).css('background-position',pos);});$("#"+this.id).mouseup(function(e){_this.toggle();});$("#"+this.id).live("click",function(e){e.stopPropagation();e.preventDefault();});};com.art.core.components.CheckBox.prototype.toggle=function()
{this.selected=!this.selected;var pos=this.selected?'-394px -44px':'-340px -44px';$("#"+this.id).css('background-position',pos);if(this.callbacks[this.CHECKED]!=undefined)
this.callbacks[this.CHECKED](this);};com.art.core.components.CheckBox.prototype.enable=function(bool)
{this.enabled=bool;var opacity=bool?1:.3;$("#"+this.id).css("opacity",opacity);$("#"+this.id).unbind("mouseup");$("#"+this.id).unbind("mousedown");$("#"+this.id).unbind("mouseout");$("#"+this.id).unbind("mouseover");$("#"+this.id).unbind("click");this.registerEvents();};com.art.core.components.CheckBox.prototype.getTemplate=function()
{var pos=this.selected?'-394px -44px':'-340px -44px';return this.template.replace('$ID',this.id).replace("$POS",pos).replace(/\$IMAGE_HOST/g,this.getImageHost());};com.art.core.components.CheckBox.prototype.render=function(){return this.getTemplate();};com.art.core.components.CheckBox.prototype.registerCallback=function(eventName,callback){this.callbacks[eventName]=callback;};com.art.core.components.CheckBox.prototype.template='<div id="$ID" style="width:18px;height:19px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png); background-repeat:no-repeat;background-position:$POS"></div>';com.art.core.components.BaseComponent.extend(com.art.core.components.CheckBox.prototype);com.art.core.components.OptionButton=function(id,label,w,h,options,icon){this.init();this.id=id;this.label=label;this.width=w;this.height=h;this.options=options;this.icon=icon;this.menuIsOpen=false;this.hovers={tl:{position:"-340px -88px"},tm:{position:"-341px -88px"},tr:{position:"-556px -88px"},ml:{position:"-340px -90px"},mm:{position:"-341px -90px"},mr:{position:"-556px -90px"},bl:{position:"-340px -214px"},bm:{position:"-341px -214px"},br:{position:"-556px -214px"}};this.generateUIDs();this.offsetObject;this.menuWidth=100;this.optionsSelectedMap={};this.closeTimer;this.MENU_OPENED=com.art.core.components.OptionButton.MENU_OPENED;this.MENU_CLOSED=com.art.core.components.OptionButton.MENU_CLOSED;};com.art.core.components.OptionButton.NAME="OptionButton";com.art.core.components.OptionButton.MENU_OPENED="optionButtonOpened";com.art.core.components.OptionButton.MENU_CLOSED="optionButtonClosed";com.art.core.components.OptionButton.HOVER="hover";com.art.core.components.OptionButton.FLYOUT_ITEM_CLICK="flyoutItemClicked";com.art.core.components.OptionButton.COLOR_PICKER_CLICK="colorPickerItemClicked";com.art.core.components.OptionButton.prototype.render=function(){return this.getTemplate();};com.art.core.components.OptionButton.prototype.generateUIDs=function()
{for(var key in this.hovers)
{this.hovers[key]["uid"]=com.art.core.utils.StringUtil.generateUID();}};com.art.core.components.OptionButton.prototype.registerEvents=function(){var _this=this;$("#"+this.id).live("click",function(){if(this.id!=null&&this.id!=undefined){$("#"+this.id+"_toggle").show();}});$("#"+this.id).mouseleave(function(){if(this.id!=null&&this.id!=undefined){switch(this.id){case"background":case"sortby":case"privacy":case"share":$("#"+this.id).removeClass("dynamicRightMenuContainer");$("#"+this.id+"_toggle").hide();break;default:}}});$("#"+this.id).mouseenter(function(){if(this.id!=null&&this.id!=undefined){switch(this.id){case"background":case"sortby":case"privacy":case"share":$("#"+this.id).addClass("dynamicRightMenuContainer");break;default:}}
var obj={typeOfData:"FlyoutLinkClicked"};if(_this.callbacks[com.art.core.components.OptionButton.CLICK]!=undefined){_this.callbacks[com.art.core.components.OptionButton.CLICK](obj);}});var old="";var flag=false;$("#"+this.id+"_toggle li").live("click",function(){if(_this.callbacks[com.art.core.components.OptionButton.COLOR_PICKER_CLICK]!=null&&_this.callbacks[com.art.core.components.OptionButton.COLOR_PICKER_CLICK]!=undefined){if(flag==true){$("#"+old).add(document.getElementById("a")).css("border","1px solid White");$("#"+this.id).add(document.getElementById("a")).css("border","1px solid Red");old=this.id;flag=true;}
if(flag==false){old=this.id;$("#"+old).add(document.getElementById("a")).css("border","1px solid Red");flag=true;}
_this.callbacks[com.art.core.components.OptionButton.COLOR_PICKER_CLICK](this);}});$("#"+this.id+"_toggle a").live("click",function(){if(_this.callbacks[com.art.core.components.OptionButton.FLYOUT_ITEM_CLICK]!=null&&_this.callbacks[com.art.core.components.OptionButton.FLYOUT_ITEM_CLICK]!=undefined){$(".imgTick").css("visibility","hidden");$("#img"+this.id).css("visibility","visible");_this.callbacks[com.art.core.components.OptionButton.FLYOUT_ITEM_CLICK](this);}});};com.art.core.components.OptionButton.prototype.registerEvents=function()
{var _this=this;$("#"+this.id).mouseenter(function(){if(_this.menuIsOpen)
{clearTimeout(_this.closeTimer);}
else
{$(this).css("cursor","pointer");for(var key in _this.hovers)
{$("#"+_this.hovers[key].uid).css("background-position",_this.hovers[key].position);}}});$("#"+this.id).mouseleave(function(){if(!_this.menuIsOpen)
{$(this).css("cursor","default");$(this).find("td").css("background-position","1000px 1000px");}});$("#"+this.id).unbind("click");$("#"+this.id).click(function(e){_this.menuIsOpen=!_this.menuIsOpen;if(_this.menuIsOpen)
{_this.offsetObject=$(this).offset();var tmpl=_this.getMenuContainerTemplate();$("body").append(tmpl);_this.positionMenu();_this.registerOptionEvents();if(_this.callbacks[_this.MENU_OPENED])
_this.callbacks[_this.MENU_OPENED]();}
else
{$("#"+this.id+"_menuContainer").remove();if(_this.callbacks[_this.MENU_CLOSED])
_this.callbacks[_this.MENU_CLOSED]();}});};com.art.core.components.OptionButton.prototype.positionMenu=function()
{var _this=this;$("#"+this.id+"_menuContainer").mouseleave(function(){_this.initiateClose();});var t=Math.round(this.offsetObject.top)+this.height;var l=Math.round(this.offsetObject.left);$("#"+this.id+"_menuContainer").css("top",t);$("#"+this.id+"_menuContainer").css("left",l);};com.art.core.components.OptionButton.prototype.initiateClose=function()
{var _this=this;this.closeTimer=setTimeout(function(){_this.closeMenu();},100);};com.art.core.components.OptionButton.prototype.closeMenu=function()
{if(this.menuIsOpen)
{this.menuIsOpen=false;$("#"+this.id).find("td").css("background-position","1000px 1000px");$("#"+this.id).css("cursor","default");$("#"+this.id+"_menuContainer").remove();if(this.callbacks[this.MENU_CLOSED])
this.callbacks[this.MENU_CLOSED]();}};com.art.core.components.OptionButton.prototype.registerOptionEvents=function()
{var menu=$("#"+this.id+"_menuContainer");menu.addDropShadow();this.bindAllEvents(menu);};com.art.core.components.OptionButton.prototype.onMouseEnter=function(obj)
{obj.css("cursor","pointer");obj.css("background-color","#DDDDDD");};com.art.core.components.OptionButton.prototype.onMouseLeave=function(obj)
{obj.css("background-color","#FFFFFF");};com.art.core.components.OptionButton.prototype.onMouseDown=function(obj)
{obj.parent().find('li').css("background-color","#FFFFFF");obj.parent().find('li').css("text-shadow","0px 0px #FFFFFF");obj.parent().find('li>div').css("background-position","1000px 1000px");obj.parent().find('li').css("font-weight","normal");obj.css("background-color","#5E5F5F");obj.find("div").css("background-position","-58px -76px");obj.css("color","#FFFFFF");var id=obj.attr("id");this.markAsSelected(id);};com.art.core.components.OptionButton.prototype.onMouseUp=function(obj)
{this.bindAllEvents(obj.parent());this.unbindAllEvents(obj);this.setSelectedIcon(obj);this.closeMenu();};com.art.core.components.OptionButton.prototype.setSelectedIcon=function(obj)
{if(obj!=undefined)
{obj.css("background-color","#FFFFFF");obj.css("color","#333333");obj.css("font-weight","bold");obj.css("cursor","default");obj.css("text-shadow","0px 1px #FFFFFF");obj.find("div").css("background-position","-58px -92px");}};com.art.core.components.OptionButton.prototype.bindAllEvents=function(obj)
{var _this=this;obj.find('li').unbind("mouseenter");obj.find('li').unbind("mouseleave");obj.find('li').unbind("mousedown");obj.find('li').unbind("mouseup");obj.find('li').mouseenter(function(){_this.onMouseEnter($(this));});obj.find('li').mouseleave(function(){_this.onMouseLeave($(this));});obj.find('li').mousedown(function(){_this.onMouseDown($(this));});obj.find('li').mouseup(function(){_this.onMouseUp($(this));});};com.art.core.components.OptionButton.prototype.unbindAllEvents=function(obj)
{obj.unbind("mouseenter");obj.unbind("mouseleave");obj.unbind("mousedown");obj.unbind("mouseup");};com.art.core.components.OptionButton.prototype.markAsSelected=function(selectedKey)
{if(this.optionsSelectedMap[selectedKey]==undefined)
throw new Error("OptionButton failed! Selected item has invalid value!");for(var key in this.optionsSelectedMap)
{this.optionsSelectedMap[key]=false;}
this.optionsSelectedMap[selectedKey]=true;};com.art.core.components.OptionButton.prototype.getMenuContainerTemplate=function()
{var str="<ul style='margin-top:1px;'>";for(var i=0;i<this.options.length;i++)
{var opt=this.options[i];if(opt.uid==undefined)
{opt.uid=com.art.core.utils.StringUtil.generateUID(10);this.optionsSelectedMap[opt.uid]=opt.selected;}
this.menuWidth=opt.label.length>10?opt.label.length*10:this.menuWidth;var fontWeight=this.optionsSelectedMap[opt.uid]?"bold;":"normal;";var bgPos=this.optionsSelectedMap[opt.uid]?"-58px -92px;":"1000px 1000px;";str+="<li id='"+opt.uid+"' style='font-weight:"+fontWeight+"px;list-style: none outside none;background-color:#FFFFFF;padding-top:2px;padding-bottom:3px;margin-bottom:1px;margin-left:-39px;padding-left:3px;'>"+"<div style='margin-right:8px;display:inline-block;background-image: url($IMAGE_HOST/images/MyGallery/my_galleries_sprite.png);background-position:"+bgPos+"background-repeat: no-repeat;height:16px;width:16px;'/>"+
opt.label+"</li>";}
str+="</ul>";var mh=this.options.length*26;return this.menuContainer.replace("$ID",this.id).replace("$MENU",str).replace("$MW",this.menuWidth).replace("$MH",mh).replace("$ZINDEX",this.zindex);};com.art.core.components.OptionButton.prototype.getTemplate=function()
{var adjWidth=this.width-4;var adjHeight=this.height-4;var str=this.template.replace("$ID",this.id).replace("$W",this.width).replace("$H",this.height).replace("$LABEL",this.label).replace(/\$ADJ_W/g,adjWidth).replace(/\$ADJ_H/g,adjHeight).replace(/\$IMAGE_HOST/g,this.getImageHost());for(var key in this.hovers)
{str=str.replace("$"+key,this.hovers[key].uid);}
return str;};com.art.core.components.OptionButton.prototype.menuContainer="<div id='$ID_menuContainer' style='position:absolute; background-color:#FFFFFF;border:1px solid #999999; width:$MWpx;height:$MHpx;z-index:$ZINDEX;top:100px;left:100px;padding-right:1px;'>$MENU</div>";com.art.core.components.OptionButton.prototype.template="<table id='$ID' style='width:$Wpx;height:$Hpx;padding:0px;margin:0px;' cellspacing='0'>"+"<tr><td id='$tl' style='padding:0px;width:2px;height:2px; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-340px 1000px;'></td>"+"<td id='$tm' style='padding:0px;width:$ADJ_Wpx;height:2px; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-341px 1000px;'></td>"+"<td id='$tr' style='padding:0px;width:2px;height:2px; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-556px 1000px;'></td>"+"</tr><tr>"+"<td id='$ml' style='padding:0px;width:2px;height:$ADJ_Hpx; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-340px 1000px;'></td>"+"<td id='$mm' style='padding:0px;width:$ADJ_Wpx;height:$ADJ_Hpx; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-341px 1000px;text-align:center;'>$LABEL</td>"+"<td id='$mr' style='padding:0px;width:2px;height:$ADJ_Hpx; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-556px 1000px;'></td>"+"</tr><tr>"+"<td id='$bl' style='padding:0px;width:2px;height:2px; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-340px 1000px;'></td>"+"<td id='$bm' style='padding:0px;width:$ADJ_Wpx;height:2px; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-341px 1000px;'></td>"+"<td id='$br' style='padding:0px;width:2px;height:2px; background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-repeat:no-repeat;background-position:-556px 1000px;'></td>"+"</tr></table>";com.art.core.components.BaseComponent.extend(com.art.core.components.OptionButton.prototype);com.art.core.components.DualOptionToggleButton=function(id,leftLabel,rightLabel,leftValue,rightValue,sideSelected){this.id=id;this.rightLabel=rightLabel;this.leftLabel=leftLabel;this.rightValue=rightValue;this.leftValue=leftValue;this.sideSelected=sideSelected==undefined||sideSelected==com.art.core.components.DualOptionToggleButton.LEFT_SIDE?com.art.core.components.DualOptionToggleButton.LEFT_SIDE:com.art.core.components.DualOptionToggleButton.RIGHT_SIDE;this.callbacks={};this.CLICK=com.art.core.components.DualOptionToggleButton.CLICK;this.LEFT_SIDE=com.art.core.components.DualOptionToggleButton.LEFT_SIDE;this.RIGHT_SIDE=com.art.core.components.DualOptionToggleButton.RIGHT_SIDE;this.NAME=com.art.core.components.DualOptionToggleButton.NAME;this.toggle={};this.toggle[this.LEFT_SIDE]={selected:'0px -322px',active:'0px -380px',over:'0px -409px',down:'0px -438px'};this.toggle[this.RIGHT_SIDE]={selected:'-5px -322px',active:'-5px -380px',over:'-5px -409px',down:'-5px -438px'};com.art.core.components.BaseComponent.extend(this);};com.art.core.components.DualOptionToggleButton.NAME="DualOptionToggleButton";com.art.core.components.DualOptionToggleButton.LEFT_SIDE="DualOptionToggleButtonLeftSide";com.art.core.components.DualOptionToggleButton.RIGHT_SIDE="DualOptionToggleButtonRightSide";com.art.core.components.DualOptionToggleButton.CLICK="DualOptionToggleButtonCLICK";com.art.core.components.DualOptionToggleButton.prototype.getValue=function()
{return this.sideSelected==this.LEFT_SIDE?this.leftValue:this.rightValue;};com.art.core.components.DualOptionToggleButton.prototype.getActiveSide=function()
{return this.sideSelected==this.LEFT_SIDE?$("#rightButton_"+this.id):$("#leftButton_"+this.id);};com.art.core.components.DualOptionToggleButton.prototype.getDeactiveSide=function()
{return this.sideSelected==this.LEFT_SIDE?$("#leftButton_"+this.id):$("#rightButton_"+this.id);};com.art.core.components.DualOptionToggleButton.prototype.getState=function(state)
{var side=this.sideSelected==this.LEFT_SIDE?this.RIGHT_SIDE:this.LEFT_SIDE;return this.toggle[side][state];};com.art.core.components.DualOptionToggleButton.prototype.getDeactiveState=function(state)
{var side=this.sideSelected==this.LEFT_SIDE?this.LEFT_SIDE:this.RIGHT_SIDE;return this.toggle[side][state];};com.art.core.components.DualOptionToggleButton.prototype.setTextColors=function()
{var dSide=this.sideSelected==this.LEFT_SIDE?$("#leftButton_"+this.id):$("#rightButton_"+this.id);dSide.css("color","#FFFFFF");var aSide=this.sideSelected==this.LEFT_SIDE?$("#rightButton_"+this.id):$("#leftButton_"+this.id);aSide.css("color","#000000");};com.art.core.components.DualOptionToggleButton.prototype.resetButtons=function()
{$("#rightButton_"+this.id).unbind("mouseover");$("#rightButton_"+this.id).unbind("mouseout");$("#rightButton_"+this.id).unbind("mousedown");$("#rightButton_"+this.id).unbind("mouseup");$("#rightButton_"+this.id).die();$("#leftButton_"+this.id).unbind("mouseover");$("#leftButton_"+this.id).unbind("mouseout");$("#leftButton_"+this.id).unbind("mousedown");$("#leftButton_"+this.id).unbind("mouseup");$("#leftButton_"+this.id).die();};com.art.core.components.DualOptionToggleButton.prototype.registerEvents=function()
{this.resetButtons();this.setTextColors();var _this=this;var aSide=this.getActiveSide();var dSide=this.getDeactiveSide();aSide.css("cursor","pointer");aSide.css('background-position',_this.getState('active'));dSide.css('background-position',_this.getDeactiveState('selected'));dSide.css("cursor","default");aSide.mouseover(function(){aSide.css('background-position',_this.getState('over'));});aSide.mouseout(function(){aSide.css('background-position',_this.getState('active'));});aSide.mousedown(function(){aSide.css('background-position',_this.getState('down'));});aSide.mouseup(function(){_this.sideSelected=_this.sideSelected==_this.LEFT_SIDE?_this.RIGHT_SIDE:_this.LEFT_SIDE;if(_this.callbacks[_this.CLICK]!=undefined)
_this.callbacks[_this.CLICK](_this.getValue());_this.registerEvents();});};com.art.core.components.DualOptionToggleButton.prototype.getTemplate=function()
{var aSide=this.getActiveSide();var dSide=this.getDeactiveSide();var leftPos=this.sideSelected==this.LEFT_SIDE?'0px -322px':'0px -380px';var rightPos=this.sideSelected==this.LEFT_SIDE?'-5px -380px':'-5px -322px';var rightCapPos=this.sideSelected==this.LEFT_SIDE?"-306px -380px":"-306px -264px";var rightColor=this.sideSelected==this.LEFT_SIDE?"#000000":"#FFFFFF";var leftColor=this.sideSelected==this.LEFT_SIDE?"#FFFFFF":"#000000";return this.template.replace(/\$ID/g,this.id).replace("$LEFT_LABEL",this.leftLabel).replace("$RIGHT_LABEL",this.rightLabel).replace("$RCAP",rightCapPos).replace("$LPOS",leftPos).replace("$RPOS",rightPos).replace("$RCOLOR",rightColor).replace("$LCOLOR",leftColor).replace(/\$IMAGE_HOST/g,this.getImageHost());};com.art.core.components.DualOptionToggleButton.prototype.render=function(){return this.getTemplate();};com.art.core.components.DualOptionToggleButton.prototype.registerCallback=function(eventName,callback){this.callbacks[eventName]=callback;};com.art.core.components.DualOptionToggleButton.prototype.template="<div id='$ID' style='display:inline-block;'>"+"<div id='leftButton_$ID' style='padding-left:15px; padding-top:5px; padding-right:10px;float:left;height:24px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:$LPOS;background-repeat:no-repeat; color:$LCOLOR;'>$LEFT_LABEL</div>"+"<div id='centerDivider_$ID' style='float:left;width:1px;height:29px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:0px -351px;'></div>"+"<div id='rightButton_$ID' style='padding-top:5px; padding-left:10px;padding-right:15px;float:left;height:24px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:$RPOS;background-repeat:no-repeat; color:$RCOLOR;'>$RIGHT_LABEL</div>"+"<div id='rightButtonCap_$ID' style='padding-top:5px;float:left;height:24px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:$RCAP;background-repeat:no-repeat; width:5px;'></div>"+"<div style='clear:both'></div>"+"</div>";com.art.core.components.BaseButton.extend(com.art.core.components.DualOptionToggleButton.prototype);com.art.core.components.SingleOptionToggleButton=function(id,label,value,color){this.id=id;this.label=label;this.value=value;this.callbacks={};this.CLICK=com.art.core.components.SingleOptionToggleButton.CLICK;this.color=color==undefined||color==com.art.core.components.SingleOptionToggleButton.DARK?com.art.core.components.SingleOptionToggleButton.DARK:com.art.core.components.SingleOptionToggleButton.LIGHT;this.DARK=com.art.core.components.SingleOptionToggleButton.DARK;this.LIGHT=com.art.core.components.SingleOptionToggleButton.LIGHT;this.NAME=com.art.core.components.SingleOptionToggleButton.NAME;this.toggle={};this.toggle[this.DARK]={selected:'0px -322px',active:'0px -264px',over:'0px -293px',down:'0px -322px'};this.toggle[this.LIGHT]={selected:'0px -438px',active:'0px -380px',over:'0px -409px',down:'0px -438px'};com.art.core.components.BaseComponent.extend(this);};com.art.core.components.SingleOptionToggleButton.NAME="SingleOptionToggleButton";com.art.core.components.SingleOptionToggleButton.CLICK="SingleOptionToggleButtonCLICK";com.art.core.components.SingleOptionToggleButton.DARK="SingleOptionToggleButtonDark";com.art.core.components.SingleOptionToggleButton.LIGHT="SingleOptionToggleButtonLight";com.art.core.components.SingleOptionToggleButton.prototype.getState=function(state)
{return this.toggle[this.color][state];};com.art.core.components.SingleOptionToggleButton.prototype.resetButtons=function()
{$("#singleOptionToggleButton_"+this.id).unbind("mouseover");$("#singleOptionToggleButton_"+this.id).unbind("mouseout");$("#singleOptionToggleButton_"+this.id).unbind("mousedown");$("#singleOptionToggleButton_"+this.id).unbind("mouseup");$("#singleOptionToggleButton_"+this.id).die();};com.art.core.components.SingleOptionToggleButton.prototype.getColor=function()
{return this.color==this.DARK?"#FFFFFF":"#000000";};com.art.core.components.SingleOptionToggleButton.prototype.registerEvents=function()
{this.resetButtons();var _this=this;var obj=$("#singleOptionToggleButton_"+this.id+">div:first-child");obj.css("border:1px solid red");obj.mouseover(function(){obj.css('background-position',_this.getState('over'));});obj.mouseout(function(){obj.css('background-position',_this.getState('active'));});obj.mousedown(function(){obj.css('background-position',_this.getState('down'));});obj.mouseup(function(){obj.css('background-position',_this.getState('active'));if(_this.callbacks[_this.CLICK]!=undefined)
_this.callbacks[_this.CLICK](_this.value);});};com.art.core.components.SingleOptionToggleButton.prototype.getTemplate=function()
{var pos=this.toggle[this.color]['active'];return this.template.replace(/\$ID/g,this.id).replace("$LABEL",this.label).replace("$COLOR",this.getColor()).replace("$POS",pos).replace(/\$IMAGE_HOST/g,this.getImageHost());};com.art.core.components.SingleOptionToggleButton.prototype.render=function(){return this.getTemplate();};com.art.core.components.SingleOptionToggleButton.prototype.registerCallback=function(eventName,callback){this.callbacks[eventName]=callback;};com.art.core.components.SingleOptionToggleButton.prototype.template="<div id='singleOptionToggleButton_$ID' style='display:inline-block'>"+"<div style='cursor:pointer;padding-left:15px; padding-top:5px; padding-right:10px;float:left;height:24px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:$POS;background-repeat:no-repeat; color:$COLOR;'>$LABEL</div>"+"<div style='float:left;width:1px;height:24px;padding-top:5px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:-306px -264px;background-repeat:no-repeat;'></div>"+"<div style='clear:both'></div>";com.art.core.components.BaseButton.extend(com.art.core.components.SingleOptionToggleButton.prototype);com.art.core.components.FixedContainer=function(id,xAlignment,bottomBoundaryElementID,width,height,sideMargin)
{this.init();this.id=id;this.xAlignment=xAlignment;this.bottomBoundaryElementID=bottomBoundaryElementID;this.sideMargin=sideMargin;this.width=width;this.height=height;this.scrollTop=0;this.ypos=0;this.bottomBoundary=-1;this.boundaryOffset;this.timeoutID;this.scrollDirection;this.content="";this.fixedXPos=-1;this.fixedYPos=-1;this.scrollTop;this.xBoundary=false;this.LEFT=com.art.core.components.FixedContainer.LEFT;};com.art.core.components.FixedContainer.RIGHT='fixedContainerRight';com.art.core.components.FixedContainer.LEFT='fixedContainerLeft';com.art.core.components.FixedContainer.UP='scrollDirectionUp';com.art.core.components.FixedContainer.DOWN='scrollDirectionDown';com.art.core.components.FixedContainer.prototype.registerEvents=function()
{this.setBottomBoundary();var _this=this;this.setXPos();this.checkYPos($(window).scrollTop());$(window).scroll(function(){_this.checkYPos();_this.checkXPos();_this.checkXPos($(window).scrollLeft());});};com.art.core.components.FixedContainer.prototype.setContent=function(str)
{this.content=str;};com.art.core.components.FixedContainer.prototype.checkYPos=function()
{var scrollTop=$(window).scrollTop();if(this.boundaryOffset!=null)
{if(this.bottomBoundary!=Math.round(this.boundaryOffset.top)+parseInt($("#"+this.bottomBoundaryElementID).height()))
{this.setBottomBoundary();}
var _this=this;this.scrollTop=Math.round(scrollTop);this.ypos=parseInt(this.scrollTop+$(window).height())-(this.height);if(this.fixedYPos==-1)this.fixedYPos=$(window).height()-(this.height-5);if(this.ypos>=(this.bottomBoundary-(this.height+5)))
{$("#"+this.id).css("position","absolute");$("#"+this.id).css("top",(this.bottomBoundary-this.height-5)+"px");$("#"+this.id).css("bottom","5px");}
else
{$("#"+this.id).css("position","fixed");$("#"+this.id).css("top",this.fixedYPos+"px");}}};com.art.core.components.FixedContainer.prototype.checkXPos=function(scrollLeft)
{};com.art.core.components.FixedContainer.prototype.setBoundaryOffset=function()
{this.boundaryOffset=$("#"+this.bottomBoundaryElementID).offset();};com.art.core.components.FixedContainer.prototype.setBottomBoundary=function()
{this.setBoundaryOffset();if(this.boundaryOffset!=null)
this.bottomBoundary=Math.round(this.boundaryOffset.top)+parseInt($("#"+this.bottomBoundaryElementID).height());};com.art.core.components.FixedContainer.prototype.setXPos=function()
{var xpos=this.xAlignment==com.art.core.components.FixedContainer.LEFT?this.sideMargin:parseInt($(window).width())-(this.width+this.sideMargin);$("#"+this.id).css("left",xpos+"px");this.fixedXPos=xpos;};com.art.core.components.FixedContainer.prototype.render=function()
{return this.template.replace("$ID",this.id).replace("$W",this.width).replace("$H",this.height).replace("$C",this.content).replace(/\$IMAGE_HOST/g,this.getImageHost());;};com.art.core.components.FixedContainer.prototype.template="<div id='$ID' style='position:absolute;width:$Wpx;height:$Hpx;border:1px solid #999999;background-color:#DDDDDD;'>$C</div>";com.art.core.components.BaseComponent.extend(com.art.core.components.FixedContainer.prototype);com.art.core.components.StandardControlBar=function(id,usePlayControls,leftButtonLabel,rightButtonLabel)
{this.init();this.id=id;this.usePlayControls=usePlayControls;this.leftActionButton=new com.art.core.components.ArtButton(id+"_leftButton",com.art.core.components.ArtButton.ART_ORANGE,leftButtonLabel);this.rightActionButton=new com.art.core.components.ArtButton(id+"_RightButton",com.art.core.components.ArtButton.ART_BLUE,rightButtonLabel);this.centerToParentFlag=false;this.externalComponent="";this.price="";this.salePrice="";};com.art.core.components.StandardControlBar.prototype.render=function(centerToParentFlag)
{this.centerToParentFlag=centerToParentFlag;var playControls=this.usePlayControls?this.playControlsTemplate:"";var width=this.usePlayControls?567:400;var ec=this.externalComponent==""?"":this.externalComponent;var str=this.template.replace("$PLAY_CONTROLS",playControls).replace(/\$ID/g,this.id).replace("$RIGHT_ACTION_BTN",this.rightActionButton.render()).replace("$LEFT_ACTION_BTN",this.leftActionButton.render()).replace("$W",width).replace("$EXT_BTN",ec).replace("$ZINDEX",this.zindex).replace("$PRICE",this.price).replace("$SALE_PRICE",this.salePrice).replace(/\$IMAGE_HOST/g,this.getImageHost());return str;};com.art.core.components.StandardControlBar.prototype.centerToParent=function()
{$("#"+this.id+"_CONTROL_BAR").centerNoDropShadow();};com.art.core.components.StandardControlBar.prototype.position=function(p)
{$("#"+this.id+"_CONTROL_BAR").css("position",p);};com.art.core.components.StandardControlBar.prototype.height=function()
{return $("#"+this.id+"_CONTROL_BAR").height();};com.art.core.components.StandardControlBar.prototype.width=function()
{return $("#"+this.id+"_CONTROL_BAR").width();};com.art.core.components.StandardControlBar.prototype.isHidden=function()
{return $("#"+this.id+"_CONTROL_BAR").is(':hidden');};com.art.core.components.StandardControlBar.prototype.top=function(t)
{$("#"+this.id+"_CONTROL_BAR").css("top",t+"px");};com.art.core.components.StandardControlBar.prototype.fadeIn=function(t)
{$("#"+this.id+"_CONTROL_BAR").fadeIn();};com.art.core.components.StandardControlBar.prototype.fadeOut=function(t)
{$("#"+this.id+"_CONTROL_BAR").fadeOut();};com.art.core.components.StandardControlBar.prototype.left=function(l)
{$("#"+this.id+"_CONTROL_BAR").css("left",l+"px");};com.art.core.components.StandardControlBar.prototype.setPrice=function(value)
{var id=$("#"+this.id+"_price").attr("id");this.price=value;if(id!=null)
$("#"+id).html(value);};com.art.core.components.StandardControlBar.prototype.setSalePrice=function(value)
{var id=$("#"+this.id+"_salePrice").attr("id");this.salePrice=value;if(id!=null)
$("#"+id).html(value);};com.art.core.components.StandardControlBar.prototype.attachExternalComponent=function(str)
{var w=$("#"+this.id+"_externalButtonContainer").width();if(w==null)
this.externalComponent=str;else
$("#"+this.id+"_externalButtonContainer").html(str);};com.art.core.components.StandardControlBar.prototype.close=function()
{this.leftActionButton.destroy();this.rightActionButton.destroy();$("#"+this.id+"_CONTROL_BAR").remove();};com.art.core.components.StandardControlBar.prototype.registerEvents=function()
{this.leftActionButton.registerEvents();this.rightActionButton.registerEvents();if(this.centerToParentFlag)
this.centerToParent();};com.art.core.components.StandardControlBar.prototype.playControlsTemplate="<div id='$ID_previousButton' style='cursor:pointer;float:left;margin-top:26px;width:26px; height:25px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:-90px -606px;background-repeat:no-repeat;'></div>"+"<div id='$ID_playPauseButton' style='cursor:pointer;float:left;margin-top:20px;margin-left:3px;width:38px; height:38px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:0px -606px;background-repeat:no-repeat;'></div>"+"<div id='$ID_nextButton' style='cursor:pointer;float:left;margin-top:26px;margin-left:3px;width:26px; height:25px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:-120px -606px;background-repeat:no-repeat;'></div>"+"<div style='margin-top:20px;width:1px;height:38px;display:inline-block;float:left;margin-left:5px;background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:-637px 0px;background-repeat:no-repeat;'></div>";com.art.core.components.StandardControlBar.prototype.template="<div id='$ID_CONTROL_BAR' style='background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:0px -493px;z-index:$ZINDEX;background-repeat:no-repeat;width:$Wpx;height:73px;padding-left:20px;'>"+"$PLAY_CONTROLS"+"<div id='$ID_externalButtonContainer' style='margin-top:12px; margin-left:2px; float:left;display:inline-block;'>$EXT_BTN</div>"+"<div style='background-image:url($IMAGE_HOST/images/coreimages/core-components-sprites.png);background-position:-599px -493px;height:73px; width:9px;display:inline-block;float:right;margin-right:-9px;'/>"+"<div id='controlButtonLeft' style='margin-top:23px;margin-right:15px;float:right;display:inline-block;'>$RIGHT_ACTION_BTN</div>"+"<div id='controlButtonRight' style='margin-top:23px;float:right;display:inline-block;'>$LEFT_ACTION_BTN</div>"+"<div id='$ID_salePrice' style='text-shadow:0 1px #FFFFFF;font-family: Verdana,Arial,sans-serif;font-size: 11px;font-style: italic;font-weight: bold;color: #EC2127;display:inline-block;margin-top:29px;margin-right:10px;float:right;'>$SALE_PRICE</div>"+"<div id='$ID_price' style='text-shadow:0 1px #FFFFFF;color: #666;font-family: Verdana,Arial,sans-serif;text-decoration: line-through;font-size: 11px;display:inline-block;margin-top:29px;margin-right:10px;float:right;'>$PRICE</div>"+"<div style='clear:both;'></div>"+"</div>";com.art.core.components.BaseComponent.extend(com.art.core.components.StandardControlBar.prototype);com.art.core.components.ArtCarousel=function(id,width,height,customHashKeyLabel)
{this.init();this.id=id;this.width=width;this.itemWidths=0;this.height=height;this.totalItems=0;this.currentlySelectedIndex=0;this.currentlySelectedObject={};this.currentHoverObject={};this.itemCollection=[];this.customHashKeyLabel=customHashKeyLabel?customHashKeyLabel:"";this.itemHash={};this.SCROLL_INTERVAL=150;this.SCROLL_RATE=.5;this.SCROLL_AREA_WIDTH=150;this.SCROLL_MIN=this.SCROLL_AREA_WIDTH;this.SCROLL_MAX=this.width-(this.SCROLL_AREA_WIDTH+35);this.scrollDirection;this.scrollTimerID;this.scrollMouseXPosition=0;this.NAME=com.art.core.components.ArtCarousel.NAME;this.LEFT="scrollLeft";this.RIGHT="scrollRight";this.currentlySelectedItemRendererIndex=-1;this.MOUSE_OVER=com.art.core.components.ArtCarousel.MOUSE_OVER;this.MOUSE_OUT=com.art.core.components.ArtCarousel.MOUSE_OUT;this.CLICK=com.art.core.components.ArtCarousel.CLICK;};com.art.core.components.ArtCarousel.NAME="ArtCarousel.NAME";com.art.core.components.ArtCarousel.MOUSE_OVER="ArtCarousel_mouseover";com.art.core.components.ArtCarousel.MOUSE_OUT="ArtCarousel_mouseout";com.art.core.components.ArtCarousel.CLICK="ArtCarousel_click";com.art.core.components.ArtCarousel.prototype.setCustomHashKey=function(key)
{this.customHashKeyLabel=key;this.itemHash=new Object();};com.art.core.components.ArtCarousel.prototype.isRendered=function()
{var w=parseInt($("#"+this.id).width());return(w>0);};com.art.core.components.ArtCarousel.prototype.stopIntervals=function()
{window.clearInterval(this.scrollTimerID);};com.art.core.components.ArtCarousel.prototype.render=function(){return this.getTemplate();};com.art.core.components.ArtCarousel.prototype.clearCallbacks=function(){this.callbacks={};};com.art.core.components.ArtCarousel.prototype.getItemsCount=function()
{return this.totalItems;};com.art.core.components.ArtCarousel.prototype.getCarousel=function()
{return $("#"+this.id+"_jcarousel");};com.art.core.components.ArtCarousel.prototype.addItems=function(arr)
{this.removeEvents();this.totalItems=arr.length;this.itemCollection=arr;this.selectedIndex=0;this.itemWidths=0;this.selectedObject=arr[0];this.clearEvents();this.removeEvents();this.clearCallbacks();if(this.getCarousel().data("jcarousel")!=undefined)
this.getCarousel().data("jcarousel").reset();this.getCarousel().jcarousel({size:arr.length,scroll:1,itemFallbackDimension:this.width});for(var i=0;i<arr.length;i++)
{this.indexItemByCustomKey(arr[i]);if(arr[i].itemRenderer.render()==undefined||arr[i].itemRenderer.render()=="")
throw new Error("ArtCarousel failed! Item does not have markup property.");try
{var str=arr[i].itemRenderer.render();this.getCarousel().jcarousel('add',i+1,str);}
catch(e)
{throw new Error('ArtCarousel failed! Unable to add item[error:'+e.message+'].');}
$("#"+arr[i].itemRenderer.id).addClass(this.getCommonClassName());this.itemWidths+=$("#"+arr[i].itemRenderer.id).width();}
var _this=this;$("."+this.getCommonClassName()).mouseover(function(e){var id=$(this).attr("id");var _index=parseInt($(this).attr("index"));if(_this.currentHoverObject.NAME==undefined)
{_this.currentHoverObject=_this.itemCollection[_index];}
else
{}
if(_this.callbacks[_this.MOUSE_OVER]!=null)
{var obj=_this.itemCollection[_index];_this.callbacks[_this.MOUSE_OVER](obj);}
_this.startScroll();});$("."+this.getCommonClassName()).mouseout(function(e){var id=$(this).attr("id");var _index=parseInt($(this).attr("index"));if(_this.callbacks[_this.MOUSE_OUT]!=null)
{var obj=_this.itemCollection[_index];_this.callbacks[_this.MOUSE_OUT](obj);}
_this.stopScroll();});$("."+this.getCommonClassName()).bind("click",function(){_this.currentlySelectedObject=_this.itemCollection[parseInt($(this).attr("index"))];if(_this.callbacks[_this.CLICK]!=null)
_this.callbacks[_this.CLICK](_this.itemCollection[parseInt($(this).attr("index"))]);});$("."+this.getCommonClassName()).bind("mousemove",function(e)
{_this.scrollMouseXPosition=e.pageX;});this.getCarousel().css("width","0px");this.getCarousel().css("width",(this.itemWidths+2)+"px");};com.art.core.components.ArtCarousel.prototype.clearEvents=function()
{this.getCarousel().unbind("mouseover");this.getCarousel().unbind("mouseout");this.getCarousel().unbind("mousemove");this.getCarousel().unbind("click");};com.art.core.components.ArtCarousel.prototype.indexItemByCustomKey=function(obj)
{if(this.customHashKeyLabel!="")
{if(obj[this.customHashKeyLabel]==undefined)
throw new Error("ArtCarousel.addItems failed! customHashKeyLabel is undefined.");var key=obj[this.customHashKeyLabel];this.itemHash[key]=obj;}};com.art.core.components.ArtCarousel.prototype.getItemByCustomKey=function(key)
{if(this.itemHash[key]==undefined)
return;return this.itemHash[key];};com.art.core.components.ArtCarousel.prototype.removeEvents=function()
{$("."+this.getCommonClassName()).unbind("mouseover");$("."+this.getCommonClassName()).unbind("mouseout");$("."+this.getCommonClassName()).unbind("click");};com.art.core.components.ArtCarousel.prototype.startScroll=function()
{var _this=this;this.scrollTimerID=window.setInterval(function(){var ul=$("#"+_this.id+"_jcarousel");var ulLeft=ul.position().left;var ulWidth=ul.width();var offsetLeft=ul.parent().offset().left;var containerWidth=ul.parent().width();var mousePosition=_this.scrollMouseXPosition-offsetLeft;var inc=_this.SCROLL_INTERVAL*_this.SCROLL_RATE;var newLeft;if(((mousePosition<_this.SCROLL_MIN)||(mousePosition>_this.SCROLL_MAX))&&(ulWidth>containerWidth))
{var scrollRight=(mousePosition<_this.SCROLL_MIN);if(ulLeft>0)ul.css("left","0px");if(ulLeft<(containerWidth-ulWidth))ul.css("left",(containerWidth-ulWidth)+"px");if(scrollRight)
{ul.jcarousel("prev");}
else
{ul.jcarousel("next");}}},this.SCROLL_INTERVAL);};com.art.core.components.ArtCarousel.prototype.stopScroll=function(obj)
{window.clearInterval(this.scrollTimerID);};com.art.core.components.ArtCarousel.prototype.doScroll=function(obj)
{};com.art.core.components.ArtCarousel.prototype.getCommonClassName=function()
{return this.id+"_klass";};com.art.core.components.ArtCarousel.prototype.selectItemByIndex=function(index,scrollToFlag)
{if(scrollToFlag)
{var ul=$("#"+this.id+"_jcarousel");var ulWidth=ul.width();var itemWidth=Math.round(this.itemWidths/this.itemCollection.length);var containerWidth=ul.parent().width();var numberOfItemsInView=Math.floor(containerWidth/itemWidth);var scrollToIndex=index>(this.itemCollection.length-numberOfItemsInView)?this.itemCollection.length-numberOfItemsInView:index;this.getCarousel().jcarousel("scroll",scrollToIndex);}
this.deSelectItemByIndex();this.currentlySelectedItemRendererIndex=index;this.itemCollection[this.currentlySelectedItemRendererIndex].itemRenderer.select();this.currentlySelectedObject=this.itemCollection[this.currentlySelectedItemRendererIndex];};com.art.core.components.ArtCarousel.prototype.deSelectItemByIndex=function()
{if(this.currentlySelectedItemRendererIndex==-1||this.currentlySelectedItemRendererIndex>(this.itemCollection.length-1))
return;this.itemCollection[this.currentlySelectedItemRendererIndex].itemRenderer.deselect();};com.art.core.components.ArtCarousel.prototype.show=function()
{$("#"+this.id).css("display","block");};com.art.core.components.ArtCarousel.prototype.hide=function()
{$("#"+this.id).css("display","none");};com.art.core.components.ArtCarousel.prototype.getTemplate=function(){var _this=this;setTimeout(function(){_this.update();},250);return this.template.replace(/\$ID/g,this.id).replace("$W",this.width).replace("$H",this.height);};com.art.core.components.ArtCarousel.prototype.update=function()
{$(".jcarousel-skin-jc2 jcarousel-clip jcarousel-clip-horizontal").css("width",this.width-50+"px");};com.art.core.components.ArtCarousel.prototype.template='<div id="$ID" style="border:1px solid #DCDDDE; padding:3px;display:inline-block;background-color:#ffffff;">'
+'<div id="$ID_jcarousel_container"  style="display:block; width:$Wpx; height:$Hpx;">'
+'<ul id="$ID_jcarousel" class="jcarousel-skin-jc2"></ul>'
+'</div></div>';com.art.core.components.BaseComponent.extend(com.art.core.components.ArtCarousel.prototype);com.art.core.components.TabBar=function(id,cssClass)
{this.init();this.RIGHT="right";this.id=id;this.firstControlTabID;this.guids={};this.tabsById={};this.tabs=[];this.controlTabs=[];this.gradients={"webkit":"-webkit-gradient(linear, left top, left bottom, from(white), to(#F0F0F0))","mozilla":"-moz-linear-gradient(center top , #FFFFFF, #F0F0F0) repeat scroll 0 0 transparent","default":"#DDDDDD"};this.browser=$.browser;this.gradient=this.browser.webkit?"webkit":this.browser.mozilla?"mozilla":"default";this.cssClass={tab:{focus:'',hover:'',blur:''}};$.updateObject(this.cssClass,cssClass);this.useCssClass=false;if(this.cssClass.tab.hover!='')
this.useCssClass=true;this.tabStyleActive={"display":"inline-block","background":this.gradients[this.gradient],"filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#F0F0F0')","borderRight":"1px solid #DCDDDE","borderTop":"1px solid #DCDDDE","borderLeft":"1px solid #DCDDDE","display":"inline-block","fontFamily":"Arial, Helvetica, sans-serif","fontSize":"14px","fontStyle":"normal","padding":"9px 3px 8px","text-shadow":"0 1px #FFFFFF","marginRight":"1px","cursor":"pointer","color":"#3A261E","float":"left","list-style-type":"none"};this.tabStyleSelected={"display":"inline-block","background":"","backgroundColor":"#757D8D","borderRight":"1px solid #D4D4D4","borderTop":"1px solid #D4D4D4","borderLeft":"1px solid #D4D4D4","display":"inline-block","fontFamily":"Arial, Helvetica, sans-serif","fontSize":"14px","fontStyle":"normal","padding":"9px 3px 8px","marginRight":"1px","textShadow":"","textDecoration":"none","color":"#FFFFFF","cursor":"default","filter":"","float":"left","list-style-type":"none"};};com.art.core.components.TabBar.prototype.hasTabById=function(id)
{return this.tabsById[id]!=undefined;};com.art.core.components.TabBar.prototype.render=function(){return this.template.replace(/\$ID/g,this.id).replace("$W",this.width);};com.art.core.components.TabBar.prototype.template="<ul id='$ID' style='padding:0px;margin:0px;border-bottom:0px solid; width:$Wpx;height:34px;'><li id='$ID_end' style='list-style-type:none;clear:all;'/></ul>";com.art.core.components.TabBar.prototype.addTab=function(id,label,callback,isControlTab)
{var isControlTab=isControlTab!=undefined;var _this=this;var key='str_'+com.art.core.utils.StringUtil.generateUID();this.guids[key]={id:id,label:label,callback:callback,isActive:true,isControlTab:isControlTab,key:key};this.tabsById[id]={id:id,label:label,callback:callback,isActive:true,isControlTab:isControlTab,key:key};if(isControlTab)
{$("#"+this.id+"_end").before("<li id='"+key+"'>"+label+"</li>");$("#"+key).css({"display":"inline-block","padding":"10px 10px 5px","cursor":"pointer","list-style-type":"none","float":"left"});if(this.firstControlTabID==null)
this.firstControlTabID=key;this.controlTabs.push(key);}
else
{if(this.firstControlTabID!=null)
$("#"+this.firstControlTabID).before("<li id='"+key+"'>"+label+"</li>");else
$("#"+this.id+"_end").before("<li id='"+key+"'>"+label+"</li>");if(this.useCssClass)
{this.changeToCssClass($("#"+key),this.cssClass.tab.hover);}
else
{$("#"+key).css(this.tabStyleActive);}
this.tabs.push(key);}
$("#"+key).click(function(){var k=$(this).attr("id");var obj=_this.guids[k];if(!obj.isControlTab)
{_this.resetAllTabs();if(_this.useCssClass)
{_this.changeToCssClass($(this),_this.cssClass.tab.focus);}
else
{$(this).css(_this.tabStyleSelected);}
_this.guids[k].isActive=false;}
if(_this.guids[k].callback!=null)
_this.guids[k].callback(obj);});$("#"+key).mouseover(function(){var k=$(this).attr("id");if(_this.guids[k].isActive)
$(this).css("text-decoration","underline");});$("#"+key).mouseout(function(){var k=$(this).attr("id");if(_this.guids[k].isActive)
$(this).css("text-decoration","none");});};com.art.core.components.TabBar.prototype.clearAllTabs=function()
{$("#"+this.id).html("");this.tabs=[];this.controlTabs=[];this.tabsById={};this.guids={};this.firstControlTabID=null;};com.art.core.components.TabBar.prototype.resetAllTabs=function()
{for(var i=0;i<this.tabs.length;i++)
{if(this.useCssClass)
{this.changeToCssClass($("#"+this.tabs[i]),this.cssClass.tab.hover);}
else
{$("#"+this.tabs[i]).css(this.tabStyleActive);}
this.guids[this.tabs[i]].isActive=true;}};com.art.core.components.TabBar.prototype.changeToCssClass=function(el,cls)
{el.removeClass();el.addClass(cls);};com.art.core.components.TabBar.prototype.removeTabById=function(id)
{var tmp=[];for(var _id in this.tabsById)
{if(_id==id)
{var key=this.tabsById[id].key;delete this.tabsById[id];delete this.guids[key];for(var i=0;i<this.tabs.length;i++)
{if(this.tabs[i]!=key)
{tmp.push(this.tabs[i]);}}
$("#"+key).unbind("click");$("#"+key).unbind("mouseover");$("#"+key).unbind("mouseout");$("#"+key).remove();$("#"+key).empty();}}
this.tabs=tmp;delete tmp;};com.art.core.components.TabBar.prototype.removeTab=function()
{if(this.hasTabs())
{var p=this.tabs.pop();$("#"+p).remove();}};com.art.core.components.TabBar.prototype.getControlTabByIndex=function(index)
{if(this.controlTabs[index]==undefined)
throw new Error("com.art.core.components.TabBar failed! ControlTab index is undefined.");return this.controlTabs[index];};com.art.core.components.TabBar.prototype.selectTabByIndex=function(index)
{if(this.tabs[index]==undefined)
throw new Error("com.art.core.components.TabBar.selectTabByIndex failed! No index given tabs["+index+"].");var id=this.tabs[index];if(this.useCssClass)
{this.changeToCssClass($("#"+id),this.cssClass.tab.focus);}
else
{$("#"+id).css(this.tabStyleSelected);}
this.guids[id].isActive=false;};com.art.core.components.TabBar.prototype.isInitialized=function()
{return this.tabs.length>0&&this.controlTabs.length>0;};com.art.core.components.TabBar.prototype.isRendered=function()
{var w=$("#"+this.id).width();return w>0;};com.art.core.components.TabBar.prototype.show=function()
{$("#"+this.id).css("display","block");};com.art.core.components.TabBar.prototype.hide=function()
{$("#"+this.id).css("display","none");};com.art.core.components.TabBar.prototype.hasTabs=function()
{return this.tabs.length>0;};com.art.core.components.BaseComponent.extend(com.art.core.components.TabBar.prototype);com.art.core.components.SuperZoom=function(id,zindex,useControlBar)
{this.init();this.useControlBar=useControlBar!=undefined?useControlBar:false;this.id=id;this.controlBar=new com.art.core.components.StandardControlBar('szCB',false,"Buy Now","Add To My Gallery");this.optionButton;this.uid=com.art.core.utils.StringUtil.generateUID(12);this.lightbox=new com.art.core.components.LightBox(id+"_LightBox","body",.7);this.windowWidth=$(window).width();this.windowHeight=$(window).height();this.loadFired=false;this.zoomWidth=Math.floor(this.windowWidth*.9);this.zoomHeight=Math.floor(this.windowHeight*.9);this.zindex=zindex;this.controlBar.zindex=zindex+1;this.IMAGE_LOADED=com.art.core.components.SuperZoom.IMAGE_LOADED;this.controlsTimer;this._disableAutoClose=false;this.ESC_KEY_CLICKED=com.art.core.components.SuperZoom.ESC_KEY_CLICKED;};com.art.core.components.SuperZoom.IMAGE_LOADED="superZoomImageLoaded";com.art.core.components.SuperZoom.ESC_KEY_CLICKED="escKeyClicked";com.art.core.components.SuperZoom.prototype.disableAutoClose=function()
{clearTimeout(this.controlsTimer);this._disableAutoClose=true;};com.art.core.components.SuperZoom.prototype.enableAutoClose=function()
{this._disableAutoClose=false;};com.art.core.components.SuperZoom.prototype.show=function(zoomUrl)
{this.loadFired=false;this.lightbox.setLightBoxZIndex(this.zindex);this.lightbox.show();if($("#"+this.uid).width()==null)
{$("body").append('<img id="'+this.uid+'" src="'+zoomUrl+'"/>');}
else
{$("#"+this.uid).attr("src",zoomUrl);}
var _this=this;$("#"+this.uid).imagesLoaded(function(){if(!_this.loadFired)
{_this.loadFired=true;var newValue=$(this).scaleObjectToFitOrFill.Calculate({srcWidth:$(this).width(),srcHeight:$(this).height(),destWidth:_this.zoomWidth,destHeight:_this.zoomHeight,method:"fit"});$(this).css({'position':'absolute','z-index':_this.zindex+1,'width':newValue.width,'height':newValue.height});$(this).center(true);_this.attachCloseButton();_this.positionCloseButton();if(_this.useControlBar)
{_this.attachControls();_this.positionControls();}
_this.registerEvents();if(_this.callbacks[_this.IMAGE_LOADED]!=null)
_this.callbacks[_this.IMAGE_LOADED]();}});};com.art.core.components.SuperZoom.prototype.attachCloseButton=function()
{var str=this.closeButtonTemplate.replace("$ID",this.id).replace("$ZINDEX",this.zindex+2).replace(/\$IMAGE_HOST/g,this.getImageHost());$("body").append(str);};com.art.core.components.SuperZoom.prototype.positionCloseButton=function()
{var i=$('#'+this.uid);var _this=this;setTimeout(function(){_this.checkSuperZoomSize(i.width(),i.height());},250);};com.art.core.components.SuperZoom.prototype.attachControls=function()
{$("body").append(this.controlBar.render());};com.art.core.components.SuperZoom.prototype.setPrice=function(value)
{this.controlBar.setPrice(value);};com.art.core.components.SuperZoom.prototype.setSalePrice=function(value)
{this.controlBar.setSalePrice(value);};com.art.core.components.SuperZoom.prototype.attachExternalComponent=function(ob)
{this.optionButton=ob;this.controlBar.attachExternalComponent(this.optionButton.render());};com.art.core.components.SuperZoom.prototype.positionControls=function()
{var i=$("#"+this.uid);var c=this.controlBar;c.registerEvents();c.position("absolute");var top=(Math.round(i.offset().top)+i.height())-(c.height()+50);var left=(Math.round(i.offset().left)+Math.round(i.width()-c.width())/2);c.top(top);c.left(left);};com.art.core.components.SuperZoom.prototype.checkSuperZoomSize=function(width,height)
{var i=$('#'+this.uid);if(i.width()==width&&i.height()==height)
{var c=$("#closeButton"+this.id);var w=$(window);var top=Math.ceil(((w.height()-c.height())/2+w.scrollTop())-(i.height()/2));var left=Math.ceil(((w.width()-c.width())/2+w.scrollLeft())+(i.width()/2));$('#closeButton'+this.id).css({'position':'absolute','top':top,'left':left});}
else
{var _this=this;setTimeout(function(){_this.checkSuperZoomSize(i,i.width(),i.height());},150);}};com.art.core.components.SuperZoom.prototype.closeButtonTemplate='<img id="closeButton$ID" src="$IMAGE_HOST/images/photostoart/closebox.png" style="z-index:$ZINDEX;cursor:pointer;"/>';com.art.core.components.SuperZoom.prototype.registerEvents=function()
{var _this=this;$(document).bind("contextmenu",function(e){e.preventDefault();});if(this.useControlBar)
{$('#'+this.uid).mousemove(function(){if(!_this._disableAutoClose)
_this.hideShowControl();});}
$(window).bind('resize',function(){if(_this.useControlBar)
_this.positionControls();_this.positionCloseButton();});$('#closeButton'+_this.id).bind('click',function(){_this.close();});this.lightbox.registerCallback(com.art.core.components.LightBox.CLICK,function(){_this.close();});$(document).bind('keydown',function(escapeKey){if(escapeKey.which==27||escapeKey.keyCode==27){_this.close();}});this.controlBar.registerEvents();if(this.optionButton!=undefined)
this.optionButton.registerEvents();};com.art.core.components.SuperZoom.prototype.close=function()
{$("#"+this.uid).unbind('load');$("#"+this.uid).die('load');$('#'+this.uid).unbind('click');$('#'+this.uid).remove();$("#"+this.uid).empty();$('#closeButton'+this.id).unbind('click');$('#closeButton'+this.id).remove();$('#closeButton'+this.id).empty();this.lightbox.close();if(this.useControlBar)
this.controlBar.close();};com.art.core.components.SuperZoom.prototype.getNextHighestZIndex=function()
{return this.controlBar.zindex+1;};com.art.core.components.SuperZoom.prototype.hideShowControl=function()
{var _this=this;clearTimeout(this.controlsTimer);if(this.controlBar.isHidden())
this.controlBar.fadeIn();this.controlsTimer=setTimeout(function(){_this.controlBar.fadeOut();},5000);};com.art.core.components.BaseComponent.extend(com.art.core.components.SuperZoom.prototype);com.art.core.components.Spinner=function(target)
{this.init();this.id=com.art.core.utils.StringUtil.generateUID();this.target=target;this.message="";this.ellipse="";this.intervalID;this.width=30;this.height=30;};com.art.core.components.Spinner.prototype.show=function(zindex)
{var _this=this;$(this.target).append(this.getTemplate(zindex));$("#"+this.id).css("top",($(window).height()-$("#"+this.id).height())/2+$(window).scrollTop()+"px");$("#"+this.id).css("left",($(window).width()-$("#"+this.id).width())/2+$(window).scrollLeft()+"px");if(this.message.length>0)
{$("#"+_this.id+"-message").html(this.message);this.intervalID=setInterval(function(){_this.ellipse+=".";$("#"+_this.id+"-message").html(_this.message+_this.ellipse);if(_this.ellipse.length>15){_this.ellipse="";clearInterval(this.intervalID);}},800);}
$('#'+this.id+'_img').centerElement();if($.browser.msie){$('#'+this.id).css({'border':'1px solid #999999'});}};com.art.core.components.Spinner.prototype.getTemplate=function(zindex)
{var z=zindex!=undefined?zindex:1;var _template="<div id='$ID' class='core_spinner' style='text-align:left;padding:15px;position:absolute;z-index:$ZINDEX;width:$WIDTHpx;height:$HEIGHTpx;background-color:#FFFFFF;-moz-border-radius: 3px;border-radius: 3px;background-position:-339px -88px;background-repeat:no-repeat;position:absolute; left:50px;top:20px;'>"+"<img id='$ID_img' style='width:32px;height:32px;' src='$IMAGE_HOST/images/photostoart/loading.gif'/>";if(this.message.length>0)
_template+="<div style='margin-top:60px;color:#666666;text-align:center;' id='$ID-message'></div>";_template+="</div>";return _template.replace(/\$ID/g,this.id).replace("$ZINDEX",z).replace(/\$IMAGE_HOST/g,this.getImageHost()).replace(/\$WIDTH/g,this.width).replace(/\$HEIGHT/g,this.height);};com.art.core.components.Spinner.prototype.hide=function()
{clearInterval(this.intervalID);this.ellipse="";$("#"+this.id).remove();$("#"+this.id).empty();};com.art.core.components.Spinner.prototype.setMessage=function(message)
{this.message=message;};com.art.core.components.Spinner.prototype.alterDefaultSize=function(newWidth,newHeight)
{this.width=newWidth;this.height=newHeight;};com.art.core.components.Spinner.prototype.appendOuterShadow=function()
{$('#'+this.id).addDropShadow('center');};com.art.core.components.BaseComponent.extend(com.art.core.components.Spinner.prototype);com.art.core.components.GridDisplay=function(id,width,numberOfColumns)
{this.init();this.id=id;this.width=width;this.numberOfColumns=numberOfColumns;this.PADDING=5;};com.art.core.components.GridDisplay.prototype.render=function(){return this.template.replace(/\$ID/g,this.id).replace("$W",this.width);};com.art.core.components.GridDisplay.prototype.template="<div id='$ID' style='width:$Wpx;'>$TABLE</div>";com.art.core.components.GridDisplay.prototype.getRowTemplate=function(rowBackgroundColor,useEllipse)
{var str="";var rs="margin-bottom:1px;";var rowBGC=(rowBackgroundColor!=undefined)?rowBackgroundColor:"";rs+="background-color:"+rowBGC+";";for(var i=0;i<this.numberOfColumns;i++)
{str+="<div style='$STYLE_"+i+"'><span style='background-color:"+rowBGC+"'>$VALUE_"+i+"</span></div>";}
str+="<div style='clear:both;'></div>";if(useEllipse)
{rs+="background-image: url(http://cache1.artprintimages.com/images/pub/pid/UI_elipse.gif);";rs+="background-repeat:repeat-x;";rs+="background-position:0px 4px;";}
return"<div style='"+rs+"'>"+str+"</div>";};com.art.core.components.GridDisplay.prototype.addRow=function(args)
{if(args.columns==undefined)
throw new Error("GridDisplay.getRowTemplate failed! Required values and/or styles property is undefined.");if($("#"+this.id).width()==0)
throw new Error("GridDisplay.getRowTemplate failed! GridDisplay.render() has not yet been called.");if(args.columns.length!=this.numberOfColumns)
throw new Error("GridDisplay.getRowTemplate failed! GridDisplay.addRow() has incorrect number of column objects.");var rowTemplate=this.getRowTemplate(args.rowBackgroundColor,args.useEllipse);for(var i=0;i<args.columns.length;i++)
{var obj=args.columns[i];var s=this.getColumnStyle(obj);rowTemplate=rowTemplate.replace("$STYLE_"+i,s).replace("$VALUE_"+i,obj.value);}
$("#"+this.id).append(rowTemplate);};com.art.core.components.GridDisplay.prototype.getColumnStyle=function(obj)
{var style="";style+="text-align:"+((obj.textAlign=="right")?"right;":"left;");style+="font-weight:"+((obj.bold)?"bold;":"normal;");style+="float:"+((obj.float=="right")?"right;":"left;");style+="color:"+((obj.color==undefined)?"#000000;":obj.color+";");style+="width:"+(Math.round(this.width/this.numberOfColumns))+"px;";style+="padding-left:0px;padding-top:5px;padding-bottom:5px;padding-right:0px;";return style;};com.art.core.components.GridDisplay.prototype.getTemplate=function()
{return this.template.replace("$TABLE","").replace("$W",this.width).replace("$ID",this.id);};com.art.core.components.GridDisplay.prototype.render=function()
{return this.getTemplate();};com.art.core.components.BaseComponent.extend(com.art.core.components.GridDisplay.prototype);com.art.core.components.DropDown=function(id,cssClass,label,translatedContent,selectedValue){this.init();this.id=id;this.selectedValue=selectedValue;this.NAME=com.art.core.components.DropDown.NAME;this.SELECTEDITEMCHANGE=com.art.core.components.DropDown.SELECTEDITEMCHANGE;this.stateCurrent=this.states.enabled;this.eventCurrent=this.events.blur;this.config={};this.config.errormsg={};this.config.errormsg.newline=false;$.updateObject(this.cssClass,cssClass);this.translatedContent={nullOptionValue:'xx',nullOptionLabel:'Please Select...'};this.label={text:'',position:com.art.core.components.DropDown.PositionLeft};$.updateObject(this.label,label);};com.art.core.components.DropDown.NAME="DropDown";com.art.core.components.DropDown.PositionTop="top";com.art.core.components.DropDown.PositionBottom="bottom";com.art.core.components.DropDown.PositionRight="right";com.art.core.components.DropDown.PositionLeft="left";com.art.core.components.DropDown.SELECTEDITEMCHANGE="selectedItemChange";com.art.core.components.DropDown.prototype.inputValidation=function()
{this.clearError();var retval=true;for(var i=0;i<this.validators.length;i++)
{if(this.validators[i].func(this.validators[i].criteria,this.getValue()))
{this.stateCurrent=this.states.enabled;this.updateStyle(this.stateCurrent,this.eventCurrent);}
else
{this.stateCurrent=this.states.error;this.updateStyle(this.states.error,this.eventCurrent);$('#'+this.id+'_err').html(this.validators[i].msg);retval=false;break;}}
return retval;};com.art.core.components.DropDown.prototype.updateStyle=function(state,event)
{var field=$('#'+this.id);var fieldLabel=$('#'+this.id+'_label');var fieldError=$('#'+this.id+"_err");var which={};switch(state)
{case this.states.error:which=this.cssClass.error;break;case this.states.disabled:which=this.cssClass.disabled;break;default:which=this.cssClass.enabled;break;}
switch(event)
{case this.events.focus:which=which.focus;break;case this.events.hover:which=which.hover;break;default:which=which.blur;break;}
field.removeClass();fieldLabel.removeClass();field.addClass(which.field);fieldLabel.addClass(which.label);};com.art.core.components.DropDown.prototype.clearError=function()
{$('#'+this.id+'_err').html('');$('#'+this.id).removeClass(this.cssClass.error);$('#'+this.id).addClass(this.cssClass.fieldborder);};com.art.core.components.DropDown.prototype.getValue=function()
{return $('#'+this.id).val();};com.art.core.components.DropDown.prototype.setValue=function(value)
{if(this.doesValueExist(value))
{if(value!=$('#'+this.id).val())
{$('#'+this.id).val(value);$('#'+this.id).change();}}
else if(!this.doesValueExist(this.translatedContent.nullOptionValue))
{$('#'+this.id).prepend("<option value='"+this.translatedContent.nullOptionValue+"'>"+this.translatedContent.nullOptionLabel+"</option>");this.setValue(this.translatedContent.nullOptionValue);}};com.art.core.components.DropDown.prototype.doesValueExist=function(value)
{var exists=false;$('#'+this.id+' option').each(function(){if(this.value==value){exists=true;}});return exists;};com.art.core.components.DropDown.prototype.registerEvents=function()
{if(this.stateCurrent==this.states.disabled)
return;var _this=this;var id="#"+this.id;var idLabel=id+"_label";$(id).mouseover(function(){});$(id).mouseout(function(){});$(id).mousedown(function(){});$(id).mouseup(function(e){});$(id+", "+idLabel).mouseover(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.events.hover);});$(id+", "+idLabel).mouseout(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.eventCurrent);});$(id).bind('focus',function(){_this.updateStyle(_this.stateCurrent,_this.events.focus);});$(id).bind('blur',function(){_this.updateStyle(_this.stateCurrent,_this.events.blur);});$(id).change(function(){if(_this["callbacks"][_this.SELECTEDITEMCHANGE]!=undefined)
{_this["callbacks"][_this.SELECTEDITEMCHANGE]();}});$(idLabel).bind('click',function(){$(id).focus();});$(id).bind('keydown',function(e){if(e.keyCode==13)
{if(_this.callbacks[_this.events.keypress.enter]!=undefined)
{_this.callbacks[_this.events.keypress.enter]();}}});};com.art.core.components.DropDown.prototype.enable=function(bool)
{if(bool==undefined)
bool=true;if(bool)
{this.stateCurrent=this.states.enabled;$("#"+this.id).removeAttr('disabled');}
else
{this.stateCurrent=this.states.disabled;$("#"+this.id).attr('disabled','disabled');}
var opacity=bool?1:.3;var id='#'+this.id;var idLabel=id+"_label";$(id).css("opacity",opacity);$(id+','+idLabel).unbind("mouseout");$(id+','+idLabel).unbind("mouseover");$(id+','+idLabel).unbind("click");$(id).unbind("blur");$(id).unbind("focus");this.registerEvents();};com.art.core.components.DropDown.prototype.getTemplate=function()
{var left='',right='';switch(this.label.position)
{case com.art.core.components.DropDown.PositionTop:case com.art.core.components.DropDown.PositionLeft:left=this.getLabel();break;case com.art.core.components.DropDown.PositionBottom:case com.art.core.components.DropDown.PositionRight:right=this.getLabel();break;}
left+="<span id='"+this.id+"_err' class='"+this.cssClass.msg+"'></span>";return this.template.replace(/\$ID/g,this.id).replace(/\$CSSCLASS/g,this.cssClass.enabled.blur.field).replace(/\$LEFT/g,left).replace(/\$RIGHT/g,right);};com.art.core.components.DropDown.prototype.setFixedWidth=function(width)
{$('#'+this.id).css({width:width+'px'});};com.art.core.components.DropDown.prototype.getLabel=function()
{var text="<span id='"+this.id+"_label"+"' class='"+this.cssClass.enabled.blur.label+"'>"+this.label.text+"</span>";var position=this.label.position;var errorMsgSpacer=this.config.errormsg.newline?"<br>":"&nbsp;&nbsp;";switch(position)
{case com.art.core.components.DropDown.PositionTop:case com.art.core.components.DropDown.PositionLeft:text+=errorMsgSpacer+"<span id='"+this.id+"_err' class='"+this.cssClass.enabled.blur.error+"'></span><br>";break;case com.art.core.components.DropDown.PositionBottom:case com.art.core.components.DropDown.PositionRight:text="<br>"+text+errorMsgSpacer+"<span id='"+this.id+"_err' class='"+this.cssClass.enabled.blur.error+"'></span>";break;}
return text;};com.art.core.components.DropDown.prototype.render=function(){return this.getTemplate();};com.art.core.components.DropDown.prototype.registerCallback=function(eventName,callback){this.callbacks[eventName]=callback;};com.art.core.components.DropDown.prototype.fillDropDown=function(data)
{var _this=this;var select=$('#'+_this.id);if(select.prop)
var options=select.prop('options');else
var options=select.attr('options');$('option',select).remove();$.each(data,function(val,text){options[options.length]=new Option(text.name,val);});if(this.selectedValue!='')
select.val(this.selectedValue);};com.art.core.components.DropDown.prototype.hide=function()
{$('#'+this.id+"_c").hide();};com.art.core.components.DropDown.prototype.show=function()
{$('#'+this.id+"_c").fadeIn();};com.art.core.components.DropDown.prototype.template='<div id="$ID_c">$LEFT<select id="$ID" class="$CSSCLASS"></select>$RIGHT</div>';com.art.core.components.BaseComponent.extend(com.art.core.components.DropDown.prototype);com.art.core.components.TextAreaField=function(id,cssClass,label,defaultValue,configuration,translatedContent){this.init();this.id=id;this.defaultValue=(defaultValue!==undefined)?defaultValue:'';this.NAME=com.art.core.components.TextAreaField.NAME;this.stateCurrent=this.states.enabled;this.eventCurrent=this.events.blur;this.config={errormsg:{newline:false},maxLength:5};$.updateObject(this.config,configuration);$.updateObject(this.cssClass,cssClass);this.label={text:'',position:com.art.core.components.TextAreaField.PositionLeft};$.updateObject(this.label,label);this.translatedContent={charRemaining:'[COUNT] characters remaining'};$.updateObject(this.translatedContent,translatedContent);};com.art.core.components.TextAreaField.NAME="TextAreaField";com.art.core.components.TextAreaField.PositionTop="top";com.art.core.components.TextAreaField.PositionBottom="bottom";com.art.core.components.TextAreaField.PositionRight="right";com.art.core.components.TextAreaField.PositionLeft="left";com.art.core.components.TextAreaField.prototype.inputValidation=function()
{this.clearError();var retval=true;for(var i=0;i<this.validators.length;i++)
{if(this.validators[i].func(this.validators[i].criteria,this.getValue()))
{this.stateCurrent=this.states.enabled;this.updateStyle(this.stateCurrent,this.eventCurrent);}
else
{this.stateCurrent=this.states.error;this.updateStyle(this.states.error,this.eventCurrent);$('#'+this.id+'_err').html(this.validators[i].msg);retval=false;break;}}
return retval;};com.art.core.components.TextAreaField.prototype.updateStyle=function(state,event)
{var field=$('#'+this.id);var fieldLabel=$('#'+this.id+'_label');var fieldError=$('#'+this.id+"_err");var which={};switch(state)
{case this.states.error:which=this.cssClass.error;break;case this.states.disabled:which=this.cssClass.disabled;break;default:which=this.cssClass.enabled;break;}
switch(event)
{case this.events.focus:which=which.focus;break;case this.events.hover:which=which.hover;break;default:which=which.blur;break;}
field.removeClass();fieldLabel.removeClass();field.addClass(which.field);fieldLabel.addClass(which.label);};com.art.core.components.TextAreaField.prototype.clearError=function()
{$('#'+this.id+'_err').html('');};com.art.core.components.TextAreaField.prototype.getValue=function()
{return $('#'+this.id).val();};com.art.core.components.TextAreaField.prototype.setValue=function(value)
{if(this.config.maxLength>0)
{$('#'+this.id+"_cnt").html(this.config.maxLength-value.length);}
$('#'+this.id).val(value);};com.art.core.components.TextAreaField.prototype.positionCharCounter=function()
{$('#'+this.id+'_cntdown').css({position:'absolute'});};com.art.core.components.TextAreaField.prototype.registerEvents=function()
{this.positionCharCounter();if(this.stateCurrent==this.states.disabled)
return;var _this=this;var id="#"+this.id;var idLabel=id+"_label";$(id+", "+idLabel).mouseover(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.events.hover);});$(id+", "+idLabel).mouseout(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.eventCurrent);});$(id).bind('focus',function(){_this.updateStyle(_this.stateCurrent,_this.events.focus);if($(id).attr('value')==_this.defaultValue)
{$(id).attr('value','');}});$(id).bind('blur',function(){_this.updateStyle(_this.stateCurrent,_this.events.blur);if($(id).attr('value').length==0)
{$(id).attr('value',_this.defaultValue);}});$("#"+this.id+"_label").bind('click',function(){$(id).focus();});var ignore=[8,9,13,33,34,35,36,37,38,39,40,46];$('#'+this.id).live('keypress',function(event){var self=$(this),maxlength=self.attr('maxlength'),code=$.data(this,'keycode');if(maxlength&&maxlength>0)
{return self.val().length<maxlength||$.inArray(code,ignore)!==-1;}}).live('keydown',function(event){$.data(this,'keycode',event.keyCode||event.which);if(event.keyCode||event.which==13)
{if(_this.callbacks[_this.events.keypress.enter]!=undefined)
{_this.callbacks[_this.events.keypress.enter]();}}}).live('keyup',function()
{$('#'+_this.id+"_cnt").html(_this.config.maxLength-$(this).val().length);});};com.art.core.components.TextAreaField.prototype.enable=function(bool)
{if(bool==undefined)
bool=true;if(bool)
{this.stateCurrent=this.states.enabled;$("#"+this.id).removeAttr('disabled');}
else
{this.stateCurrent=this.states.disabled;$("#"+this.id).attr('disabled','disabled');}
var opacity=bool?1:.3;var id='#'+this.id;var idLabel=id+"_label";$(id).css("opacity",opacity);$(id+','+idLabel).unbind("mouseout");$(id+','+idLabel).unbind("mouseover");$(id+','+idLabel).unbind("click");$(id).unbind("blur");$(id).unbind("focus");this.registerEvents();};com.art.core.components.TextAreaField.prototype.getTemplate=function()
{var left='',right='';switch(this.label.position)
{case com.art.core.components.TextAreaField.PositionTop:case com.art.core.components.TextAreaField.PositionLeft:left=this.getLabel();break;case com.art.core.components.TextAreaField.PositionBottom:case com.art.core.components.TextAreaField.PositionRight:right=this.getLabel();break;}
var retval=this.template.replace(/\$ID/g,this.id).replace(/\$CSSCLASS/g,this.cssClass.enabled.blur.field).replace(/\$DEFAULTVALUE/g,this.defaultValue).replace(/\[CHR\]/g,this.getTemplateCharCount()).replace(/\$LEFT/g,left).replace(/\$RIGHT/g,right);if(this.config.maxLength>0)
retval=retval.replace(/\[MAXLEN\]/g," maxlength='"+this.config.maxLength+"'");return retval;};com.art.core.components.TextAreaField.prototype.getTemplateCharCount=function(width)
{if(this.config.maxLength>0)
{var t=this.translatedContent.charRemaining.replace('[COUNT]',"<span id='"+this.id+"_cnt'></span>");return"<div id='"+this.id+"_cntdown'>"+t+"</div>";}
return'';};com.art.core.components.TextAreaField.prototype.setFixedWidth=function(width)
{$('#'+this.id).css({width:width+'px'});};com.art.core.components.TextAreaField.prototype.getLabel=function()
{var text="<span id='"+this.id+"_label"+"' class='"+this.cssClass.enabled.blur.label+"'>"+this.label.text+"</span>";var position=this.label.position;var errorMsgSpacer=this.config.errormsg.newline?"<br>":"&nbsp;&nbsp;";switch(position)
{case com.art.core.components.TextAreaField.PositionTop:case com.art.core.components.TextAreaField.PositionLeft:text+=errorMsgSpacer+"<span id='"+this.id+"_err' class='"+this.cssClass.enabled.blur.error+"'></span><br>";break;case com.art.core.components.TextAreaField.PositionBottom:case com.art.core.components.TextAreaField.PositionRight:text="<br>"+text+errorMsgSpacer+"<span id='"+this.id+"_err' class='"+this.cssClass.enabled.blur.error+"'></span>";break;}
return text;};com.art.core.components.TextAreaField.prototype.render=function(){return this.getTemplate();};com.art.core.components.TextAreaField.prototype.registerCallback=function(eventName,callback){this.callbacks[eventName]=callback;};com.art.core.components.TextAreaField.prototype.hide=function()
{$('#'+this.id+"_c").hide();};com.art.core.components.TextAreaField.prototype.show=function()
{$('#'+this.id+"_c").fadeIn();};com.art.core.components.TextAreaField.prototype.template='<div id="$ID_c">$LEFT<textarea id="$ID" class="$CSSCLASS"[MAXLEN]>$DEFAULTVALUE</textarea>$RIGHT[CHR]</div>';com.art.core.components.BaseComponent.extend(com.art.core.components.TextAreaField.prototype);com.art.core.components.TextField=function(id,cssClass,label,defaultValue){this.init();this.id=id;this.defaultValue=(defaultValue!==undefined)?defaultValue:'';this.NAME=com.art.core.components.TextField.NAME;this.stateCurrent=this.states.enabled;this.eventCurrent=this.events.blur;this.config={};this.config.errormsg={};this.config.errormsg.newline=false;$.updateObject(this.cssClass,cssClass);this.label={text:'',position:com.art.core.components.TextField.PositionLeft};$.updateObject(this.label,label);};com.art.core.components.TextField.NAME="TextField";com.art.core.components.TextField.PositionTop="top";com.art.core.components.TextField.PositionBottom="bottom";com.art.core.components.TextField.PositionRight="right";com.art.core.components.TextField.PositionLeft="left";com.art.core.components.TextField.prototype.inputValidation=function()
{this.clearError();var retval=true;for(var i=0;i<this.validators.length;i++)
{if(this.validators[i].func(this.validators[i].criteria,this.getValue()))
{this.stateCurrent=this.states.enabled;this.updateStyle(this.stateCurrent,this.eventCurrent);}
else
{this.stateCurrent=this.states.error;this.updateStyle(this.states.error,this.eventCurrent);$('#'+this.id+'_err').html(this.validators[i].msg);retval=false;break;}}
return retval;};com.art.core.components.TextField.prototype.updateStyle=function(state,event)
{var field=$('#'+this.id);var fieldLabel=$('#'+this.id+'_label');var fieldError=$('#'+this.id+"_err");var which={};switch(state)
{case this.states.error:which=this.cssClass.error;break;case this.states.disabled:which=this.cssClass.disabled;break;default:which=this.cssClass.enabled;break;}
switch(event)
{case this.events.focus:which=which.focus;break;case this.events.hover:which=which.hover;break;default:which=which.blur;break;}
field.removeClass();fieldLabel.removeClass();field.addClass(which.field);fieldLabel.addClass(which.label);};com.art.core.components.TextField.prototype.clearError=function()
{$('#'+this.id+'_err').html('');};com.art.core.components.TextField.prototype.getValue=function()
{return $('#'+this.id).attr('value');};com.art.core.components.TextField.prototype.setValue=function(value)
{$('#'+this.id).val(value);};com.art.core.components.TextField.prototype.registerEvents=function()
{if(this.stateCurrent==this.states.disabled)
return;var _this=this;var id="#"+this.id;var idLabel=id+"_label";$(id+", "+idLabel).mouseover(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.events.hover);});$(id+", "+idLabel).mouseout(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.eventCurrent);});$(id).bind('focus',function(){_this.updateStyle(_this.stateCurrent,_this.events.focus);if($(id).attr('value')==_this.defaultValue)
{$(id).attr('value','');}});$(id).bind('blur',function(){_this.updateStyle(_this.stateCurrent,_this.events.blur);if($(id).attr('value').length==0)
{$(id).attr('value',_this.defaultValue);}});$(idLabel).bind('click',function(){$(id).focus();});$(id).bind('keydown',function(e){if(e.keyCode==13)
{if(_this.callbacks[_this.events.keypress.enter]!=undefined)
{_this.callbacks[_this.events.keypress.enter]();}}});};com.art.core.components.TextField.prototype.enable=function(bool)
{if(bool==undefined)
bool=true;if(bool)
{this.stateCurrent=this.states.enabled;$("#"+this.id).removeAttr('disabled');this.validators=this.validatorsDisabled;}
else
{this.stateCurrent=this.states.disabled;$("#"+this.id).attr('disabled','disabled');this.validators=[];}
var opacity=bool?1:.3;var id='#'+this.id;var idLabel=id+"_label";$(id).css("opacity",opacity);$(id+','+idLabel).unbind("mouseout");$(id+','+idLabel).unbind("mouseover");$(id+','+idLabel).unbind("click");$(id).unbind("blur");$(id).unbind("focus");this.registerEvents();};com.art.core.components.TextField.prototype.getTemplate=function()
{var left='',right='';switch(this.label.position)
{case com.art.core.components.TextField.PositionTop:case com.art.core.components.TextField.PositionLeft:left=this.getLabel();break;case com.art.core.components.TextField.PositionBottom:case com.art.core.components.TextField.PositionRight:right=this.getLabel();break;}
return this.template.replace(/\$ID/g,this.id).replace(/\$CSSCLASS/g,this.cssClass.enabled.blur.field).replace(/\$DEFAULTVALUE/g,this.defaultValue).replace(/\$LEFT/g,left).replace(/\$RIGHT/g,right);};com.art.core.components.TextField.prototype.setFixedWidth=function(width)
{$('#'+this.id).css({width:width+'px'});};com.art.core.components.TextField.prototype.getLabel=function()
{var text='';var errorMsgSpacer="";if(this.label.text!='')
{text="<span id='"+this.id+"_label"+"' class='"+this.cssClass.enabled.blur.label+"'>"+this.label.text+"</span>";errorMsgSpacer=this.config.errormsg.newline?"<br>":"&nbsp;&nbsp;";}
var position=this.label.position;var errField=errorMsgSpacer+"<span id='"+this.id+"_err' class='"+this.cssClass.enabled.blur.error+"'></span>";switch(position)
{case com.art.core.components.TextField.PositionTop:case com.art.core.components.TextField.PositionLeft:text+=errField;if(position==com.art.core.components.TextField.PositionTop)
text+="<br>";break;case com.art.core.components.TextField.PositionBottom:text="<br>"+text;case com.art.core.components.TextField.PositionRight:text+=errField;break;}
return text;};com.art.core.components.TextField.prototype.render=function(){return this.getTemplate();};com.art.core.components.TextField.prototype.hide=function()
{$('#'+this.id+"_c").hide();};com.art.core.components.TextField.prototype.show=function()
{$('#'+this.id+"_c").fadeIn();};com.art.core.components.TextField.prototype.template='<div id="$ID_c">$LEFT<input type="text" id="$ID" class="$CSSCLASS" value="$DEFAULTVALUE"/>$RIGHT</div>';com.art.core.components.BaseComponent.extend(com.art.core.components.TextField.prototype);com.art.core.components.PasswordField=function(id,cssClass,label,defaultValue){this.init();this.id=id;this.defaultValue=(defaultValue!==undefined)?defaultValue:'';this.NAME=com.art.core.components.PasswordField.NAME;this.stateCurrent=this.states.enabled;this.eventCurrent=this.events.blur;this.config={};this.config.errormsg={};this.config.errormsg.newline=false;$.updateObject(this.cssClass,cssClass);this.label={text:'',position:com.art.core.components.PasswordField.PositionLeft};$.updateObject(this.label,label);};com.art.core.components.PasswordField.NAME="PasswordField";com.art.core.components.PasswordField.PositionTop="top";com.art.core.components.PasswordField.PositionBottom="bottom";com.art.core.components.PasswordField.PositionRight="right";com.art.core.components.PasswordField.PositionLeft="left";com.art.core.components.PasswordField.prototype.inputValidation=function()
{this.clearError();var retval=true;for(var i=0;i<this.validators.length;i++)
{if(this.validators[i].func(this.validators[i].criteria,this.getValue()))
{this.stateCurrent=this.states.enabled;this.updateStyle(this.stateCurrent,this.eventCurrent);}
else
{this.stateCurrent=this.states.error;this.updateStyle(this.states.error,this.eventCurrent);$('#'+this.id+'_err').html(this.validators[i].msg);retval=false;break;}}
return retval;};com.art.core.components.PasswordField.prototype.updateStyle=function(state,event)
{var field=$('#'+this.id);var fieldLabel=$('#'+this.id+'_label');var fieldError=$('#'+this.id+"_err");var fieldHint=$('#'+this.id+"_h");var which={};switch(state)
{case this.states.error:which=this.cssClass.error;break;case this.states.disabled:which=this.cssClass.disabled;break;default:which=this.cssClass.enabled;break;}
switch(event)
{case this.events.focus:which=which.focus;break;case this.events.hover:which=which.hover;break;default:which=which.blur;break;}
field.removeClass();fieldLabel.removeClass();fieldHint.removeClass();field.addClass(which.field);fieldLabel.addClass(which.label);fieldHint.addClass(which.field);};com.art.core.components.PasswordField.prototype.clearError=function()
{$('#'+this.id+'_err').html('');};com.art.core.components.PasswordField.prototype.getValue=function()
{return $('#'+this.id).attr('value');};com.art.core.components.PasswordField.prototype.setValue=function(value)
{$('#'+this.id).val(value);};com.art.core.components.PasswordField.prototype.registerEvents=function()
{if(this.stateCurrent==this.states.disabled)
return;var _this=this;var id="#"+this.id;var idLabel=id+"_label";var hint="#"+this.id+"_h";$(id+", "+idLabel+", "+hint).mouseover(function(){if(document.activeElement.id!=_this.id&&document.activeElement.id!=_this.id+"_h")
_this.updateStyle(_this.stateCurrent,_this.events.hover);});$(id+", "+idLabel+", "+hint).mouseout(function(){if(document.activeElement.id!=_this.id)
_this.updateStyle(_this.stateCurrent,_this.eventCurrent);});$(hint).bind('focus',function(){_this.updateStyle(_this.stateCurrent,_this.events.focus);$(hint).hide();$(id).show();$(id).focus();});$(id).bind('focus',function(){_this.updateStyle(_this.stateCurrent,_this.events.focus);$(hint).hide();$(id).show();});$(id).bind('blur',function(){_this.updateStyle(_this.stateCurrent,_this.events.blur);if($(id).attr('value').length==0)
{$(id).hide();$(hint).show();}});$(idLabel).bind('click',function(){$(id).focus();});$(id).bind('keydown',function(e){if(e.keyCode==13)
{if(_this.callbacks[_this.events.keypress.enter]!=undefined)
{_this.callbacks[_this.events.keypress.enter]();}}});};com.art.core.components.PasswordField.prototype.enable=function(bool)
{if(bool==undefined)
bool=true;if(bool)
{this.stateCurrent=this.states.enabled;$("#"+this.id).removeAttr('disabled');}
else
{this.stateCurrent=this.states.disabled;$("#"+this.id).attr('disabled','disabled');}
var opacity=bool?1:.3;var id='#'+this.id;var idLabel=id+"_label";$(id).css("opacity",opacity);$(id+','+idLabel).unbind("mouseout");$(id+','+idLabel).unbind("mouseover");$(id+','+idLabel).unbind("click");$(id).unbind("blur");$(id).unbind("focus");this.registerEvents();};com.art.core.components.PasswordField.prototype.getTemplate=function()
{var left='',right='';switch(this.label.position)
{case com.art.core.components.PasswordField.PositionTop:case com.art.core.components.PasswordField.PositionLeft:left=this.getLabel();break;case com.art.core.components.PasswordField.PositionBottom:case com.art.core.components.PasswordField.PositionRight:right=this.getLabel();break;}
var hidePwd='',hideHint='';if(this.defaultValue!=undefined&&this.defaultValue!='')
{hidePwd='display:none;';}
else
{hideHint='display:none;';}
return this.template.replace(/\$ID/g,this.id).replace(/\$CSSCLASS/g,this.cssClass.enabled.blur.field).replace(/\$DEFAULTVALUE/g,this.defaultValue).replace(/\$LEFT/g,left).replace(/\$RIGHT/g,right).replace(/\$HIDE/g,hidePwd).replace(/\$HINT/g,hideHint);};com.art.core.components.PasswordField.prototype.setFixedWidth=function(width)
{$('#'+this.id).css({width:width+'px'});$('#'+this.id+"_h").css({width:width+'px'});};com.art.core.components.PasswordField.prototype.getLabel=function()
{var text='';var errorMsgSpacer="";if(this.label.text!='')
{text="<span id='"+this.id+"_label"+"' class='"+this.cssClass.enabled.blur.label+"'>"+this.label.text+"</span>";errorMsgSpacer=this.config.errormsg.newline?"<br>":"&nbsp;&nbsp;";}
var position=this.label.position;var errField=errorMsgSpacer+"<span id='"+this.id+"_err' class='"+this.cssClass.enabled.blur.error+"'></span>";switch(position)
{case com.art.core.components.PasswordField.PositionTop:case com.art.core.components.PasswordField.PositionLeft:text+=errField;if(position==com.art.core.components.PasswordField.PositionTop)
text+="<br>";break;case com.art.core.components.PasswordField.PositionBottom:text="<br>"+text;case com.art.core.components.PasswordField.PositionRight:text+=errField;break;}
return text;};com.art.core.components.PasswordField.prototype.render=function(){return this.getTemplate();};com.art.core.components.PasswordField.prototype.registerCallback=function(eventName,callback){this.callbacks[eventName]=callback;};com.art.core.components.PasswordField.prototype.hide=function()
{$('#'+this.id+"_c").hide();};com.art.core.components.PasswordField.prototype.show=function()
{$('#'+this.id+"_c").fadeIn();};com.art.core.components.PasswordField.prototype.template='<div id="$ID_c">$LEFT<input type="password" id="$ID" class="$CSSCLASS" style="$HIDE"/><input id="$ID_h" class="$CSSCLASS" style="$HINT" type=text value="$DEFAULTVALUE"/>$RIGHT</div>';com.art.core.components.BaseComponent.extend(com.art.core.components.PasswordField.prototype);com.art.core.components.UploadModal=function(id,translatedContent,configuration,notification,googleAnalytics)
{this.id=id;this.service;this.serviceDetails;this.translatedContent={title:'Upload',flashRequired:'Flash Is Required',flashReqText:'It does not look like you have the <b>version 10.3</b> or higher Flash Player plug-in installed.',errorMessage1:'We are sorry, but an error occurred while uploading this image.',errorMessage2:'Please try again later.'};$.updateObject(this.translatedContent,translatedContent);this.config={serviceUrlImageUpload:'http://dev3-ws-api.art.com/ImageUpload/default.aspx',languageIso:'en',fileCountMaximum:5,minImageSizeMessage:'Files must be at least \<MINFILESIZE\> in size to ensure a high quality print. \<COUNTINVALIDFILES\> of your files do not meet this requirement.',maxImageSize:undefined,minImageSize:undefined,imagePath:'http://cache1.artprintimages.com',loadingText:'loading',persistentId:'',sessionId:'',apiKey:'',uploaderTranslationFileLocation:'http://cache1.artprintimages.com/images/js/core/upload/eit_lang/',swfFullFileLocation:"http://cache1.artprintimages.com/images/js/core/upload/ElementITMultiPowUpload.swf",supportInstall:"http://cache1.artprintimages.com/images/js/core/expressInstall.swf",imageFilterByType:"*.jpg:*.jpeg:*.tif:*.tiff:",defaultView:'thumbnails',javaScriptEventsPrefix:'com.art.core.components.UploadModal.MultiPowUpload',flashWidth:"580",flashHeight:"460",modalWidth:"600",clearButtonVisible:true,listViewButtonVisible:true,thumbViewButtonVisible:true,sortButtonVisible:true,statusLabelTextReady:'Number of files: <FILESCOUNT> (<TOTALSIZE>)',windowWarningCaption:'',messagesFilesCountExceeded:'Only <MAXFILECOUNT> files are allowed to upload! <COUNTINVALIDFILES> files were ignored!'};$.updateObject(this.config,configuration);this.controls={uploadModal:this.id,baseModal:this.id+"_base"};this.base=new com.art.core.components.BaseModal(this.controls.baseModal,this.config.modalWidth,{bgcolor:"#f1f1f1"},false,false,this.translatedContent);com.art.core.components.UploadModal.containerId=this.controls.baseModal;this.CLOSE_CLICKED=com.art.core.components.UploadModal.CLOSE_CLICKED;com.art.core.components.UploadModal.apiKey=this.config.apiKey;com.art.core.components.UploadModal.persistentId=this.config.persistentId;com.art.core.components.UploadModal.uploadObject=this.id+"uploader";if(googleAnalytics!=undefined)
com.art.core.components.UploadModal.googleAnalytics=googleAnalytics;if(notification!=undefined)
com.art.core.components.UploadModal.notification=notification;this.closeCallBack;};com.art.core.components.UploadModal.CLOSE_CLICKED='close';com.art.core.components.UploadModal.totalFilesCount=0;com.art.core.components.UploadModal.apiKey='';com.art.core.components.UploadModal.persistentId='';com.art.core.components.UploadModal.uploadObject='';com.art.core.components.UploadModal.notification={};com.art.core.components.UploadModal.containerId='';com.art.core.components.UploadModal.callbacks=[];com.art.core.components.UploadModal.prototype.setServiceDetails=function(obj)
{this.serviceDetails=obj;this.service=new com.art.core.services.ServiceProvider(this.serviceDetails);};com.art.core.components.UploadModal.prototype.registerEvents=function(callback)
{var _this=this;this.base.registerEvents();this.base.registerCallback(com.art.core.components.BaseModal.CLOSE_CLICKED,function()
{_this.doClose();});};com.art.core.components.UploadModal.prototype.render=function(zindex){this.base.setContents(this.getTemplate(zindex));return this.base.render(zindex+1);};com.art.core.components.UploadModal.prototype.close=function(callback)
{var _this=this;this.closeCallback=callback;};com.art.core.components.UploadModal.prototype.renderUploader=function(targetId){var playerVersion=swfobject.getFlashPlayerVersion();if(playerVersion.major<10||(playerVersion.major==10&&playerVersion.min<3)){this.renderNoFlash(targetId);var hiZ=com.art.core.utils.BrowserUtil.getNextHighestZIndex();$('#uploader_noFlashPopup').css('z-index',hiZ);}
else
{this.renderUploaderFlash(targetId);}};com.art.core.components.UploadModal.prototype.renderNoFlash=function(targetId){var html='<div id="uploader_noFlashPopup" style="height: 275px; background: white; text-align: center; width: 100%;">'
+'<div style="padding-top:20px;font-size:22px;color:#B51821;">'
+'[NEEDFLASH]'
+'</div>'
+'<div style="margin: 9px 9px 0px 9px">'
+'[FLASHMSG]'
+'</div>'
+'<div style="margin-top: 30px;">'
+'<a href="http://get.adobe.com/flashplayer\" target="_blank"><img src="http://www.adobe.com/images/shared/download_buttons/get_adobe_flash_player.png" /></a>'
+'</div>'
+'</div>';html=html.replace(/\[NEEDFLASH\]/gi,this.translatedContent.flashRequired);html=html.replace(/\[FLASHMSG\]/gi,this.translatedContent.flashReqText);$('#'+this.controls.uploadModal).html(html);};com.art.core.components.UploadModal.prototype.renderUploaderFlash=function(targetId){var _this=this;var button=com.art.core.components.ArtButton.ART_ORANGE;var params={wmode:"transparent"};var attributes={id:com.art.core.components.UploadModal.uploadObject,name:com.art.core.components.UploadModal.uploadObject};var config=this.config;var flashvars={'method':'post','postTo':config.serviceUrlImageUpload,'uploadUrl':config.serviceUrlImageUpload,'messages.fileSizeNotEnough':config.minImageSizeMessage,'fileFilter.maxCount':config.fileCountMaximum,'fileFilter.maxSize':config.maxImageSize!==undefined?config.maxImageSize:20480000,'fileFilter.minSize':config.minImageSize!==undefined?config.minImageSize:512000,'fileFilter.types':'Images|'+this.config.imageFilterByType,'defaultView':'grid','onCompleteUrl':this.onCompleteUrl,'imageRoot':config.imagePath,'postFields.file':'ImageXml','useExternalInterface':'true','javaScriptEventsPrefix':config.javaScriptEventsPrefix,'clearListOnAddNewFiles':'false','removeUploadedFilesFromList':'true','dateFormatString':'m/d/Y H:i','constant.decimalSeparator':'.','thumbnail.loadFromExif':'false','language.autoDetect':'false','language.source':this.getLanguagePath(),'listViewButton.x':250,'loadingText':config.loadingText,'fileView.defaultView':config.defaultView,'clearButton.visible':config.clearButtonVisible,'listViewButton.visible':config.listViewButtonVisible,'thumbViewButton.visible':config.thumbViewButtonVisible,'sortButton.visible':config.sortButtonVisible,'statusLabel.text.ready':config.statusLabelTextReady,'window.warningCaption':config.windowWarningCaption,'messages.filesCountExceeded':config.messagesFilesCountExceeded};var swfFilename=config.swfFullFileLocation;flashvars.serialNumber='00826431142282254711118525282576169286728410211';swfobject.embedSWF(swfFilename,this.id,config.flashWidth,config.flashHeight,"10.0.0",config.supportInstall,flashvars,params,attributes);};com.art.core.components.UploadModal.notify=function(eventName,data){var n=com.art.core.components.UploadModal.notification;if(n.func!=undefined)
{n.func(new com.art.core.utils.Note(eventName,data,''));}};com.art.core.components.UploadModal.logError=function(err){var n=com.art.core.components.UploadModal.notification;if(n.logError!=undefined)
{n.logError(err);}};com.art.core.components.UploadModal.googleEvent=function(eventName){var ga=com.art.core.components.UploadModal.googleAnalytics;if(ga.func!=undefined)
{ga.func(eventName);}};com.art.core.components.UploadModal.MultiPowUpload_onMovieLoad=function(){$("#"+com.art.core.components.UploadModal.containerId).center();};com.art.core.components.UploadModal.googleAnalytics={photoAdded:'',uploadInitiated:'/upload-photos/initiated',uploadCompleted:'/upload-photos/completed',imageLoaded:'',photoRemoved:'',error:''};com.art.core.components.UploadModal.events={movieLoad:'movieLoad',serverResponse:'serverResponse',addFiles:'addFiles',removeFiles:'removeFiles',error:'error',imageLoaded:'imageLoaded',start:'start',complete:'complete'};com.art.core.components.UploadModal.prototype.registerCallbackStatic=function(name,callback)
{com.art.core.components.UploadModal['callbacks'][name]=callback;};com.art.core.components.UploadModal.MultiPowUpload_onCancel=function(){com.art.core.components.UploadModal.prototype.destroy();};com.art.core.components.UploadModal.MultiPowUpload_onServerResponse=function(file){var n=com.art.core.components.UploadModal.notification;com.art.core.components.UploadModal.notify(n.onServerResponse,file.serverResponse);};com.art.core.components.UploadModal.MultiPowUpload_onAddFiles=function(files){var o=com.art.core.components.UploadModal;for(var i=0;i<files.length;i++)
{eval(o.uploadObject.toString()).generateThumbnail(files[i].id);o.totalFilesCount+=1;}
eval(o.uploadObject.toString()).addPostField("persistentid",o.persistentId);eval(o.uploadObject.toString()).addPostField("apikey",o.apiKey);o.googleEvent(o.googleAnalytics.photoAdded);if(o.callbacks[o.events.addFiles]!=undefined)
{o.callbacks[o.events.addFiles]();}};com.art.core.components.UploadModal.MultiPowUpload_onRemoveFiles=function(files){var o=com.art.core.components.UploadModal;for(var i=0;i<files.length;i++)
{o.totalFilesCount-=1;}
o.googleEvent(o.googleAnalytics.photoRemoved);if(o.callbacks[o.events.removeFiles]!=undefined)
{o.callbacks[o.events.removeFiles]();}};com.art.core.components.UploadModal.MultiPowUpload_onError=function(file,message){if(message.indexOf('#2049')>-1){message='Cross-domain upload not permitted without crossdomain.xml on server directory root';}
var err=com.art.core.utils.LoggingManager.prototype.createError('FileUploadError','Uploading file '+file.name
+' caused error: '+message);var o=com.art.core.components.UploadModal;o.logError(err);o.googleEvent(o.googleAnalytics.error);if(o.callbacks[o.events.error]!=undefined)
{o.callbacks[o.events.error]();}};com.art.core.components.UploadModal.MultiPowUpload_onDebug=function(message){};com.art.core.components.UploadModal.MultiPowUpload_onImageLoaded=function(file)
{var o=com.art.core.components.UploadModal;o.googleEvent(o.googleAnalytics.imageLoaded);if(o.callbacks[o.events.imageLoaded]!=undefined)
{o.callbacks[o.events.imageLoaded]();}};com.art.core.components.UploadModal.MultiPowUpload_onStart=function(){var o=com.art.core.components.UploadModal;o.googleEvent(o.googleAnalytics.uploadInitiated);if(o.callbacks[o.events.start]!=undefined)
{o.callbacks[o.events.start]();}};com.art.core.components.UploadModal.MultiPowUpload_onComplete=function(){var o=com.art.core.components.UploadModal;o.googleEvent(o.googleAnalytics.uploadCompleted);if(o.callbacks[o.events.complete]!=undefined)
{o.callbacks[o.events.complete]();}};com.art.core.components.UploadModal.prototype.getLanguagePath=function()
{return this.config.uploaderTranslationFileLocation+"Language_"+this.config.languageIso+".xml";};com.art.core.components.UploadModal.prototype.doClose=function()
{var _this=this;$("#"+this.base.id).unbind("keypress");$("#"+this.base.id).die();$("#"+this.base.id).remove();if(this.closeCallback!=undefined)
this.closeCallback();};com.art.core.components.UploadModal.prototype.getTemplate=function(){return this.template.replace('$ID',this.controls.uploadModal).replace('$ERRMSG1',this.translatedContent.errorMessage1).replace('$ERRMSG2',this.translatedContent.errorMessage2);};com.art.core.components.UploadModal.prototype.template=''
+'             <div id="$ID"></div>'
+'             <div style="display:none;font-family: verdana, sans-serif;color:red;text-align:center;font-size:16px;height:140px;margin-top:110px;clear:right;" id="uploaderror">'
+'$ERRMSG1'
+'                 <br />'
+'$ERRMSG2'
+'             </div>';com.art.core.components.BaseComponent.extend(com.art.core.components.UploadModal.prototype);com.art.core.components.PrintImage=function(id,target,imageSrc)
{this.init();this.id=id;this.target=target;this.src=imageSrc;this.translatedContent={optional:"(optional)",title:"Page Title",desc:"Description",submit:"Open Print Page",cancel:"Cancel"};this.fields={title:new com.art.core.components.TextField('printtitle',{},this.translatedContent.title,this.translatedContent.optional),desc:new com.art.core.components.TextAreaField('printdesc',{},this.translatedContent.desc,this.translatedContent.optional),submit:new com.art.core.components.Button('printsubmit',this.translatedContent.submit),cancel:new com.art.core.components.Button('printcancel',this.translatedContent.cancel,com.art.core.components.Button.Sizes.MEDIUM,com.art.core.components.Button.Flavors.SECONDARY)};this.lightbox;};com.art.core.components.PrintImage.prototype.registerEvents=function()
{this.fields.title.registerEvents();this.fields.desc.registerEvents();this.fields.submit.registerEvents();this.fields.cancel.registerEvents();};com.art.core.components.PrintImage.prototype.render=function()
{var _this=this;var lightboxId='print_lightbox';if($("#"+lightboxId).attr("id")!=lightboxId)
this.lightbox=new com.art.core.components.LightBox(lightboxId,'body',.4);this.lightbox.zindex=20;this.lightbox.show();$('body').append("<div id='"+this.id+"' style='width:300px;height:250px;z-index:"+this.lightbox.zindex+";background:#ffffff;border:solid 1px black; margin: 10px;padding:10px;'>"
+"Enter optional text that will be printed with your image"
+this.fields.title.getTemplate()
+this.fields.desc.getTemplate()
+"<div align=right>"+this.fields.cancel.getTemplate()+"&nbsp;&nbsp;&nbsp;"+this.fields.submit.getTemplate()+"</div>"
+"</div>");$('#'+this.id).center(true);this.registerEvents();var c=com.art.core.components.BaseButton.CLICK;this.fields.submit.registerCallback(c,function(){var title=_this.fields.title.getValue()!=_this.fields.title.defaultValue?_this.fields.title.getValue():'';var desc=_this.fields.desc.getValue()!=_this.fields.desc.defaultValue?_this.fields.desc.getValue():'';$('#'+_this.id).empty();$('#'+_this.id).remove();_this.lightbox.close();_this.popWindow(title,desc);});this.fields.cancel.registerCallback(c,function(){$('#'+_this.id).empty();$('#'+_this.id).remove();_this.lightbox.close();});};com.art.core.components.PrintImage.prototype.popWindow=function(title,desc)
{popup=window.open('','popup','toolbar=no,menubar=no,width=800,height=800');popup.document.open();popup.document.write("<html><head></head><body onload='print()'>");popup.document.write("<h1>Art.com</h1>");popup.document.write("<input type='text' style='width:100%;border:0px #ffffff; font-size:14px' value='"+title+"'/>");popup.document.write("<img src='"+this.src+"' width='100%'>");popup.document.write("<textarea style='width:100%;border:0px #ffffff; font-size:14px'>"+desc+"</textarea>");popup.document.write("</body></html>");this.fields.title.setValue(title);this.fields.desc.setValue(desc);popup.document.close();};com.art.core.components.BaseComponent.extend(com.art.core.components.PrintImage.prototype);com.art.core.components.Social=function(id,target,cssClass,translatedContent,cookieNames)
{this.init();this.id=id;this.target=target;this.scriptLoaded=false;this.scriptLoadAttempts=0;this.cssClass=com.art.core.components.Social.cssClass;$.updateObject(this.cssClass,cssClass);this.translatedContent=com.art.core.components.Social.translatedContent;$.updateObject(this.translatedContent,translatedContent);this.cookieNames={};$.updateObject(this.cookieNames,cookieNames);com.art.core.components.Social.cookieNames=this.cookieNames;this.nullValue=com.art.core.components.Social.nullValue;this.cookieHelper=new com.art.core.cookie.Cookie(this.cookieNames);this.socialButtons={flags:{pinterest:false,tweet:false,googlePlusShare:false,facebookShare:false,expanded:false},data:{pinterest:{},tweet:{},googlePlusShare:{},facebookShare:{},expanded:{}}};this.customData={url:'',title:'',description:'',media:''};this.loadScript();};com.art.core.components.Social.translatedContent={};com.art.core.components.Social.prototype.setCustomData=function(url,title,description,imageUrl)
{this.customData={url:url,title:title,description:description,media:imageUrl};window.addthis_share=this.customData;};com.art.core.components.Social.prototype.render=function()
{var s=this.socialButtons.flags;$('#'+this.target).html(this.getTemplate(s.pinterest,s.tweet,s.googlePlusShare,s.facebookShare));this.loadButtons();};com.art.core.components.Social.prototype.loadButtons=function()
{var _this=this;if(this.scriptLoaded)
{addthis.toolbox('#prd-addthis-block');}
else
{if(this.scriptLoadAttempts<5)
{setTimeout(function()
{_this.scriptLoadAttempts++;_this.loadButtons();},2000);}
else
{}}};com.art.core.components.Social.prototype.turnOnPinterest=function(data)
{this.socialButtons.flags.pinterest=true;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(data))
{this.socialButtons.data.pinterest=data;}};com.art.core.components.Social.prototype.turnOnTweet=function(data)
{this.socialButtons.flags.tweet=true;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(data))
{this.socialButtons.data.tweet=data;}};com.art.core.components.Social.prototype.turnOnGooglePlusShare=function(data)
{this.socialButtons.flags.googlePlusShare=true;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(data))
{this.socialButtons.data.googlePlusShare=data;}};com.art.core.components.Social.prototype.turnOnFacebookShare=function(data)
{this.socialButtons.flags.facebookShare=true;if(com.art.core.utils.ObjectUtil.isNullOrEmpty(data))
{this.socialButtons.data.facebookShare=data;}};com.art.core.components.Social.prototype.loadScript=function()
{var loadScript=false;var _this=this;try
{if(com.art.core.utils.ObjectUtil.isNullOrEmpty(addthis))
loadScript=true;}
catch(e)
{loadScript=true;}
if(loadScript)
{$.cachedScript("//s7.addthis.com/js/250/addthis_widget.js#pub=artdotcom&domready=1").done(function(script,textStatus){_this.scriptLoaded=true;});}
else
{this.scriptLoaded=true;}};com.art.core.components.Social.prototype.getTurnedOnServices=function()
{var f=this.socialButtons.flags;var ret={};if(f.pinterest)
ret.pinterest="Pin it";if(f.print)
ret.print="Print";if(f.facebookShare)
ret.facebook="Facebook";if(f.expanded)
ret.expanded="More";if(f.tweet)
ret.twitter="Tweet";if(f.googlePlusShare)
ret.google_plusone_share="Google +";return ret;};com.art.core.components.Social.prototype.getCustomAttr=function(service)
{var r='';switch(service.toLowerCase())
{case"pinterest":r=" pi:pinit:media='"+this.customData.media+"'";break;}
return r;};com.art.core.components.Social.prototype.getTemplate=function(doPinterest,doTweet,doGoogle,doFacebook)
{var ret='',customAttr='';var svcs=this.getTurnedOnServices();for(var s in svcs){var b='<a class="addthis_button_'+s+'" alt="'+svcs[s]+'"[CUSTOM]></a>';b=b.replace('[CUSTOM]',this.getCustomAttr(s));ret+=b;}
return ret;};com.art.core.components.BaseComponent.extend(com.art.core.components.Social.prototype);com.art.core.interfaces.IModule=function(){};com.art.core.interfaces.IModule.prototype.init=function(){};com.art.core.interfaces.IModule.prototype.destroy=function(){};com.art.core.interfaces.IModule.prototype.notify=function(){};com.art.core.interfaces.IModule.prototype.handleNotification=function(){};com.art.core.interfaces.IModule.prototype.getTemplate=function(){};com.art.core.interfaces.IModule.prototype.getTarget=function(){};com.art.core.interfaces.IModule.prototype.listNotificationInterests=function(){};com.art.core.cookie.Cookie=function(cookieNames)
{this.cookieNames=com.art.core.cookie.Cookie.cookieNames;if(cookieNames==undefined||typeof cookieNames=='string')
cookieNames={};$.updateObject(this.cookieNames,cookieNames);this.nullVal='';};com.art.core.cookie.Cookie.cookieNames={cdAuthToken:'ap',cAuthToken:'authtoken',cdSitePersistentId:'',cSitePersistentId:'persistentID',cdAppPersistentId:'p2a',cAppPersistentId:'p2akey',cdSiteSessionId:'',cSiteSessionId:'sessionid',cdAppSessionId:'p2a',cAppSessionId:'sessionid',cdAccountType:'ap',cAccountType:'accounttype',cdProfileUrl:'ap',cProfileUrl:'profileURL',cdAccountId:'ap',cAccountId:'accountid'};com.art.core.cookie.Cookie.prototype.resetCookie=function(dictionary,cookie,expires)
{var c=this;var use=dictionary.length>0;var t=cookie;var d=dictionary;use?c.setCookieDictionary(d,t,this.nullVal,'/',c.getCookieDomain(""),expires,false):c.setCookie(t,this.nullVal,'/',c.getCookieDomain(""),expires,false);};com.art.core.cookie.Cookie.prototype.setCookieDynamic=function(dictionary,cookie,expires,value)
{var c=this;var use=dictionary.length>0;var t=cookie;var d=dictionary;use?c.setCookieDictionary(d,t,value,'/',c.getCookieDomain(""),expires,false):c.setCookie(t,value,'/',c.getCookieDomain(""),expires,false);};com.art.core.cookie.Cookie.prototype.getCookieDynamic=function(dictionary,cookie)
{var c=this;var use=dictionary.length>0;var t=cookie;var d=dictionary;return use?c.getCookieDictionary(d,t):c.getCookie(t);};com.art.core.cookie.Cookie.prototype.cookieGetStateData=function()
{var cn=this.cookieNames;return{authToken:this.getCookieDynamic(cn.cdAuthToken,cn.cAuthToken),accountType:this.getCookieDynamic(cn.cdAccountType,cn.cAccountType),sessionId:this.getCookieDynamic(cn.cdSiteSessionId,cn.cSiteSessionId),persistentId:this.getCookieDynamic(cn.cdSitePersistentId,cn.cSitePersistentId),profileUrl:this.getCookieDynamic(cn.cdProfileUrl,cn.cProfileUrl),accountId:this.getCookieDynamic(cn.cdAccountId,cn.cAccountId)};};com.art.core.cookie.Cookie.prototype.cookieSetLogin=function(serverResponse)
{var user=new com.art.core.vos.User();user.updateUserProfileFromServer(serverResponse);var cn=this.cookieNames;var today=new Date();var expLong=new Date(today.getFullYear(),today.getMonth(),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds(),today.getMilliseconds());var expShort=new Date(today.getFullYear(),today.getMonth(),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds(),today.getMilliseconds());expLong.setDate(expLong.getDate()+60);expShort.setDate(expShort.getDate()+10);if(user.getAuthenticationToken().length>0)
this.setCookieDynamic(cn.cdAuthToken,cn.cAuthToken,expShort,user.getAuthenticationToken());if(user.getPersistentId().length>0)
this.setCookieDynamic(cn.cdAppPersistentId,cn.cAppPersistentId,expLong,user.getPersistentId());if(user.getPersistentId().length>0)
this.setCookieDynamic(cn.cdSitePersistentId,cn.cSitePersistentId,expLong,user.getPersistentId());if(user.getSessionId().length>0)
this.setCookieDynamic(cn.cdAppSessionId,cn.cAppSessionId,'',user.getSessionId());if(user.getSessionId().length>0)
this.setCookieDynamic(cn.cdSiteSessionId,cn.cSiteSessionId,'',user.getSessionId());if(user.getAccountType().length>0)
this.setCookieDynamic(cn.cdAccountType,cn.cAccountType,expLong,user.getAccountType());if(user.getProfileUrl().length>0)
this.setCookieDynamic(cn.cdProfileUrl,cn.cProfileUrl,expLong,user.getProfileUrl());if(user.getAccountId().toString().length>0)
this.setCookieDynamic(cn.cdAccountId,cn.cAccountId,expLong,user.getAccountId());};com.art.core.cookie.Cookie.prototype.cookieSetLogout=function()
{var cn=this.cookieNames;var today=new Date();var expLong=new Date(today.getFullYear(),today.getMonth(),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds(),today.getMilliseconds());var expShort=new Date(today.getFullYear(),today.getMonth(),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds(),today.getMilliseconds());expLong.setDate(expLong.getDate()+60);expShort.setDate(expShort.getDate()+10);this.resetCookie(cn.cdAuthToken,cn.cAuthToken,expLong);this.resetCookie(cn.cdAccountType,cn.cAccountType,expLong);this.resetCookie(cn.cdProfileUrl,cn.cProfileUrl,expLong);this.resetCookie(cn.cdAccountId,cn.cAccountId,'');};com.art.core.cookie.Cookie.prototype.getCookieDomain=function(brand)
{var cookieDomain="."+brand+".com";var hostName;hostName=location.host;if(hostName.indexOf('.',hostName.indexOf('.',0)+1))
cookieDomain=hostName.indexOf('.',0)>0?hostName.substring(hostName.indexOf('.',0)):hostName;return cookieDomain;};com.art.core.cookie.Cookie.prototype.getCookieDictionary=function(dictName,dictKey)
{var retval="";var cookieBase=String(this.getCookieBase(dictName));var arrCookies;var cookieVal;if(cookieBase!=null){arrCookies=cookieBase.split("&");for(var i=0;i<arrCookies.length;i++){cookieVal=arrCookies[i].split("=");if(cookieVal[0]==dictKey){retval=cookieVal[1];return retval;}}}
return retval;};com.art.core.cookie.Cookie.prototype.setCookieDictionary=function(dictName,dictKey,dictValue,path,domain,expires,secure)
{var Dictionary=String(this.getCookieBase(dictName));var newValue=new String();if(Dictionary!="null"){if(Dictionary.indexOf("=")>0){if(Dictionary.indexOf(dictKey+"=")>=0){var arParts=Dictionary.split("&");var arVals=new Array();var indexOfEqual;for(var i=0;i<arParts.length;i++){indexOfEqual=String(arParts[i]).indexOf("=");arVals[0]=String(arParts[i]).substring(0,indexOfEqual);arVals[1]=String(arParts[i]).substring(indexOfEqual+1);if(newValue.length!=0){newValue+="&";}
if(arVals[0]==dictKey){newValue+=arVals[0]+"="+escape(dictValue);}else{newValue+=arVals[0]+"="+escape(arVals[1]);}}
this.setCookie(dictName,newValue,path,domain,expires,secure);}else{newValue=Dictionary+"&"+dictKey+"="+dictValue;this.setCookie(dictName,newValue,path,domain,expires,secure);}}else{}}else{newValue=dictKey+"="+dictValue;this.setCookie(dictName,newValue,path,domain,expires,secure);}};com.art.core.cookie.Cookie.prototype.setCookie=function(name,value,path,domain,expires,secure)
{var cookieValue=name+"="+(value)+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+
((expires)?"; expires="+expires.toGMTString():"")+
((secure)?"; secure":"");document.cookie=cookieValue;};com.art.core.cookie.Cookie.prototype.deleteCookie=function(name)
{var cookie_date=new Date();cookie_date.setTime(cookie_date.getTime()-1);document.cookie=name+"=; expires="+cookie_date.toGMTString();};com.art.core.cookie.Cookie.prototype.getCookie=function(name)
{return this.getCookieBase(name);};com.art.core.cookie.Cookie.prototype.getCookieBase=function(name)
{var cookies=document.cookie.split("; ");var cmatch=[];var idx=0;var i=0;var namelen=name.length;var clen=cookies.length;for(i=0;i<clen;i++){var c=cookies[i];if((c.substring(0,namelen+1))==(name+"=")){cmatch[idx++]=c;}}
var cmatchCount=cmatch.length;if(cmatchCount>0){idx=0;if((cmatchCount>1)&&(name==this.fpc)){var dLatest=new Date(0);for(i=0;i<cmatchCount;i++){var lv=parseInt(this.dcsGetCrumb(cmatch[i],"lv"));var dLst=new Date(lv);if(dLst>dLatest){dLatest.setTime(dLst.getTime());idx=i;}}}
return unescape(cmatch[idx].substring(namelen+1));}
else{return null;}};com.art.core.cookie.Cookie.prototype.getCookieVal=function(offset)
{var endstr=document.cookie.indexOf(";",offset);if(endstr==-1)
endstr=document.cookie.length;return unescape(document.cookie.substring(offset,endstr));};com.art.core.services.AccountAuthorizationAPIService=function(base)
{this.base=base;this.serviceUrl=this.base.environment.serviceUrlAccountAuthenticationApi;this.constants={profileImageType:{icon:"Icon",signature:"Signature"}};};com.art.core.services.AccountAuthorizationAPIService.prototype.accountAuthenticate=function(callbacks,apiKey,sessionId,emailAddress,password)
{var url;var operation="AccountAuthenticate";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['emailAddress',emailAddress];properties[3]=['password',password];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountGet=function(callbacks,apiKey,sessionId,authToken)
{var url;var operation="AccountGet";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountAuthenticateWithFacebookUID=function(callbacks,apiKey,sessionId,facebookUID,emailAddress,firstName,lastName,accessToken)
{var url;var operation="AccountAuthenticateWithFacebookUID";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['facebookUID',facebookUID];properties[3]=['emailAddress',emailAddress];properties[4]=['firstName',firstName];properties[5]=['lastName',lastName];properties[6]=['facebookToken',accessToken];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountCreate=function(callbacks,apiKey,sessionId,emailAddress,password)
{var url;var operation="AccountCreate";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['emailAddress',emailAddress];properties[3]=['password',password];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountCreateAnonymous=function(callbacks,apiKey,sessionId)
{var url;var operation="AccountCreateAnonymous";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountRetrievePassword=function(callbacks,apiKey,sessionId,emailAddress)
{var url;var operation="AccountRetrievePassword";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['emailAddress',emailAddress];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountMerge=function(callbacks,apiKey,sessionId,fromAuthToken,toAuthToken)
{var url;var operation="AccountMerge";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['fromAuthToken',fromAuthToken];properties[3]=['toAuthToken',toAuthToken];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateLocation=function(callbacks,apiKey,sessionId,authToken,addressLine1,addressLine2,companyName,city,state,twoDigitIsoCountryCode,zipCode,primaryPhone,secondaryPhone)
{var url;var operation="AccountUpdateLocation";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['addressLine1',addressLine1];properties[4]=['addressLine2',addressLine2];properties[5]=['companyName',companyName];properties[6]=['city',city];properties[7]=['state',state];properties[8]=['twoDigitIsoCountryCode',twoDigitIsoCountryCode];properties[9]=['zipCode',zipCode];properties[10]=['primaryPhone',primaryPhone];properties[11]=['secondaryPhone',secondaryPhone];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateProfile=function(callbacks,apiKey,sessionId,authToken,firstName,lastName,title,companyName)
{var url;var operation="AccountUpdateProfile";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['firstName',firstName];properties[4]=['lastName',lastName];properties[5]=['title',title];properties[6]=['companyName',companyName];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateProfileBiography=function(callbacks,apiKey,sessionId,authToken,biography)
{var url;var operation="AccountUpdateProfile";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['biography',biography];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateProfileInspiration=function(callbacks,apiKey,sessionId,authToken,inspiration)
{var url;var operation="AccountUpdateProfile";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['inspiration',inspiration];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountAddProfileLink=function(callbacks,apiKey,sessionId,authToken,url,linkType)
{var url;var operation="AccountAddProfileLink";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['url',url];properties[4]=['linkType',linkType];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateProfileImage=function(callbacks,apiKey,sessionId,authToken,imageGuid,imageType)
{var url;var operation="AccountUpdateProfileImage";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['imageGuid',imageGuid];properties[4]=['type',imageType];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountChangePassword=function(callbacks,apiKey,sessionId,authToken,currentPassword,newPassword)
{var url;var operation="AccountChangePassword";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['currentPassword',currentPassword];properties[4]=['newPassword',newPassword];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateSettings=function(callbacks,apiKey,sessionId,authToken,emailAddress,emailFormat)
{var url;var operation="AccountUpdateSettings";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['emailAddress',emailAddress];properties[4]=['emailFormat',emailFormat];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AccountAuthorizationAPIService.prototype.accountUpdateNickname=function(callbacks,apiKey,sessionId,authToken,nickname)
{var url;var operation="AccountUpdateNickname";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['nickname',nickname];url=this.base.getUrl(this.base.environment.serviceUrlAccountAuthenticationApi,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.AdcNetService=function(base)
{this.base=base;this.serviceUrlAddToCart=this.base.environment.serviceUrlAddToCart;this.serviceUrlGetEventMessage=this.base.environment.serviceUrlGetEventMessage;};com.art.core.services.AdcNetService.prototype.addToCart=function(callbacks,queryString)
{var url;url=this.base.getUrlSimple(this.base.environment.serviceUrlAddToCart,queryString);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.XML);};com.art.core.services.AdcNetService.prototype.getEventMessageForProduct=function(callbacks,customerZoneId,languageIsoCode,countryIsoCode,apnum,podConfigId,serviceCode,dateUserCurrent)
{this.serviceUrlGetEventMessage;HolidayShippingPriorityID=1;var Parameters=[];var MethodParameters=[];Parameters["UserDate"]=dateUserCurrent;Parameters["customerZoneId"]=customerZoneId;Parameters["languageId"]=com.art.core.utils.LocalizationManager.convertLanguageIsoToLanguageId(languageIsoCode);Parameters["countryIsoA2"]=countryIsoCode;Parameters["ItemCount"]=1;MethodParameters["apnum"]=apnum;MethodParameters["podconfigid"]=podConfigId;MethodParameters["S"]=serviceCode;MethodParameters["ZoneProductID"]=apnum+"A";Parameters["item0"]=escape(com.art.core.utils.StringUtil.getQueryStringFromHash(MethodParameters));var url;var queryString=com.art.core.utils.StringUtil.getQueryStringFromHash(Parameters);url=this.base.getUrlSimple(this.base.environment.serviceUrlGetEventMessage,queryString);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.HTML);};com.art.core.services.EcommerceAPIService=function(base)
{this.base=base;this.serviceUrl=this.base.environment.serviceUrlEcommerceApi;};com.art.core.services.EcommerceAPIService.prototype.cartAddItem=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartGetActiveCountryList=function(callbacks,apiKey,sessionId)
{var url;var operation="CartGetActiveCountryList";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartGetActiveStateListByCountryCode=function(callbacks,apiKey,sessionId,twoDigitIsoCountryCode)
{var url;var operation="CartGetActiveStateListByCountryCode";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['twoDigitIsoCountryCode',twoDigitIsoCountryCode];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGetItemShareInformation=function(callbacks,apiKey,sessionId,authToken,galleryId,galleryItemId)
{var url;var operation="GalleryGetItemShareInformation";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['galleryId',galleryId];properties[4]=['galleryItemId',galleryItemId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGetItem=function(callbacks,apiKey,sessionId,galleryId,galleryItemId)
{var url;var operation="GalleryGetItem";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['galleryId',galleryId];properties[3]=['galleryItemId',galleryItemId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartGetShippingOptions=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartSubmitForOrder=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartUpdateCartItemQuantity=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartUpdateShippingAddress=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.cartUpdateShipmentPriority=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemGet=function(callbacks,apiKey,sessionId,itemId,lookupType)
{var url;var operation="CatalogItemGet";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['itemId',itemId];properties[3]=['lookupType',lookupType];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemGetFrameRecommendations=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemSearch=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemSearchByImage=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogGetContentBlock=function(callbacks,apiKey,sessionId,contentBlockName)
{var url;var operation="CatalogGetContentBlock";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['contentBlockName',contentBlockName];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogGetContentBlockString=function(callbacks,apiKey,sessionId,contentBlockName)
{var url;var operation="CatalogGetContentBlockString";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['contentBlockName',contentBlockName];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogGetFeaturedCategories=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemGetVariations=function(callbacks,apiKey,sessionId,itemId,lookupType)
{var url;var operation="ImageGetVariations";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['itemId',itemId];properties[3]=['lookupType',lookupType];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemVariationsGetMaster=function(callbacks,apiKey,sessionId,lookupType)
{var url;var operation="ImageGetMasterVariations";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['lookupType',lookupType];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryAddItem=function(callbacks,apiKey,sessionId,authToken,galleryId,itemId,lookupType,userImageTitle)
{var url;var operation="GalleryAddItem";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['galleryId',galleryId];properties[4]=['itemId',itemId];properties[5]=['lookupType',lookupType];properties[6]=['userImageTitle',userImageTitle];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryAddItemFromGallery=function(callbacks,apiKey,sessionId,authToken,sourceGalleryId,sourceGalleryItemId,destinationGalleryId)
{var url;var operation="GalleryAddItemFromGallery";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['sourceGalleryId',sourceGalleryId];properties[4]=['sourceGalleryItemId',sourceGalleryItemId];properties[5]=['destinationGalleryId',destinationGalleryId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryAddForUser=function(callbacks,apiKey,sessionId,authToken,galleryName,galleryVisibility)
{var url;var operation="GalleryAddForUser";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['galleryName',galleryName];properties[4]=['galleryVisibility',galleryVisibility];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryAddWallByImageGUID=function(callbacks,apiKey)
{var url;var operation="GalleryAddWallByImageGUID";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGet=function(callbacks,apiKey,sessionId,galleryId)
{var url;var operation="GalleryGet";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['galleryId',galleryId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGetByUser=function(callbacks,apiKey,sessionId,authToken)
{var url;var operation="GalleryGetByUser";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGetUserDefaultGallery=function(callbacks,apiKey,sessionId,authToken,defaultGalleryType)
{var url;var operation="GalleryGetUserDefaultGallery";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['defaultGalleryType',defaultGalleryType];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGetUserDefaultMobileGallery=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryGetUserDefaultWallGallery=function(callbacks,apiKey)
{var url;var operation="";var properties=[];properties[0]=['apiKey',apiKey];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.galleryRemoveItem=function(callbacks,apiKey,sessionId,authToken,galleryId,galleryItemId)
{var url;var operation="GalleryRemoveItem";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['galleryId',galleryId];properties[4]=['galleryItemId',galleryItemId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.CatalogGetSession=function(callbacks,apiKey,sessionId)
{this.catalogGetSession(callbacks,apiKey,sessionId);};com.art.core.services.EcommerceAPIService.prototype.catalogGetSession=function(callbacks,apiKey,sessionId)
{var url;var operation="CatalogGetSession";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.ApplicationGetForSession=function(callbacks,apiKey,sessionId)
{this.applicationGetForSession(callbacks,apiKey,sessionId);};com.art.core.services.EcommerceAPIService.prototype.applicationGetForSession=function(callbacks,apiKey,sessionId)
{var url;var operation="ApplicationGetForSession";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.initializeApi=function(callbacks,apiKey,applicationId,twoDigitISOCountryCode,twoDigitISOLanguageCode,persistentId)
{var url;var operation="InitializeAPI";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['applicationId',applicationId];properties[2]=['twoDigitISOCountryCode',twoDigitISOCountryCode];properties[3]=['twoDigitISOLanguageCode',twoDigitISOLanguageCode];properties[4]=['persistentId',persistentId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.getLanguageTranslations=function(callbacks,apiKey,sessionId,localizationAppId)
{var url;var operation="LocalizationGetLanguageTranslations";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['appId',localizationAppId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.imageUpdate=function(callbacks,apiKey,authToken,sessionId,imageId,imageGuid,ImageCropId,cropX,cropY,cropW,cropH,podConfigId,selectedService,selectedServiceSubType,maxImageAreaWidth,maxImageAreaHeight)
{var url;var operation="ImageUpdate";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['authToken',authToken];properties[2]=['sessionId',sessionId];properties[3]=['imageId',imageId];properties[4]=['imageGuid',imageGuid];properties[5]=['ImageCropId',ImageCropId];properties[6]=['cropX',cropX];properties[7]=['cropY',cropY];properties[8]=['cropW',cropW];properties[9]=['cropH',cropH];properties[10]=['podConfigId',podConfigId];properties[11]=['selectedService',selectedService];properties[12]=['selectedServiceSubType',selectedServiceSubType];properties[13]=['maxImageAreaWidth',maxImageAreaWidth];properties[14]=['maxImageAreaHeight',maxImageAreaHeight];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameCreateForUserImage=function(callbacks,apiKey,sessionId,authToken,imageGuid,podConfigId,imageCropId)
{var url;var operation="FrameCreateForUserImage";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['imageGuid',imageGuid];properties[4]=['podConfigId',podConfigId];properties[5]=['imageCropId',imageCropId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameUpdateCrop=function(callbacks,apiKey,sessionId,frameIdentifier,imageCropIdentifier,cropX,cropY,cropWidth,cropHeight)
{var url;var operation="FrameUpdateCrop";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameIdentifier];properties[3]=['imageCropIdentifier',imageCropIdentifier];properties[4]=['cropX',cropX];properties[5]=['cropY',cropY];properties[6]=['cropWidth',cropWidth];properties[7]=['cropHeight',cropHeight];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameCreate=function(callbacks,apiKey,sessionId,authToken,itemNumber,cropType,itemLookupType)
{var url;var operation="FrameCreate";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['authToken',authToken];properties[2]=['sessionId',sessionId];properties[3]=['itemId',itemId];properties[4]=['podConfigId',podConfigId];properties[5]=['imageCropId',imageCropId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameGetMoldingPriceByFrameId=function(callbacks,apiKey,sessionId,frameIdentifier,moldingItemNumber)
{var url;var operation="FrameGetMoldingPriceByFrameId";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameIdentifier];properties[3]=['moldingItemNumber',moldingItemNumber];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameDuplicateForCart=function(callbacks,apiKey,sessionId,frameIdentifier)
{var url;var operation="FrameDuplicateForCart";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameIdentifier];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameGetMoldingPriceByDimensions=function(callbacks,apiKey,sessionId,moldingItemNumber,width,height)
{var url;var operation="FrameGetMoldingPriceByDimensions";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['moldingItemNumber',moldingItemNumber];properties[3]=['innerDimensionWidth',width];properties[4]=['innerDimensionHeight',height];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameUpdateMolding=function(callbacks,apiKey,sessionId,frameIdentifier,moldingItemNumber,position)
{var url;var operation="FrameUpdateMolding";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameIdentifier];properties[3]=['moldingItemNumber',moldingItemNumber];properties[4]=['position',position];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameUpdateMatCount=function(callbacks,apiKey,sessionId,frameId,matCount)
{var url;var operation="FrameUpdateMatCount";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameId];properties[3]=['matCount',matCount];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameUpdateMat=function(callbacks,apiKey,sessionId,frameIdentifier,matItemNumber,position)
{var url;var operation="FrameUpdateMat";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameIdentifier];properties[3]=['matItemNumber',matItemNumber];properties[4]=['position',position];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameCreateForUserImage=function(callbacks,apiKey,sessionId,authToken,userIdentifier,imageGuid,podConfigId,imageCropId)
{var url;var operation="FrameCreateForUserImage";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['authToken',authToken];properties[3]=['userIdentifier',userIdentifier];properties[4]=['imageGuid',imageGuid];properties[5]=['podConfigId',podConfigId];properties[6]=['imageCropId',imageCropId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameUpdateCrop=function(callbacks,apiKey,sessionId,frameId,imageCropId,cropX,cropY,cropWidth,cropHeight)
{var url;var operation="FrameUpdateCrop";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameId];properties[3]=['imageCropid',imageCropId];properties[4]=['cropX',cropX];properties[5]=['cropY',cropY];properties[6]=['cropWidth',cropWidth];properties[7]=['cropHeight',cropHeight];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameUpdateImageSize=function(callbacks,apiKey,sessionId,frameId,podConfigId)
{var url;var operation="FrameUpdateImageSize";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['frameIdentifier',frameId];properties[3]=['podConfigId',podConfigId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.frameGetComponentsForUserImage=function(callbacks,apiKey,sessionId,itemNumber,itemLookupType)
{var url;var operation="FrameGetComponentsForUserImage";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['podConfigId',itemNumber];properties[3]=['itemLookupType',itemLookupType];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.catalogItemGetFrameComponents=function(callbacks,apiKey,sessionId,podConfigId)
{var url;var operation="CatalogItemGetFramingComponentsForUserImage";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['podConfigId',podConfigId];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.EcommerceAPIService.prototype.imageUpdateFrame=function(callbacks,apiKey,authToken,sessionId,PODConfigID,imageID,unitOfMeasure,frameId,imageCropId,fixToFixedFrame,glassId,moldingId,matCount,matOversized,mat1Id,mat2Id,mat3Id)
{var url;var operation="ImageUpdateFrame";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['authToken',authToken];properties[2]=['sessionId',sessionId];properties[3]=['podConfigId',PODConfigID];properties[4]=['imageId',imageID];properties[5]=['unitOfMeasure',unitOfMeasure];properties[6]=['frameId',frameId];properties[7]=['imageCropId',imageCropId];properties[8]=['fixToFixedFrame',fixToFixedFrame];properties[9]=['glassId',glassId];properties[10]=['moldingId',moldingId];properties[11]=['matCount',matCount];properties[12]=['matOversized',matOversized];properties[13]=['mat1Id',mat1Id];properties[14]=['mat2Id',mat2Id];properties[15]=['mat3Id',mat3Id];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.GalleryAPIService=function(base,apiKey,authToken)
{this.base=base;this.serviceUrl=this.base.environment.galleryServiceUrl;this.domainUrl=this.base.environment.domain;};com.art.core.services.GalleryAPIService.prototype.getUserGalleries=function(callbacks,data)
{var operation="getUserGalleries";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getGalleryWithItems=function(callbacks,data)
{var operation="getGalleryWithItems";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getUserDefaultGallery=function(callbacks,data)
{var operation="getUserDefaultGallery";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getGalleryDetailswithResultFilter=function(callbacks,data)
{var operation="getGalleryDetailswithResultFilter";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.updateGallery=function(callbacks,data)
{var operation="updateGallery";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.createGallery=function(callbacks,data){var operation="createGallery";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getUserLibrary=function(callbacks,data)
{var operation="getUserLibrary";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getSystemLibrary=function(callbacks,data)
{var operation="getSystemLibrary";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.addItemsToGallery=function(callbacks,data)
{var operation="addItemsToGallery";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.addItemsToDefaultGallery=function(callbacks,data)
{var operation="addItemsToDefaultGallery";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.moveGalleryItem=function(callbacks,data)
{var operation="moveGalleryItem";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.addBareWalls=function(callbacks,data)
{var operation="addBareWalls";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.updateBareWall=function(callbacks,data)
{var operation="updateBareWall";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.deleteGalleryItem=function(callbacks,data)
{var operation="removeGalleryItem";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.deleteGallery=function(callbacks,data)
{var operation="deleteGallery";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.removeWall=function(callbacks,data)
{var operation="removeWall";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.createWall=function(callbacks,data)
{var operation="createWall";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.updateWall=function(callbacks,data)
{var operation="updateWall";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.updateWallItems=function(callbacks,data)
{var operation="updateWallItems";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getWalls=function(callbacks,data)
{var operation="getWalls";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.shareWall=function(callbacks,data)
{var operation="shareaWall";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getWallByWallId=function(callbacks,data)
{var operation="getWallByWallId";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getWallByProfileKey=function(callbacks,data)
{var operation="getWallByProfileKey";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.getUserLibraryByProfileKey=function(callbacks,data)
{var operation="getUserLibraryByProfileKey";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.callAccountProxy=function(callbacks,data){this.AccountProxyUrl="http://"+this.domainUrl+"/ADC.NET/Root/Pages/MyGalleries/AccountProxy.aspx";this.base.doRequest(this.AccountProxyUrl,callbacks,'text/html',data);};com.art.core.services.GalleryAPIService.prototype.callMyAccountProxy=function(callbacks,data){var myAccountProxyUrl="http://"+this.domainUrl+"/asp/functions/myAccountProxy.asp";this.base.doRequest(myAccountProxyUrl,callbacks,'text/html',data);};com.art.core.services.GalleryAPIService.prototype.copyWallWithItems=function(callbacks,data)
{var operation="copyWallWithItems";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.prototype.shareGalleryItem=function(callbacks,data)
{var operation="shareGalleryItem";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GalleryAPIService.SORT_BY_DATE_ADDED=1;com.art.core.services.GalleryAPIService.SORT_BY_ARTIST_NAME=2;com.art.core.services.GalleryAPIService.SORT_BY_PRICE=3;com.art.core.services.GalleryAPIService.SORT_BY_TITLE=4;com.art.core.services.GalleryAPIService.SORT_DIRECTION_DESC=1;com.art.core.services.GalleryAPIService.SORT_DIRECTION_ASC=0;com.art.core.services.GraphAPIService=function(base,apiKey,authToken)
{this.base=base;this.serviceUrl=this.base.environment.graphAPIServiceUrl;this.domainUrl=this.base.environment.domain;};com.art.core.services.GraphAPIService.prototype.UpdateUserRelationship=function(data)
{var operation="UpdateUserRelationship";var url=this.base.getJSONUrl(this.serviceUrl,operation);var callbacks={successHandler:function(){},errorHandler:function(){},beforeSendHandler:function(){}};this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GraphAPIService.prototype.UpdateUserRelationshipForFollowsAndBookmark=function(callbacks,data)
{var operation="UpdateUserRelationship";var url=this.base.getJSONUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD=0;com.art.core.services.GraphAPIService.RelationshipChangeAction_REMOVE=1;com.art.core.services.GraphAPIService.RelationshipChangeAction_UPDATE=2;com.art.core.services.GraphAPIService.UserRelationshipType_LIKED=0;com.art.core.services.GraphAPIService.UserRelationshipType_DISLIKED=1;com.art.core.services.GraphAPIService.UserRelationshipType_SUBSCRIBED=2;com.art.core.services.GraphAPIService.UserRelationshipType_UNSUBSCRIBED=3;com.art.core.services.GraphAPIService.UserRelationshipType_COMMENTED=4;com.art.core.services.GraphAPIService.UserRelationshipType_CREATED=5;com.art.core.services.GraphAPIService.UserRelationshipType_SHARED=6;com.art.core.services.GraphAPIService.UserRelationshipType_VIEWED=7;com.art.core.services.GraphAPIService.UserRelationshipType_FRIENDSWITH=8;com.art.core.services.GraphAPIService.UserRelationshipType_FOLLOWS=9;com.art.core.services.GraphAPIService.UserRelationshipType_BOOKMARK=10;com.art.core.services.LoggingAPIService=function(base)
{this.base=base;this.serviceUrl=this.base.environment.serviceUrlLoggingApi;};com.art.core.services.LoggingAPIService.prototype.logError=function(callbacks,apiKey,sessionId,errorMessage,errorSource,errorName,errorLocation,errorObjectAsString)
{var url;var operation="LogError";var properties=[];properties[0]=['apiKey',apiKey];properties[1]=['sessionId',sessionId];properties[2]=['errorMessage',errorMessage];properties[3]=['errorSource',errorSource];properties[4]=['errorName',errorName];properties[5]=['errorLocation',errorLocation];properties[6]=['errorObjectAsString',errorObjectAsString];url=this.base.getUrl(this.serviceUrl,operation,properties);this.base.doRequest(url,callbacks);};com.art.core.services.DFEAPIService=function(base,apiKey,authToken)
{this.base=base;this.serviceUrl=this.base.environment.dfeAPIServiceUrl;this.domainUrl=this.base.environment.domain;};com.art.core.services.DFEAPIService.prototype.GetFrameSkuForFrameConfiguration=function(callbacks,data)
{var operation="GetFrameSkuForFrameConfiguration";var url=this.base.getAJAXUrl(this.serviceUrl,operation);this.base.doRequest(url,callbacks,com.art.core.services.ServiceProvider.JSONP,data);};com.art.core.services.SearchAPIService=function(base,apiKey,authToken)
{this.base=base;this.serviceUrl=this.base.environment.searchServiceUrl;this.domainUrl=this.base.environment.domain;};com.art.core.services.SearchAPIService.prototype.getSimilarImagesForImage=function(callbacks,data)
{var operation="GetSimilarImagesForImage";var url=this.serviceUrl;url+="/ajax/"+operation;url+="?method=?&Apnum="+data.Apnum;url+="&RecordsPerPage=24";url+="&PageNumber=1";url+="&CustomerZoneId="+this.base.environment.customerZoneId;url+="&CurrencyCode="+this.base.environment.currencyCode;url+="&ImageFilePath="+data.ImageFilePath;url+="&ArtistCategoryId=";url+="&ImageId=";url+="&Refinements=";url+="&ImageIdList=";url+="&apnumlist=";url+="&imagefilelist=";url+="&SearchType=";url+="&NumberOfResults=";url+="&DominantColorId=";url+="&RefinementId=";url+="&ArtistCategoryIdList=";url+="&SortBy=P_SiteRank";url+="&domain=com";url+="&FilterBlackListItems=false";this.base.doRequest(url,callbacks,'json');};com.art.core.services.ServiceProvider=function(env)
{this.name="ServiceProvider";this.environment=env;this.ecommerceAPIService=new com.art.core.services.EcommerceAPIService(this);this.galleryAPIService=new com.art.core.services.GalleryAPIService(this);this.accountAuthorizationAPIService=new com.art.core.services.AccountAuthorizationAPIService(this);this.adcNetService=new com.art.core.services.AdcNetService(this);this.loggingAPIService=new com.art.core.services.LoggingAPIService(this);this.searchAPIService=new com.art.core.services.SearchAPIService(this);this.dfeAPIService=new com.art.core.services.DFEAPIService(this);this.framingServiceAPI=new com.art.core.services.FramingServiceAPI(this);this.graphServiceAPI=new com.art.core.services.GraphAPIService(this);this.productServiceAPI=new com.art.core.services.ProductAPIService(this);this.contentType=com.art.core.services.ServiceProvider.JSON_CONTENT_TYPE;this.TEXT_CONTENT_TYPE=com.art.core.services.ServiceProvider.TEXT_CONTENT_TYPE;this.dataType=com.art.core.services.ServiceProvider.JSONP;this.type=com.art.core.services.ServiceProvider.GET;};com.art.core.services.ServiceProvider.XML_CONTENT_TYPE='application/xml; charset=utf-8';com.art.core.services.ServiceProvider.XML='xml';com.art.core.services.ServiceProvider.JSON_CONTENT_TYPE='application/json; charset=utf-8';com.art.core.services.ServiceProvider.JSON='json';com.art.core.services.ServiceProvider.JSONP='jsonp';com.art.core.services.ServiceProvider.TEXT_CONTENT_TYPE='text/plain; charset=utf-8';com.art.core.services.ServiceProvider.GET='get';com.art.core.services.ServiceProvider.POST='post';com.art.core.services.ServiceProvider.HTML='html';com.art.core.services.ServiceProvider.prototype.ecommerceAPIService;com.art.core.services.ServiceProvider.prototype.galleryAPIService;com.art.core.services.ServiceProvider.prototype.accountAuthorizationAPIService;com.art.core.services.ServiceProvider.prototype.adcNetService;com.art.core.services.ServiceProvider.prototype.loggingAPIService;com.art.core.services.ServiceProvider.prototype.FramingServiceAPI;com.art.core.services.ServiceProvider.prototype.doRequest=function(url,callbacks,methodType,data){if(methodType)
{switch(methodType)
{case com.art.core.services.ServiceProvider.XML:case com.art.core.services.ServiceProvider.JSON:case com.art.core.services.ServiceProvider.TEXT_CONTENT_TYPE:case com.art.core.services.ServiceProvider.JSONP:case com.art.core.services.ServiceProvider.HTML:this.dataType=methodType;break;}}
else
{this.dataType=com.art.core.services.ServiceProvider.JSONP;}
var requestObj={};requestObj.url=url;requestObj.dataType=this.dataType;if(this.dataType==this.JSON||this.dataType==this.JSONP)
{requestObj.jsonp='callback';requestObj.jsonpCallback='jsonpCallback';}
requestObj.beforeSend=function(){callbacks['beforeSendHandler']();};requestObj.success=function(response){callbacks['successHandler'](response);};requestObj.error=function(response){callbacks['errorHandler'](response);};if(data!=undefined){requestObj.data=data+"&X-Art-Request-Id="+com.art.core.utils.StringUtil.generateRandomNumber();}
else{requestObj.url=requestObj.url+com.art.core.utils.StringUtil.queryStringChr(requestObj.url)+"X-Art-Request-Id="+com.art.core.utils.StringUtil.generateRandomNumber();}
$.ajax(requestObj);};com.art.core.services.ServiceProvider.prototype.createHandlers=function(handlerSuccessFunction,handlerErrorFunction,handlerBeforeSendFunction)
{return{successHandler:handlerSuccessFunction,errorHandler:handlerErrorFunction,beforeSendHandler:handlerBeforeSendFunction};};com.art.core.services.ServiceProvider.prototype.getUrl=function(serviceUrl,operation,parameterKeyValueArray,serviceProviderContentType)
{var url=serviceUrl;if(serviceProviderContentType)
{if(serviceProviderContentType==this.JSON)
url+="/jsonp";}
else
{url+="/jsonp";}
if(operation.length)
url+="/"+operation;url+="?";for(var i=0;i<parameterKeyValueArray.length;i++)
{if(i>0)
{url+="&";}
url+=parameterKeyValueArray[i][0]+"="+parameterKeyValueArray[i][1];}
return url;};com.art.core.services.ServiceProvider.prototype.getUrlSimple=function(url,queryString)
{return url+"?"+queryString;};com.art.core.services.ServiceProvider.prototype.getJSONUrl=function(serviceUrl,operation,jsonpString)
{var url=serviceUrl;url+="/json";url+="/"+operation;return url;};com.art.core.services.ServiceProvider.prototype.getAJAXUrl=function(serviceUrl,operation,jsonpString)
{var url=serviceUrl;url+="/ajax";url+="/"+operation;return url;};com.art.core.services.ServiceProvider.prototype.doSyncRequest=function(url,callbacks){var requestObj={};requestObj.url=url;requestObj.processData=false;requestObj.cache=false;requestObj.success=function(response){callbacks['successHandler'](response);};requestObj.error=function(response){callbacks['errorHandler'](response);};$.ajax(requestObj);};com.art.core.services.ServiceProvider.normalizeServiceUrlCollection=function(foreignCollection)
{var returnValue={};var key='';jQuery.each(foreignCollection,function(j,valj){key=j.toLowerCase();if(key.toLowerCase().indexOf('serviceurl')>=0)
{if(key.indexOf('search')>=0)
returnValue['searchServiceUrl']=valj;else if(key.indexOf('graph')>=0)
returnValue['graphAPIServiceUrl']=valj;else if(key.indexOf('gallery')>=0)
returnValue['galleryServiceUrl']=valj;else if(key.indexOf('dfeapi')>=0)
returnValue['dfeAPIServiceUrl']=valj;else if(j=='domain')
returnValue['domain']=valj;else if(key.indexOf('accountauth')>=0)
returnValue['serviceUrlAccountAuthenticationApi']=valj;else if(key.indexOf('log')>=0)
returnValue['serviceUrlLoggingApi']=valj;else if(key.indexOf('framing')>=0)
returnValue['framingWebServiceURL']=valj;else if(key.indexOf('ecommerce')>=0)
returnValue['serviceUrlEcommerceApi']=valj;else if(key.indexOf('addtocart')>=0)
returnValue['serviceUrlAddToCart']=valj;else if(key.indexOf('eventmessage')>=0)
returnValue['serviceUrlGetEventMessage']=valj;else if(key.indexOf('environment')>=0)
returnValue['serviceUrlGetEnvironment']=valj;}});return returnValue;};com.art.core.services.FramingServiceAPI=function(base)
{this.base=base;this.serviceUrl=this.base.environment.framingWebServiceURL;};com.art.core.services.FramingServiceAPI.prototype.getFrameIdForDFE=function(callbacks,properties)
{this.serviceUrl="/asp/DFEHelper.asp";var url=this.base.getUrlSimple(this.serviceUrl,properties);this.base.doSyncRequest(url,callbacks);};com.art.core.services.ProductAPIService=function(base,apiKey,authToken)
{this.base=base;this.serviceUrl=this.base.environment.productAPIServiceUrl;this.domainUrl=this.base.environment.domain;this.type=com.art.core.services.ServiceProvider.GET;this.contentType=com.art.core.services.ServiceProvider.JSON_CONTENT_TYPE;this.dataType=com.art.core.services.ServiceProvider.JSONP;this.methodname="GetProductInformationByParams";};com.art.core.services.ProductAPIService.prototype.GetProductInformation=function(urlparam,obj)
{var url=this.serviceUrl;url+="/ajax/"+String(this.methodname).replace(/\-tag[\d]*/gi,'');url+="?method=?&"+urlparam;$.ajax({url:url,type:this.type,cache:true,contentType:this.contentType,dataType:this.dataType,beforeSend:function(){obj['getProductInfoBeforeSend']();},success:function(response){obj['getProductInfoSuccess'](response);},error:function(response){obj['getProductInfoError'](response);}});};var _gaq=_gaq||[];com.art.core.tracking.GoogleAnalytics=function(groupName)
{this.groupName=groupName;};com.art.core.tracking.GoogleAnalytics.prototype.init=function()
{var host=location.host;this.setup(this.getAccountId(host));};com.art.core.tracking.GoogleAnalytics.prototype.setup=function(id)
{if(!navigator.userAgent.match(/.*(KHTE|KTXN|GomezAgent|AlertSite|Pingdom|YottaMonitor).*/gi)){_gaq.push(['_setAccount',id]);}
(function()
{var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);return true;})();return false;};com.art.core.tracking.GoogleAnalytics.prototype.accounts={"art.com":"UA-15714084-1","art.co.uk":"UA-15714093-1","eu.art.com":"UA-15715374-1","potterybarn-photos.com":"UA-15714084-2","allposters.com":"UA-15715175-1","allposters.co.uk":"UA-15715653-1","allposters.fr":"UA-15714863-1","allposters.de":"UA-15714098-1"};com.art.core.tracking.GoogleAnalytics.prototype.globalAccounts={"art":"UA-15715646-1","apc":"UA-15715169-1"};com.art.core.tracking.GoogleAnalytics.prototype.getGlobalAccountId=function(host)
{var h=host||location.host;if(h.indexOf("art.")>=-1)
{return this.globalAccounts["art"];}
else
{return this.globalAccounts["apc"];}};com.art.core.tracking.GoogleAnalytics.prototype.getAccountId=function(domain)
{var gaAccountId=this.accounts["art.com"];var gaAccountName="eu.art.com";if(domain.indexOf("www.")>=0)
{gaAccountName=domain.substring(domain.indexOf(".")+1,domain.length);}
else if(domain.indexOf(gaAccountName)<0)
{gaAccountName=domain;}
gaAccountId=this.accounts[gaAccountName];return gaAccountId;};com.art.core.tracking.GoogleAnalytics.prototype.trackPageView=function(pageViewName)
{if(typeof(_gaq)!="undefined")
{if(typeof(pageViewName)!="undefined")
{this.debugMessage("GA Group Name : "+this.groupName+", GA Event Name : trackPageView, GA PageViewName : "+pageViewName);_gaq.push(['_trackPageview',pageViewName]);}
else
{this.debugMessage("GA Group Name : "+this.groupName+", GA Event Name : trackPageView, GA PageViewName : [not specified]");_gaq.push(['_trackPageview']);}
return true;}
else{throw Error('GA is not setup; art.core.GoogleAnalytics');}
return false;};com.art.core.tracking.GoogleAnalytics.prototype.trackEvent=function(eventName)
{if(typeof(_gaq)!="undefined")
{this.debugMessage("GA Group Name : "+this.groupName+", GA Event Name : "+eventName);_gaq.push(['_trackEvent',this.groupName,eventName,eventName]);return true;}
else
{throw Error('GA is not setup; art.core.GoogleAnalytics');}
return false;};com.art.core.tracking.GoogleAnalytics.prototype.trackEventWithCategory=function(categoryName,eventName){if(typeof(_gaq)!="undefined"){this.debugMessage("GA Group Name : "+this.groupName+", GA Category Name : "+categoryName+", GA Event Name : "+eventName);_gaq.push(['_trackEvent',this.groupName,categoryName,eventName]);return true;}
else{throw Error('GA is not setup; art.core.GoogleAnalytics');}
return false;};com.art.core.tracking.GoogleAnalytics.prototype.setCustomVar=function(index,name,value,opt_scope)
{if(typeof(_gaq)!="undefined")
{var o=1;if(!com.art.core.utils.ObjectUtil.isNullOrEmpty(opt_scope))
o=opt_scope;this.debugMessage("GA Group Name : "+this.groupName+", GA SetCustomVar : index = "+index+", name = "+name+", value = "+value+", opt_scope = "+o+" ,gaq="+_gaq);_gaq.push(['_setCustomVar',index,name,value,o]);}
else{throw Error('GA is not setup; art.core.GoogleAnalytics');}};com.art.core.tracking.GoogleAnalytics.prototype.debugMessage=function(str)
{trace("AccountId: "+this.getAccountId(location.host)+" "+this.getDelimiter()+" "+str);};com.art.core.tracking.GoogleAnalytics.prototype.getDelimiter=function()
{return'-';};com.art.core.vos.ImageVO=function(title)
{this.NAME=com.art.core.vos.ImageVO.NAME;this.Title=title;};com.art.core.vos.ImageVO.NAME="ImageVO";com.art.core.vos.ImageVO.prototype.Title='';com.art.core.vos.ImageVO.prototype.ImageUrl='';com.art.core.vos.ImageVO.prototype.ZoomImageUrl='';com.art.core.vos.ImageVO.prototype.NoWatermarkImageUrl='';com.art.core.vos.ImageVO.prototype.FileName='';com.art.core.vos.ImageVO.prototype.UploadedImageUrl='';com.art.core.vos.ImageVO.prototype.ArtistName='';com.art.core.vos.ImageVO.prototype.Price='';com.art.core.vos.ImageVO.prototype.MasterDisplayPrice='';com.art.core.vos.ImageVO.prototype.LargeImageWidth='';com.art.core.vos.ImageVO.prototype.LargeImageHeight='';com.art.core.vos.ImageVO.prototype.Position='';com.art.core.vos.ImageVO.prototype.ImageId=0;com.art.core.vos.ImageVO.prototype.ImageGuid='';com.art.core.vos.ImageVO.prototype.ArtistCategoryId=0;com.art.core.vos.ImageVO.prototype.CategoryID=0;com.art.core.vos.ImageVO.prototype.ProductPageUrl='';com.art.core.vos.ImageVO.prototype.MasterProductID=0;com.art.core.vos.ImageVO.prototype.MasterSpecID='';com.art.core.vos.ImageVO.prototype.Apnum=0;com.art.core.vos.ImageVO.prototype.OtherSizes='';com.art.core.vos.ImageVO.prototype.ImageMedWidth='';com.art.core.vos.ImageVO.prototype.ImageMedHeight='';com.art.core.vos.ImageVO.prototype.ArtistUrl='';com.art.core.vos.ImageVO.prototype.ShowMarkDown='';com.art.core.vos.ImageVO.prototype.MarkDownPrice='';com.art.core.vos.ImageVO.prototype.ItemGroupTypeID='';com.art.core.vos.ImageVO.prototype.Type="";com.art.core.vos.ImageVO.prototype.MasterZoneProductId='';com.art.core.vos.ImageVO.prototype.IsCustomerUpload=false;com.art.core.vos.ImageVO.prototype.ItemDisplayedType='';com.art.core.vos.ImageVO.prototype.PhysicalInchWidth='';com.art.core.vos.ImageVO.prototype.PhysicalInchHeight='';com.art.core.vos.ImageVO.prototype.TimeToShipDisplayText='';com.art.core.vos.ImageVO.prototype.AppendDropShadow=true;com.art.core.vos.ImageVO.prototype.MasterPodConfigId='';com.art.core.vos.ImageVO.imageType={CATALOG:'catalog',UPLOADED:'uploaded',SEARCH:'search',WALL:'wall'};com.art.core.vos.ImageVO.itemTypes={CatalogItem:'CatalogItem',CustomFramedItem:'CustomFramedItem',FramedItemRecommendation:'FramedItemRecommendation',UserUploadedItem:'UserUploadedItem',CompositeSKU:"CompositeSKU"};com.art.core.vos.ImageVO.itemTypeCollection=[{name:null,id:0},{name:com.art.core.vos.ImageVO.itemTypes.CatalogItem,id:1},{name:com.art.core.vos.ImageVO.itemTypes.CustomFramedItem,id:2},{name:com.art.core.vos.ImageVO.itemTypes.FramedItemRecommendation,id:3},{name:com.art.core.vos.ImageVO.itemTypes.UserUploadedItem,id:4},{name:com.art.core.vos.ImageVO.itemTypes.CompositeSKU,id:5}];com.art.core.vos.ImageVO.prototype.getTestImage=function(obj)
{this.Title="Customer Photo";this.ImageUrl="http://cache2.artprintimages.com/p/MED/21/2190/U4GAD00Z/art-print/ron-burns-i-wanna-go.jpg";this.Type=com.art.core.vos.ImageVO.imageType.UPLOADED;this.Price='';this.MasterDisplayPrice='';this.Apnum='';this.IsCustomerUpload=true;this.ItemDisplayedType="Customer Photo";this.PhysicalInchWidth=0;this.PhysicalInchHeight=0;this.TimeToShipDisplayText="";};com.art.core.vos.ImageVO.prototype.getTestCatalogImage=function()
{this.parseCatalogImageDetail("323186","Keep Calm and Carry On","796808",16,"http://cache2.artprintimages.com/MED/7/796/RCJI000Z.jpg","http://cache2.artprintimages.com/MED/7/796/RCJI000Z.jpg","9.99","19.99","ArtistName","10286380","A","10286380A","10","16","11","17","/gallery/id--a15897/philip-rugel-posters.htm","12","18","1-2 days","http://www.art.com/products/p13936089-sa-i2784740/vincent-van-gogh-irises-saint-remy-c1889.htm");};com.art.core.vos.ImageVO.prototype.parseCatalogImageDetail=function(apnum,title,imageId,artistCategoryId,imageUrl,largeImageUrl,price,masterDisplayPrice,artistName,masterProductID,masterSpecID,masterZoneProductId,largeImageWidth,largeImageHeight,imageMedWidth,imageMedHeight,artistUrl,physicalInchWidth,physicalInchHeight,timeToShipDisplayText,productPageUrl)
{this.LrgImageUrl=String(largeImageUrl).replace('/MED','/MED');this.ImageUrl=imageUrl;this.ArtistCategoryId=artistCategoryId;this.ImageId=imageId;this.Apnum=apnum;this.Title=title;this.Type=com.art.core.vos.ImageVO.imageType.CATALOG;this.Price=price;this.MasterDisplayPrice=masterDisplayPrice;this.ArtistName=artistName;this.MasterProductID=masterProductID;this.MasterSpecID=masterSpecID;this.MasterZoneProductId=masterZoneProductId;this.LargeImageWidth=largeImageWidth;this.LargeImageHeight=largeImageHeight;this.ImageMedWidth=imageMedWidth;this.ImageMedHeight=imageMedHeight;this.ArtistUrl=artistUrl;this.PhysicalInchWidth=physicalInchWidth;this.PhysicalInchHeight=physicalInchHeight;this.TimeToShipDisplayText=timeToShipDisplayText;this.ProductPageUrl=productPageUrl;};com.art.core.vos.ImageVO.prototype.parseUploadCustomerPhotoData=function(obj)
{this.ImageId=obj.ImageID;this.ImageGuid=obj.ImageGUID;this.Title="Customer Photo";this.ImageUrl=obj.MedImageUrl;this.LrgImageUrl=obj.LrgImageUrl;this.ZoomImageUrl=obj.ZoomImageUrl;this.FileName=obj.fileName;this.UploadedImageUrl=obj.UploadedImageUrl;this.Type=com.art.core.vos.ImageVO.imageType.UPLOADED;this.Price='';this.MasterDisplayPrice='';this.Apnum=0;this.ArtistCategoryId=0;this.MasterZoneProductId='';this.IsCustomerUpload=true;this.ItemDisplayedType="Customer Photo";this.PhysicalInchWidth=0;this.PhysicalInchHeight=0;this.TimeToShipDisplayText="";};com.art.core.vos.ImageVO.prototype.parseImageUploadData=function(obj)
{this.Title="Customer Photo";this.ImageUrl=obj.SrchMedImageUrl;this.LrgImageUrl=obj.SrchImageUrl;this.FileName=obj.fileName;this.UploadedImageUrl=obj.UploadedImageUrl;this.Type=com.art.core.vos.ImageVO.imageType.UPLOADED;this.Price='';this.MasterDisplayPrice='';this.Apnum=0;this.ArtistCategoryId=0;this.MasterZoneProductId='';this.IsCustomerUpload=true;this.ItemDisplayedType="Customer Photo";this.PhysicalInchWidth=0;this.PhysicalInchHeight=0;this.TimeToShipDisplayText="";};com.art.core.vos.ImageVO.prototype.parseSearchServiceImageDetail=function(imageDetail)
{this.Title=imageDetail.Title;this.ImageUrl=imageDetail.UrlInfo.ImageUrl;this.LrgImageUrl=String(imageDetail.UrlInfo.ImageUrl).replace('/MED','/LRG');this.ZoomImageUrl=imageDetail.UrlInfo.ZoomUrl;this.NoWatermarkImageUrl=imageDetail.UrlInfo.ZoomUrlWithoutWatermark;this.FileName="";this.Type=com.art.core.vos.ImageVO.imageType.CATALOG;this.Price=imageDetail.ItemPrice.Price;this.MasterDisplayPrice=imageDetail.ItemPrice.DisplayPriceMaster;this.Apnum=imageDetail.APNum;if(imageDetail.Artist!=null)
{if(imageDetail.Artist.FirstName||imageDetail.Artist.LastName)
this.ArtistName=imageDetail.Artist.FirstName+imageDetail.Artist.LastName;else
this.ArtistName="";this.ArtistCategoryId=imageDetail.Artist.ArtistCategoryId;this.ArtistUrl=imageDetail.Artist.ArtistUrl;}
this.MasterZoneProductId=imageDetail.ZoneProductID;this.ImageId=imageDetail.ImageId;this.IsCustomerUpload=false;this.ItemDisplayedType=imageDetail.ItemDisplayedType;this.PhysicalInchWidth=imageDetail.PhysicalDimensions.Width;this.PhysicalInchHeight=imageDetail.PhysicalDimensions.Height;if(imageDetail.FulfillmentInformation)
this.TimeToShipDisplayText=imageDetail.FulfillmentInformation.TimeToShip.DisplayText;this.ProductPageUrl=imageDetail.UrlInfo.ProductPageUrl;this.AppendDropShadow=imageDetail.AppendShadow==1;this.CroppedSquareImageUrl=imageDetail.UrlInfo.CroppedSquareImageUrl;if(imageDetail.PodInfo!==null&&imageDetail.PodInfo!==undefined&&imageDetail.PodInfo.MasterPodConfigId!==null&&imageDetail.PodInfo.MasterPodConfigId!==undefined)
this.MasterPodConfigId=imageDetail.PodInfo.MasterPodConfigId;};com.art.core.vos.ImageVO.prototype.isSameAs=function(incomingImageVo)
{if(this.Apnum==incomingImageVo.Apnum&&this.ImageId==incomingImageVo.ImageId)
return true;else
return false;};com.art.core.vos.RequestBaseVO=function(environment)
{this.countryCode=environment.countryCode;this.currencyCode=environment.currencyCode;this.currencyId=environment.currencyId;this.customerZoneId=environment.customerZoneId;this.languageId=environment.languageId;this.languageIso=environment.languageIso;this.searchServiceUrl=environment.searchServiceUrl;this.sessionid=environment.sessionid;this.domain=environment.domain;this.productServiceUrl=environment.productServiceUrl;};com.art.core.vos.MouldingVO=function(sourceMoulding,imagePath)
{this.NAME=com.art.core.vos.MouldingVO.NAME;this.apNum=sourceMoulding.ApNum;this.mouldingId=sourceMoulding.MouldingId;this.Name=sourceMoulding.Name;this.color=sourceMoulding.Color;this.style=sourceMoulding.Style;this.finish=sourceMoulding.Finish;this.material=sourceMoulding.Material;this.width=sourceMoulding.Width;this.height=sourceMoulding.Height;this.isPopular=sourceMoulding.IsPopular;this.description=sourceMoulding.Description;this.baseThumbImageUrl=imagePath+'/images/framing/hires/$ID/thumb/$ID.jpg';this.getThumbImageUrl=function(){return this.baseThumbImageUrl.replace(/\$ID/g,this.apNum);};};com.art.core.vos.MouldingVO.NAME="MouldingVO";com.art.core.vos.MouldingVO.prototype.apNum='';com.art.core.vos.MouldingVO.prototype.mouldingId='';com.art.core.vos.MouldingVO.prototype.name='';com.art.core.vos.MouldingVO.prototype.color='';com.art.core.vos.MouldingVO.prototype.style='';com.art.core.vos.MouldingVO.prototype.finish='';com.art.core.vos.MouldingVO.prototype.material='';com.art.core.vos.MouldingVO.prototype.width='';com.art.core.vos.MouldingVO.prototype.height='';com.art.core.vos.MouldingVO.prototype.isPopular='';com.art.core.vos.MouldingVO.prototype.description='';com.art.core.vos.MouldingVO.filterByUniqueApNum=function(outerArray,path)
{var uniques={};var finalCollection=[];for(var array in outerArray)
{var arr=outerArray[array];for(var i=0;i<arr.length;i++)
{var moulding=arr[i];if(uniques[moulding.ApNum]==undefined)
{uniques[moulding.ApNum]=true;finalCollection.push(new com.art.core.vos.MouldingVO(moulding,path));}}}
return finalCollection;};com.art.core.vos.MouldingVO.filterByUniqueApNum=function(outerArray,path)
{var uniques={};var finalCollection=[];for(var array in outerArray)
{var arr=outerArray[array].Mouldings;for(var i=0;i<arr.length;i++)
{var moulding=arr[i];if(uniques[moulding.ApNum]==undefined)
{uniques[moulding.ApNum]=true;finalCollection.push(new com.art.core.vos.MouldingVO(moulding,path));}}}
return finalCollection;};com.art.core.vos.MouldingVO.ConvertToMouldingVOArray=function(serviceSideMouldingsArray,imagePath)
{var outputMouldings=[];for(var index in serviceSideMouldingsArray)
{for(var innerIndex in serviceSideMouldingsArray[index].Mouldings)
{outputMouldings.push(new com.art.core.vos.MouldingVO(serviceSideMouldingsArray[index].Mouldings[innerIndex],imagePath));}}
return outputMouldings;};com.art.core.vos.MatVO=function(sourceMat,imagePath)
{this.Name=sourceMat.Name;this.apNum=sourceMat.ApNum;this.MatId=sourceMat.MatId;this.frameType=sourceMat.FrameType;this.hexColor=sourceMat.HexColor;this.maxWidth=sourceMat.MaxWidth;this.maxHeight=sourceMat.MaxHeight;this.isOverSized=sourceMat.IsOverSized;this.isAcidFree=sourceMat.IsAcidFree;this.imageFile=sourceMat.ImageFile;this.imagePath=imagePath;this.fallbackImageURL="/images/framing/mats/transparent_mat_template_100x100.png";this.thumbBaseUrl=this.imagePath+"/images/framing/mats/hires/$ID/swatch/$ID_b.jpg";this.medBaseUrl=this.imagePath+"/images/framing/mats/hires/$ID/swatch/$ID_a.jpg";this.lrgBaseUrl=this.imagePath+"/images/framing/mats/hires/$ID/swatch/$ID.jpg";};com.art.core.vos.MatVO.prototype.getThumbImageUrl=function(){return this.getImageUrl(this.thumbBaseUrl);};com.art.core.vos.MatVO.prototype.getMedImageUrl=function(){return this.getImageUrl(this.medBaseUrl);};com.art.core.vos.MatVO.prototype.getLrgImageUrl=function(){return this.getImageUrl(this.lrgBaseUrl);};com.art.core.vos.MatVO.prototype.getFallbackImage=function()
{return this.imagePath+this.fallbackImageURL;};com.art.core.vos.MatVO.prototype.getImageUrl=function(base)
{if(this.MatId==undefined)
throw new Error("MatVO.getImageUrl() failed! MatId is undefined.");return base.replace(/\$ID/g,this.MatId);};com.art.core.vos.MatVO.NAME="MatVO";com.art.core.vos.MatVO.prototype.apNum='';com.art.core.vos.MatVO.prototype.matId='';com.art.core.vos.MatVO.prototype.frameType='';com.art.core.vos.MatVO.prototype.hexColor='';com.art.core.vos.MatVO.prototype.maxWidth='';com.art.core.vos.MatVO.prototype.maxHeight='';com.art.core.vos.MatVO.prototype.isOverSized='';com.art.core.vos.MatVO.prototype.isAcidFree='';com.art.core.vos.MatVO.prototype.yiq;com.art.core.vos.MatVO.prototype.imageFile='';com.art.core.vos.MatVO.prototype.vendorID='';com.art.core.vos.MatVO.prototype.legacyImageFile='';com.art.core.vos.MatVO.ConvertToMatVOArray=function(serviceSideMatsArray,imagePath)
{var outputMats=[];for(var inputMat in serviceSideMatsArray)
{outputMats.push(new com.art.core.vos.MatVO(serviceSideMatsArray[inputMat],imagePath));}
return outputMats;};com.art.core.vos.User=function(cookieNames)
{this.constants={};this.constants.emailFormat={html:"1",text:'0'};this.state={initialized:{session:false,profile:false,curator:false}};this.accountTypes=com.art.core.vos.User.accountTypes;this.cookie=new com.art.core.cookie.Cookie(cookieNames);this.session={};this.session.sessionId='';this.session.persistentId='';this.session.countryIso='';this.session.countryIsoGeoLocation='';this.session.languageIso='';this.session.currencyIso='';this.session.authenticationToken='';this.session.cartKey='';this.profile={};this.profile.accountId='';this.profile.accountType='';this.profile.username='';this.profile.firstName='';this.profile.lastName='';this.profile.email='';this.profile.emailFormat=this.constants.emailFormat.html;this.profile.profileKey='';this.profile.publicAlias='';this.profile.socialPartner={userId:'',token:''};this.curator={};this.curator.title='';this.curator.biography='';this.curator.inspiration='';this.curator.links=[{httpUrl:'',linkType:''}];this.curator.location={firstName:'',lastName:'',companyName:'',address1:'',address2:'',city:'',state:'',zip:'',country:'',countryIsoA2:'',countryIsoA3:'',county:'',phone:''};this.curator.profileImage={zoom:{width:'',height:'',http:'',https:''},large:{width:'',height:'',http:'',https:''},medium:{width:'',height:'',http:'',https:''},small:{width:'',height:'',http:'',https:''},thumb:{width:'',height:'',http:'',https:''}};this.curator.signatureImage={zoom:{width:'',height:'',http:'',https:''},large:{width:'',height:'',http:'',https:''},medium:{width:'',height:'',http:'',https:''},small:{width:'',height:'',http:'',https:''},thumb:{width:'',height:'',http:'',https:''}};};com.art.core.vos.User.accountTypes={Unknown:"0",Anonymous:"1",Default:"2",Facebook:"3"};com.art.core.vos.User.prototype.setAuthenticationToken=function(value){this.session.authenticationToken=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getAuthenticationToken=function()
{if(this.state.initialized.session)
{return this.session.authenticationToken;}
else
{return this.cookie.cookieGetStateData().authToken;}};com.art.core.vos.User.prototype.setSessionId=function(value){this.session.sessionId=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getSessionId=function(){return this.session.sessionId;};com.art.core.vos.User.prototype.setPersistentId=function(value){this.session.persistentId=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getPersistentId=function(){return this.session.persistentId;};com.art.core.vos.User.prototype.setCountryIso=function(value){this.session.countryIso=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getCountryIso=function(){return this.session.countryIso;};com.art.core.vos.User.prototype.setCountryIsoGeoLocation=function(value){this.session.countryIsoGeoLocation=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getCountryIsoGeoLocation=function(){return this.session.countryIsoGeoLocation;};com.art.core.vos.User.prototype.setLanguageIso=function(value){this.session.languageIso=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getLanguageIso=function(){return this.session.languageIso;};com.art.core.vos.User.prototype.setCurrencyIso=function(value){this.session.currencyIso=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getCurrencyIso=function(){return this.session.currencyIso;};com.art.core.vos.User.prototype.setCartKey=function(value){this.session.cartKey=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getCartKey=function(){return this.session.cartKey;};com.art.core.vos.User.prototype.setAccountId=function(value){this.profile.accountId=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getAccountId=function(){return this.profile.accountId;};com.art.core.vos.User.prototype.setAccountType=function(value){this.profile.accountType=this.normalizeAccountType(value);};com.art.core.vos.User.prototype.getAccountType=function()
{if(this.state.initialized.profile)
{return this.profile.accountType;}
else
{return this.cookie.cookieGetStateData().accountType;}};com.art.core.vos.User.prototype.setUserName=function(value){this.profile.username=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getUserName=function(){return this.profile.username;};com.art.core.vos.User.prototype.setFirstName=function(value){this.profile.firstName=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getFirstName=function(){return this.profile.firstName;};com.art.core.vos.User.prototype.setLastName=function(value){this.profile.lastName=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getLastName=function(){return this.profile.lastName;};com.art.core.vos.User.prototype.setEmail=function(value){this.profile.email=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getEmail=function(){return this.profile.email;};com.art.core.vos.User.prototype.setEmailFormat=function(value)
{if(value==this.constants.emailFormat.html||value==this.constants.emailFormat.text)
this.profile.emailFormat=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getEmailFormat=function(){return this.profile.emailFormat;};com.art.core.vos.User.prototype.setProfileKey=function(value){this.profile.profileKey=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getProfileKey=function(){return this.profile.profileKey;};com.art.core.vos.User.prototype.getProfileUrl=function(){return this.profile.profileKey;};com.art.core.vos.User.prototype.setPublicAlias=function(value){this.profile.publicAlias=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getPublicAlias=function(){return this.profile.publicAlias;};com.art.core.vos.User.prototype.setSocialPartner=function(value)
{try
{if(typeof value!='null'&&typeof value!='undefined')
{this.profile.socialPartner.userId=value.UserID;this.profile.socialPartner.token=value.token;}}
catch(e)
{}};com.art.core.vos.User.prototype.getSocialPartner=function(){return this.profile.socialPartner;};com.art.core.vos.User.prototype.setTitle=function(value){this.curator.title=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getTitle=function(){return this.curator.title;};com.art.core.vos.User.prototype.setBiography=function(value){this.curator.biography=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getBiography=function(){return this.curator.biography;};com.art.core.vos.User.prototype.setInspiration=function(value){this.curator.inspiration=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getInspiration=function(){return this.curator.inspiration;};com.art.core.vos.User.prototype.setLocation=function(address1,address2,city,state,zip,country,countryIsoA2,countryIsoA3,county)
{this.curator.location.address1=address1;this.curator.location.address2=address2;this.curator.location.city=city;this.curator.location.state=state;this.curator.location.country=country;this.curator.location.countryIsoA2=countryIsoA2;this.curator.location.countryIsoA3=countryIsoA3;this.curator.location.county=county;this.curator.location.zip=zip;};com.art.core.vos.User.prototype.getLocation=function(){return this.curator.location;};com.art.core.vos.User.prototype.setLinks=function(value)
{var i;if(value!=undefined)
{for(i=0;i<value.length;i++)
this.curator.links[i]={httpUrl:value[i].HttpUrl,linkType:value[i].LinkType};}};com.art.core.vos.User.prototype.getLinks=function()
{return this.curator.links;};com.art.core.vos.User.prototype.setCompanyName=function(value){this.curator.location.companyName=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getCompanyName=function(){return this.curator.location.companyName;};com.art.core.vos.User.prototype.setPhoneNumbers=function(value){this.curator.location.phone=this.normalizeEmpty(value);};com.art.core.vos.User.prototype.getPhoneNumbers=function(){return{primary:this.curator.location.phone,secondary:''};};com.art.core.vos.User.prototype.setProfileImageZoom=function(width,height,httpUrl,httpsUrl)
{this.curator.profileImage.zoom.width=width;this.curator.profileImage.zoom.height=height;this.curator.profileImage.zoom.http=httpUrl;this.curator.profileImage.zoom.https=httpsUrl;};com.art.core.vos.User.prototype.getProfileImageZoom=function(){return this.curator.profileImage.zoom;};com.art.core.vos.User.prototype.setProfileImageLarge=function(width,height,httpUrl,httpsUrl)
{this.curator.profileImage.large.width=width;this.curator.profileImage.large.height=height;this.curator.profileImage.large.http=httpUrl;this.curator.profileImage.large.https=httpsUrl;};com.art.core.vos.User.prototype.getProfileImageLarge=function(){return this.curator.profileImage.large;};com.art.core.vos.User.prototype.setProfileImageMedium=function(width,height,httpUrl,httpsUrl)
{this.curator.profileImage.medium.width=width;this.curator.profileImage.medium.height=height;this.curator.profileImage.medium.http=httpUrl;this.curator.profileImage.medium.https=httpsUrl;};com.art.core.vos.User.prototype.getProfileImageMedium=function(){return this.curator.profileImage.medium;};com.art.core.vos.User.prototype.setProfileImageSmall=function(width,height,httpUrl,httpsUrl)
{this.curator.profileImage.small.width=width;this.curator.profileImage.small.height=height;this.curator.profileImage.small.http=httpUrl;this.curator.profileImage.small.https=httpsUrl;};com.art.core.vos.User.prototype.getProfileImageSmall=function(){return this.curator.profileImage.small;};com.art.core.vos.User.prototype.setProfileImageThumb=function(width,height,httpUrl,httpsUrl)
{this.curator.profileImage.thumb.width=width;this.curator.profileImage.thumb.height=height;this.curator.profileImage.thumb.http=httpUrl;this.curator.profileImage.thumb.https=httpsUrl;};com.art.core.vos.User.prototype.getProfileImageThumb=function(){return this.curator.profileImage.thumb;};com.art.core.vos.User.prototype.updateUserProfileFromServer=function(response)
{if(response.AuthenticationToken!=undefined)
{this.setAuthenticationToken(response.AuthenticationToken);this.state.initialized.session=true;}
if(response.Account!=null&&response.Account!=undefined)
{var account=response.Account.ProfileInfo;this.setAccountId(account.AccountId);this.setAccountType(account.AccountType);this.setEmail(account.EmailAddress);this.setEmailFormat(account.EmailFormat);this.setUserName(account.UserName);this.setFirstName(account.FirstName);this.setLastName(account.LastName);this.setProfileKey(account.ProfileKey);this.setPublicAlias(account.PublicAlias);this.setSocialPartner(account.SocialPartner);this.state.initialized.profile=true;var curator=response.Account.CuratorInfo;if(curator!=null&&curator!=undefined)
{this.setTitle(curator.Title);this.setBiography(curator.Biography);this.setInspiration(curator.Inspiration);if(curator.Location!=undefined&&curator.Location!=null)
{this.setLocation(curator.Location.Address1,curator.Location.Address2,curator.Location.City,curator.Location.State,curator.Location.ZipCode,curator.Location.Country,curator.Location.CountryIsoA2,curator.Location.CountryIsoA3,curator.Location.County);this.setPhoneNumbers(curator.Location.Phone);}
this.setLinks(curator.Links);if(curator.ProfileImage!=undefined&&curator.ProfileImage!=null)
{var image=curator.ProfileImage.LargeImage;if(image!=null)
this.setProfileImageZoom(image.Dimensions.Width,image.Dimensions.Height,image.HttpImageURL,image.HttpsImageURL);image=curator.ProfileImage.LargeImage;if(image!=null)
this.setProfileImageLarge(image.Dimensions.Width,image.Dimensions.Height,image.HttpImageURL,image.HttpsImageURL);image=curator.ProfileImage.MediumImage;if(image!=null)
this.setProfileImageMedium(image.Dimensions.Width,image.Dimensions.Height,image.HttpImageURL,image.HttpsImageURL);image=curator.ProfileImage.SmallImage;if(image!=null)
this.setProfileImageSmall(image.Dimensions.Width,image.Dimensions.Height,image.HttpImageURL,image.HttpsImageURL);image=curator.ProfileImage.ThumbnailImage;if(image!=null)
this.setProfileImageThumb(image.Dimensions.Width,image.Dimensions.Height,image.HttpImageURL,image.HttpsImageURL);}
this.state.initialized.curator=true;}}};com.art.core.vos.User.prototype.isPublicAliasChosen=function()
{if(this.profile.publicAlias==null||this.profile.publicAlias==undefined||this.profile.publicAlias=='')
return false;else
return true;};com.art.core.vos.User.prototype.isFacebookUser=function()
{var r=false;try
{r=this.isAccountTypeFacebook();}
catch(e)
{}
return r;};com.art.core.vos.User.prototype.normalizeAccountType=function(value)
{var t=this.accountTypes;var r=t.Unknown;try
{if(value==undefined)
return r;}catch(e){return r;}
switch(value.toString())
{case t.Anonymous:case t.Default:case t.Facebook:return value.toString();break;default:return r;break;}};com.art.core.vos.User.prototype.normalizeEmpty=function(v)
{return v==undefined||v==null?'':v;};com.art.core.vos.User.prototype.isLoggedIn=function()
{var v=this.cookie.cookieGetStateData();if(v.authToken.length>0)
return true;else
return false;};com.art.core.vos.User.prototype.isAccountTypeAnonymous=function()
{var v=this.cookie.cookieGetStateData();if(v.accountType==this.accountTypes.Anonymous)
return true;else
return false;};com.art.core.vos.User.prototype.isAccountTypeDefault=function()
{var v=this.cookie.cookieGetStateData();if(v.accountType==this.accountTypes.Default)
return true;else
return false;};com.art.core.vos.User.prototype.isAccountTypeFacebook=function()
{var v=this.cookie.cookieGetStateData();if(v.accountType==this.accountTypes.Facebook)
return true;else
return false;};com.art.core.vos.User.prototype.getDisplayName=function()
{var value=this.getPublicAlias();if(value.length==0){value=this.getFirstName();}
if(value.length==0){value=this.getEmail();}
return value;};com.art.core.vos.Application=function()
{this.apiKey='';this.applicationId='';this.customerZoneId='';this.imageDomain='';this.translationApplicationId='';this.servicePriceBucketId='';this.photosToArtApnum='';this.serviceUrls={};this.serviceUrls.ecommerceApi='';this.serviceUrls.authenticationApi='';this.serviceUrls.logApi='';};com.art.core.vos.Application.prototype.setApiKey=function(value){this.apiKey=value;};com.art.core.vos.Application.prototype.getApiKey=function(){return this.apiKey;};com.art.core.vos.Application.prototype.setApplicationId=function(value){this.applicationId=value;};com.art.core.vos.Application.prototype.getApplicationId=function(){return this.applicationId;};com.art.core.vos.Application.prototype.setCustomerZoneId=function(value){this.customerZoneId=value;};com.art.core.vos.Application.prototype.getCustomerZoneId=function(){return this.customerZoneId;};com.art.core.vos.Application.prototype.setImageDomain=function(value){this.imageDomain=value;};com.art.core.vos.Application.prototype.getImageDomain=function(){return this.imageDomain;};com.art.core.vos.Application.prototype.setTranslationApplicationId=function(value){this.translationApplicationId=value;};com.art.core.vos.Application.prototype.getTranslationApplicationId=function(){return this.translationApplicationId;};com.art.core.vos.Application.prototype.setServiceUrlEcommerceApi=function(value){this.serviceUrls.ecommerceApi=value;};com.art.core.vos.Application.prototype.getServiceUrlEcommerceApi=function(){return this.serviceUrls.ecommerceApi;};com.art.core.vos.Application.prototype.setServiceUrlAuthenticationApi=function(value){this.serviceUrls.authenticationApi=value;};com.art.core.vos.Application.prototype.getServiceUrlAuthenticationApi=function(){return this.serviceUrls.authenticationApi;};com.art.core.vos.Application.prototype.setServiceUrlLogApi=function(value){this.serviceUrls.logApi=value;};com.art.core.vos.Application.prototype.getServiceUrlLogApi=function(){return this.serviceUrls.logApi;};com.art.core.vos.Environment=function(cookieNames,configuration)
{this.properties={};this.name=com.art.core.vos.Environment.NAME;this.initialized=false;this.isError=false;this.loadInterval=null;this.timeoutSeconds=10;this.knownAppVars=com.art.core.vos.Environment.knownAppVars;this.cookieNames={cdEnvLoaded:'arts',cEnvLoaded:'EnviromentLoaded'};$.updateObject(this.cookieName,cookieNames);this.config={serviceUrlGetEnvironment:'/asp/include/global/environment.asp'};$.updateObject(this.config,configuration);};com.art.core.vos.Environment.NAME='Environment';com.art.core.vos.Environment.knownAppVars={visualSearch:'visualSearchCoreEnvironment',myGalleries:'MyGalleriesEnvironmentVariables',photosToArt:'photosToArtCoreEnvironment',defaultName:'javascriptEnvironment'};com.art.core.vos.Environment.prototype.init=function(environmentJson)
{this.getFromLocalStorage();if($.hasProperties(this.properties))
this.initialized=true;if(environmentJson!==undefined&&typeof environmentJson=='object'&&$.hasProperties(environmentJson))
{$.updateObject(this.properties,environmentJson);this.setToLocalStorage();this.initialized=true;}
if(!this.initialized)
{this.getFromService();}
this.overrideStateValues();window.MyGalleriesEnvironmentVariables=this.properties;window.visualSearchCoreEnvironment=this.properties;};com.art.core.vos.Environment.prototype.overrideStateValues=function()
{var c=new com.art.core.cookie.Cookie(this.cookieNames);var s=c.cookieGetStateData();var map={authToken:s.authToken,accountType:s.accountType,profileURL:s.profileUrl,sessionId:s.sessionId,persistentId:s.persistentId};$.updateObject(this.properties,map);this.setToLocalStorage();};com.art.core.vos.Environment.prototype.getFromLocalStorage=function()
{try
{if(store.get(this.name)!=undefined)
{this.properties=store.get(this.name);return true;}}
catch(err)
{return false;}
return false;};com.art.core.vos.Environment.prototype.setToLocalStorage=function()
{try
{store.set(this.name,this.properties);if(store.get(this.name))
{var ch=new com.art.core.cookie.Cookie();var t=new Date();ch.setCookieDynamic(this.cookieNames.cdEnvLoaded,this.cookieNames.cEnvLoaded,'','true');}}
catch(err)
{}};com.art.core.vos.Environment.prototype.deleteFromLocalStorage=function()
{try
{store.remove(this.NAME);var ch=new com.art.core.cookie.Cookie();var t=new Date();var expLong=new Date(t.getFullYear()+2,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());ch.setCookieDynamic(this.cookieNames.cdEnvLoaded,this.cookieNames.cEnvLoaded,expLong,'false');}
catch(err)
{}};com.art.core.vos.Environment.prototype.updateEnvironment=function(env)
{$.updateObject(this.properties,env);this.setToLocalStorage();};com.art.core.vos.Environment.prototype.getFromService=function()
{var _this=this;_this.getFromServiceSuccess.environmentObject=this;$.ajax({type:"GET",url:_this.config.serviceUrlGetEnvironment,cache:false,async:false,success:_this.getFromServiceSuccess,failure:_this.getFromServiceFailure});};com.art.core.vos.Environment.prototype.getFromServiceSuccess=function(response)
{var _this=this;var o=this.success.environmentObject;eval(response);jQuery.each(o.knownAppVars,function(j,valj){try{o.updateEnvironment(eval(valj));}catch(err){}});o.initialized=true;};com.art.core.vos.Environment.prototype.getFromServiceFailure=function(response)
{if(!this.environmentObject.isError)
this.environmentObject.getFromService();};com.art.core.vos.Environment.logIn=function(cookieNames,configuration)
{var e=new com.art.core.vos.Environment(cookieNames,configuration);e.deleteFromLocalStorage();window.MyGalleriesEnvironmentVariables={};};com.art.core.vos.Environment.logOut=function(cookieNames,configuration)
{var e=new com.art.core.vos.Environment(cookieNames,configuration);e.deleteFromLocalStorage();window.MyGalleriesEnvironmentVariables={};};com.art.core.vos.Environment.updateKey=function(key,value)
{var e=new com.art.core.vos.Environment();e.getFromLocalStorage();$.updateObject(e.properties,{key:value});e.setToLocalStorage();};var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();var urlForUTE=unescape(window.location.href);var UTEuserAgent=navigator.userAgent.toLowerCase();var UTEBrie6=((UTEuserAgent.indexOf("msie 6")!=-1));var UTEBrie7=((UTEuserAgent.indexOf("msie 7")!=-1));if((urlForUTE.indexOf("/mountshop/")!=-1)||(UTEBrie6==true)||(UTEBrie7==true)){var pixel=new Image();var currentDate=new Date();currentDate=currentDate.getDate()+"/"+(currentDate.getMonth()+1)+"/"+currentDate.getFullYear()+" "+currentDate.getHours()+":"+currentDate.getMinutes()+":"+currentDate.getSeconds();pixel.src='/asp/UTERecording.asp'+'?'
+'UTE.REF='+escape(document.referrer)
+'&UTE.LOC='+escape(window.location)
+'&UTE.TS='+currentDate;}
else{var pixel=new Image();var currentDate=new Date();currentDate=currentDate.getDate()+"/"+(currentDate.getMonth()+1)+"/"+currentDate.getFullYear()+" "+currentDate.getHours()+":"+currentDate.getMinutes()+":"+currentDate.getSeconds();pixel.src='/asp/UTERecording.asp'+'?'
+'UTE.REF='+escape(document.referrer)
+'&UTE.LOC='+escape(window.location)
+'&UTE.TS='+currentDate;}var XMLHttpFactories=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];var tGuaranteePop;$(document).ready(function(){$(".guarantee-icon").live("mouseover",function(){if(!$(this).hasClass("guarantee-icon-hover")){$(this).addClass("guarantee-icon-hover");}
var guaranteeTopOffset=110;var guaranteeLeftOffset=40;if($.browser.msie&&parseInt($.browser.version,10)<9){guaranteeTopOffset=guaranteeTopOffset+10;guaranteeLeftOffset=guaranteeLeftOffset+10;}
$(".guarantee-popup").css("left",$(this).offset().left-guaranteeLeftOffset+"px");$(".guarantee-popup").css("top",$(this).offset().top-guaranteeTopOffset+"px");clearTimeout(tGuaranteePop);tGuaranteePop=setTimeout('showGuaranteePopUp()',500);});$(".guarantee-icon").live("mouseleave",function(){if($(".guarantee-icon").hasClass("guarantee-icon-hover")){$(".guarantee-icon").removeClass("guarantee-icon-hover");}
clearTimeout(tGuaranteePop);tGuaranteePop=setTimeout('hideGuaranteePopUp()',500);});$('.guarantee-popup').hover(function(){clearTimeout(tGuaranteePop);},function(){clearTimeout(tGuaranteePop);tGuaranteePop=setTimeout('hideGuaranteePopUp()',500);});if($.browser.msie&&parseInt($.browser.version,10)<9){$("<style>.guarantee-popup {filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=225, Color='#e2e2e2'),\n progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=45, Color='#e2e2e2'),\n progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#e2e2e2'),\n progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=315, Color='#e2e2e2');}</style>").appendTo('head');}});function showGuaranteePopUp(){clearTimeout(tGuaranteePop);$('.guarantee-popup').fadeIn();}
function hideGuaranteePopUp(){clearTimeout(tGuaranteePop);$('.guarantee-popup').hide();}
function getCropperUrl(id){var url;var zw,zh;if(id.indexOf("http://")>-1){url=id;}
else{var template=superZoomImageTemplate;var index=id.indexOf(".");var newid=index==-1?id:id.substring(0,index);url=template.replace("$IMG_ID",newid);}
if(typeof window.innerWidth!='undefined'){zw=window.innerWidth*.92;zh=window.innerHeight*.92;}
else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){zw=document.documentElement.clientWidth*.92;zh=document.documentElement.clientHeight*.92;}
else{zw=$(window).width()*.92;zh=$(window).height()*.92;}
var zurl=com.art.core.utils.BrowserUtil.getCroppedImageUrl(url,Math.round(zw),Math.round(zh),com.art.core.utils.BrowserUtil.cropperModes.NONE);return zurl;}
function createXMLHTTPObject(){var xmlhttp=false;for(var i=0;i<XMLHttpFactories.length;i++){try{xmlhttp=XMLHttpFactories[i]();}
catch(e){continue;}
break;}
return xmlhttp;}
function validateAndSaveEmail(theForm,errorline){var emailOK=false;var x=theForm.email.value;var filter=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(filter.test(x)){document.getElementById(errorline).style.visibility='hidden';emailOK=true;}
else{document.getElementById(errorline).style.visibility='visible';return(false);}
if(emailOK){req=createXMLHTTPObject();if(!req)return;userEmail=theForm.email.value;req.open("GET","/asp/newsletter/saveEmail.asp?email="+(userEmail),true);req.send(null);return true;}}
var CHECK_BLANK=1;var CHECK_REGEXP_EMAIL=2;function htmlControl(objControl,arEvals,arMessages){this.IsValid=false;this.objControl=objControl;this.arEvals=arEvals;this.arMessages=arMessages;}
function htmlForm(objForm,arControls,ErrorLabel){this.objForm=objForm;this.submitForm=false;this.ArrayControls=arControls;this.ErrorLabel=ErrorLabel;}
htmlForm.prototype.validateForm=validateForm;function RaiseError(pElementID,pDefaultMessage){if(document.getElementById){document.getElementById(pElementID).style.display="";}else{if(String(pDefaultMessage).length>0){alert(pDefaultMessage);}}}
function HideError(pElementID){if(document.getElementById){document.getElementById(pElementID).style.display="none";}}
function validateForm(){var IsAtLeastOneError=false;for(i=0;i<this.ArrayControls.length;i++){for(j=0;j<this.ArrayControls[i].arEvals.length;j++){switch(this.ArrayControls[i].arEvals[j]){case CHECK_BLANK:if(String(this.ArrayControls[i].objControl.value).length<=0){RaiseError(this.ArrayControls[i].arMessages[j],"");this.ArrayControls[i].IsValid=false;IsAtLeastOneError=true;}else{HideError(this.ArrayControls[i].arMessages[j]);this.ArrayControls[i].IsValid=true;}
break;case CHECK_REGEXP_EMAIL:if(RegularExpressionValidatorEvaluateIsValid(this.ArrayControls[i].objControl,/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)==false){RaiseError(this.ArrayControls[i].arMessages[j],"");this.ArrayControls[i].IsValid=false;IsAtLeastOneError=true;}else{HideError(this.ArrayControls[i].arMessages[j]);this.ArrayControls[i].IsValid=true;}
break;}
if(this.ArrayControls[i].IsValid==false){break;}}}
if(IsAtLeastOneError){if(this.ErrorLabel.length){RaiseError(this.ErrorLabel,"")};this.submitForm=false;}else{if(this.ErrorLabel.length){HideError(this.ErrorLabel)};this.submitForm=true;}}
function RegularExpressionValidatorEvaluateIsValid(objControl,strRegEx){var value=objControl.value
var rx=new RegExp(strRegEx);var matches=rx.exec(value);return(matches!=null&&value==matches[0]);}
function disableCtrlModifer(evt){var disabled={a:0,c:0,x:0,n:0,u:0};var ctrlMod=(window.event)?window.event.ctrlKey:evt.ctrlKey;var altMod=(window.event)?window.event.altKey:evt.altKey;var key=(window.event)?window.event.keyCode:evt.which;key=String.fromCharCode(key).toLowerCase();if(altMod){window.location.reload(false);window.blur();}
return(ctrlMod&&(key in disabled))?false:true;}
var bSentDiagnosticOnce=false;function keyCapture(e){var evt=(e)?e:(window.event)?window.event:null;var invoked='m';if(evt){var ctrlMod=(window.event)?window.event.ctrlKey:evt.ctrlKey;var shiftMod=(window.event)?window.event.shiftKey:evt.shiftKey;var key=(window.event)?window.event.keyCode:evt.which;key=String.fromCharCode(key).toLowerCase();if(ctrlMod&&shiftMod&&key==invoked&&bSentDiagnosticOnce==false){sendDiagnosticReport(true);bSentDiagnosticOnce=true;}}
return true;}
function sendDiagnosticReport(isPopup){req=createXMLHTTPObject();if(!req)return;postString="";if(isPopup)queryString="popup=true"
else queryString="popup=false"
req.open("POST","/asp/functions/diagnostics.asp?"+queryString);req.onreadystatechange=getResponseKeyCapture;req.send(postString);}
function getResponseKeyCapture(){if(req.readyState==4){$('#dartContainer').html(req.responseText);$('#dartContainer').css('top','150px');$('#dartContainer').css('left','500px');$('#dartContainer').show()}}
document.onkeydown=keyCapture;function showFreeShippingDetails(){window.open("/asp/customerservice/freeShipping_popup.asp","freeShipping","status=0,toolbar=0,location=0,menubar=0,resizable=1,scrollbars=auto,height=425,width=450");}
function getCookie(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return unescape(document.cookie.substring(c_start,c_end));}}
return"";}
function SetCookieDictionary(dictName,dictKey,dictValue,expires,path,domain,secure){var Dictionary=String(GetCookieBase(dictName));var newValue=new String();if(Dictionary!=null){if(Dictionary.indexOf("=")>0){if(Dictionary.indexOf(dictKey+"=")>=0){var arParts=Dictionary.split("&");var arVals=new Array();var indexOfEqual;for(var i=0;i<arParts.length;i++){indexOfEqual=String(arParts[i]).indexOf("=")
arVals[0]=String(arParts[i]).substring(0,indexOfEqual);arVals[1]=String(arParts[i]).substring(indexOfEqual+1);if(newValue.length!=0){newValue+="&"}
if(arVals[0]==dictKey){newValue+=arVals[0]+"="+escape(dictValue);}else{newValue+=arVals[0]+"="+escape(arVals[1]);}}
SetCookie(dictName,newValue,expires,path,domain,secure);}else{newValue=Dictionary+"&"+dictKey+"="+dictValue;SetCookie(dictName,newValue,expires,path,domain,secure);}}else{}}else{newValue=dictKey+"="+dictValue
SetCookie(dictName,newValue,expires,path,domain,secure)}}
function GetCookieDictionary(dictName,dictKey){var retval="";var tempString=String(GetCookieBase(dictName));var arPairs;var arKeyValue;if(tempString!=null){arPairs=tempString.split("&");for(var i=0;i<arPairs.length;i++){arKeyValue=arPairs[i].split("=");if(arKeyValue[0]==dictKey){retval=arKeyValue[1];return retval;}}}
return retval;}
function GetCookieBase(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){return GetCookieVal(j);}
i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}
return null;}
function SetCookie(name,value,expires,path,domain,secure){var cookieValue=name+"="+(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");document.cookie=cookieValue;}
function GetCookieVal(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1)endstr=document.cookie.length;return unescape(document.cookie.substring(offset,endstr));}
function getQueryStringValue(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null)
return"";else return results[1];}
isessionpicked=isSessionRandomPicked();isessionNumrepeat=false;israndomPicked=true;function isSessionRandomPicked(){var sessionID="";var retval=false;var lastChar="";sessionID=getCookie('CustSessionID');if(sessionID=="")sessionID=getQueryStringValue('ui');if(sessionID!=""){lastChar=sessionID.charAt(sessionID.length-1);if(lastChar=='0'||lastChar=='4'||lastChar=='8'||lastChar=='A'||lastChar=='B'){retval=true;}}
return retval;}
function highlightSearchBox(theAction,ABTest){theBorder=$("#searchBorder");theTextBox=document.getElementById("Search_String");if(theAction=='over'){if(theBorder.length){theBorder.css('borderColor','#FFCC00');}}
if(theAction=='out'){if(!ABTest){if(theTextBox.value=='SEARCH over 500,000 prints')theBorder.style.borderColor='#000000';else theBorder.style.borderColor='#FFCC00';}
else{if(theBorder.length){if(theTextBox.value=='')theBorder.css('borderColor','#000000');else theBorder.css('borderColor','#FFCC00');}}}}
function LoadAdchemy(ProductData){var sURL='<iframe src="http://banner.adchemy.com/bcs/retargetpixel?customer=art.com'+ProductData+'"\" width=\"2\" height=\"2\" marginwidth=\"0\" marginheight=\"0\" hspace=\"0\" vspace=\"0\" frameborder=\"0\" scrolling=\"no\" bordercolor=\"#000000\"></iframe>';$('#HeaderLogo').append(sURL);}
function MyGalLandingPage(action){var mygalUrl="";mygalUrl="http://"+window.location.hostname+action;window.location.href=mygalUrl;}
function GetCookieDomain(){var cookieDomain='.art.com';var hostName;hostName=window.location.hostname
var aPos=hostName.indexOf(".art");if(aPos>0){cookieDomain=hostName.substring(aPos);}
return cookieDomain;}
var sStringPlatform=self.navigator.platform;var sStringBrowser=self.navigator.userAgent;if('Mac'==sStringPlatform.substring(0,3)&&'Moz'==sStringBrowser.substring(0,3)){$(".HeaderMenubar").css('padding-top','8px');$(".HeaderMenubar").css('padding-bottom','7px');$(".headerMnuLink").css('padding-top','9px');$(".headerMnuLink").css('padding-bottom','8px');}
function isiOSDevice(){if(navigator.userAgent.match(/(iPod|iPhone|iPad)/i)){return true;}
else{return false;}}
function clickTrack(){window.open("https://www.scanalert.com/RatingVerify?ref=www.art.com","mcafee");}
function link(link){document.location=link;}
function openLink(link){window.open(link);}
var lbHeaderHelp;var cookieobject;var iClick;$(document).ready(function(){var ua=navigator.userAgent;iClick=(ua.match(/iPad/i))?"touchstart":"click";lbHeaderHelp=new com.art.core.components.LightBox('lbHeaderHelp','body',.7);toggleHeaderCart();$(window).scroll(function(){toggleHeaderCart();});$(window).resize(function(){toggleHeaderCart();});window.onscroll=function(){};if(navigator.platform=='iPad'||navigator.platform=='iPhone'||navigator.platform=='iPod'){$(".MyGalleriesTrayModuleContainer").css("position","static");};$(".hdr-account-menu-you-art,.hdr-top-head-you-plus-art").live('click',function(){window.location.href=getProfileKey();});$(".hdr-my-galleries").live('click',function(){window.location.href=getProfileKey()+"gallery/";});$(".hdr-account-menu-myaccount").live('click',function(){window.location.href=getProfileKey()+"?ac=true";});$("#SearchForm:input").live('click',function(){var searchString=$('#Search_String');if(searchString!=null)
if(searchString.val().length>1)
triggerSearch();});var clickFlag=false;$('#headerSearchDropdown').click(function(){clickFlag=true;});$(document).bind('click',function(event){var $target=$(event.target);if($target.attr('id')!="headerSearchDropdown"){$("#nav-search-in-content").removeClass("nav-search-in-hover");$('.nav-down-arrow').removeClass('nav-down-arrow-hover');$('#nav-search-in-content').css('color','#777777');clickFlag=false;}});$('#headerSearchDropdown').change(function(){$('#nav-search-in-content').text($(this).find(":selected").text());$(this).css('background-color','#fff');$(this).css('color','#000');$(this).css('border-color','#000');var setSearchFocus=$('#Search_String');if(setSearchFocus!=null)
setSearchFocus.focus();});$('#nav-search-in').live('mouseover',function(){$("#nav-search-in-content").addClass("nav-search-in-hover");$('.nav-down-arrow').addClass('nav-down-arrow-hover');$('#nav-search-in-content').css('color','#ffffff');});$('#nav-search-in-content, #nav-search-in').live('mouseout',function(){if(!clickFlag){$("#nav-search-in-content").removeClass("nav-search-in-hover");$('.nav-down-arrow').removeClass('nav-down-arrow-hover');$('#nav-search-in-content').css('color','#777777');}});$('#hdr .link,#ftr .link').hover(function(){$(this).addClass("hdr-ftr-link-hover");},function(){$(this).removeClass("hdr-ftr-link-hover");});cookieobject=new com.art.core.cookie.Cookie();if(cookieobject.getCookieDictionary('ap','ARvisited')!=""){$(".hdr-account-ar").removeClass('hidden');}else{$(".hdr-account-ar").addClass('hidden');}
if($('#museum-hdr').length)
SetCookieDictionary("arts","IsMuseumMode","true","",'/',GetCookieDomain());$('.hdr-art-logo img').bind('click',function(){ClearMuseumMode();});var cartCount='';cartCount=cookieobject.getCookieDictionary('ap','ct');if(cartCount.length<1)
cartCount='0';$('.cart-count').text(cartCount);$('.cart,.cart-items').bind('click',function(){link('/asp/place_order-asp/_/posters.htm');});var searchByValue=""
searchByValue=com.art.core.utils.BrowserUtil.getQueryString('sby')
if(searchByValue.length>0){if(searchByValue=="title"){$('#headerSearchDropdown').val('title');}
else if(searchByValue=="artist"){$('#headerSearchDropdown').val('artist');}
else{$('#headerSearchDropdown').val('all');}
$('#nav-search-in-content').text($('#headerSearchDropdown').find(":selected").text());}
$(".hdr-nav-right-searchby").show();$('.hdr-nav-right').css('width','300px');$('#Search_String').val('');var selBoxWidth=$('.hdr-nav-right-searchby').width();$('.hdr-nav-right-searchby').css('width','121px');$('#headerSearchDropdown').css('width','121px');$('#nav-search-in-content').css('width','115px');var searchIconWidth=24;var inputWidth=300-(selBoxWidth+searchIconWidth);$('.searchButton').css('float','right');$('#Search_String').css('width','146');$('.searchButton').addClass('searchByButton');$('.searchButton').live('mouseover',function(){$('.searchButton').addClass('searchByButtonHover');});$('.searchButton').live('mouseout',function(){$('.searchButton').removeClass('searchByButtonHover');});$('#Search_String').keypress(function(event){doSearch(event);});$('#SearchForm').submit(function(){searchString=$('#Search_String');var defaultSearchString=$('#hdr').find('.defaultSearchString').text();if(searchString.val().length<1||searchString.val()==defaultSearchString)
return false;});$('#hdr').find('.help').bind('click',function(){showHeaderHelp();});$('#hdr').find('.hdr-help-close').bind('click',function(){closeHeaderHelp();});$('#hdr-account-menu').find('ul').hover(function(){$('#hdr').find('.my-account-logged-in .icon').addClass("hover");});$('#hdr-account-menu').find('ul li').hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');});$('#hdr').find('.my-account-logged-in').hover(function(){$(this).find('.icon').addClass('hover');},function(){if(!$('#hdr-account-menu').is(':visible')){$(this).find('.icon').removeClass('hover');}});$('.login-trigger').bind('click',function(){var loginoption=com.art.core.components.LoginModal.LOGIN;var note=new com.art.core.utils.Note(MyGalleriesCore.events.SHOW_GLOBAL_LOGINMODAL,{loginOption:loginoption},{modulename:"GlobalHeader"});MyGalleriesCore.sendNotification(note);});$('.register-trigger').bind('click',function(){var loginoption=com.art.core.components.LoginModal.REGISTER;var note=new com.art.core.utils.Note(MyGalleriesCore.events.SHOW_GLOBAL_LOGINMODAL,{loginOption:loginoption},{modulename:"GlobalHeader"});MyGalleriesCore.sendNotification(note);});$('.logout-trigger').bind('click',function(){var logout=new com.art.core.components.Logout('lg',{},{},{},{defaultFacebookAccountId:MyGalleriesCore.getEnvironment().facebookAccountId});logout.registerCallback(com.art.core.components.Logout.events.LOGOUT,function(){var galKey=MyGalleriesCore.getModel().getLastSelectedGalleryKey();MyGalleriesCore.getModel().resetLastSelectedGalleryName("");MyGalleriesCore.getModel().resetGalleryIDCountCookie(galKey);MyGalleriesCore.getModel().setOneClickAddToGalleryEnabled(false);$('#autoSave').attr('checked',true);logout.reloadPage();_gaq.push(['t1._setCustomVar',3,'logged-in','false',1]);_gaq.push(['global._setCustomVar',3,'logged-in','false',1]);});logout.logOut();});$('#divAddtoGallery').live('mouseover',function(){var obj=new com.art.core.components.ToolTip('tooltip');var offset=$("#divAddtoGallery").offset();var posleft,posTop
posleft=offset.left-3;posTop=offset.top+-60;obj.setToolTip('','Add to Your Gallery');var timeout=setTimeout(function(){obj.render(posleft,posTop,'250');},1000);$(this).mouseout(function(){clearTimeout(timeout);obj.destroy();});});$('.gal-save-to-gallery').live('mouseover',function(){var obj=new com.art.core.components.ToolTip('tooltip');var offset=$(".gal-save-to-gallery").offset();var posleft,posTop
posleft=offset.left-3;posTop=offset.top+-60;obj.setToolTip('','Add to Your Gallery');var timeout=setTimeout(function(){obj.render(posleft,posTop,'250');},1000);$(this).mouseout(function(){clearTimeout(timeout);obj.destroy();});});$('.save_to_gal_icon').live('mouseover',function(){var obj=new com.art.core.components.ToolTip('tooltip');var offset=$(".save_to_gal_icon").offset();var posleft,posTop
posleft=offset.left-3;posTop=offset.top+-60;obj.setToolTip('','Add to Your Gallery');var timeout=setTimeout(function(){obj.render(posleft,posTop,'250');},1000);$(this).mouseout(function(){clearTimeout(timeout);obj.destroy();});});$('#hdr').find('.my-account-logged-in').bind('click',function(event){event.stopPropagation();var $menu=$('#hdr-account-menu');var $icon=$(this).find('.icon');if($menu.is(':visible')){$icon.removeClass('hover');$menu.hide();}else{var iconPosition=$icon.position();var topPos=iconPosition.top
+$icon.height();var leftPos=iconPosition.left
+$icon.width()
-$menu.width()+17;$menu.css('top',topPos);$menu.css('left',leftPos);$icon.addClass('hover');$menu.show();}});$(document).bind('click',function(){if($('#hdr-account-menu').is(':visible')){$('#hdr-account-menu').hide();$(this).find('.icon').removeClass('hover');}});$(document).one('mousemove',function(){if(!isiOS())
showSkinnyBanner();});if(isiOS())
showSkinnyBanner();if($(window).width()<1008){$('head').append('<meta name="viewport" content="width=1064" />');}
$('#banner-terms-link').live('click',function(){var offset=$(this).offset();var topPos=offset.top+$(this).height()+5;var leftPos=offset.left-$('#banner-terms').width()+$(this).width()-12;$('#banner-terms').css('top',topPos).css('left',leftPos);$('#banner-terms').slideDown('fast');});$('#banner-terms-close').live('click',function(){$('#banner-terms').slideUp('fast');});$('#banner-terms-close').live('mouseenter',function(){$(this).addClass('hover');});$('#banner-terms-close').live('mouseleave',function(){$(this).removeClass('hover');});var defaultEmailString=$('#ftr-email').find('.ftr-email-default').text();$('#ftrEmailInput').val(defaultEmailString);$('#ftrEmailInput').focusin(function(){var defaultText=$('#ftr-email').find('.ftr-email-default').text();if($(this).val()==defaultText)
$(this).val('');});$('#ftrEmailInput').focusout(function(){var defaultText=$('#ftr-email').find('.ftr-email-default').text();if($(this).val()=='')
$(this).val(defaultText);});$('#ftrEmailForm').submit(function(){var $error=$('#ftr-email').find('.error');$error.hide();var isValidEmail=false;var emailInput=$('#ftrEmailInput').val();var defaultText=$('#ftr-email-msg').find('.ftr-email-default').text();var pattern=/^([a-zA-Z0-9])(([a-zA-Z0-9])*([\._\+-])*([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/;cookieobject=new com.art.core.cookie.Cookie();var d=new Date(document.lastModified);d.setHours(d.getHours()-7);db=d.toString();dc=db.split(" ");dte=dc[2]+"-"+dc[1]+"-"+dc[3];$('input[name=email_acq_date]').val(dte);$('input[name=country_iso2]').val(cookieobject.getCookieDictionary('arts','CountryCode'));if(!IsProd()){$('input[name=_ri_]').val("X0Gzc2X%3DWQpglLjHJlYQGliu0fcIEnUL5yAWrpyOimtvrnVwjpnpgHlpgneHmgJoXX0Gzc2X%3DWQpglLjHJlYQGidNzat8UMWzcG1289q7nDSw6m7f");}
if(emailInput.match(pattern)){setupDCSCall();$.post("/asp/newsletter/saveEmail.asp",{email:$("#ftrEmailInput").val()},function(data){});return true;}else{$error.fadeIn();return false;}});$(".ftr-access-my-account").live('click',function(){window.location.href=getProfileKey()+"?ac=true";});if($.browser.msie&&parseInt($.browser.version,10)<9){$("<style>.shadow{filter: progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=225, Color='#888888'),\n progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=45, Color='#888888'),\n progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color='#888888'),\n progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=315, Color='#888888');}\n .shadow{margin:0 0 8px -8px !important;}</style>").appendTo('head');}
var $parentPageContainer=$('#ftr').parents('.PageContainer');if($parentPageContainer.length==1){$('#ftr').insertAfter($parentPageContainer);}
$('.hdr-account-ar').bind("click",function(event){var cookieobject=new com.art.core.cookie.Cookie();if(cookieobject.getCookieDictionary("ap","ARlastVisited")!=""){arpage_hyperlink=cookieobject.getCookieDictionary("ap","ARlastVisited");}else{arpage_hyperlink=MyGalleriesEnvironmentVariables.ArtistrisingDomainUS;}
SetARTCookie(arpage_hyperlink,"true");});});function isiOS(){return((navigator.platform.indexOf("iPhone")!=-1)||(navigator.platform.indexOf("iPod")!=-1)||(navigator.platform.indexOf("iPad")!=-1));}
function showSkinnyBanner(){$.ajax({url:'/asp/include/global/promo.asp',cache:false,beforeSend:function(){return determineToShowBanner();},success:function(theBannerData){$('#hdr').after(theBannerData);if($('#skinny-banner-container').length){if($('#skinny-banner-placeholder').length){$('#skinny-banner-placeholder').hide();$('#skinny-banner-container').show();$('#promo-container').fadeIn();}else{animateSkinnyBanner();SetCookieDictionary("arts","bnr","1","",'/',GetCookieDomain());}}else{$('#skinny-banner-placeholder').slideUp();SetCookieDictionary("arts","bnr","0","",'/',GetCookieDomain());}},error:function(request,status,error){$('#skinny-banner-placeholder').slideUp();SetCookieDictionary("arts","bnr","0","",'/',GetCookieDomain());},complete:function(){if(typeof skinnyBannerComplete=='function'){skinnyBannerComplete();}}});}
function setupDCSCall(){var thisEmail=$('#ftrEmailInput').val();if(thisEmail!=''&&thisEmail!='Enter email address'){dcsMultiTrack('WT.ti','Exclusives Offers and Updates','DCS.dcsuri','/footer/exclusive-offers-email-signup.aspx','WT.dl','10','WT.z_em_l',thisEmail,'WT.cg_n','Newsletter');}}
function showHeaderHelp(){lbHeaderHelp.show();$('#hdr-help-box').css('z-index','100010');var leftPos=($(window).width()/2)-($('#hdr-help-box').width()/2);$('#hdr-help-box').css('left',leftPos);$('#hdr-help-box').show();}
function closeHeaderHelp(){lbHeaderHelp.close();$('#hdr-help-box').hide();}
function toggleHeaderCart(){var hdrHeight=$('#hdr').height();var hdrOffset=$('#hdr').offset();var $hdrHelpCart=$('#hdr-help-cart');if(hdrOffset==null)
hdrOffset=0;var hdrTotalOffset=hdrOffset.top+hdrHeight;var windowScrollTop=$(window).scrollTop();if(windowScrollTop>hdrTotalOffset){if(!$hdrHelpCart.hasClass('fixed')){$hdrHelpCart.hide();$hdrHelpCart.addClass('fixed');$hdrHelpCart.slideDown('fast');}}else if($hdrHelpCart.hasClass('fixed')){$hdrHelpCart.removeClass('fixed');}}
function PositionTray(){var topPos=(window.pageYOffset+window.innerHeight-30)
$(".MyGalleriesTrayModuleContainer").css('top',topPos);;}
function updateHeaderSignIn(theEvent,account){var loginSuccess=false;var logoutSuccess=false;switch(theEvent){case'LOGIN_SUCCESS':loginSuccess=true;break;case'LOGIN_FACEBOOK_SUCCESS':loginSuccess=true;break;case'LOGOUT_SUCCESS':logoutSuccess=true;break;}
if(loginSuccess){if(typeof afterLoginSuccess=='function'){afterLoginSuccess();}else{window.location.reload();}}else if(logoutSuccess){if(typeof afterLogoutSuccess=='function'){afterLogoutSuccess();}else{window.location.reload();}}}
$(document).ready(function(){var zIndexNumber=975;$('#Header > div').each(function(){$(this).css('zIndex',zIndexNumber);zIndexNumber-=1;});$('#HeaderMyLinks span:nth-child(3)').mouseover(function(){var obj=new com.art.core.components.ToolTip('tooltip');var offset=$('#HeaderMyLinks span:nth-child(3)').offset();var posleft,posTop
posleft=offset.left+100;posTop=offset.top;obj.setToolTip('','Collect, organize, and share your favorite art');var timeout=setTimeout(function(){obj.render(posleft,posTop,'200');},1000);$('#HeaderMyLinks span:nth-child(3)').mouseout(function(){clearTimeout(timeout);obj.destroy();});});});function IsProd(){var subdomain=location.hostname.substring(0,location.hostname.indexOf("."));if(subdomain=='www'){return true;}else{return false;}}
function ClearMuseumMode(){SetCookieDictionary("arts","IsMuseumMode","","",'/',GetCookieDomain());}
function linkForm(action){document.getElementById('globalLinkForm').action=action;document.getElementById('globalLinkForm').submit();}
function triggerSearch(){var txtSearchBox=document.getElementById('Search_String');var searchString=txtSearchBox.value;var searchByVal="";if($('#headerSearchDropdown')){searchByVal=$('#headerSearchDropdown').val();}
if(searchString.length>0){var f=document.forms['SearchForm'];if(!f){f=document.SearchForm;}
var aPosSearchUrl=f.action.indexOf("searchstring=")
if(aPosSearchUrl>0){f.action=f.action.replace(getQuerystring('searchstring',f.action),encodeURI(searchString));}
else if($('.hdr-nav-right-searchby').is(":visible")&&searchByVal.length>0){f.action=f.action+"?searchstring="+encodeURI(searchString)+"&SSK="+encodeURI(searchString)+"&WT.oss="+encodeURI(searchString)+"&sby="+searchByVal;}
else{f.action=f.action+"?searchstring="+encodeURI(searchString)+"&SSK="+encodeURI(searchString)+"&WT.oss="+encodeURI(searchString);}
f.submit();}}
function getQuerystring(key,url){key=key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regex=new RegExp("[\\?&]"+key+"=([^&#]*)");var qs=regex.exec(url);if(qs==null)
return"";else
return qs[1];}
function doSearch(event){if(event.keyCode=='13'){triggerSearch();}}
function SetARTCookie(artlink,doPost){var cookieExpdate=new Date();cookieExpdate.setDate(cookieExpdate.getDate()+730);var ArtVisitedLink=window.location.href;ArtVisitedLink=replaceAllString(ArtVisitedLink,"=","|");ArtVisitedLink=replaceAllString(ArtVisitedLink,"&","~~");SetCookieDictionary('ap','ARTlastVisited',ArtVisitedLink,cookieExpdate,'/',GetCookieDomain());artlink=replaceAllString(artlink,"|","=");artlink=replaceAllString(artlink,"~~","&");artlink=replaceAllString(artlink," ","+");if(doPost=="true"){link(artlink);}}
function replaceAllString(str,strToBeReplaced,newStr){while(str.indexOf(strToBeReplaced)!=-1)
str=str.replace(strToBeReplaced,newStr);return str;}
function getProfileKey(){var profileURL="";var cookieobject=new com.art.core.cookie.Cookie();if(cookieobject.getCookieDictionary('ap','profileURL')!=""){profileURL=cookieobject.getCookieDictionary('ap','profileURL');return profileURL;}}
function animateSkinnyBanner(){$('#skinny-banner-container').slideDown(function(){$('#promo-container').fadeIn();});}
function determineToShowBanner(){var retval=true;if(cookieobject.getCookieDictionary('arts','IsMuseumMode')=="true")
retval=false;else if(typeof isMuseumMode!="undefined"){if(isMuseumMode){retval=false;}}
if(retval==false){$('#skinny-banner-placeholder').slideUp();SetCookieDictionary("arts","bnr","0","",'/',GetCookieDomain());}
return retval;}
function turnOnnewsearchfeatures(){$(".hdr-nav-right-searchby").show();$('#Search_String').removeClass('searchstringInput');$('.hdr-nav-right').css('width','300px');$('#Search_String').val('');$('#Search_String').css('background-color','#fff');$('#Search_String').css('border','1px solid #D6D6D6');$('#Search_String').css('border-right','0px');$('#Search_String').css('height','22px');var selBoxWidth=$('.hdr-nav-right-searchby').width();$('#headerSearchDropdown').css('width',selBoxWidth+'px');var defaultWidth=101;var inputWidth=54-(selBoxWidth-defaultWidth);inputWidth=defaultWidth+inputWidth;inputWidth=inputWidth-5+"px";$('#Search_String').css('width',inputWidth);$('.searchButton').addClass('searchByButton');$('#Search_String').live('mouseover',function(){$(this).css('border','1px solid #000');});$('#Search_String').live('mouseout',function(){$(this).css('border','1px solid #D6D6D6');$(this).css('border-right','0px');});$('.searchButton').live('mouseover',function(){$('.searchButton').addClass('searchByButtonHover');});$('.searchButton').live('mouseout',function(){$('.searchButton').removeClass('searchByButtonHover');});$('#Search_String').focusin(function(){$(this).css('border','1px solid #000');});$('#Search_String').focusout(function(){$(this).css('border','1px solid #D6D6D6');$(this).css('border-right','0px');});var searchByValue=""
searchByValue=com.art.core.utils.BrowserUtil.getQueryString('sby')
if(searchByValue.length>0){if(searchByValue=="title"){$('#headerSearchDropdown').val('title');}
else if(searchByValue=="artist"){$('#headerSearchDropdown').val('artist');}
else{$('#headerSearchDropdown').val('all');}
$('#nav-search-in-content').text($('#headerSearchDropdown').find(":selected").text());}}com.art.myGalleries={};com.art.myGalleries.modules={};com.art.myGalleries.proxies={};com.art.myGalleries.components={};com.art.myGalleries.commands={};com.art.myGalleries.vos={};com.art.myGalleries.proxies.ApplicationProxy=function(env,viewMode,envSub){this.NAME="ApplicationProxy";this.galleryPerPage=16;this.galleryItemPerPage=9;this.galleryList=[];this.galleryListForWebUser=[];this.galleryItemList=[];this.galleryListIsCachedFlag=false;this.cacheByGalleryList={};this.cacheByGalleryListForWebUser={};this.cacheByGalleryItemList={};this.toggleDisplay="";this.galleryItemPageNumber=-1;this.galleryDefaultSort=false;this.gallerySortBy=0;this.gallerySortDirection=1;this.getAllItemsFlag=true;this.ProfileUrl="";this.myGalleryItemCount=0;this.GalleryNamecookieCountValueSeparator="~!";this.environment=env;this.environmentSub=envSub;this.galleryTemplate={"Name":null,"GalleryItemSource":4,"GalleryId":null,"GalleryVisibility":1,"BackGround":null,"GalleryImage":{"LargeImage":{"HttpImageURL":""}},"ShortDescription":null,"SortOptions":{"SortBy":0,"SortDirection":0,"DefaultSort":true},"LongDescription":null,"StreamConfiguration":null,"GalleryType":0};this.galleryItemTemplate={"APNum":null,"FrameSku":null,"Imageid":0,"GalleryItemSource":4,"AvailableInOtherSizes":false,"ItemGalleryItemID":0,"ItemDisplayTypeID":0,"Item":{"ArtistId":0,"ArtistName":null," Price":null,"Title":null}};this.getDFEEngineParameters={"PrintAPNum":0,"PrintPODConfigID":0,"Crop":0,"ColorGrouping":{"ColorID":0,"ColorName":""},"StyleGrouping":{"StyleID":0,"StyleName":""},"MaxConfigurations":0,"CustomerZoneID":0,"LanguageID":0,"FitFixedFrame":true,"CurrencyCode":null,"WriteToDB":true,"ImageMaxW":"0","ImageMaxH":"0","ShowTrace":false,"MergePreFrameData":false,"FrameSKU":null,"Domain":null,"SendLiteResponse":false,"FSFrameConfiguration":{"Print":{"APNum":0},"MatCombo":{"NumMats":0,"TopMat":{"APNum":0,"LeftSize":2.5,"TopSize":2.5,"RightSize":2.5,"BottomSize":2.5},"MiddleMat":{"APNum":0,"LeftSize":0,"TopSize":0,"RightSize":0,"BottomSize":0},"BottomMat":{"APNum":0,"LeftSize":0,"TopSize":0,"RightSize":0,"BottomSize":0}},"Moulding":{"APNum":0},"GlassConfig":{"GlassAPNum":0}}};this.selectedItemId;this.selectedGalleryId;this.orderObject=[];this.highestZIndex=-1;this.frameStudioFlag=false;this.requestForAllItemsFromSlideShow=false;this.selectedImageObject={};this.currentViewMode=viewMode;this.updateFromDLE=false;this.facebookShare={};this.facebookShare[MyGalleriesCore.constants.GRID_VIEW]={caption:"I've created a gallery on Art.com",description:"Come check out the gallery of art I created on Art.com, and let me know what you think!"};this.facebookShare[MyGalleriesCore.constants.SLIDESHOW]={caption:"I've created a gallery on Art.com",description:"Come check out the gallery of art I created on Art.com, and let me know what you think!"};this.facebookShare[MyGalleriesCore.constants.ROOM_VIEW]={caption:"I've decorated a room on Art.com",description:"Come check out the room view of art I created on Art.com, and let me know what you think!"};this.LOGGED_IN=com.art.myGalleries.proxies.ApplicationProxy.LOGGED_IN;this.LOGGED_OUT=com.art.myGalleries.proxies.ApplicationProxy.LOGGED_OUT;this.galleryRequiredProperites=["GalleryId","ItemId","DateUpdated","DateCreated","Name","GalleryItemSource","PagingOptions","ParentId","ItemCount","AccountId","Icon","ItemSource","ItemKey","ItemText","ItemData","GalleryId","GalleryVisibility","Rooms","Walls","BackGround","ShortDescription","SortOptions","LongDescription","BareWalls","ChildGalleries","Permissions","Items","TotalItems"];this.ISOCurrencyENUM={"AUD":0,"CAD":1,"DKK":2,"HKD":3,"JPY":4,"NZD":5,"NOK":6,"SGD":7,"ZAR":8,"SEK":9,"CHF":10,"GBP":11,"USD":12,"EUR":13,"ARS":14,"CNY":15,"CZK":16,"MXN":17,"TRY":18,"PLN":19,"BRL":20};this.ISOLangaugeENUM={"EN":0,"FR":1,"DE":2,"ES":3,"IT":4,"JA":5,"NL":6,"SE":7,"DA":8,"NO":9,"FI":10};this.shareTitle="";this.shareURL="";this.selectedFramingStudioObject=[{}];this.shareType;this.isViewingSharedRoomView=false;this.isViewingSavedRoom=false;this.isEditingSavedRoom=false;this.savedRoomViewingMode='view';this.savedRoomKey;this.isRoomView=false;this.roomViewParms={mode:null,type:null,roomKey:null,galleryKey:null,savedWallId:null};this.roomImageBaseURL='http://cache1.allpostersimages.com/';this.restorePreviousVisit=false;this.dleIsLoaded=false;this.galleryItemsLoaded=false;this.oneClickCookie='oneclick';this.GalleryIDCookie='galleryid';this.LastGalleryNameCookie='lastgalleryname';this.artCookieBase='arts';this.cookieobject=new com.art.core.cookie.Cookie();this.loginSource="";this.registerSource="";this.myGalItemCount="";this.selectedMultipleSize={};this.user=new com.art.core.vos.User();this.shareRequestObject=new com.art.myGalleries.vos.ShareRequestVO();this.shareRequestFlag=false;};com.art.myGalleries.proxies.ApplicationProxy.NAME="ApplicationProxy";com.art.myGalleries.proxies.ApplicationProxy.LOGGED_IN="0";com.art.myGalleries.proxies.ApplicationProxy.LOGGED_OUT="1";com.art.myGalleries.proxies.ApplicationProxy.ONECLICKCOOKIEVAL="1";com.art.myGalleries.proxies.ApplicationProxy.prototype.hasWritePermissions=function()
{var g={};if(typeof _galleryDataJson!='undefined'){for(var i=0;i<_galleryDataJson.length;i++)
{var gObj=_galleryDataJson[i];if(location.href.indexOf(gObj.VanityURL))
{return gObj.Permissions>Number(MyGalleriesCore.constants.VIEW);}}}
return false;};com.art.myGalleries.proxies.ApplicationProxy.prototype.filterGalleries=function(galleries)
{var g=[];for(var i=0;i<galleries.length;i++)
{if(galleries[i].GalleryDefaultFlags==null)
{g.push(galleries[i]);}
else
{var flags=galleries[i].GalleryDefaultFlags;for(var n=0;n<flags.length;n++)
{if(flags[n].GalleryDefaultType==0)
g.push(galleries[i]);}}}
return g;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getColorIndexByHex=function(hex)
{var colors=this.getBackgroundColors();for(var i=0;i<colors.length;i++)
{if(colors[i]==hex)
return i;}
return 0;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getFramingSKURequestObjectAsString=function(obj)
{return"dfeEngineParameters="+JSON.stringify(this.getDFEEngineParameters);};com.art.myGalleries.proxies.ApplicationProxy.prototype.setFramingStudioResponseObject=function(obj)
{this.selectedFramingStudioObject=obj;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getFramingStudioResponseObject=function()
{return this.selectedFramingStudioObject;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setSelectedImageObject=function(obj)
{this.selectedImageObject=obj;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getNextHighestZIndex=function()
{if(this.highestZIndex==-1)
{this.highestZIndex=com.art.core.utils.BrowserUtil.getNextHighestZIndex();}
return this.highestZIndex;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setInitialPageNumber=function(pageNumber)
{this.galleryItemPageNumber=(pageNumber!="")?parseInt(pageNumber):1;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getSelectedGallery=function()
{var id=this.environmentSub.selectedGalleryID;var obj=this.cacheByGalleryList[id];return obj;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getOneClickAddToGalleryEnabled=function()
{var oneClickVal="";var bool=this.cookieobject.getCookieDictionary(this.artCookieBase,this.oneClickCookie)=='1';return bool;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setGalleryItemCountCookie=function(itemCount)
{var itemCount=this.getGalleryItemCountFromCookie();if(itemCount>0){itemCount=parseInt(itemCount)+1;this.cookieobject.setCookieDictionary(this.artCookieBase,'mgitemcount',itemCount,'/',this.cookieobject.getCookieDomain('art'));}
else{itemCount=1;this.cookieobject.setCookieDictionary(this.artCookieBase,'mgitemcount',itemCount,'/',this.cookieobject.getCookieDomain('art'));}
this.myGalleryItemCount=parseInt(itemCount);};com.art.myGalleries.proxies.ApplicationProxy.prototype.resetGalleryItemCountCookie=function(itemCount)
{this.cookieobject.setCookieDictionary(this.artCookieBase,'mgitemcount',itemCount,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryItemCountFromCookie=function()
{var itemCount=this.cookieobject.getCookieDictionary(this.artCookieBase,'mgitemcount');if(itemCount.length>0)
return itemCount;else
return 0;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setCookieGalleryIDCountCookie=function(galleryName)
{var galCount=this.getGalIDCountCookie(galleryName);var galleryCount="";var itemCount="";if(galCount==0)
{itemCount=1;galleryCount=galleryName+this.GalleryNamecookieCountValueSeparator+1;this.cookieobject.setCookieDictionary(this.artCookieBase,'galleryCount',galleryCount,'/',this.cookieobject.getCookieDomain('art'));}
else
{var galSplit="";var galItemSplit="";var galName="";var chek=galCount.indexOf('|');galItemSplit=galCount.split('~!');galName=galItemSplit[0];itemCount=parseInt(galItemSplit[1])+1;if(chek<0&&galName==galleryName){galleryCount=galleryName+this.GalleryNamecookieCountValueSeparator+itemCount;this.cookieobject.setCookieDictionary(this.artCookieBase,'galleryCount',galleryCount,'/',this.cookieobject.getCookieDomain('art'));}
else
{galSplit=galCount.split('|');if(chek<0)
{itemCount=1;galleryCount=galCount+"|"+galleryName+this.GalleryNamecookieCountValueSeparator+itemCount;this.cookieobject.setCookieDictionary(this.artCookieBase,'galleryCount',galleryCount,'/',this.cookieobject.getCookieDomain('art'));}
else
{var galsCount="";var t=false;for(var i=0;i<galSplit.length;i++)
{var galleryItem=galSplit[i].split('~!');if(galleryName==galleryItem[0]){t=true;itemCount=parseInt(galleryItem[1])+1;galsCount+=galleryItem[0]+this.GalleryNamecookieCountValueSeparator+itemCount+"|";}
else{galsCount+=galleryItem[0]+this.GalleryNamecookieCountValueSeparator+galleryItem[1]+"|";}}
if(!t){galsCount=galCount+"|"+galleryName+this.GalleryNamecookieCountValueSeparator+1+"|";}
galleryCount=galsCount.substring(0,galsCount.length-1);this.cookieobject.setCookieDictionary(this.artCookieBase,'galleryCount',galleryCount,'/',this.cookieobject.getCookieDomain('art'));}}}
this.myGalleryItemCount=parseInt(itemCount);};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalIDCountCookie=function(galleryName)
{var galItemCount=this.cookieobject.getCookieDictionary(this.artCookieBase,'galleryCount');if(galItemCount!=""&&galItemCount!="~!undefined")
return galItemCount;else
return 0;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryIDCountCookie=function(galleryName)
{var galItemCount=this.cookieobject.getCookieDictionary(this.artCookieBase,'galleryCount');var chek=galItemCount.indexOf('|');var galCount="";var galSplit="";if(chek<0)
{galSplit=galItemCount.split('~!');galCount=galSplit[1];}
else
{galSplit=galItemCount.split('|');for(var i=0;i<galSplit.length;i++)
{var galleryItem=galSplit[i].split('~!');if(galleryName==galleryItem[0])
galCount=galleryItem[1];}}
if(galCount==undefined||galCount=="undefined"||galCount=="~!undefined")
return 0;else
return galCount;};com.art.myGalleries.proxies.ApplicationProxy.prototype.resetGalleryIDCountCookie=function(galleryName)
{var galItemCount=this.cookieobject.getCookieDictionary(this.artCookieBase,'galleryCount');var galSplit="";var galName="";var galCount="";var galleryCount="";galSplit=galItemCount.split('|');for(var i=0;i<galSplit.length;i++)
{var galleryItem=galSplit[i].split('~!');galName=galleryItem[0];galCount=galleryItem[1];galName=galName.toLowerCase();galleryName=galleryName.toLowerCase();if(galleryName==galName)
galCount=0;galleryCount+=galName+this.GalleryNamecookieCountValueSeparator+galCount+"|";}
galleryCount=galleryCount.substring(0,galleryCount.length-1);this.cookieobject.setCookieDictionary(this.artCookieBase,'galleryCount',galleryCount,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.setOneClickAddToGalleryEnabled=function(enable)
{if(typeof enable=="string")
throw new Error("ApplicationProxy.setOneClickAddToGalleryEnabled failed! Invalid input.");if(typeof enable=="number")
throw new Error("ApplicationProxy.setOneClickAddToGalleryEnabled failed! Invalid input.");var cookieValue=enable==true?"1":"0";this.cookieobject.setCookieDictionary(this.artCookieBase,this.oneClickCookie,cookieValue,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.setLoginUserNameCookie=function(data)
{this.cookieobject.setCookieDictionary(this.artCookieBase,'loginusername',data,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.getLoginUserNameCookie=function()
{var username=this.cookieobject.getCookieDictionary(this.artCookieBase,'loginusername');return username;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getIfLoggedInCookie=function()
{var loggedin=this.cookieobject.getCookieDictionary(this.artCookieBase,'loggedin');if(loggedin!='-1'&&loggedin!="")
{return true;}
else
{return false;}};com.art.myGalleries.proxies.ApplicationProxy.prototype.getIfLoggedInCookieNew=function()
{var loggedin=this.cookieobject.getCookieDictionary('ap','accounttype');if(loggedin=="2"||loggedin=="3"){return true;}
if(loggedin==""||loggedin=="1"){return false}
return false;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getLastSelectedGalleryID=function()
{var lastSelectedGalleryID="";lastSelectedGalleryID=this.cookieobject.getCookieDictionary(this.artCookieBase,this.GalleryIDCookie);return lastSelectedGalleryID;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setLastSelectedGalleryID=function(galleryID)
{this.cookieobject.setCookieDictionary(this.artCookieBase,this.GalleryIDCookie,galleryID,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.setLastSelectedGalleryName=function(galleryName)
{this.cookieobject.setCookieDictionary(this.artCookieBase,this.LastGalleryNameCookie,galleryName,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.resetLastSelectedGalleryName=function(galleryName)
{this.cookieobject.setCookieDictionary(this.artCookieBase,"galleryKey",galleryName,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.setLastSelectedGalleryKey=function(galleryKey)
{this.cookieobject.setCookieDictionary(this.artCookieBase,"galleryKey",galleryKey,'/',this.cookieobject.getCookieDomain('art'));};com.art.myGalleries.proxies.ApplicationProxy.prototype.getLastSelectedGalleryKey=function()
{return this.cookieobject.getCookieDictionary(this.artCookieBase,"galleryKey");};com.art.myGalleries.proxies.ApplicationProxy.prototype.getLastSelectedGalleryName=function()
{var lastSelectedGalID=this.cookieobject.getCookieDictionary(this.artCookieBase,'galleryid');var lastSelectedGalName="";if(lastSelectedGalID.length>0){if(this.cacheByGalleryList[lastSelectedGalID]!=undefined)
{lastSelectedGalName=this.cacheByGalleryList[lastSelectedGalID].Name;}
else
{lastSelectedGalName=this.cookieobject.getCookieDictionary(this.artCookieBase,"galleryKey");}}
lastSelectedGalName=lastSelectedGalName.replace(/-/g," ");return lastSelectedGalName;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getSelectedGalleryClone=function()
{var copy={};var gallery=this.getSelectedGallery();for(var p in gallery)
{copy[p]=gallery[p];}
return copy;};com.art.myGalleries.proxies.ApplicationProxy.prototype.galleyNameIsAvailable=function(name,id)
{for(var i=0;i<this.galleryList.length;i++)
{if(this.galleryList[i].Name==name&&id!=this.galleryList[i].GalleryId)
return false;}
return true;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setSelectedGalleryTitle=function(title){this.cacheByGalleryList[this.environmentSub.selectedGalleryID].Name=$.trim(title);};com.art.myGalleries.proxies.ApplicationProxy.prototype.setSelectedGalleryDesc=function(desc){this.cacheByGalleryList[this.environmentSub.selectedGalleryID].LongDescription=$.trim(desc);};com.art.myGalleries.proxies.ApplicationProxy.prototype.setSelectedGalleryPrivacy=function(visibility){this.cacheByGalleryList[this.environmentSub.selectedGalleryID].GalleryVisibility=visibility;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setCreateGallery=function(){if(this.galleryTemplate.GalleryVisibility==undefined){this.galleryTemplate.GalleryVisibility=1;}
if(this.galleryTemplate.LongDescription=="Enter a description (optional)"){this.galleryTemplate.LongDescription="";}
return this.galleryTemplate;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setAddedGalleryTitle=function(title){var title=encodeURIComponent($.trim(title));this.galleryTemplate.Name=escape(title);};com.art.myGalleries.proxies.ApplicationProxy.prototype.setAddedGalleryDesc=function(desc){var desc=encodeURIComponent($.trim(desc));this.galleryTemplate.LongDescription=escape(desc);};com.art.myGalleries.proxies.ApplicationProxy.prototype.setAddedGalleryPrivacy=function(visibility){this.galleryTemplate.GalleryVisibility=visibility;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setAddedBannerUrl=function(bannerUrl){var bannerUrl=encodeURIComponent($.trim(bannerUrl));this.galleryTemplate.GalleryImage.LargeImage.HttpImageURL=escape(bannerUrl);};com.art.myGalleries.proxies.ApplicationProxy.prototype.getImagesPerPage=function()
{return this.imagesPerPage;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getSelectedMethodName=function()
{return"SomeService";};com.art.myGalleries.proxies.ApplicationProxy.prototype.galleryListIsCached=function()
{return this.galleryListIsCachedFlag;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setGalleryList=function(arr)
{this.galleryList=arr;this.flattenGalleryList(arr);};com.art.myGalleries.proxies.ApplicationProxy.prototype.flattenGalleryList=function(galleries)
{for(var i=0;i<galleries.length;i++)
{this.cacheByGalleryList[galleries[i].GalleryId]=galleries[i];}};com.art.myGalleries.proxies.ApplicationProxy.prototype.setGalleryListForWebUser=function(arr)
{this.galleryListForWebUser=arr;this.flattenGalleryListForWebUser(arr);};com.art.myGalleries.proxies.ApplicationProxy.prototype.flattenGalleryListForWebUser=function(galleries)
{for(var i=0;i<galleries.length;i++)
{this.cacheByGalleryListForWebUser[galleries[i].GalleryId]=galleries[i];}};com.art.myGalleries.proxies.ApplicationProxy.prototype.flattenGalleryItemDetails=function(items)
{this.orderObject=[];this.cacheByGalleryItemList={};if(mygalPageInfo.wallItemsViewLink!=""){for(var i=0;i<items.length;i++)
{if(items[i]!=null&&items[i].Item!=null)
{this.orderObject.push(items[i].Item.ItemGalleryItemID);this.cacheByGalleryItemList[items[i].Item.ItemGalleryItemID]=items[i].Item;}}
return;}
for(var i=0;i<items.length;i++)
{if(items[i]!=null&&items[i].ItemDetails!=null)
{this.orderObject.push(items[i].ItemGalleryItemID);this.cacheByGalleryItemList[items[i].ItemGalleryItemID]=items[i];}}};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryByGalleryId=function(apnum)
{return{GalleryData:this.cacheByGalleryList[apnum]};};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryItemByGalleryId=function(ItemId,indexCounter)
{var key=indexCounter!=undefined?this.orderObject[indexCounter]:ItemId;return{GalleryItemData:this.convertToGalleryItemVO(this.cacheByGalleryItemList[key])};};com.art.myGalleries.proxies.ApplicationProxy.prototype.convertToGalleryItemVO=function(object)
{return new com.art.myGalleries.vos.GalleryItemVO(object);};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryList=function(pageNumber)
{var tmpArr=[];var start=(pageNumber-1)*this.galleryPerPage;for(var i=0;i<this.galleryPerPage;i++)
{if(this.galleryList[start]!=undefined)
{tmpArr.push(this.galleryList[start]);}
else
{tmpArr.push({placeholder:true,imageUrl:'http://spacer.gif'});}
start++;}
return tmpArr;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryListForSlideShow=function(maxImageWidth,maxImageHeight,cropperMode){var tmp=[];var items=this.getGalleryItemList();for(var i=0;i<items.length;i++)
{if(items[i].ItemDetails!=null)
{var item=new com.art.myGalleries.vos.GalleryItemVO(items[i]);var cropperUrl=items[i].ItemDetails.ImageInformation.CroppedSquareImage.HttpImageURL||items[i].ItemDetails.ImageInformation.LargeImage.HttpImageURL;if(cropperUrl!=null){var url=com.art.core.utils.BrowserUtil.getCroppedImageUrl(cropperUrl,maxImageWidth,maxImageHeight,cropperMode);tmp.push({apnum:items[i].ItemDetails.APNum,url:url,price:item.Price,showMarkDownPrice:item.ShowMarkDownPrice,DisplayMSRP:item.DisplayMSRP,ItemStatus:item.ItemStatus});}}}
return tmp;};com.art.myGalleries.proxies.ApplicationProxy.prototype.galleryItemsCached=function(){return this.galleryItemList[this.galleryItemPageNumber]!=undefined;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getBackgroundColorsForDLE=function()
{var tmp=[];var c=this.getBackgroundColors();for(var i=0;i<c.length;i++)
{tmp.push({id:'hex_'+c[i],url:null,emptyWallFlag:true,bgcolor:'0x'+c[i],hexAsString:c[i]});}
return tmp;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getBackgroundColors=function()
{return['ffe3e4','fff4d6','fff7d0','efede7','ebf0e4','edf7fa','fcfaec','e2c7c7','f0debd','eee7c3','d4d0c2','ced7d3','cfd9dd','d6d7d3','9f6d73','e4bd8b','decfad','bdb1a5','94a6a1','b3c4ce','868f94','733b4b','ca9153','907761','847467','526965','607d90','4c545b','84303d','8b4a26','584035','584d43','364643','31343a','FFFFFF'];};com.art.myGalleries.proxies.ApplicationProxy.prototype.setGalleryItems=function(galleryItems,isPageLoad)
{if(!isPageLoad){if(mygalPageInfo.wallItemsViewLink!=""){this.galleryItemList=this.movePropertiesOneLevelUp(galleryItems);}
else{this.galleryItemList=galleryItems;}}
this.flattenGalleryItemDetails(galleryItems);};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryItemList=function(pageNumber){return this.galleryItemList;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setGalleries=function(obj)
{this.galleryList=obj;this.flattenGalleryList(obj);};com.art.myGalleries.proxies.ApplicationProxy.prototype.getAccessKeyObjectAsString=function(){var c=new com.art.core.cookie.Cookie();var s=c.cookieGetStateData();var str="accessKey="+JSON.stringify({"apikey":this.environment.apiKey,"authToken":s.authToken});return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getUserProfileObjectAsString=function()
{var str="userProfile="+JSON.stringify({"ClientIpAddress":this.environment.clientIpAddress,"ISOCurrencyCode":this.ISOCurrencyENUM[this.environment.currencyCode],"CustomerZoneId":this.environment.customerZoneId,"ISOLanguageCode":this.ISOLangaugeENUM[this.environment.languageIso]});return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGallerySortObjectAsString=function()
{var str="gallerySortOption="+JSON.stringify({"DefaultSort":this.environment.galleryDefaultSort,"SortBy":this.gallerySortBy,"SortDirection":this.gallerySortDirection});return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGraphInfoObjectAsString=function()
{var selectedGallery="";var mygalId="";selectedGallery=this.environmentSub.selectedGalleryID;if(selectedGallery.length>0&&this.cacheByGalleryList[selectedGallery]){mygalId=this.cacheByGalleryList[selectedGallery].GalleryId;}
var objGraphInfo;objGraphInfo={"RelationshipChangeAction":"placeholder1","UserRelationshipData":{"UserRelationshipType":"placeholder2","UserRelationshipActivities":[{"GalleryId":mygalId}]}};var str="request="+JSON.stringify(objGraphInfo);return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getBookmarkObjectAsString=function()
{var objGraphInfo;objGraphInfo={"RelationshipChangeAction":"placeholder1","UserRelationshipData":{"UserRelationshipType":"placeholder2","UserRelationshipActivities":[{"GalleryId":"placeholder3"}]}};var str="request="+JSON.stringify(objGraphInfo);return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getFollowsObjectAsString=function()
{var objGraphInfo;objGraphInfo={"RelationshipChangeAction":"placeholder1","UserRelationshipData":{"UserRelationshipType":"placeholder2","UserRelationshipActivities":[{"UserId":"placeholder3"}]}};var str="request="+JSON.stringify(objGraphInfo);return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setPagingOptionsAllItems=function(flag)
{if(flag)
this.getAllItemsFlag=true;else
this.getAllItemsFlag=false;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getGalleryPagingOptionObjectAsString=function()
{var str="pagingOptions="+JSON.stringify({"AllItems":this.getAllItemsFlag,"ItemsPerPage":this.galleryItemPerPage,"PageNumber":this.galleryItemPageNumber,"TotalPages":0});return str;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getMoveOptions=function()
{return"moveOptions="+this.environment.moveOption;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getNewItemToGalleryFromFramingStudio=function(){var _this=this;var itemurl;var igitem={};igitem=this.galleryItemTemplate;igitem.AccountId=1;igitem.Imageid=this.getFramingStudioResponseObject().Imageid;igitem.ItemGroupType=1;igitem.GalleryItemSource=0;igitem.APNum=this.getFramingStudioResponseObject().APNum;igitem.FrameSku=this.getFramingStudioResponseObject().FrameSku;igitem.AvailableInOtherSizes=this.getFramingStudioResponseObject().AvailableInOtherSizes=="True"?true:false;igitem.ItemDisplayTypeID=this.getFramingStudioResponseObject().ItemDisplayedTypeID;igitem.Item.ArtistId=this.getFramingStudioResponseObject().ArtistId;igitem.Item.ArtistName="";igitem.Item.ItemId=0;igitem.Item.Title="";itemurl="";igitem.PODConfigID=this.getFramingStudioResponseObject().PODConfigID;igitem.Source=0;return igitem;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getNewItemToGallery=function(){var igitem={};igitem=this.galleryItemTemplate;igitem.AccountId=1;igitem.Imageid=this.selectedImageObject.Imageid;igitem.ItemGroupType=1;igitem.GalleryItemSource=0;igitem.APNum=this.selectedImageObject.APNum;if(this.selectedImageObject.FrameSku)
igitem.FrameSku=this.selectedImageObject.FrameSku;var boolavailableSizes=false;if(this.selectedImageObject.AvailableInOtherSizes==true||this.selectedImageObject.AvailableInOtherSizes=="true"||this.selectedImageObject.AvailableInOtherSizes=="True"){boolavailableSizes=true;}
igitem.AvailableInOtherSizes=boolavailableSizes;igitem.ItemDisplayTypeID=this.selectedImageObject.ItemDisplayTypeID;igitem.Item.ArtistId=this.selectedImageObject.ArtistId;igitem.Item.ArtistName="";igitem.Item.ItemId=0;igitem.Item.Title="";igitem.ItemURL="";igitem.PODConfigID=this.selectedImageObject.PODConfigID;igitem.Source=this.selectedImageObject.Source;igitem.SpecialHandlingID=this.selectedImageObject.SpecialHandlingID;return igitem;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getExisitngItemToGallery=function(flag){var igitem={};if(flag){igitem=this.galleryItemTemplate;igitem.AccountId=1;igitem.APNum=this.cacheByGalleryItemList[this.getSelectedGridItem()].APNum;igitem.Name=this.cacheByGalleryItemList[this.getSelectedGridItem()].Name;igitem.Imageid=this.cacheByGalleryItemList[this.getSelectedGridItem()].Imageid;igitem.ItemText=this.cacheByGalleryItemList[this.getSelectedGridItem()].ItemText;igitem.ItemGroupType=this.cacheByGalleryItemList[this.getSelectedGridItem()].ItemGroupType;igitem.ItemData=this.cacheByGalleryItemList[this.getSelectedGridItem()].ItemData;igitem.ItemKey=this.cacheByGalleryItemList[this.getSelectedGridItem()].ItemKey;igitem.GalleryItemSource=this.cacheByGalleryItemList[this.getSelectedGridItem()].GalleryItemSource;igitem.ItemGalleryItemID=this.cacheByGalleryItemList[this.getSelectedGridItem()].ItemGalleryItemID;var boolavailableSizes=false;if(this.selectedImageObject.AvailableInOtherSizes==true||this.selectedImageObject.AvailableInOtherSizes=="true"||this.selectedImageObject.AvailableInOtherSizes=="True"){boolavailableSizes=true;}
igitem.AvailableInOtherSizes=boolavailableSizes;igitem.ItemURL="";igitem.Item.ArtistId=this.cacheByGalleryItemList[this.getSelectedGridItem()].Item.ArtistId;igitem.Item.ArtistName="";igitem.Item.ItemId=this.cacheByGalleryItemList[this.getSelectedGridItem()].Item.ItemId;igitem.Item.Title="";igitem.Source=this.cacheByGalleryItemList[this.getSelectedGridItem()].Item.Source;igitem.SpecialHandlingID=this.cacheByGalleryItemList[this.getSelectedGridItem()].SpecialHandlingID;}
else{igitem=this.galleryTemplate;igitem=this.cacheByGalleryList[this.getDestinationSelectedGalleryId()];}
return igitem;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getSelectedGridItem=function(){return this.selectedItemId;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setSelectedGridItem=function(id){this.selectedItemId=id;};com.art.myGalleries.proxies.ApplicationProxy.prototype.getDestinationSelectedGalleryId=function(){return this.selectedGalleryId;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setDestinationSelectedGalleryId=function(id){this.selectedGalleryId=id;};com.art.myGalleries.proxies.ApplicationProxy.prototype.setStreamObject=function(obj)
{this.galleryTemplate.StreamConfiguration=obj;this.galleryTemplate.GalleryType=1;};com.art.myGalleries.proxies.ApplicationProxy.prototype.movePropertiesOneLevelUp=function(Items)
{var g=[];for(var i=0;i<Items.length;i++)
{if(Items[i].Item!=null)
{g.push(Items[i].Item);}}
return g;};com.art.myGalleries.proxies.UserLibraryProxy=function(env,envObjSub)
{this.NAME=com.art.myGalleries.proxies.UserLibraryProxy.NAME;this.systemLibraryObject;this.userLibraryObject;this.wallsObject=[];this.savedWallsObject=[];this.selectedWallGalleryName="LivingRoom";this.selectedWallGalleryIndex=1;this.selectedWallName="LivingRoom_04";this.totalItemsOnWall=0;this.userBareWallNamePrefix="UserBareWall_";this.wallItemsMap={};this.selectedWallObject;this.EMPTY_WALL_DELIMITER=com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER;this.baseUrl="http://cache1.allpostersimages.com/";this.baseUrlUserWalls="http://cache2.artprintimages.com";this.flattenedWallItemsByWallId={};this.tempWallItems={};this.flattenedWallsByName={};this.userLibraryObject;this.roomsCollection=[];this.selectedSharedBareWallIndex=0;this.checkBoxMap={};this.RHVerticalTray;this.selectedSharedWallObject;this.sharedWallId;this.sharedEmptyRoomHexColor="";this.lastUpdatedWallObject;this.updateWalls=false;this.initialLoadComplete=false;this.RETRIEVE_ALL_WALLS=com.art.myGalleries.proxies.UserLibraryProxy.RETRIEVE_ALL_WALLS;this.savedWallId;};com.art.myGalleries.proxies.UserLibraryProxy.NAME="UserLibraryProxy";com.art.myGalleries.proxies.UserLibraryProxy.RETRIEVE_ALL_WALLS="UserLibraryProxyRetrieveAllWalls";com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER="@@@";com.art.myGalleries.proxies.UserLibraryProxy.prototype.getCheckBoxByItemGalleryItemID=function(id)
{for(var cb in this.checkBoxMap)
{if(this.checkBoxMap[cb].value.ItemGalleryItemID==id)
return this.checkBoxMap[cb];}
throw new Error("UserLibraryProxy.getCheckBoxByItemGalleryItemID failed! No checkbox found by id: "+id+".");};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSelectedWallGAEventName=function(wallName)
{var wallName=wallName!=undefined?wallName:this.selectedWallName;var key="Choose Public Wall";if(wallName.indexOf(com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER)>-1||wallName.indexOf('hex')>-1)
{key="Choose Bare Wall";}
if(wallName.indexOf('myWallsBrowseBtn')>-1||wallName.indexOf(this.userBareWallNamePrefix)>-1)
{key="Choose Personal Room";}
return key;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.flatten=function(walls)
{this.flattenWallItems(walls);this.flattenWallsByName(walls);};com.art.myGalleries.proxies.UserLibraryProxy.prototype.flattenWallItems=function(walls)
{for(var i=0;i<walls.length;i++)
{var w=walls[i];this.flattenedWallItemsByWallId[w.WallId]={};for(var ii=0;ii<w.WallItems.length;ii++)
{var item=w.WallItems[ii];this.flattenedWallItemsByWallId[w.WallId][item.Item.ItemGalleryItemID]=item;}}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.flattenWallsByName=function(walls)
{for(var i=0;i<walls.length;i++)
{var w=walls[i];var n=w.WallDetails.Name;if(n==""||(w.WallDetails.RulerX1!=undefined&&n.indexOf(this.userBareWallNamePrefix)<0))
{n=this.userBareWallNamePrefix+w.WallDetails.BareWallId;}
this.flattenedWallsByName[n]=w;}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.setUserLibrary=function(userLibrary)
{this.userLibraryObject=userLibrary;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getUserLibrary=function()
{return this.userLibraryObject;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.updateItemPosition=function(xpos,ypos)
{};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getUserBareWalls=function()
{if(this.userLibraryObject==undefined)
return[];var tmp=[];if(this.userLibraryObject.BareWallGalleries.length==0)
{return tmp;}
var bareWalls=this.userLibraryObject.BareWallGalleries[0].BareWalls;for(var i=0;i<bareWalls.length;i++)
{var w=bareWalls[i];var n=w.Name==""?this.userBareWallNamePrefix+w.BareWallId:w.Name;w.Name=n;tmp.push({id:n,url:w.ImageInformation.ThumbnailImage.HttpImageURL});}
return tmp;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSelectedPersonalBareWallWithUpdates=function(obj)
{var walls=this.userLibraryObject.BareWallGalleries[0].BareWalls;var currentPersonalBareWall={};for(var i=0;i<walls.length;i++)
{if(walls[i].Name==this.selectedWallName)
{for(var p in walls[i])
{currentPersonalBareWall[p]=walls[i][p];}
currentPersonalBareWall.InchesConversionRate=obj.inchesConversionRate;currentPersonalBareWall.ProductTargetAreaPosX=obj.productTargetAreaPosX;currentPersonalBareWall.ProductTargetAreaPosY=obj.productTargetAreaPosY;currentPersonalBareWall.RulerLength=obj.rulerLength;currentPersonalBareWall.RulerX1=obj.rulerX1;currentPersonalBareWall.RulerX2=obj.rulerX2;currentPersonalBareWall.RulerY1=obj.rulerY1;currentPersonalBareWall.RulerY2=obj.rulerY2;delete currentPersonalBareWall.__type;delete currentPersonalBareWall.ImageInformation;}}
if(currentPersonalBareWall.InchesConversionRate==undefined)
throw new Error("UserLibraryProxy.getSelectedPersonalBareWallWithUpdates failed! currentPersonalBareWall not set.");return currentPersonalBareWall;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.refreshUserBareWalls=function(bareWallGalleryObject)
{this.userLibraryObject.BareWallGalleries[0]=bareWallGalleryObject;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.setSystemLibrary=function(sysLibrary)
{this.systemLibraryObject=sysLibrary;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSystemLibrary=function(userLibrary)
{return this.systemLibraryObject;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.setSelectedWallGalleryIndexAndName=function(wallGalleryName)
{this.selectedWallGalleryName=wallGalleryName.indexOf(this.EMPTY_WALL_DELIMITER)>-1?wallGalleryName.split(this.EMPTY_WALL_DELIMITER)[1]:wallGalleryName;var wallGalleries=this.systemLibraryObject.BareWallGalleries;var name=wallGalleryName.indexOf(this.EMPTY_WALL_DELIMITER)>-1?wallGalleryName.split(this.EMPTY_WALL_DELIMITER)[0]:wallGalleryName;for(var i=0;i<wallGalleries.length;i++)
{if(wallGalleries[i].Name==name)
{this.selectedWallGalleryIndex=i;return;}}
return;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getThumbnailImageUrls=function(width,height,pw,ph,wallGalleryName)
{var wallGalleries=this.systemLibraryObject.BareWallGalleries;var tmp=[];var walls=wallGalleries[this.selectedWallGalleryIndex].BareWalls;for(var n=0;n<walls.length;n++)
{var w=walls[n];var u=this.baseUrl+w.ImageInformation.ThumbnailImage.HttpImageURL;tmp.push({id:w.Name,url:u});}
return tmp;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getImageObject=function(wallName)
{if(wallName.indexOf(this.userBareWallNamePrefix)>-1)
{return this.getUserImageObject(wallName);}
else
{var isEmptyWall=wallName.indexOf('hex')>-1;if(this.selectedWallGalleryName==null||this.selectedWallGalleryIndex==null)
throw new Error("UserLibraryProxy.getImageObject failure! Selected wall gallery and/or selected wall gallery index not set.");var tmp={};var walls=this.systemLibraryObject.BareWallGalleries[this.selectedWallGalleryIndex].BareWalls;for(var n=0;n<walls.length;n++)
{wallName=isEmptyWall?this.selectedWallGalleryName:wallName;if(walls[n].Name==wallName)
{tmp=walls[n];tmp.url=walls[n].ImageInformation==null?null:this.baseUrl+walls[n].ImageInformation.LargeImage.HttpImageURL;tmp.thumbUrl=walls[n].ImageInformation==null?null:this.baseUrl+walls[n].ImageInformation.ThumbnailImage.HttpImageURL;this.selectedWallObject=tmp;return tmp;}
else
{if(wallName.indexOf("hex")>-1)
{return{};}}}
throw new Error("UserLibraryProxy.getImageObject failure! no Wall Object found.");}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getUserImageObject=function(wallName)
{var tmp={};for(var i=0;i<this.userLibraryObject.BareWallGalleries[0].BareWalls.length;i++)
{var w=this.userLibraryObject.BareWallGalleries[0].BareWalls[i];if(w.Name==wallName)
{tmp=w;tmp.url=w.ImageInformation.LargeImage.HttpImageURL;tmp.thumbUrl=w.ImageInformation.ThumbnailImage.HttpImageURL;this.selectedWallObject=tmp;return tmp;}}
throw new Error("UserLibraryProxy.getUserImageObject failure! no User Wall Object found.");};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSelectedWallId=function()
{if(this.selectedWallName==undefined)
throw new Error("UserLibraryProxy.UserLibraryProxy failed! selectedWallName is undefined.");var n=this.selectedWallName.indexOf('hex')>-1?this.selectedWallGalleryName:this.selectedWallName;if(this.flattenedWallsByName[n]==undefined)
return-1;var wallid=this.flattenedWallsByName[n].WallId;return wallid;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getPositionData=function(itemGalleryItemId,hasWritePermission)
{var wid=this.getSelectedWallId();if(wid==-1&&!hasWritePermission)
return this.tempWallItems[itemGalleryItemId];return this.flattenedWallItemsByWallId[wid][itemGalleryItemId];};com.art.myGalleries.proxies.UserLibraryProxy.prototype.wallItemExists=function(itemGalleryItemId,hasWritePermissions)
{var wid=this.getSelectedWallId();if(wid==-1&&!hasWritePermissions)
return this.tempWallItems[itemGalleryItemId]!=undefined;if(!wid)return false
if(!this.flattenedWallItemsByWallId)return false;if(!this.flattenedWallItemsByWallId[wid])return false;if(!this.flattenedWallItemsByWallId[wid][itemGalleryItemId])return false;return this.flattenedWallItemsByWallId[wid][itemGalleryItemId]!=undefined;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.countWallItem=function()
{this.totalItemsOnWall++;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.removeWallItem=function(ItemGalleryItemID,hasWritePermissions)
{this.totalItemsOnWall--;if(this.totalItemsOnWall<0)
throw new Error("UserLibraryProxy.removeWallItme error! totalItemsOnWall is < 0");if(!hasWritePermissions)
delete this.tempWallItems[ItemGalleryItemID];else
delete this.wallItemsMap[ItemGalleryItemID];};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getWallObjectAsStringForCreateWall=function()
{return JSON.stringify({WallDetails:{BareWallId:this.selectedWallObject.BareWallId}});};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getWallObjectAsStringForUpdateWall=function(items,wallID)
{var data={WallItems:items,WallId:wallID};var str=JSON.stringify(data);return str;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getWallByBareWallId=function(bareWallId)
{var wall;var walls=this.userLibraryObject.Walls;for(var i=0;i<walls.length;i++)
{var w=walls[i];if(w.WallDetails.BareWallId==bareWallId)
{wall=w;break;}}
return wall;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.lastUpdatedIsSet=function()
{return this.lastUpdatedWallObject!=undefined;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.setLastUpdatedWall=function(walls)
{var tmp;var last;if(this.lastUpdatedWallObject==undefined&&walls.length>0)
{this.lastUpdatedWallObject=walls[0];last=this.parseDateUpdated(this.lastUpdatedWallObject);}
for(var i=0;i<walls.length;i++)
{var w=walls[i];tmp=this.parseDateUpdated(w);if(tmp>last)
{this.lastUpdatedWallObject=w;last=this.parseDateUpdated(this.lastUpdatedWallObject);}}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.parseDateUpdated=function(wallObject)
{var str=wallObject.DateUpdated;if(str.indexOf("Date")==-1)
throw new Error("UserLibraryProxy.parseDateUpdated failed! Date object not found.");str=str.replace(/\//g,"");return eval("new "+str);};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getWallByWallId=function(wallid)
{var wall;var walls=this.userLibraryObject.Walls;for(var i=0;i<walls.length;i++)
{var w=walls[i];if(w.WallId==wallid)
{wall=w;break;}}
return wall;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.wallExists=function()
{var name=this.selectedWallName.indexOf('hex')>-1?this.selectedWallGalleryName:this.selectedWallName;var b=this.flattenedWallsByName[name]?true:false;return b;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getItemsForUpdate=function()
{var wallid=this.getSelectedWallId();if(wallid==-1)
return[];var arr=[];for(var itemGalleryItemId in this.wallItemsMap)
{if(itemGalleryItemId)
{var o=this.wallItemsMap[itemGalleryItemId];if(o.moved==undefined)
{var newObj={centerXPos:o.ProductCenterPositionX,centerYPos:o.ProductCenterPositionY,initialLoad:false,itemGalleryItemID:itemGalleryItemId,moved:false};this.wallItemsMap[itemGalleryItemId]=newObj;o=this.wallItemsMap[itemGalleryItemId];}
var obj=new com.art.myGalleries.vos.WallItemVO(itemGalleryItemId);if(o.moved)
{if(!MyGalleriesCore.getModel().isEditingSavedRoom)o.moved=false;obj.ProductCenterPositionX=o.centerXPos;obj.ProductCenterPositionY=o.centerYPos;obj.ProductTargetAreaPosX=-1;obj.ProductTargetAreaPosY=-1;}
else
{if(this.flattenedWallItemsByWallId[wallid][itemGalleryItemId]!=undefined)
{obj.ProductCenterPositionX=this.flattenedWallItemsByWallId[wallid][itemGalleryItemId].ProductCenterPositionX;obj.ProductCenterPositionY=this.flattenedWallItemsByWallId[wallid][itemGalleryItemId].ProductCenterPositionY;obj.ProductTargetAreaPosX=this.flattenedWallItemsByWallId[wallid][itemGalleryItemId].ProductTargetAreaPosX;obj.ProductTargetAreaPosY=this.flattenedWallItemsByWallId[wallid][itemGalleryItemId].ProductTargetAreaPosY;}
else
{this.updateWalls=true;obj.ProductCenterPositionX=o.centerXPos;obj.ProductCenterPositionY=o.centerYPos;obj.ProductTargetAreaPosX=0;obj.ProductTargetAreaPosY=0;}}
arr.push(obj);}}
return arr;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getFlattenedWallItems=function(isViewingSharedRoomView)
{this.selectedWallName=this.selectedWallName.indexOf('hex')>-1?this.selectedWallGalleryName:isViewingSharedRoomView?this.getPersonalWallName():this.selectedWallName;if(this.flattenedWallsByName[this.selectedWallName]!=undefined&&this.flattenedWallsByName[this.selectedWallName].WallId)
{var wallid=this.flattenedWallsByName[this.selectedWallName].WallId;return this.flattenedWallItemsByWallId[wallid];}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getPersonalWallName=function()
{for(var name in this.flattenedWallsByName)
{return name;}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSelectedWallItems=function()
{return[];};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getRooms=function(width,height,parentWidth,parentHeight)
{if(this.roomsCollection.length>0)
return this.roomsCollection;var tmp=[];var cnt=0;for(var i=0;i<this.systemLibraryObject.BareWallGalleries.length;i++)
{var wallGallery=this.systemLibraryObject.BareWallGalleries[i];var name=wallGallery.Name;if(name=="Roomsbysize")
{for(var x=0;x<wallGallery.BareWalls.length;x++)
{var uuid="emptyRoom-"+com.art.core.utils.StringUtil.generateUID();var emptyWall=wallGallery.BareWalls[x];var n=emptyWall.Name;var cn=name+this.EMPTY_WALL_DELIMITER+n;var dim=(emptyWall.WallAreaWidth/12)+"' x "+(emptyWall.WallAreaHeight/12)+"'";this.roomsCollection.push({label:n,name:cn,id:uuid,selected:false,data:0,isEmptyWall:true,dimension:dim});}}
else
{var numberOfWalls=wallGallery.BareWalls.length;if(numberOfWalls>0)
{var selected=cnt==0;var uid=wallGallery.GalleryId;this.roomsCollection.push({label:name,name:name,id:uid,selected:selected,data:numberOfWalls,isEmptyWall:false});cnt++;}}}
return this.roomsCollection;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getEmptyRoomIdByName=function(name)
{for(var i=0;i<this.getRooms().length;i++)
{if(this.getRooms()[i].name==name)
return this.getRooms()[i].id;}};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSelectedSharedWallObject=function()
{if(this.selectedSharedWallObject!=null)
return this.selectedSharedWallObject;for(var i=0;i<this.wallsObject.length;i++)
{var w=this.wallsObject[i];if(w.WallId==this.sharedWallId)
{this.selectedSharedWallObject=w;return this.selectedSharedWallObject;}}
throw new Error("UserLibraryProxy.getSelectedSharedWallObject failed! SharedWallId can't be resolved.");};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getSelectedWallObject=function()
{for(var i=0;i<this.wallsObject.length;i++)
{var w=this.wallsObject[i];if(w.WallDetails.Name==this.selectedWallObject.Name)
{return w;}}
throw new Error("UserLibraryProxy.getSelectedWallObject failed! SharedWallId can't be resolved.");};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getGalleryByWallId=function(wallObject)
{var systemGalleries=this.systemLibraryObject.BareWallGalleries;for(var i=0;i<systemGalleries.length;i++)
{var g=systemGalleries[i];for(var ii=0;ii<g.BareWalls.length;ii++)
{if(g.BareWalls[ii].BareWallId==wallObject.WallDetails.BareWallId)
{this.selectedSharedBareWallIndex=ii;return g;}}}
var userGalleries=this.userLibraryObject.BareWallGalleries;for(var h=0;h<userGalleries.length;h++)
{var ug=userGalleries[h];for(var hh=0;hh<ug.BareWalls.length;hh++)
{if(ug.BareWalls[hh].BareWallId==wallObject.WallDetails.BareWallId)
{this.selectedSharedBareWallIndex=hh;return ug;}}}
throw new Error("UserLibraryProxy.getGalleryByWallId failed! No System Gallery found.");};com.art.myGalleries.proxies.UserLibraryProxy.prototype.galleryHasWalls=function()
{var walls=this.systemLibraryObject.BareWallGalleries[this.selectedWallGalleryIndex].Walls;var bool=walls.length>0;return bool;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getWallId=function(wallName)
{var key=wallName.indexOf("hex")>-1?this.selectedWallGalleryName:wallName;if(!this.flattenedWallsByName[key])
throw new Error("TitleBarModule.getRoomViewQuerystringVals failed! Wall not found.");return this.flattenedWallsByName[key].WallId;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getHexValue=function(wallName)
{return wallName.indexOf("hex")>-1?"/"+wallName:"";};com.art.myGalleries.proxies.UserLibraryProxy.prototype.getNumberOfWalls=function(wallGalleryObject,width,height,parentWidth,parentHeight)
{var cnt=0;for(var w=0;w<wallGalleryObject.BareWalls.length;w++)
{if(this.wallCanAccomodateImage(wallGalleryObject.BareWalls[w],width,height,parentWidth,parentHeight))cnt++;}
return cnt;};com.art.myGalleries.proxies.UserLibraryProxy.prototype.wallCanAccomodateImage=function(wallObject,width,height,parentWidth,parentHeight)
{var usableWidthPixels=wallObject.UsableAreaWidth;var usableHeightPixels=500;var pixelsPerInch=wallObject.WallAreaWidth/wallObject.WallAreaWidthInches;var usableWidthInches=Math.round(usableWidthPixels/pixelsPerInch);var usableHeightInches=Math.round(usableHeightPixels/pixelsPerInch);var pWI=parentWidth/pixelsPerInch;var pHI=parentHeight/pixelsPerInch;return(usableWidthInches>=width)&&(usableHeightInches>=height)&&((pWI)>width)&&((pHI)>height);};com.art.myGalleries.proxies.RoomViewProxy=function()
{if(!(this instanceof com.art.myGalleries.proxies.RoomViewProxy))error('BIZARRE ERROR');this.currentWall;this.bareWalls_system;this.bareWalls_userUploaded;this.changeSize_dataset;this.serviceProvider;this.status='ready';};com.art.myGalleries.proxies.RoomViewProxy.NAME="RoomViewProxy";com.art.myGalleries.proxies.RoomViewProxy.prototype.getDataset_wall=function(inputs){if(!this.checkDatasetStatus('getDataset_wall'))return;this.status='working';this.currentWall=null;this.bareWalls_system=null;this.bareWalls_userUploaded=null;if(typeof(inputs)!='object'){this.error('getDataset_wall > must provide an object as input.');return;}
var mode=inputs.mode;var type=inputs.type;var wallKey=inputs.wallKey;var galleryKey=inputs.galleryKey;var onComplete=inputs.onComplete;var thisObj=inputs.thisObj;var savedWallId=inputs.savedWallId;var wallKeyExists=!isNullOrEmpty(wallKey);var galleryKeyExists=!isNullOrEmpty(galleryKey);var savedWallIdExists=!isNullOrEmpty(savedWallId);if(!(mode=='view'||mode=='edit')){this.error('getDataset_wall > expected inputs.mode to be either "view" or "edit". Instead, got "'+mode+'".');return;};if(!(type=='user'||type=='auto'||type=='new'||type=='')){this.error('getDataset_wall > expected inputs.type to be either "user", "auto", "new", or blank. Instead, got "'+type+'".');return;};if(type=='auto'&&!galleryKeyExists&&!wallKeyExists){this.error('getDataset_wall > in auto mode, either wallKey or galleryKey must be supplied.');return;};if(type==''&&!wallKeyExists){this.error('getDataset_wall > leaving type blank will auto-detect type. However, this requires wallKey, which was not supplied.');return;};if(mode=='view'&&!wallKeyExists&&!savedWallIdExists){this.error('getDataset_wall > in view mode, room key is required.');return;};var mustAutoDetectType=type=='';var mustGetWallFromGallery=!wallKeyExists;var mustGetWallFromService=mustAutoDetectType||mustGetWallFromGallery||type=='user';var sync=function(){if(this.bareWalls_system==null)return;if(this.bareWalls_userUploaded==null)return;if(this.currentWall==null)return;this.status='done';this.currentWall.bareWalls_system=this.bareWalls_system;this.currentWall.bareWalls_userUploaded=this.bareWalls_userUploaded;if(this.currentWall.bareWall==null){for(var i=0;i<this.bareWalls_system.length;i++){if(this.bareWalls_system[i].Name=='Roomsbysize')continue;this.currentWall.bareWall=this.bareWalls_system[i].BareWalls[0];break;};};onComplete.call(thisObj,this.currentWall);this.status='ready';};if(mode=='view'){var rvp=this;this.getWallByProfileKey(wallKey,function(){onComplete.call(thisObj,rvp.currentWall);});}
if(mode=='edit'){this.getBareWalls_system(sync);this.getBareWalls_userUploaded(sync);if(!wallKeyExists)this.getGalleryDetailsWithResultFilter(galleryKey,sync,'auto',null);else{this.getWallByProfileKey(wallKey,function(response){this.handleAutoDetectGallery(response,sync,type,wallKey);});};};};com.art.myGalleries.proxies.RoomViewProxy.prototype.handleAutoDetectGallery=function(response,sync,type,wallKey){this.checkResponseForErrors(response,'handleAutoDetectGallery (anonymous)');switch(true){case typeof(response.Library)=='undefined':this.error('handleAutoDetectGallery (anonymous) > response.Library not found.');return;case typeof(response.Library.Galleries[0])=='undefined':this.error('handleAutoDetectGallery (anonymous) > response.Library.Galleries[0] not found.');return;case typeof(response.Library.Galleries[0].ItemKey)=='undefined':this.error('handleAutoDetectGallery (anonymous) > response.Library.Galleries[0].ItemKey not found.');return;}
var galleryKey=response.Library.Galleries[0].ItemKey;this.getGalleryDetailsWithResultFilter(galleryKey,sync,type,wallKey);};com.art.myGalleries.proxies.RoomViewProxy.prototype.getBareWalls_system=function(onSuccess){var applicationProxy=MyGalleriesCore.getModel();var data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&gallerySortOption="+JSON.stringify({"DefaultSort":true,"SortBy":applicationProxy.gallerySortBy,"SortDirection":applicationProxy.gallerySortDirection});data+="&"+applicationProxy.getGalleryPagingOptionObjectAsString();var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.getSystemLibrary({rvp:this,successHandler:function(response){this.rvp.handle_getBareWalls_system_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_getBareWalls_system_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_getBareWalls_system_success');if(typeof(response.Library)=='undefined'){this.error('handle_getBareWalls_system_success > response.Library is not present.');return;};this.bareWalls_system=response.Library.BareWallGalleries;for(var i=0;i<this.bareWalls_system.length;i++){for(var j=0;j<this.bareWalls_system[i].BareWalls.length;j++){this.bareWalls_system[i].BareWalls[j].type='system';this.bareWalls_system[i].BareWalls[j].bareWallGalleryId=this.bareWalls_system[i].GalleryId;}};if(typeof(onSuccess)=='function')onSuccess.call(this);return this.bareWalls_system;};com.art.myGalleries.proxies.RoomViewProxy.prototype.getBareWalls_userUploaded=function(onSuccess){var applicationProxy=MyGalleriesCore.getModel();var data;data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+='&libraryResultFilter={"IncludeAutoSavedWalls":"false","IncludeBareWalls":"true"}';var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.getUserLibrary({rvp:this,successHandler:function(response){this.rvp.handle_getBareWalls_userUploaded_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_getBareWalls_userUploaded_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_getBareWalls_userUploaded_success');if(typeof(response.Library)=='undefined'){this.error('handle_getBareWalls_userUploaded_success > response.Library is not present.');return;};var arr=[];for(var i in response.Library.BareWallGalleries){for(var j in response.Library.BareWallGalleries[i].BareWalls){arr.push(response.Library.BareWallGalleries[i].BareWalls[j]);};};for(var i=0;i<arr.length;i++){arr[i].type='userUploaded';arr[i].bareWallGalleryId='user'};this.bareWalls_userUploaded=arr;if(typeof(onSuccess)=='function')onSuccess.call(this,arr);return arr;};com.art.myGalleries.proxies.RoomViewProxy.prototype.getWallByProfileKey=function(wallKey,onSuccess,successHandlerOverride){if(typeof(wallKey)=='undefined')this.error('getWallByProfileKey > wallKey was not defined.');var applicationProxy=MyGalleriesCore.getModel();var serviceProvider=this.getServiceProvider();var data;data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&profileKey="+applicationProxy.environmentSub.profileKey;if(MyGalleriesCore.getUserLibraryProxy().savedWallId!=''&&MyGalleriesCore.getUserLibraryProxy().savedWallId!=undefined){data+="&wallId="+MyGalleriesCore.getUserLibraryProxy().savedWallId;serviceProvider.galleryAPIService.getWallByWallId({rvp:this,successHandler:function(response){this.rvp.handle_getWallByProfileKey_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);}
else{data+="&roomKey="+wallKey;serviceProvider.galleryAPIService.getWallByProfileKey({rvp:this,successHandler:function(response){this.rvp.handle_getWallByProfileKey_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);}};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_getWallByProfileKey_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_getWallByProfileKey_success');if(response.Library==null){$('#itemsDisplayErrorMsg').show();$('#itemsDisplay').hide();return;}
switch(true){case typeof(response.Library)=='undefined':this.error('handle_getWallByProfileKey_success > response.Library not found.');return;case typeof(response.Library.Galleries[0])=='undefined':this.error('handle_getWallByProfileKey_success > response.Library.Galleries[0] not found.');return;case typeof(response.Library.Galleries[0].Walls[0])=='undefined':this.error('handle_getWallByProfileKey_success > response.Library.Galleries[0].Walls[0] not found.');return;case typeof(onSuccess)!='function':this.error('handle_getWallByProfileKey_success > onSuccess was not a function. Cannot return data.');return;}
var wallNode=response.Library.Galleries[0].Walls[0];var wall={};wall.id=wallNode.WallId;wall.name=wallNode.Name;wall.key=wallNode.ItemKey;wall.saveType=wallNode.IsSnapShot?'user':'auto';wall.imageUrl=wallNode.Icon.LargeImage.HttpImageURL;wall.bareWall=wallNode.WallDetails;wall.wallItems=wallNode.WallItems;wall.description=wallNode.LongDescription;for(var i=0;i<wall.wallItems.length;i++){wall.wallItems[i].selected=true;};wall.gallery=response.Library.Galleries[0];this.currentWall=wall;if(typeof(onSuccess)=='function')onSuccess.call(this,response);return response;};com.art.myGalleries.proxies.RoomViewProxy.prototype.getGalleryDetailsWithResultFilter=function(galleryKey,onSuccess,type,wallKey){if(typeof(galleryKey)=='undefined')this.error('getGalleryDetailsWithResultFilter > galleryKey was not defined.');if(!type||type==''){error('RoomViewProxy > getGalleryDetailsWithResultFilter > ERROR: required input "type" not provided. Aborting...');};var applicationProxy=MyGalleriesCore.getModel();var data;data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&persona="+applicationProxy.environmentSub.profileKey;data+="&galleryKey="+galleryKey;data+="&galleryAuthToken="+applicationProxy.environment.galleryAuthToken;data+="&gallerySortOption="+JSON.stringify({"DefaultSort":true,"SortBy":applicationProxy.gallerySortBy,"SortDirection":applicationProxy.gallerySortDirection});data+="&"+applicationProxy.getGalleryPagingOptionObjectAsString();data+="&ResultFilterOptions="+JSON.stringify({"IncludeGalleryItems":true,"IncludeUserSavedWalls":type=='user',"IncludeAutoSavedWalls":type=='auto',"IncludeWallItems":true});var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.getGalleryDetailswithResultFilter({rvp:this,successHandler:function(response){this.rvp.handle_getGalleryDetailsWithResultFilter_success(response,onSuccess,type,wallKey)},errorHandler:this.handleError,beforeSendHandler:function(){}},data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_getGalleryDetailsWithResultFilter_success=function(response,onSuccess,type,wallKey){this.checkResponseForErrors(response,'handle_getGalleryDetailsWithResultFilter_success');switch(true){case typeof(response.Library)=='undefined':this.error('handle_getGalleryDetailsWithResultFilter_success > response.Library not found.');return;case typeof(response.Library.Galleries[0])=='undefined':this.error('handle_getGalleryDetailsWithResultFilter_success > response.Library.Galleries[0] not found.');return;case typeof(response.Library.Galleries[0].Walls)!='object':this.error('handle_getGalleryDetailsWithResultFilter_success > response.Library.Galleries[0].Walls not found, or was not an array. Cannot parse auto-saved walls.');return;case typeof(response.Library.Galleries[0].Items)=='undefined':this.error('handle_getGalleryDetailsWithResultFilter_success > response.Library.Galleries[0].Items not found. Cannot parse gallery items.');return;case typeof(onSuccess)!='function':this.error('handle_getGalleryDetailsWithResultFilter_success > onSuccess was not a function. Cannot return data.');return;}
var wallNode=null;var gallery=response.Library.Galleries[0];if(gallery.Walls.length==0){type='new';}else{for(var i=0;i<gallery.Walls.length;i++){if(typeof(wallKey)!='undefined'&&wallKey!=''){if(typeof(gallery.Walls[i].ItemKey)!='undefined'&&gallery.Walls[i].ItemKey==wallKey){wallNode=gallery.Walls[i];break;}else{if(wallNode==null||gallery.Walls[i].DateUpdated>wallNode.DateUpdated)wallNode=gallery.Walls[i];};};};if(wallNode==null){error('RoomViewProxy > handle_getGalleryDetailsWithResultFilter_success > could not find the right wall node! Aborting...');};};var wall;var selectedWallItems=[];if(this.currentWall){wall=this.currentWall;wall.gallery=response.Library.Galleries[0];for(var i=0;i<this.currentWall.wallItems.length;i++){if(this.currentWall.wallItems[i].selected)
selectedWallItems.push(this.currentWall.wallItems[i]);};wall.wallItems=[];}else{wall={};if(type=='new'){wall.id='';wall.name='(NEW WALL)';wall.key='';wall.saveType='new';wall.imageUrl='';wall.bareWall=null;wall.wallItems=[];}else{wall.id=wallNode.WallId;wall.name=wallNode.Name;wall.key=wallNode.ItemKey;wall.saveType=wallNode.IsSnapShot?'user':'auto';try{wall.imageUrl=wallNode.Icon.LargeImage.HttpImageURL;}catch(e){if(wall.saveType=='user'){error('RoomViewProxy > handle_getGalleryDetailsWithResultFilter > warning! this wall did not have an Icon property! View and Share functionality will not work! Wall to follow.');error(wall);}
wall.imageUrl='';}
wall.bareWall=wallNode.WallDetails;if(wallNode.WallItems.length>0)selectedWallItems=wallNode.WallItems;wall.wallItems=[];};wall.gallery=response.Library.Galleries[0];};var galleryItemsNode=response.Library.Galleries[0].Items;for(var i=0;i<galleryItemsNode.length;i++){var galleryItem={Item:galleryItemsNode[i],selected:false};if(selectedWallItems.length>0){for(var j=0;j<selectedWallItems.length;j++){if(galleryItem.Item.ItemGalleryItemID==selectedWallItems[j].Item.ItemGalleryItemID){galleryItem.selected=true;galleryItem.ProductCenterPositionX=selectedWallItems[j].ProductCenterPositionX;galleryItem.ProductCenterPositionY=selectedWallItems[j].ProductCenterPositionY;galleryItem.ProductTargetAreaPosX=selectedWallItems[j].ProductTargetAreaPosX;galleryItem.ProductTargetAreaPosY=selectedWallItems[j].ProductTargetAreaPosY;}}};wall.wallItems.push(galleryItem);}
this.currentWall=wall;if(typeof(onSuccess)=='function')onSuccess.call(this,response);return response;};com.art.myGalleries.proxies.RoomViewProxy.prototype.updateWall=function(wall,onSuccess){if(typeof(wall)=='undefined')this.error('updateWall > wall was not defined.');var applicationProxy=MyGalleriesCore.getModel();if(!applicationProxy.hasWritePermissions())return;var description='';if(wall.description)description=wall.description;var wallObj={Name:wall.name,WallId:wall.id,WallVisibility:0,ShortDescription:description,LongDescription:description,WallDetails:{BareWallId:wall.bareWall.BareWallId,BackGroundColor:wall.bareWall.hex}};var data;data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&WallId="+wall.id;data+="&Wall="+JSON.stringify(wallObj);var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.updateWall({rvp:this,successHandler:function(response){this.rvp.handle_updateWall_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_updateWall_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_updateWall_success');if(typeof(onSuccess)=='function')onSuccess.call(this,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.updateWallItems=function(wall,onSuccess){if(typeof(wall)=='undefined')this.error('updateWallItems > wall was not defined.');var applicationProxy=MyGalleriesCore.getModel();if(!applicationProxy.hasWritePermissions())return;var wallObj={WallId:wall.id,WallItems:[]};for(var i=0;i<wall.wallItems.length;i++){if(!wall.wallItems[i].selected)continue;var obj={Item:{ItemGalleryItemID:wall.wallItems[i].Item.ItemGalleryItemID},ProductCenterPositionX:wall.wallItems[i].ProductCenterPositionX,ProductCenterPositionY:wall.wallItems[i].ProductCenterPositionY,ProductTargetAreaPosX:0,ProductTargetAreaPosY:0};wallObj.WallItems.push(obj);};var data;data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&WallID="+wall.id;data+="&Wall="+JSON.stringify(wallObj);var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.updateWallItems({rvp:this,successHandler:function(response){this.rvp.handle_updateWallItems_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_updateWallItems_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_updateWallItems_success');if(typeof(onSuccess)=='function')onSuccess.call(this,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.createWall=function(wall,onSuccess){if(typeof(wall)=='undefined')this.error('createWall > wall was not defined.');var applicationProxy=MyGalleriesCore.getModel();var wallObj={WallDetails:{BareWallId:wall.bareWall.BareWallId},WallItems:[]};for(var i=0;i<wall.wallItems.length;i++){if(!wall.wallItems[i].selected)continue;var obj={Item:{ItemGalleryItemID:wall.wallItems[i].Item.ItemGalleryItemID},ProductCenterPositionX:wall.wallItems[i].ProductCenterPositionX,ProductCenterPositionY:wall.wallItems[i].ProductCenterPositionY,ProductTargetAreaPosX:0,ProductTargetAreaPosY:0};wallObj.WallItems.push(obj);};var data;data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&galleryId="+wall.gallery.GalleryId;data+="&Wall="+JSON.stringify(wallObj);var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.createWall({rvp:this,successHandler:function(response){this.rvp.handle_createWall_success(response,onSuccess);},errorHandler:this.handleError,beforeSendHandler:function(){}},data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_createWall_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_createWall_success');if(typeof(onSuccess)=='function')onSuccess.call(this,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.getAlternateSizes=function(apNum,onSuccess){var url="itemId="+apNum;url+="&imageId=";url+="&lookupType=ItemNumber";url+="&targetDomain=ArtCom";url+="&CurrencyCode="+MyGalleriesCore.getModel().environment.currencyCode;url+="&languageCode="+MyGalleriesCore.getModel().environment.languageIso;url+="&includePODServiceOptions=true";url+="&includeRelatedCategories=true";url+="&includeRelatedItems=true";url+="&includeProductContent=true";url+="&includeRatingAndReview=true";var obj={rvp:this,getProductInfoSuccess:function(response){this.rvp.handle_getAlternateSizes_success(response,onSuccess);},getProductInfoError:this.handleError,getProductInfoBeforeSend:function(){}};this.serviceProvider.productServiceAPI.GetProductInformation(url,obj);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_getAlternateSizes_success=function(response,onSuccess){this.changeSize_dataset=response;onSuccess.call(null,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.addNewSizeToGallery=function(itemGalleryItemId,podConfigId,onSuccess){var baseItem=null;for(var i=0;i<this.currentWall.wallItems.length;i++){if(this.currentWall.wallItems[i].Item.ItemGalleryItemID==itemGalleryItemId){baseItem=this.currentWall.wallItems[i].Item;break;};};if(baseItem==null){error('RoomViewProxy > addNewSizeToGallery > ERROR: could not find base item in wallItems collection. ItemGalleryItemID was: "'+itemGalleryItemId+'". WallItems collection to follow.');error(this.currentWall.wallItems);return;};var dataset=this.changeSize_dataset;var obj={};obj.Imageid=baseItem.Imageid;obj.AvailableInOtherSizes=baseItem.AvailableInOtherSizes||false;obj.ArtistId=baseItem.Item.ArtistId;obj.ArtistName=baseItem.Item.ArtistName;obj.Source="roomView";if(baseItem.SpecialHandlingID!=null&&baseItem.SpecialHandlingID!=undefined)
obj.SpecialHandlingID=baseItem.SpecialHandlingID;for(var i=0;i<dataset.length;i++)
{if(podConfigId==dataset[i].ItemId&&!dataset[i].IsPOD)
{obj.APNum=dataset[i].ItemId;obj.Sku="";obj.ItemDisplayTypeID=dataset[i].ItemDisplayTypeID;obj.ItemPrice=dataset[i].ItemPrice.Price;obj.Title=dataset[i].Title;obj.PODConfigID=0;}
else if(dataset[i].IsPOD)
{var sizeTypeCnt=dataset[i].PODProductType.length;for(var k=0;k<sizeTypeCnt;k++)
{var sizePODMainObj=dataset[i].PODProductType[k];var sizePODObj=sizePODMainObj.PODInformation;for(var j=0;j<sizePODObj.length;j++)
{if(podConfigId==sizePODObj[j].POD_ConfigID||podConfigId==dataset[i].ItemId)
{obj.APNum=dataset[i].ItemId;obj.Sku="";obj.ItemDisplayTypeID=sizePODMainObj.ItemDisplayTypeID;obj.ItemPrice=sizePODObj[j].ItemPrice.Price;obj.Title=dataset[i].Title;obj.PODConfigID=sizePODObj[j].POD_ConfigID;}}}}}
var applicationProxy=MyGalleriesCore.getModel();var galleryId=this.currentWall.gallery.GalleryId;var galleryItems=[obj];var data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&"+"galleryItems="+escape(JSON.stringify(galleryItems));data+="&"+"galleryID="+galleryId;data+="&allowDuplicate=false";var eventObj={rvp:this,app:this.app,successHandler:function(response){this.rvp.handle_addNewSizeToGallery_success(response,onSuccess);},getProductInfoError:this.handleError,beforeSendHandler:function(){}};var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.addItemsToGallery(eventObj,data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_addNewSizeToGallery_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_addNewSizeToGallery_success');this.getGalleryDetailsWithResultFilter(this.currentWall.gallery.ItemKey,onSuccess,this.currentWall.saveType,this.currentWall.key);};com.art.myGalleries.proxies.RoomViewProxy.prototype.saveRoom=function(onSuccess){var applicationProxy=MyGalleriesCore.getModel();var roomTitle=$('#mg_saveroommodal_roomtitle').val();var roomDescription=$('#mg_saveroommodal_roomdescription').val();if(roomDescription=='Optional Description')roomDescription='';var visibility=0;var wall={Name:roomTitle,ShortDescription:roomDescription,LongDescription:roomDescription,WallVisibility:visibility,IsSnapshot:'true'};var data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&WallID="+this.currentWall.id;data+="&wall="+escape(JSON.stringify(wall));var eventObj={rvp:this,app:this.app,successHandler:function(response){this.rvp.handle_saveRoom_success(response,onSuccess);},getProductInfoError:this.handleError,beforeSendHandler:function(){}};var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.copyWallWithItems(eventObj,data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_saveRoom_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_saveRoom_success');onSuccess.call(null,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.shareWall=function(onSuccess){var applicationProxy=MyGalleriesCore.getModel();var data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&galleryId="+applicationProxy.environmentSub.selectedGalleryID;data+="&persona="+applicationProxy.environmentSub.profileKey;data+="&galleryKey="+applicationProxy.environmentSub.galleryKey;data+="&galleryAuthToken="+applicationProxy.environment.galleryAuthToken;data+="&WallID="+this.currentWall.id;data+="&createSnapshot=true";var eventObj={rvp:this,app:this.app,successHandler:function(response){this.rvp.handle_shareWall_success(response,onSuccess);},getProductInfoError:this.handleError,beforeSendHandler:function(){}};var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.shareWall(eventObj,data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_shareWall_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_shareWall_success');onSuccess.call(null,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.createBarewallFromImageUploadService=function(imageUploadResponse,onSuccess){var barewall={};var imgXml=com.art.core.utils.XMLUtil.getXMLFromString(imageUploadResponse.Image.replace(/\[\[BACKSLASH\]\]/g,'\\'));var img={};img.LargeImage={HttpImageURL:com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml(imgXml,'LrgImageUrl')};img.MediumImage={HttpImageURL:com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml(imgXml,'MedImageUrl')};img.SmallImage={HttpImageURL:com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml(imgXml,'SmlImageUrl')};barewall.BareWallId="0";barewall.IsAngledRoom=false;barewall.RoomAngle=0;barewall.ImageInformation=null;barewall.UsableAreaWidth=com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml(imgXml,'OrigW');barewall.UsableAreaHeight=com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml(imgXml,'OrigH');barewall.UsableAreaPosY=0;barewall.UsableAreaPosX=0;barewall.ProductTargetAreaPosX=0;barewall.ProductTargetAreaPosY=0;barewall.WallAreaWidth=barewall.UsableAreaWidth;barewall.WallAreaHeight=barewall.UsableAreaHeight;barewall.WallAreaWidthInches=10*12;barewall.WallAreaHeightInches=barewall.WallAreaWidthInches*(barewall.UsableAreaHeight/barewall.UsableAreaWidth);barewall.RulerLength=0;barewall.Guide1Y=0;barewall.Guide2Y=0;barewall.RulerX1=0;barewall.RulerX2=0;barewall.RulerY1=0;barewall.RulerY2=0;barewall.RulerLength=0;barewall.Caption="caption";barewall.WallImageGUID=com.art.core.utils.XMLUtil.getTextFromUniqueNodeInXml(imgXml,'ImageGUID');var icr=-1;var icr2=Number(barewall.UsableAreaWidth)/(10*12);if(!isNaN(icr2))icr=icr2;barewall.InchesConversionRate=icr;this.createBarewall(barewall,onSuccess);};com.art.myGalleries.proxies.RoomViewProxy.prototype.createBarewall=function(barewall,onSuccess){var applicationProxy=MyGalleriesCore.getModel();var data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&galleryID=0";data+="&Wall="+JSON.stringify([barewall]);var eventObj={rvp:this,app:this.app,successHandler:function(response){this.rvp.handle_createBarewall_success(response,onSuccess);},getProductInfoError:this.handleError,beforeSendHandler:function(){}};var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.addBareWalls(eventObj,data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_createBarewall_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_createBarewall_success');onSuccess.call(null,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.updateBarewall=function(barewall,onSuccess){var applicationProxy=MyGalleriesCore.getModel();var bwCopy=JSON.parse(JSON.stringify(barewall));delete bwCopy.ImageInformation;var wall=JSON.stringify(bwCopy);wall=escape(wall);var data=applicationProxy.getAccessKeyObjectAsString()+"&"+applicationProxy.getUserProfileObjectAsString();data+="&galleryID=0";data+="&Wall="+wall;var eventObj={rvp:this,app:this.app,successHandler:function(response){this.rvp.handle_updateBarewall_success(response,onSuccess);},getProductInfoError:this.handleError,beforeSendHandler:function(){}};var serviceProvider=this.getServiceProvider();serviceProvider.galleryAPIService.updateBareWall(eventObj,data);};com.art.myGalleries.proxies.RoomViewProxy.prototype.handle_updateBarewall_success=function(response,onSuccess){this.checkResponseForErrors(response,'handle_updateBarewall_success');onSuccess.call(null,response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.checkResponseForErrors=function(response,prefix){if(typeof(prefix)=='undefined')prefix='';if(typeof(response)=='undefined'){this.error(prefix+' > response is null.');return;}
if(typeof(response.OperationResponse)=='undefined'){this.error(prefix+' >  OperationResponse is null.');return;}
if(typeof(response.OperationResponse.ResponseMessage)=='undefined'){this.error(prefix+' > OperationResponse.ResponseMessage is null.');return;}
if(response.OperationResponse.ResponseMessage!='Success')this.error(prefix+' > service call was not successful. ResponseMessage='+response.OperationResponse.ResponseMessage);};com.art.myGalleries.proxies.RoomViewProxy.prototype.checkDatasetStatus=function(prefix){switch(this.status){case'working':this.error(prefix+'> unable to get new dataset. An operation is currently in progress.');return false;case'error':this.error(prefix+'> beginning a new dataset while a previous dataset is in an error state. This will overwrite the dataset and discard the error.');break;case'done':this.warn(prefix+'> beginning a new dataset while a previous dataset is done, but not yet read. This will overwrite the dataset.');break;case'ready':break;default:this.warn(prefix+'> unknown status prior to getDataset operation. Erratic behavior may occur.');}
return true;};com.art.myGalleries.proxies.RoomViewProxy.prototype.handleError=function(response){this.status='error';this.error('handleError > generic error. Response to follow.');this.error(response);};com.art.myGalleries.proxies.RoomViewProxy.prototype.getServiceProvider=function(){if(!this.serviceProvider)
this.serviceProvider=new com.art.core.services.ServiceProvider(MyGalleriesCore.getEnvironment());return this.serviceProvider;};com.art.myGalleries.proxies.RoomViewProxy.prototype.error=function(str){this.status='error';if(typeof(console)!='undefined'){if(typeof(console.error)!='undefined')console.error('RoomViewProxy > '+str);else if(typeof(console.log)!='undefined')console.log('ERROR: RoomViewProxy > '+str);}};com.art.myGalleries.proxies.RoomViewProxy.prototype.warn=function(str){if(typeof(console)!='undefined'){if(typeof(console.warn)!='undefined')console.warn('RoomViewProxy > '+str);else if(typeof(console.log)!='undefined')console.log('WARNING: RoomViewProxy > '+str);}};var MyGalleriesCore=(function()
{var model={};var userLibrary={};var roomViewProxy={};var serviceProvider={};var templateEngine={};var subscribers={};var environment={};var environmentSub={};var ga={};var ec={};var version="1032";var intervalID;var events={STARTUP:'startup',UPDATE_BACKGROUND_COLOR:'updateBackgroundColor',CHANGE_VIEWMODE:'changeViewMode',GET_ALL_GALLERY_ITEMS:'getAllGalleryItems',GET_ALL_GALLERY_ITEMS_SUCCESS:'getAllGalleryItemsSuccess',GET_ALL_GALLERY_ITEMS_FAILED:'getAllGalleryItemsFailed',UPDATE_GALLERY_TITLE_DESC:'updateTitleDesc',UPDATE_GALLERY_TITLE_DESC_SUCCESS:'updateTitleDescSuccess',UPDATE_GALLERY_TITLE_DESC_FAILED:'updateTitleDescFailure',ADD_GALLERY_TITLE_DESC:'addTitleDesc',ADD_GALLERY_TITLE_DESC_SUCCESS:'addTitleDescSuccess',ADD_GALLERY_TITLE_DESC_FAILED:'addTitleDescFailure',GALLERY_ITEM_SORT:"galleryItemsSort",GALLERY_ITEM_SORT_SUCCESS:"galleryItemsSortSuccess",GALLERY_ITEM_SORT_FAILED:"galleryItemsSortFailed",GET_SYSTEM_LIBRARY:"getSystemLibrary",GET_SYSTEM_LIBRARY_SUCCESS:"getSystemLibrarySuccess",GET_SYSTEM_LIBRARY_FAILED:"getSystemLibraryFailed",GET_USER_LIBRARY:"getUserLibrary",GET_USER_LIBRARY_SUCCESS:"getUserLibrarySuccess",GET_USER_LIBRARY_FAILED:"getUserLibraryFailed",ADD_ITEM_TO_EXISTING_GALLERY:"addItemToExistingGallery",ADD_ITEM_TO_EXISTING_GALLERY_SUCCESS:"addItemToExistingGallerySuccess",ADD_ITEM_TO_EXISTING_GALLERY_FALIED:"addItemToExistingGalleryFailed",ADD_ITEM_TO_EXISTING_GALLERY_DP:"detailPageAddItemToExistingGallery",ADD_ITEM_TO_EXISTING_GALLERY_DP_SUCCESS:"detailPageAddItemToExistingGallerySuccess",ADD_ITEM_TO_EXISTING_GALLERY_DP_FALIED:"detailPageAddItemToExistingGalleryFailed",MOVE_ADD_ITEM_TO_EXISTING_GALLERY:"moveAddItemToExistingGallery",MOVE_ADD_ITEM_TO_EXISTING_GALLERY_SUCCESS:"moveAddItemToExistingGallerySuccess",MOVE_ADD_ITEM_TO_EXISTING_GALLERY_FALIED:"moveAddItemToExistingGalleryFailed",MOVE_ADD_ITEM_TO_NEW_GALLERY:"moveAddItemToNewGallery",MOVE_ADD_ITEM_TO_NEW_GALLERY_SUCCESS:"moveAddItemToNewGallerySuccess",MOVE_ADD_ITEM_TO_NEW_GALLERY_FALIED:"moveAddItemToNewGalleryFailed",ADD_ITEM_TO_EXISTING_GALLERY_EXT:"addItemToExistingGalleryExt",GET_ALL_GALLERIES:'getAllGalleries',GET_ALL_GALLERIES_SUCCESS:'getAllGalleriesSuccess',GET_ALL_GALLERIES_FAILED:'getAllGalleriesFailed',ADD_ITEM_TO_NEW_GALLERY:"AddItemToNewGallery",ADD_ITEM_TO_NEW_GALLERY_SUCCESS:"AddItemToNewGallerySuccess",ADD_ITEM_TO_NEW_GALLERY_FALIED:"AddItemToNewGalleryFailed",ADD_ITEM_TO_NEW_GALLERY_DP:"detailPageAddItemToNewGallery",ADD_ITEM_TO_NEW_GALLERY_DP_SUCCESS:"detailPageAddItemToNewGallerySuccess",ADD_ITEM_TO_NEW_GALLERY_DP_FALIED:"detailPageAddItemToNewGalleryFailed",SHOW_LOGINMODAL:"showLoginModal",REGISTER_ACCOUNT:"registerMyGalleriesAccount",REGISTER_ACCOUNT_SUCCESS:"registerMyGalleriesAccountSuccess",REGISTER_ACCOUNT_FAILED:"registerMyGalleriesAccountFailed",REGISTER_ACCOUNT_TRAY_SUCCESS:"registerMyGalleriesTrayAccountSuccess",REGISTER_ACCOUNT_TRAY_FAILED:"registerMyGalleriesTrayAccountFailed",LOGIN_ACCOUNT:"loginMyGalleriesAccount",LOGIN_ACCOUNT_SUCCESS:"loginMyGalleriesAccountSuccess",LOGIN_ACCOUNT_FAILED:"loginMyGalleriesAccountFailed",LOGOUT_MYGALLERY:"logoutMyGalleriesAccount",LOGOUT_MYGALLERY_SUCCESS:"logoutMyGalleriesAccountSuccess",LOGOUT_MYGALLERY_FAILED:"logoutMyGalleriesAccountFailed",LOGIN_ACCOUNT_TRAY_SUCCESS:"loginMyGalleriesTrayAccountSuccess",LOGIN_ACCOUNT_TRAY_FAILED:"loginMyGalleriesTrayAccountFailed",LOGOUT_TRAY_MYGALLERY:"logoutMyGalleriesAccount",LOGOUT_TRAY_MYGALLERY_SUCCESS:"logoutMyGalleriesAccountSuccess",LOGOUT_TRAY_MYGALLERY_FAILED:"logoutMyGalleriesAccountFailed",UPDATE_DLE:"updateDLE",UPDATE_WALL_ITEMS:"updateWallItems",UPDATE_WALL_ITEMS_SUCCESS:"updateWallItemsSuccess",UPDATE_WALL_ITEMS_FAILED:"updateWallItemsFailed",CREATE_WALL:"createWall",CREATE_WALL_SUCCESS:"createWallSuccess",CREATE_WALL_FAILED:"createWallFailed",GET_WALLS:"getWalls",GET_WALLS_SUCCESS:"getWallsSuccess",GET_WALLS_FAILED:"getWallsFailed",ADD_SIMILAR_ARTIST_ITEM:"addSimilarArtistItem",ADD_SIMILAR_ARTIST_ITEM_SUCCESS:"addSimilarArtistItemSuccess",ADD_SIMILAR_ARTIST_ITEM_FAILED:"addSimilarArtistItemFailed",SHORTEN_ROOM_VIEW_URL:"shortenRoomViewURL",SHORTEN_ROOM_VIEW_URL_SUCCESS:"shortenRoomViewURLSuccess",SHORTEN_ROOM_VIEW_URL_FAILED:"shortenRoomViewURLFailed",INITIAL_LOAD:"initialLoad",SHARE_REQUEST:"shareRequest",SHARE_REQUEST_SUCCESS:"shareRequestSuccess",SHARE_REQUEST_FAILED:"shareRequestFailed",DELETE_GALLERY_ITEM:"deleteGalleryItem",DELETE_GALLERY_ITEM_FAILED:"deleteGalleryItemFailed",DELETE_GALLERY_ITEM_SUCCESS:"deleteGalleryItemSuccess",DELETE_GALLERY:"deleteGallery",DELETE_GALLERY_FAILED:"deleteGalleryFailed",DELETE_GALLERY_SUCCESS:"deleteGallerySuccess",ADD_BARE_WALLS:"addBareWalls",ADD_BARE_WALLS_SUCCESS:"addBareWallsSuccess",ADD_BARE_WALLS_ERROR:"addBareWallsError",SHARE_WALL:"shareWall",SHARE_ACTION_SUCCESS:"shareActionSuccess",UPDATE_BARE_WALL:"updateBareWall",UPDATE_BARE_WALL_SUCCESS:"updateBareWallSuccess",UPDATE_BARE_WALL_ERROR:"updateBareWallError",ADD_BARE_WALLS_ERROR:"addBareWallsError",SHOW_CREATE_GALLERY_MODAL:"SHOW_CREATE_GALLERY_MODAL",DELETE_GALLERY_ITEM_DP:"detailPageDeleteGalleryItem",DELETE_GALLERY_ITEM_DP_FAILED:"detailPageDeleteGalleryItemFailed",DELETE_GALLERY_ITEM_DP_SUCCESS:"detailPageDeleteGalleryItemSuccess",SHOW_LOGIN_OR_JOIN:"showloginorjoin",UPDATE_PRIVACY_SETTINGS:"updateprivacysettings",GET_FRAME_SKU:"getFrameSku",GET_FRAME_SKU_SUCCESS:"getFrameSkuSuccess",GET_FRAME_SKU_FAILED:"getFrameSkuError",GET_WALL_BY_ID:"getWallById",GET_WALL_BY_ID_SUCCESS:"getWallByIdSuccess",GET_WALL_BY_ID_ERROR:"getWallByIdError",GET_WALL_BY_PROFILE_KEY:"getWallByProfileKey",GET_WALL_BY_PROFILE_KEY_SUCCESS:"getWallByProfileKeySuccess",GET_WALL_BY_PROFILE_KEY_ERROR:"getWallByProfileKeyError",GET_USER_LIBRARY_BY_PROFILE:"getUserLibraryByProfile",GET_USER_LIBRARY_BY_PROFILE_SUCCESS:"getUserLibraryByProfileSuccess",GET_USER_LIBRARY_BY_PROFILE_ERROR:"getUserLibraryByProfileError",LOGIN_FACEBOOK_MYGALLERY:"loginWithFacebook",LOGIN_FACEBOOK_MYGALLERY_SUCCESS:"loginWithFacebookSuccess",LOGIN_FACEBOOK_MYGALLERY_FAILED:"loginWithFacebookFailed",ROOM_VIEW_SWF_LOADED:"roomViewSWFLoaded",MYACCOUNT_WISHLIST:"myAccountWishList",GET_FRAME_ID:"getFrameID",GET_FRAME_ID_SUCCESS:"getFrameIDSuccess",GET_FRAME_ID_FAILED:"getFrameIDFailed",ADD_DATA_GRAPH:"addDataToGraph",FACEBOOK_MERGE_ACCOUNTS:"facebookMergeAccounts",ADD_GALLERY_TO_BOOKMARK:"addGalleryToBookmark",ADD_GALLERY_TO_BOOKMARK_SUCCESS:"addGalleryToBookmarkSuccess",ADD_GALLERY_TO_BOOKMARK_FAILED:"addGalleryToBookmarkFailed",ADD_ROOM_TO_BOOKMARK:"addRoomToBookmark",ADD_ROOM_TO_BOOKMARK_SUCCESS:"addRoomToBookmarkSuccess",ADD_ROOM_TO_BOOKMARK_FAILED:"addRoomToBookmarkFailed",REMOVE_ROOM_FROM_BOOKMARK:"removeRoomFromBookmark",REMOVE_ROOM_FROM_BOOKMARK_SUCCESS:"removeRoomFromBookmarkSuccess",REMOVE_ROOM_FROM_BOOKMARK_FAILED:"removeRoomFromBookmarkFailed",REMOVE_GALLERY_FROM_BOOKMARK:"removeGalleryFromBookmark",REMOVE_GALLERY_FROM_BOOKMARK_SUCCESS:"removeGalleryFromBookmarkSuccess",REMOVE_GALLERY_FROM_BOOKMARK_FAILED:"removeGalleryFromBookmarkFailed",ADD_FOLLOW_PROFILE:"addFollowProfile",ADD_FOLLOW_PROFILE_SUCCESS:"addFollowProfileSuccess",ADD_FOLLOW_PROFILE_FAILED:"addFollowProfileFailed",REMOVE_FOLLOW_PROFILE:"removeFollowProfile",REMOVE_FOLLOW_PROFILE_SUCCESS:"removeFollowProfileSuccess",REMOVE_FOLLOW_PROFILE_FAILED:"removeFollowProfileFailed",ADD_ITEM_TO_DEFAULT_GALLERY:"addItemsToDefaultGallery",SAVE_ROOM:"saveRoom",SAVE_EXISTING_ROOM:"saveExistingRoom",SAVE_ROOM_AS:"saveRoomAs",SAVE_ROOM_SUCCESS:'saveRoomSuccess',SAVE_ROOM_ERROR:'saveRoomError',OPEN_SAVE_ROOM_MODAL:"openSaveRoomModal",DLE_IMAGE_UPLOAD_COMPLETE:'dleImageUploadComplete',DLE_ENABLE_UPLOAD_BUTTON:'dleEnableUploadButton',DLE_DISABLE_UPLOAD_BUTTON:'dleDisableUploadButton',GET_PRODUCT_INFO:"getProductInfo",GET_PRODUCT_INFO_SUCCESS:"getProductInfoSuccess",GET_PRODUCT_INFO_FAILED:"getProductInfoFailed",SHOW_GLOBAL_LOGINMODAL:"showGlobalLoginModal",LOGIN_ACCOUNT_GLOBAL_SUCCESS:"loginAccountGlobalSuccess",LOGIN_ACCOUNT_GLOBAL_FAILED:"loginAccountGlobalFailed",REGISTER_ACCOUNT_GLOBAL_SUCCESS:"registerAccountGlobalSuccess",REGISTER_ACCOUNT_GLOBAL_FAILED:"registerAccountGlobalFailed",LOGIN_FACEBOOK_GLOBAL_SUCCESS:"loginFacebookGlobalSuccess",LOGIN_FACEBOOK_GLOBAL_FAILED:"loginFacebookGlobalFailed",GET_ALL_GALLERIES_USER:"getAllGalleriesUser",GET_ALL_GALLERIES_FAILED_FOR_WEBUSER:"getAllGalleriesFailedForWebUser",GET_ALL_GALLERIES_SUCCESS_FOR_WEBUSER:"getAllGalleriesSuccessForWebUser",REMOVE_WALL:"removeWall",REMOVE_WALL_SUCCESS:"removeWallSucess",REMOVE_WALL_FAILED:"removeWallFailed",SHARE_GALLERY_ITEM:"shareGalleryItem",SHARE_GALLERY_ITEM_SUCCESS:"shareGalleryItemSucess",SHARE_GALLERY_ITEM_FAILED:"shareGalleryItemFailed"};var constants={GALLERY_HOME:'galleryHome',GRID_VIEW:'gridView',DETAIL_VIEW:'detailView',SLIDESHOW:'slideshow',ROOM_VIEW:'roomView',DEFAULT:'default',FACEBOOK:'facebook',EMAIL:'email',ANONYMOUS:"1",OWNER:"200",VIEW:"50",EDIT:"100",SIGNUP:"SignUp",PRODUCT_PAGE:"productPage",GALLERY_PAGE:"galleryPage",LOGIN:"Login",DFEIMAGEMAXW:"200",DFEIMAGEMAXH:"200",DFEUNITOFMEASUREINCH:"in",DFEUNITOFMEASURECM:"cm",PERSISTENTCOOKIENAME:"ap",SESSIONCOOKIENAME:"arts",ACCOUNTID:"accountid",AUTHTOKEN:"authtoken",ACCOUNTTYPE:"accounttype",PROFILEURL:"profileURL",BOOKMARK:"10",FOLLOWS:"9",LOGINFOLLOWS:"follows",LOGINBOOKMARK:"bookmark",LOGINTRAY:"tray",GALLERYPAGE:"gallery",FOLLOWSPAGE:"follows",BOOKMARKGALLERYPAGE:"bookmarks-gallery",BOOKMARKROOMPAGE:"bookmarks-room",ROOMPAGE:"room"};var interestedSubscribers={};return{"getVersion":function(){return version;},"events":events,"constants":constants,"getUseCaseResultsByName":function(name)
{return applicationFlowDebugger.getUseCase(name);},"registerModule":function(module)
{this.registerSubscriber(module);},"registerSubscriber":function(observer)
{if(observer.NAME==undefined)
throw new Error("MyGalleries.registerSubscriber failed! observer.NAME is undefined.");var arr=observer.listNotificationInterests();for(var i=0;i<arr.length;i++)
{var noteName=arr[i];if(interestedSubscribers[noteName]==undefined)
interestedSubscribers[noteName]={};interestedSubscribers[noteName][observer.NAME]=true;}
subscribers[observer.NAME]=observer;},"getInterestedSubscribers":function(){return interestedSubscribers;},"removeModule":function(name)
{var tmp={};for(var m in subscribers)
{if(m!=name)
tmp[m]=subscribers[m];}
subscribers=tmp;},"sendNotification":function(note)
{for(var m in interestedSubscribers[note.name])
{if(subscribers[m]!=undefined)
subscribers[m].handleNotification(note);}},"clearAll":function()
{subscribers={};interestedSubscribers={};},"startAll":function()
{for(var subscriber in subscribers)
{subscribers[subscriber].init();}},"startAllByViewMode":function(viewmode)
{for(var subscriber in subscribers)
{subscribers[subscriber].init(viewmode);}},"startModule":function(name,obj)
{if(obj==undefined)
{subscribers[name].init();}
else
{subscribers[name].init(obj);}},"getSubscriber":function(name)
{return subscribers[name];},"getSubscribers":function(name)
{return subscribers;},"getModule":function(name)
{return subscribers[name];},"setEnvironment":function(obj)
{environment=obj;},"getEnvironment":function()
{return environment;},"addToEnvironment":function(key,value)
{environment[key]=value;},"setSubEnvironment":function(obj)
{environmentSub=obj;},"getSubEnvironment":function()
{return environmentSub;},"addToSubEnvironment":function(key,value)
{environmentSub[key]=value;},"getModel":function(){return model;},"getUserLibraryProxy":function(){return userLibrary;},"getRoomViewProxy":function(){return roomViewProxy;},"getServiceProvider":function(){return serviceProvider;},"init":function(envObj,viewMode,envObjSub)
{try{if(envObj==undefined)envObj={};}
catch(err){envObj={};}
var environmentObject=new com.art.core.vos.Environment();environmentObject.init(envObj);environment=environmentObject.properties;environmentSub=envObjSub;model=new com.art.myGalleries.proxies.ApplicationProxy(environment,viewMode,envObjSub);userLibrary=new com.art.myGalleries.proxies.UserLibraryProxy(environment,envObjSub);roomViewProxy=new com.art.myGalleries.proxies.RoomViewProxy();},"updateWallFromDLE":function(wallItemInfo)
{if(!wallItemInfo.initialLoad)
{this.getUserLibraryProxy().wallItemsMap[wallItemInfo.itemGalleryItemID]=wallItemInfo;if(!this.getModel().hasWritePermissions())
{this.getUserLibraryProxy().tempWallItems[wallItemInfo.itemGalleryItemID]=wallItemInfo;com.art.core.utils.Flash.getMovie("roomViewFlashTarget").stopCursor();return;}
else
{var items=this.getUserLibraryProxy().getItemsForUpdate();this.getModel().updateFromDLE=true;if(this.getModel().isEditingSavedRoom){com.art.core.utils.Flash.getMovie("roomViewFlashTarget").stopCursor();return;}
this.sendNotification(new com.art.core.utils.Note(this.events.UPDATE_WALL_ITEMS,items));}}
else
{this.getUserLibraryProxy().getCheckBoxByItemGalleryItemID(wallItemInfo.itemGalleryItemID).value.initialLoad=false;}},"createWallFromDLE":function(wallName)
{this.getModel().updateFromDLE=true;var wallName=wallName.indexOf('hex')>-1?this.getUserLibraryProxy().selectedWallGalleryName:wallName;if(this.getModel().isEditingSavedRoom){com.art.core.utils.Flash.getMovie("roomViewFlashTarget").stopCursor();return;}
if(!this.getUserLibraryProxy().initialLoadComplete)
{this.getUserLibraryProxy().initialLoadComplete=true;if(!this.getUserLibraryProxy().wallExists())
{if(!this.getModel().hasWritePermissions())
return;else
{this.sendNotification(new com.art.core.utils.Note(this.events.CREATE_WALL));}}
else
{this.sendNotification(new com.art.core.utils.Note(this.events.INITIAL_LOAD));}}
else
{if(!this.getUserLibraryProxy().wallExists())
{if(!this.getModel().hasWritePermissions())
return;this.sendNotification(new com.art.core.utils.Note(this.events.CREATE_WALL));}
else
{if(this.getModel().hasWritePermissions())
{items=this.getUserLibraryProxy().getItemsForUpdate();this.sendNotification(new com.art.core.utils.Note(this.events.UPDATE_WALL_ITEMS,items));}}}},"gaTrackFromDLE":function(wallName)
{if(this.getUserLibraryProxy().initialLoadComplete)
{mygalleriesGA.trackEventWithCategory("Room",this.getUserLibraryProxy().getSelectedWallGAEventName(wallName));}},"allWallItemsResizeComplete":function()
{if(this.getUserLibraryProxy().wallExists())
{var items=this.getUserLibraryProxy().getItemsForUpdate();com.art.core.utils.Flash.getMovie("roomViewFlashTarget").updateImagePositions(items);}},"swfReadyFromDLE":function()
{this.getModel().dleIsLoaded=true;if(this.getModel().galleryItemsLoaded)
this.sendNotification(new com.art.core.utils.Note(this.events.ROOM_VIEW_SWF_LOADED));},"getImageObjectFromDLE":function(wallName)
{this.getUserLibraryProxy().selectedWallName=wallName;var obj=this.getUserLibraryProxy().getImageObject(wallName);return obj;},"setSelectedWallGalleryIndexAndNameFromDLE":function(wallGalleryName)
{this.getUserLibraryProxy().selectedWallGalleryName=wallGalleryName.indexOf(com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER)>-1?wallGalleryName.split(com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER)[1]:wallGalleryName;var name=wallGalleryName.indexOf(com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER)>-1?wallGalleryName.split(com.art.myGalleries.proxies.UserLibraryProxy.EMPTY_WALL_DELIMITER)[0]:wallGalleryName;if(this.getUserLibraryProxy().selectedWallGalleryName!="myWallsBrowseBtn")
{var wallGalleries=this.getUserLibraryProxy().systemLibraryObject.BareWallGalleries;for(var i=0;i<wallGalleries.length;i++)
{if(wallGalleries[i].Name==name)
{this.getUserLibraryProxy().selectedWallGalleryIndex=i;return;}}}
else
{var personalWallGalleries=this.getUserLibraryProxy().userLibraryObject.BareWallGalleries;for(var z=0;z<personalWallGalleries.length;z++)
{if(personalWallGalleries[z].Name==this.getUserLibraryProxy().selectedWallGalleryName)
{this.getUserLibraryProxy().selectedWallGalleryIndex=z;return;}}}},"handleSignInFromDLE":function(key)
{if(key!="upload"&&key!="ruler")
this.sendNotification(new com.art.core.utils.Note(this.events.SHOW_LOGINMODAL,{'signInMode':key}));},"handleCallibrationFromDLE":function(obj)
{this.sendNotification(new com.art.core.utils.Note(this.events.UPDATE_BARE_WALL,obj));},"createBareWallFromDLE":function(obj)
{if(this.getModel().hasWritePermissions())
this.sendNotification(new com.art.core.utils.Note(this.events.ADD_BARE_WALLS,obj));},"setAccountCookieInfo":function(authtoken,profileurl,accountid)
{},"isUserInThemMode":function()
{var isUserInThemMode=false;if(mygalPageInfo.RightNavThem!=null){var valueThemMode=mygalPageInfo.RightNavThem!=null;if(valueThemMode==true){isUserInThemMode=true;}}
return isUserInThemMode;},"AddItemToDefaultGallery":function()
{this.sendNotification(new com.art.core.utils.Note(this.events.ADD_ITEM_TO_DEFAULT_GALLERY));},"externalAddToGallery":function(page)
{var _this=this;clearTimeout(intervalID);intervalID=setTimeout(function(){if(_this.getModel().selectedImageObject!=null)
{switch(page)
{case _this.constants.PRODUCT_PAGE:mygalleriesGA.trackEventWithCategory('Save to Gallery','Product Page Add - Page Link');break;case _this.constants.GALLERY_PAGE:mygalleriesGA.trackEventWithCategory('Save to Gallery','Gallery Page Add - Page Link');break;}
_this.sendNotification(new com.art.core.utils.Note(_this.events.ADD_ITEM_TO_EXISTING_GALLERY_EXT));}},300);}};})();com.art.myGalleries.modules.GalleryHome=function(data,app)
{this.app=app;this.moduleData=data;this.NAME=com.art.myGalleries.modules.GalleryHome.NAME;this.instance=this;};com.art.myGalleries.modules.GalleryHome.NAME="GalleryHome";com.art.myGalleries.modules.GalleryHome.prototype.init=function(config)
{var _this=this;};com.art.myGalleries.modules.GalleryHome.prototype.destroy=function()
{};com.art.myGalleries.modules.GalleryHome.prototype.notify=function()
{this.app.sendNotification(note);};com.art.myGalleries.modules.GalleryHome.prototype.listNotificationInterests=function()
{return[this.app.events.STARTUP];};com.art.myGalleries.modules.GalleryHome.prototype.handleNotification=function(note)
{switch(note.name)
{case this.app.events.STARTUP:break;default:}};com.art.myGalleries.modules.GalleryHome.prototype.getTemplate=function()
{var returnValue=this.template;returnValue=returnValue.replace(/\[IMAGE_DOMAIN\]/gi,this.imagePath);returnValue=returnValue.replace(/\[$MYGALLERY\]/gi,this.imagePath);return returnValue.replace('$NAME',this.NAME);};com.art.myGalleries.modules.GalleryHome.prototype.getTarget=function()
{return this.moduleData.target;};com.art.myGalleries.modules.GalleryHome.prototype.template="";com.art.myGalleries.modules.ExternalModule=function(data,app)
{this.app=app;this.moduleData=data;this.NAME=com.art.myGalleries.modules.ExternalModule.NAME;this.instance=this;this.modalGalleryLB;this.modalSignUpLB;this.myModalSaveToGallery;this.loginLink;this.modalGallery;this.selectedGalleryName='';this.framingStudioCall;this.FSData={};this.loginOption="";this.wishList;this.modalWishList;};com.art.myGalleries.modules.ExternalModule.NAME="ExternalModule";com.art.myGalleries.modules.ExternalModule.prototype.init=function(obj)
{var _this=this;$(".myWishListMyAccount").live("click",function()
{_this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.MYACCOUNT_WISHLIST));});};com.art.myGalleries.modules.ExternalModule.prototype.getUserGalleries=function()
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES));};com.art.myGalleries.modules.ExternalModule.prototype.setModalInit=function()
{var cookieobject=new com.art.core.cookie.Cookie();var lastgalleryIdCheckforTray="";lastgalleryIdCheckforTray=this.app.getModel().getLastSelectedGalleryID()
if(cookieobject.getCookieDictionary(this.app.constants.SESSIONCOOKIENAME,this.app.getModel().oneClickCookie)=="1"&&lastgalleryIdCheckforTray.length>0)
{this.app.getModel().environmentSub.selectedGalleryID=this.app.getModel().getLastSelectedGalleryID();this.app.getModel().setDestinationSelectedGalleryId(this.app.getModel().getLastSelectedGalleryID());this.selectedGalleryName=this.app.getModel().cacheByGalleryList[this.app.getModel().getLastSelectedGalleryID()].Name;setTimeout(function(){MyGalleriesCore.getModel().frameStudioFlag=false;},250);if(this.framingStudioCall=="framingStudioCall")
{this.app.getModel().setFramingStudioResponseObject(this.FSData);mygalleriesGA.trackEventWithCategory('Save to Gallery','Framing Studio Add - Completed');this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_EXISTING_GALLERY,this.FSData.FileName));}
else
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_EXISTING_GALLERY,this.app.getModel().getLastSelectedGalleryID()));}}
else
{var _this=this;this.modalGalleryLB=new com.art.core.components.LightBox('myMoveToGalleryLB','body',.7);this.modalGalleryLB.show();setTimeout(function(){MyGalleriesCore.getModel().frameStudioFlag=false;},250);var SelectedGalleryId="";var selectedid="";var galleryItem=_this.app.getModel().selectedImageObject;var SelectedGalleryId=this.app.getModel().environmentSub.selectedGalleryID;var MyGalleriesModalObject={id:"SaveToGallery",Title:"Save to My Gallery",SelectedGalleryId:SelectedGalleryId,galleryList:_this.app.getModel().galleryList,galleryItem:galleryItem};if(this.framingStudioCall!="framingStudioCall")
{var galleryItem=_this.app.getModel().selectedImageObject;var SelectedGalleryId=this.app.getModel().environmentSub.selectedGalleryID;var MyGalleriesModalObject={id:"SaveToGallery",Title:"Save to My Gallery",SelectedGalleryId:SelectedGalleryId,galleryList:_this.app.getModel().galleryList,galleryItem:galleryItem};}
else
{var MyGalleriesModalObject={id:"SaveToGallery",Title:"Save to My Gallery",galleryList:_this.app.getModel().galleryList,galleryItem:this.FSData};}
this.modalGallery=new com.art.myGalleries.components.MyGalleriesModal(MyGalleriesModalObject);var popwidth=$.browser.msie?750:720;this.myModalSaveToGallery=new com.art.core.components.BaseModal("myModalSaveToGallery",popwidth,"#ffffff",false);this.myModalSaveToGallery.setContents(this.modalGallery.render());var privacyCheckbox=new com.art.core.components.CheckBox('privacyChk','privacy','Make Gallery Private',false);var strPrivacy="<div class='privacy'><div style='float: left;'>"+privacyCheckbox.render()+"</div><div id='privacyTxt' class='SiteFont fontsize12'>"+privacyCheckbox.label+"</div><div style='clear:both'></div></div>";$("body").append(this.myModalSaveToGallery.render(this.modalGalleryLB.getLightBoxZIndex()+1));this.myModalSaveToGallery.registerEvents();$(".modal_header_text").html("Save to My Gallery");$(".modal_header_text").addClass("uCase gCustomFont");if(this.app.getModel().environment.accountType!=this.app.constants.ANONYMOUS)
{this.myModalSaveToGallery.setLeftButtonBarContent(strPrivacy);}
$(".newGalleryTextBox").after(strPrivacy);privacyCheckbox.registerEvents();privacyCheckbox.registerCallback(com.art.core.components.CheckBox.CHECKED,function(object){var privacy=object.selected?3:1;_this.app.getModel().setAddedGalleryPrivacy(privacy);});this.modalGallery.registerCallback(com.art.myGalleries.components.MyGalleriesModal.LOGIN_CLICKED,function(){_this.loginOption=com.art.core.components.LoginModal.LOGIN;_this.showLoginModal();});this.modalGallery.registerCallback(com.art.myGalleries.components.MyGalleriesModal.REGISTER_CLICKED,function(){_this.loginOption=com.art.core.components.LoginModal.REGISTER;_this.showLoginModal();});var continueBtn=new com.art.core.components.ArtButton("continue",com.art.core.components.ArtButton.ART_ORANGE,"Save to Gallery");$(".MyGalleriesModalGalleryContainer").after(continueBtn.render());continueBtn.registerEvents();continueBtn.registerCallback(com.art.core.components.BaseButton.CLICK,function(){var chkStatus=_this.modalGallery.ContinueToMove();var cookieValue=cookieobject.getCookieDictionary(_this.app.constants.SESSIONCOOKIENAME,_this.app.getModel().oneClickCookie);if(chkStatus=='Existing'){_this.app.getModel().environmentSub.selectedGalleryID=_this.modalGallery.getDestinationSelectedGalleryId();_this.app.getModel().setDestinationSelectedGalleryId(_this.modalGallery.getDestinationSelectedGalleryId());_this.selectedGalleryName=_this.app.getModel().cacheByGalleryList[_this.app.getModel().environmentSub.selectedGalleryID].Name;if(_this.framingStudioCall=="framingStudioCall")
{_this.app.getModel().setFramingStudioResponseObject(_this.FSData);mygalleriesGA.trackEventWithCategory('Save to Gallery','Framing Studio Add - Completed');_this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.ADD_ITEM_TO_EXISTING_GALLERY,_this.FSData.FileName));}
else
{_this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.ADD_ITEM_TO_EXISTING_GALLERY));}}
else if(chkStatus){var data=_this.modalGallery.getAddTitleData();_this.app.getModel().setAddedGalleryTitle(data.title);_this.selectedGalleryName=data.title;var titleValidation=com.art.core.utils.StringUtil.findInvalidChars(_this.selectedGalleryName,'-@#$%^&*()_+<>!~,.?/\[]{}|=','<p>Found invalid characters in in title: {~listOfInvalidChars~}</p>');if(titleValidation!=''){$(".commonErrorMsg").text("Found invalid characters in title");$(".commonErrorMsg").show();return;}
if(_this.framingStudioCall=="framingStudioCall")
{_this.app.getModel().setFramingStudioResponseObject(_this.FSData);_this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.ADD_ITEM_TO_NEW_GALLERY,_this.FSData.FileName));}
else
{_this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.ADD_ITEM_TO_NEW_GALLERY));}}
var cookieValue=cookieobject.getCookieDictionary(_this.app.constants.SESSIONCOOKIENAME,_this.app.getModel().oneClickCookie);if(cookieValue.length==0||cookieValue=="1"||_this.app.getModel().getLastSelectedGalleryName()==""){_this.app.getModel().setOneClickAddToGalleryEnabled(true);$('#autoSave').attr('checked',true);}});this.myModalSaveToGallery.registerCallback(com.art.core.components.BaseModal.CLOSE_CLICKED,function(){$("#loginSavetogallery").die("click");$("#loginSavetogallery").unbind("click");$("#registerSavetogallery").die('click');$("#registerSavetogallery").unbind('click');_this.app.getModel().galleryList="";_this.modalGalleryLB.close();});this.modalGallery.registerEvents();}};com.art.myGalleries.modules.ExternalModule.prototype.setCookieForDropDown=function(param)
{if(param!="")
{var cookieobject=new com.art.core.cookie.Cookie();cookieobject.setCookieDictionary('arts','SaveToGallery',param,'/',cookieobject.getCookieDomain('art'));}};com.art.myGalleries.modules.ExternalModule.prototype.showLoginModal=function(){var note=new com.art.core.utils.Note(MyGalleriesCore.events.SHOW_GLOBAL_LOGINMODAL,{loginOption:this.loginOption},{modulename:this.NAME});MyGalleriesCore.sendNotification(note);};com.art.myGalleries.modules.ExternalModule.prototype.loginModalClose=function()
{var _this=this;$("#myModalLogin").die();$("#myModalLogin").unbind("click");$("#myModalLogin").remove();if(this.loginLink){this.loginLink.doClose();}
if(this.modalSignUpLB){this.modalSignUpLB.close();}
$("#mygallerylogin").unbind("click");$("#mygallerylogin").die('click');$("#mygallerylogin").remove();$("#mygalleryregister").unbind("click");$("#mygalleryregister").die('click');$("#mygalleryregister").remove();$("#"+this.id).die();$("#"+this.id).unbind("click");$("#"+this.id).remove();};com.art.myGalleries.modules.ExternalModule.prototype.OpenWishListModal=function(){var _this=this;var wishListLB=new com.art.core.components.LightBox('myAccountWishListLB','body',.7);wishListLB.show();this.wishList=new com.art.myGalleries.components.CommonComponent('wishlistMyAccount','Wish lists are now My Galleries',500,200);this.modalWishList=new com.art.core.components.BaseModal("myModalWishlist",480,"#f7f7ed",true);this.modalWishList.setContents(this.wishList.render());$("body").append(this.modalWishList.render(wishListLB.getLightBoxZIndex()+1));this.modalWishList.registerEvents();this.modalWishList.registerCallback(com.art.core.components.BaseModal.CLOSE_CLICKED,function(){wishListLB.close();});this.modalWishList.registerButton("closeBtn",com.art.core.components.ArtButton.ART_ORANGE,"Close",function(){_this.modalWishList.close();wishListLB.close();});this.wishList.registerEvents();};com.art.myGalleries.modules.ExternalModule.prototype.destroy=function()
{};com.art.myGalleries.modules.ExternalModule.prototype.notify=function()
{this.app.sendNotification(note);};com.art.myGalleries.modules.ExternalModule.prototype.listNotificationInterests=function()
{return[this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_EXT,this.app.events.GET_ALL_GALLERIES_SUCCESS,this.app.events.GET_ALL_GALLERIES_FAILED,this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_SUCCESS,this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_FAILED,this.app.events.ADD_ITEM_TO_NEW_GALLERY_SUCCESS,this.app.events.ADD_ITEM_TO_NEW_GALLERY_FAILED,this.app.events.REGISTER_ACCOUNT_SUCCESS,this.app.events.REGISTER_ACCOUNT_FAILED,this.app.events.LOGIN_ACCOUNT_SUCCESS,this.app.events.LOGIN_ACCOUNT_FAILED,this.app.events.GET_FRAME_SKU_SUCCESS,this.app.events.GET_FRAME_SKU_FAILED,this.app.events.MYACCOUNT_WISHLIST,this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS,this.app.events.LOGIN_FACEBOOK_MYGALLERY_FAILED];};com.art.myGalleries.modules.ExternalModule.prototype.handleNotification=function(note)
{switch(note.name)
{case this.app.events.GET_FRAME_SKU_SUCCESS:this.FSData=note.body;this.framingStudioCall="framingStudioCall";if(this.app.getModel().galleryList.length==0)
{this.getUserGalleries();}
else
{this.setModalInit();}
break;case this.app.events.GET_FRAME_SKU_FAILED:break;case this.app.events.MYACCOUNT_WISHLIST:this.OpenWishListModal();if($.browser.msie)
{$("#baseModalButtonBarRight_myModalWishlist").css("width","35%");$("#closeBtn").css("height","32px");$("#closeBtn").css("left","120px");$("#closeBtn_label").css("height","32px");$("#closeBtn_rightcap").css("height","32px");}
break;case this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_EXT:if(this.app.getModel().galleryList.length==0)
{this.getUserGalleries();}
else
{this.setModalInit();}
break;case this.app.events.GET_ALL_GALLERIES_SUCCESS:this.setModalInit();break;case this.app.events.GET_ALL_GALLERIES_FAILED:this.setModalInit();break;case this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_SUCCESS:this.newCreatedGalleryId=note.body.GalleryName;this.app.getModel().setLastSelectedGalleryID(note.body.GalleryID);this.app.getModel().setLastSelectedGalleryName(note.body.Library.Galleries[0].Name);this.app.getModel().galleryList="";this.app.getModel().galleryList="";this.myModalSaveToGallery.close();$("#loginSavetogallery").die('click');$("#loginSavetogallery").unbind('click');$("#registerSavetogallery").die('click');$("#registerSavetogallery").unbind('click');break;case this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_FAILED:break;case this.app.events.ADD_ITEM_TO_NEW_GALLERY_SUCCESS:if(note.body.OperationResponse.OperationStatus!=0){if(note.body.OperationResponse.ResponseCode==503)
{$(".commonErrorMsg").css("width","450px");$(".commonErrorMsg").css("top","165px");$(".commonErrorMsg").text("You have an existing gallery with this name. Please enter a new name or select your existing gallery from the dropdown menu.");$(".commonErrorMsg").show();}
else
{var errorMsg=note.body.OperationResponse.ResponseMessage;$(".commonErrorMsg").text(errorMsg);$(".commonErrorMsg").show();}}
else
{this.newCreatedGalleryId=note.body.GalleryName;var galleryName=note.body.Library.Galleries[0].Name;this.app.getModel().setLastSelectedGalleryID(note.body.GalleryID);this.app.getModel().setLastSelectedGalleryName(galleryName);this.app.getModel().galleryList="";this.app.getModel().galleryList="";if(this.myModalSaveToGallery)
this.myModalSaveToGallery.close();if(this.modalGalleryLB)
this.modalGalleryLB.close();$("#loginSavetogallery").die('click');$("#loginSavetogallery").unbind('click');$("#registerSavetogallery").die('click');$("#registerSavetogallery").unbind('click');}
break;case this.app.events.ADD_ITEM_TO_NEW_GALLERY_FAILED:var errorMsg=note.body.OperationResponse.ResponseMessage;$(".commonErrorMsg").text(errorMsg);$(".commonErrorMsg").show();break;case this.app.events.REGISTER_ACCOUNT_SUCCESS:this.loginModalClose();if(this.modalGalleryLB)
this.modalGalleryLB.close();if(this.myModalSaveToGallery){this.myModalSaveToGallery.close();$("#"+this.myModalSaveToGallery.id).remove();}
try{if(MyGalleriesCore.getModule('LoginInvokeComponent').doNotRefreshOnLogin){dle_handleLoginSuccess();return;}}catch(e){}
location.reload(true);break;case this.app.events.REGISTER_ACCOUNT_FAILED:$(".loginModalErrorMsg").css("display","block");if(note.body=="exist"){if($.browser.msie&&parseInt($.browser.version)==7)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","60px");}}
$(".loginErrorMsg").text('The email address you entered is already associated with an Art.com account.');}
else if(note.body=="invalidemail"){$(".loginErrorMsg").text('Please enter a valid email address.');}
else if(note.body=="invalidpassword"){$(".loginErrorMsg").text('Password must be at least 8 characters.');}
else if(note.body=="failure"){if($.browser.msie)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","40px");}
else
{$(".loginErrorMsg").css("top","70px");}}
$(".loginErrorMsg").text('We were unable to find an account associated with that email address.');}
break;case this.app.events.LOGIN_ACCOUNT_SUCCESS:if(note.type.modulename==this.NAME){this.myModalSaveToGallery.close();$("#"+this.myModalSaveToGallery.id).remove();var h=location.href;var pos=h.indexOf("#");if(pos>-1){h=h.substring(0,pos)}
window.location.href=h.indexOf('?')>-1?h+"&myLoginProduct=true":h+"?myLoginProduct=true";}
break;case this.app.events.LOGIN_ACCOUNT_FAILED:if(note.body=="failure"){$(".loginModalErrorMsg").css("display","block");if($.browser.msie)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","40px");}
else
{$(".loginErrorMsg").css("top","70px");}}
$(".loginErrorMsg").text('We were unable to find an account associated with that email address.');}
break;case this.app.events.GET_FRAME_SKU_FAILED:break;case this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS:if(note.type.modulename==this.NAME){if(this.myModalSaveToGallery){this.myModalSaveToGallery.close();$("#"+this.myModalSaveToGallery.id).remove();}
window.location.href=window.location.href.indexOf('?')>-1?window.location.href+"&myLoginProduct=true":window.location.href+"?myLoginProduct=true";}
break;case this.app.events.LOGIN_FACEBOOK_MYGALLERY_FAILED:break;default:}};com.art.myGalleries.modules.ExternalModule.prototype.setBtnStyle=function()
{$(".MyGalleriesRightContainer").css("visibility","hidden");$("#SavetoGalleryConfirm").css("visibility","visible");$("#SavetoGalleryConfirm").css("position","absolute");$("#SavetoGalleryConfirm").css("margin-top","10px");$("#SavetoGalleryConfirm").css("margin-left","235px;");$("#SavetoGalleryConfirm").css("margin-bottom","20px;");$("#galleryName").text('"'+this.selectedGalleryName+'"');$("#continue").css("visibility","hidden");$("#privacyChk").css("visibility","hidden");$("#privacyTxt").css("visibility","hidden");$("#doneBtn").css("visibility","visible");$("#doneBtn").css("position","absolute");$("#doneBtn").css("right","25px");$("#doneBtn").css("bottom","25px");if($.browser.msie)
{$("#doneBtn").css("width","65px");$("#doneBtn_label").css("height","32px");$("#doneBtn_rightcap").css("height","32px");}
$("#visitGallery").css("visibility","visible");$("#visitGallery").css("position","absolute");$("#visitGallery").css("right","90px");$("#visitGallery").css("bottom","25px");if($.browser.msie)
{$("#visitGallery").css("width","105px");$("#visitGallery_label").css("height","32px");$("#visitGallery_rightcap").css("height","32px");}};com.art.myGalleries.modules.ExternalModule.prototype.getTemplate=function()
{var returnValue=this.template;returnValue=returnValue.replace(/\[IMAGE_DOMAIN\]/gi,this.imagePath);returnValue=returnValue.replace(/\[$MYGALLERY\]/gi,this.imagePath);return returnValue.replace('$NAME',this.NAME);};com.art.myGalleries.modules.ExternalModule.prototype.getTarget=function()
{return this.moduleData.target;};com.art.myGalleries.modules.ExternalModule.prototype.template="";com.art.myGalleries.modules.TrayModule=function(data,app)
{this.app=app;this.moduleData=data;this.NAME=com.art.myGalleries.modules.TrayModule.NAME;this.menuContainerComponent=new com.art.myGalleries.components.MenuContainerComponent(this.app.getModel().environment.imagePath);this.COOKIE_NAME='arts';this.COOKIE_KEY='oneClick';this.menuContainerComp;this.loginLB;this.loginOption="";this.modalSignUpLB;this.modalGallery;this.selectedGalleryName='';this.framingStudioCall;this.FSData={};this.loginOption="";this.wishList;this.modalWishList;};com.art.myGalleries.modules.TrayModule.NAME="TrayModule";com.art.myGalleries.modules.TrayModule.prototype.init=function(obj)
{var _this=this;$(this.getTarget()).append(this.getTemplate());$(".MyGalleriesTrayModuleTabContainer").append(_this.menuContainerComponent.render());var cookieobject=new com.art.core.cookie.Cookie();var cookieval=cookieobject.getCookieDictionary(this.app.constants.SESSIONCOOKIENAME,this.app.getModel().oneClickCookie);if(cookieval=="1"){$('#autoSave').attr('checked',true);}
else{$('#autoSave').attr('checked',false);}
$('.MyGalleriesTrayModuleTabContainer').live('click',function(){if($('.tray_container').css('display')!='block'){$('.tray_container').slideDown('slow',function(){$('.tray_container').css('overflow','visible');});$('.TraygalleryBadge').hide();_this.showLastSelectedGalleryName();}
$('.MyGalleriesTrayModuleTabArrow').addClass('hidden');});$('.MyGalleriesTrayModuleTabContainer').live('mouseenter',function(){if($('.tray_container').css('display')!='block'){$('.galleryBadge').hide();$('.TraygalleryBadge').hide();$('.tray_container').slideDown('slow',function(){$('.tray_container').css('overflow','visible');if(_this.app.getModel().getGalleryIDCountCookie(MyGalleriesCore.getModel().getLastSelectedGalleryKey())!=0){$('.galleryBadge').show();}});$('.MyGalleriesTrayModuleTabArrow').addClass('hidden');_this.showLastSelectedGalleryName();}});$('.MyGalleriesTrayModuleTabContainer').live('mouseleave',function(){if($('.tray_container').css('display')=='block'){$('.galleryBadge').hide();$('.tray_container').slideUp('slow');setTimeout(function(){$('.MyGalleriesTrayModuleTabArrow').removeClass('hidden');$('.tray_container').stop(true,true).hide();},300);if(_this.app.getModel().getGalleryIDCountCookie(MyGalleriesCore.getModel().getLastSelectedGalleryKey())!=0){$('.TraygalleryBadge').show();}
else{$('.TraygalleryBadge').hide();}}});$('.tray_container').live('mouseleave',function(){$('.galleryBadge').hide();$('.MyGalleriesTrayModuleTabArrow').addClass('hidden');$(this).slideUp('slow',function(){if(_this.app.getModel().getGalleryIDCountCookie(MyGalleriesCore.getModel().getLastSelectedGalleryKey())!=0){$('.TraygalleryBadge').show();}});setTimeout(function(){$('.MyGalleriesTrayModuleTabArrow').removeClass('hidden');$('.tray_container').stop(true,true).hide();},300);});$('.MyGalleriesTrayModuleTabClose').live('click',function(){$('.galleryBadge').hide();$('.tray_container').slideUp('slow');setTimeout(function(){$('.tray_container').stop(true,true).hide();},300);if(_this.app.getModel().getGalleryIDCountCookie(MyGalleriesCore.getModel().getLastSelectedGalleryKey())!=0){$('.TraygalleryBadge').show();}
else{$('.TraygalleryBadge').hide();}});$('.viewGalleryButton').live('click',function(){window.location.href="http://"+window.location.hostname+_this.app.getModel().environment.profileURL+"gallery/";});$('#lastGalleryName').click(function(){var galKey=MyGalleriesCore.getModel().getLastSelectedGalleryKey();window.location.href="http://"+window.location.hostname+_this.app.getModel().environment.profileURL+"gallery/"+galKey+"/?vt=gv&mtm=0";});this.toggleGalleryBadge();if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!="")
{$('.tray_subSection').show();}
else
{$('.tray_subSection').hide();}
this.menuContainerComp=new com.art.myGalleries.components.MenuContainerComponent('menuContainerComponent');this.menuContainerComp.registerEvents();this.menuContainerComp.registerCallback(com.art.myGalleries.components.MenuContainerComponent.LOGIN_CLICK,function(){_this.loginOption=com.art.core.components.LoginModal.LOGIN;_this.app.getModel().loginSource=_this.app.constants.LOGINTRAY;_this.app.getModel().registerSource=_this.app.constants.LOGINTRAY;_this.showLoginModal();});this.menuContainerComp.registerCallback(com.art.myGalleries.components.MenuContainerComponent.REGISTER_CLICK,function(){_this.loginOption=com.art.core.components.LoginModal.REGISTER;_this.app.getModel().loginSource=_this.app.constants.LOGINTRAY;_this.app.getModel().registerSource=_this.app.constants.LOGINTRAY;_this.showLoginModal();});$('.viewGalleryButton').mouseover(function(){$('.viewGalleryButton').addClass('mg-viewGalleryButtonHover');});$('.viewGalleryButton').mouseout(function(){$('.viewGalleryButton').removeClass('mg-viewGalleryButtonHover');});};com.art.myGalleries.modules.TrayModule.prototype.showLoginModal=function(){var note=new com.art.core.utils.Note(MyGalleriesCore.events.SHOW_GLOBAL_LOGINMODAL,{loginOption:this.loginOption},{modulename:this.NAME});MyGalleriesCore.sendNotification(note);};com.art.myGalleries.modules.TrayModule.prototype.destroy=function()
{};com.art.myGalleries.modules.TrayModule.prototype.showLastSelectedGalleryName=function()
{var lastSelectedGalName="";if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!=""&&MyGalleriesCore.getModel().getLastSelectedGalleryName()!=null)
{lastSelectedGalName=MyGalleriesCore.getModel().getLastSelectedGalleryName();lastSelectedGalName=com.art.core.utils.StringUtil.autoEllipseText(lastSelectedGalName,15);$("#lastGalleryName").html(lastSelectedGalName);}};com.art.myGalleries.modules.TrayModule.prototype.getGalleryIdCount=function(galleryName)
{var myGalItemCount=MyGalleriesCore.getModel().getGalleryIDCountCookie(galleryName);return myGalItemCount;};com.art.myGalleries.modules.TrayModule.prototype.notify=function()
{this.app.sendNotification(note);};com.art.myGalleries.modules.TrayModule.prototype.listNotificationInterests=function()
{return[this.app.events.ADD_ITEM_TO_NEW_GALLERY_SUCCESS,this.app.events.ADD_ITEM_TO_NEW_GALLERY_FAILED,this.app.events.LOGIN_ACCOUNT_TRAY_SUCCESS,this.app.events.LOGIN_ACCOUNT_TRAY_FAILED,this.app.events.REGISTER_ACCOUNT_TRAY_SUCCESS,this.app.events.REGISTER_ACCOUNT_TRAY_FAILED,this.app.events.GET_FRAME_SKU_SUCCESS,this.app.events.GET_FRAME_SKU_FAILED,this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS,this.app.events.LOGIN_FACEBOOK_MYGALLERY_FAILED];};com.art.myGalleries.modules.TrayModule.prototype.handleNotification=function(note)
{switch(note.name)
{case this.app.events.ADD_ITEM_TO_NEW_GALLERY_SUCCESS:if(note.body.OperationResponse.OperationStatus!=0){if(note.body.OperationResponse.ResponseCode==503){return;}}
this.app.getModel().setCookieGalleryIDCountCookie(note.body.Library.Galleries[0].ItemKey);this.app.getModel().setLastSelectedGalleryKey(note.body.Library.Galleries[0].ItemKey);var myGalItemCount=this.getGalleryIdCount(note.body.Library.Galleries[0].ItemKey);this.setGalleryCount(myGalItemCount);this.updateCountWithAjaxSuccess();break;case this.app.events.ADD_ITEM_TO_NEW_GALLERY_FAILED:break;case this.app.events.REGISTER_ACCOUNT_TRAY_SUCCESS:_gaq.push(['t1._setCustomVar',3,'logged-in','true',1]);_gaq.push(['global._setCustomVar',3,'logged-in','true',1]);var data=this.login.getLoginAccountData();this.app.getModel().setLoginUserNameCookie(data.username);location.reload(true);break;case this.app.events.REGISTER_ACCOUNT_TRAY_FAILED:$(".loginModalErrorMsg").css("display","block");if(note.body=="exist"){if($.browser.msie&&parseInt($.browser.version)==7)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","60px");}}
$(".loginErrorMsg").text('The email address you entered is already associated with an Art.com account.');}
else if(note.body=="invalidemail"){$(".loginErrorMsg").text('Please enter a valid email address.');}
else if(note.body=="invalidpassword"){$(".loginErrorMsg").text('Password must be at least 8 characters.');}
else if(note.body=="failure"){if($.browser.msie)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","40px");}
else
{$(".loginErrorMsg").css("top","70px");}}
$(".loginErrorMsg").text('We were unable to find an account associated with that email address.');}
break;case this.app.events.LOGIN_ACCOUNT_TRAY_SUCCESS:if(note.type.modulename==this.NAME){_gaq.push(['t1._setCustomVar',3,'logged-in','true',1]);_gaq.push(['global._setCustomVar',3,'logged-in','true',1]);var h=location.href;h=h.substring(0,h.indexOf("#"));updateHeaderSignIn('LOGIN_SUCCESS',data)
window.location.href=window.location.href.indexOf('?')>-1?window.location.href+"&myLoginProduct=true":h+"?myLoginProduct=true";}
break;case this.app.events.LOGIN_ACCOUNT_TRAY_FAILED:if(note.body=="failure"){$(".loginModalErrorMsg").css("display","block");if($.browser.msie)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","40px");}
else
{$(".loginErrorMsg").css("top","70px");}}
$(".loginErrorMsg").text('We were unable to find an account associated with that email address.');}
break;case this.app.events.GET_FRAME_SKU_FAILED:break;case this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS:if(note.type.modulename==this.NAME){_gaq.push(['t1._setCustomVar',3,'logged-in','true',1]);_gaq.push(['global._setCustomVar',3,'logged-in','true',1]);this.loginModalClose();updateHeaderSignIn('LOGIN_FACEBOOK_SUCCESS',data)
window.location.href=window.location.href.indexOf('?')>-1?window.location.href+"&myLoginProduct=true":window.location.href+"?myLoginProduct=true";}
break;case this.app.events.LOGIN_FACEBOOK_MYGALLERY_FAILED:break;default:}};com.art.myGalleries.modules.TrayModule.prototype.toggleGalleryBadge=function()
{var myGalItemCount=this.getGalleryIdCount(MyGalleriesCore.getModel().getLastSelectedGalleryKey());if(myGalItemCount==0){if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!=""||MyGalleriesCore.getModel().getLastSelectedGalleryName()!=null)
this.showSubTrayHtml();else
this.hideSubTrayHtml();}
else{this.setGalleryCount(myGalItemCount);this.showSubTrayHtml();}};com.art.myGalleries.modules.TrayModule.prototype.setGalleryCount=function(itemCount)
{$('.galleryBadge').text(itemCount);$('.TraygalleryBadge').text(itemCount);if(itemCount==1)
$('.labelTrayCount').text("("+itemCount+") item successfully added to:");else
$('.labelTrayCount').text("("+itemCount+") items successfully added to:");};com.art.myGalleries.modules.TrayModule.prototype.updateCountWithAjaxSuccess=function()
{var myGalItemCount=this.getGalleryIdCount(MyGalleriesCore.getModel().getLastSelectedGalleryKey());this.setGalleryCount(myGalItemCount);this.showSubTrayHtml();this.showContainerHtml();};com.art.myGalleries.modules.TrayModule.prototype.showSubTrayHtml=function()
{var myGalItemCount=this.getGalleryIdCount(MyGalleriesCore.getModel().getLastSelectedGalleryKey());if(myGalItemCount!=0)
{$('.galleryBadge').show();$('.TraygalleryBadge').show();}
else{$('.galleryBadge').hide();$('.TraygalleryBadge').hide();}
if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!=""&&myGalItemCount!=0)
{$('.tray_subSection').show();}
else
{$('.tray_subSection').hide();}};com.art.myGalleries.modules.TrayModule.prototype.showContainerHtml=function()
{var myGalItemCount=this.getGalleryIdCount(MyGalleriesCore.getModel().getLastSelectedGalleryKey());this.showLastSelectedGalleryName();if($('.tray_container').css('display')!='block'){$('.galleryBadge').hide();$('.TraygalleryBadge').hide();$('.tray_container').slideDown('slow',function(){$('.tray_container').css('overflow','visible');if(myGalItemCount!=0){$('.galleryBadge').show();}});this.showLastSelectedGalleryName();}
setTimeout(function(){$('.galleryBadge').hide();$('.TraygalleryBadge').hide();$('.tray_container').slideUp('slow',function(){if(myGalItemCount!=0){$('.TraygalleryBadge').show();}});setTimeout(function(){$('.tray_container').stop(true,true).hide();},300);},5500);};com.art.myGalleries.modules.TrayModule.prototype.hideSubTrayHtml=function()
{$('.galleryBadge').hide();$('.TraygalleryBadge').hide();$('.tray_subSection').hide();};com.art.myGalleries.modules.TrayModule.prototype.getTemplate=function()
{return this.template.replace('$NAME',this.NAME);};com.art.myGalleries.modules.TrayModule.prototype.getTarget=function()
{return this.moduleData.target;};com.art.myGalleries.modules.TrayModule.prototype.loginModalClose=function()
{var _this=this;trace("login closed");$("#myModalLogin").die();$("#myModalLogin").unbind("click");$("#myModalLogin").remove();if(this.loginLink){this.loginLink.doClose();}
if(this.modalSignUpLB){this.modalSignUpLB.close();}
$("#mygallerylogin").unbind("click");$("#mygallerylogin").die('click');$("#mygallerylogin").remove();$("#mygalleryregister").unbind("click");$("#mygalleryregister").die('click');$("#mygalleryregister").remove();$("#"+this.id).die();$("#"+this.id).unbind("click");$("#"+this.id).remove();};com.art.myGalleries.modules.TrayModule.prototype.template="<div id='$NAME' class='MyGalleriesTrayModuleContainer'>"
+"<div class='MyGalleriesTrayModuleBorderTopContainer'></div>"
+"<div class='MyGalleriesTrayModuleTabContainer floatRight cPointer'>"
+"<div class='line-separator-tray floatLeft'></div>"
+"<div class='TraygalleryBadge gCustomFont'></div>"
//+"<div class='MyGalleriesTrayModuleTabLogo gCustomFont uCase'>MY GALLERIES</div>"
+"<div class='line-separator-tray floatRight'></div>"
+"<div class='MyGalleriesTrayModuleTabArrow cPointer floatRight'></div>"
+"</div>"
+"</div>";com.art.myGalleries.commands.ApplicationCommand=function(data,app){this.NAME=com.art.myGalleries.commands.ApplicationCommand.NAME;this.app=app;this.serviceProvider=new com.art.core.services.ServiceProvider(this.app.getEnvironment());this.model=this.app.getModel();this.processing=false;this.pageNumber=1;this.currentNote;this.username;this.password;this.tempNewCreatedGalleryId;this.tempLastSelectedGalleryId;this.printFileName;this.fromExternalModule=false;this.fromGridModule=false;this.referredModule="";this.requestfromforb=false;};com.art.myGalleries.commands.ApplicationCommand.NAME="ApplicationCommand";com.art.myGalleries.commands.ApplicationCommand.prototype.init=function(){};com.art.myGalleries.commands.ApplicationCommand.prototype.listNotificationInterests=function(){return[this.app.events.STARTUP,this.app.events.GALLERY_ITEM_LIST_REQUEST,this.app.events.GALLERY_ITEM_LIST_REQUEST_SUCCESS,this.app.events.GALLERY_ITEM_LIST_REQUEST_FAILED,this.app.events.GET_ALL_GALLERY_ITEMS,this.app.events.UPDATE_GALLERY_TITLE_DESC,this.app.events.GALLERY_ITEM_SORT,this.app.events.ADD_ITEM_TO_EXISTING_GALLERY,this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_DP,this.app.events.ADD_GALLERY_TITLE_DESC,this.app.events.GALLERY_ITEM_SORT,this.app.events.GET_SYSTEM_LIBRARY,this.app.events.GET_ALL_GALLERY_ITEMS,this.app.events.UPDATE_GALLERY_TITLE_DESC,this.app.events.GALLERY_ITEM_SORT,this.app.events.ADD_GALLERY_TITLE_DESC,this.app.events.MOVE_ADD_ITEM_TO_NEW_GALLERY,this.app.events.MOVE_ADD_ITEM_TO_EXISTING_GALLERY,this.app.events.GET_ALL_GALLERIES,this.app.events.GET_ALL_GALLERIES_USER,this.app.events.ADD_ITEM_TO_NEW_GALLERY,this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP,this.app.events.REGISTER_ACCOUNT,this.app.events.LOGIN_ACCOUNT,this.app.events.LOGOUT_MYGALLERY,this.app.events.CREATE_WALL,this.app.events.UPDATE_WALL_ITEMS,this.app.events.GET_WALLS,this.app.events.ADD_SIMILAR_ARTIST_ITEM,this.app.events.ADD_BARE_WALLS,this.app.events.SHARE_WALL,this.app.events.GET_USER_LIBRARY,this.app.events.DELETE_GALLERY,this.app.events.DELETE_GALLERY_ITEM,this.app.events.UPDATE_BARE_WALL,this.app.events.DELETE_GALLERY_ITEM_DP,this.app.events.UPDATE_PRIVACY_SETTINGS,this.app.events.GET_FRAME_SKU,this.app.events.GET_WALL_BY_ID,this.app.events.GET_WALL_BY_PROFILE_KEY,this.app.events.GET_USER_LIBRARY_BY_PROFILE,this.app.events.LOGIN_FACEBOOK_MYGALLERY,this.app.events.GET_FRAME_ID,this.app.events.FACEBOOK_MERGE_ACCOUNTS,this.app.events.ADD_GALLERY_TO_BOOKMARK,this.app.events.REMOVE_GALLERY_FROM_BOOKMARK,this.app.events.ADD_ROOM_TO_BOOKMARK,this.app.events.REMOVE_ROOM_FROM_BOOKMARK,this.app.events.ADD_FOLLOW_PROFILE,this.app.events.REMOVE_FOLLOW_PROFILE,this.app.events.ADD_ITEM_TO_DEFAULT_GALLERY,this.app.events.SAVE_ROOM,this.app.events.SAVE_EXISTING_ROOM,this.app.events.SAVE_ROOM_AS,this.app.events.GET_PRODUCT_INFO,this.app.events.REMOVE_WALL,this.app.events.SHARE_GALLERY_ITEM];};com.art.myGalleries.commands.ApplicationCommand.prototype.handleNotification=function(note){var _this=this;switch(note.name){case this.app.events.STARTUP:break;case this.app.events.GET_ALL_GALLERIES:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+this.app.getModel().getGallerySortObjectAsString()+"&"+this.app.getModel().getGalleryPagingOptionObjectAsString();this.serviceProvider.galleryAPIService.getUserGalleries({command:this,app:this.app,successHandler:this.getUserGalleriesSuccess,errorHandler:this.getUserGalleriesError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_ALL_GALLERIES_USER:this.fromGridModule=note.body.fromGridModule?true:false;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+this.app.getModel().getGallerySortObjectAsString()+"&"+this.app.getModel().getGalleryPagingOptionObjectAsString();this.serviceProvider.galleryAPIService.getUserGalleries({command:this,app:this.app,successHandler:this.getUserGalleriesSuccessForWebUser,errorHandler:this.getUserGalleriesErrorForWebUser,beforeSendHandler:function(){}},data);break;case this.app.events.GALLERY_ITEM_SORT:this.app.getModel().setPagingOptionsAllItems(false);var sort="gallerySortOption="+JSON.stringify({"DefaultSort":true,"SortBy":note.body.sortBy,"SortDirection":note.body.sortOrder});this.app.getModel().gallerySortBy=note.body.sortBy;this.app.getModel().gallerySortDirection=note.body.sortOrder;var ResultFilterOptions;ResultFilterOptions="ResultFilterOptions="+JSON.stringify({"IncludeGalleryItems":true,"IncludeSavedRooms":false,"IncludeSavedWalls":false,"IncludeSavedWallsItems":false});var data=this.app.getModel().getAccessKeyObjectAsString()+"&";data+=this.app.getModel().getUserProfileObjectAsString()+"&";data+="persona="+this.app.getModel().environmentSub.profileKey+"&";data+="galleryKey="+this.app.getModel().environmentSub.galleryKey+"&";data+="galleryAuthToken="+this.app.getModel().environment.galleryAuthToken+"&";data+=sort+"&"+this.app.getModel().getGalleryPagingOptionObjectAsString()+"&";data+=ResultFilterOptions;this.serviceProvider.galleryAPIService.getGalleryDetailswithResultFilter({command:this,app:this.app,successHandler:this.galleryItemSortSuccess,errorHandler:this.galleryItemSortError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_SYSTEM_LIBRARY:if(this.app.getUserLibraryProxy().systemLibraryObject!=undefined)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_SYSTEM_LIBRARY_SUCCESS,{},'ajax'));}
else
{var sort="gallerySortOption="+JSON.stringify({"DefaultSort":true,"SortBy":this.app.getModel().gallerySortBy,"SortDirection":this.app.getModel().gallerySortDirection});var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&"+sort+"&"+this.app.getModel().getGalleryPagingOptionObjectAsString();this.serviceProvider.galleryAPIService.getSystemLibrary({command:this,app:this.app,successHandler:this.getSystemLibrarySuccess,errorHandler:this.getSystemLibraryError,beforeSendHandler:function(){}},data);}
break;case this.app.events.GET_ALL_GALLERY_ITEMS:this.currentNote=note;if(this.app.getModel().galleryItemList.length>0){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERY_ITEMS_SUCCESS,this.currentNote.body));}
else{this.app.getModel().setPagingOptionsAllItems(true);var sort="gallerySortOption="+JSON.stringify({"DefaultSort":true,"SortBy":this.app.getModel().gallerySortBy,"SortDirection":this.app.getModel().gallerySortDirection});var ResultFilterOptions="ResultFilterOptions="+JSON.stringify({"IncludeGalleryItems":true,"IncludeUserSavedWalls":false,"IncludeAutoSavedWalls":true,"IncludeWallItems":true});var data=this.app.getModel().getAccessKeyObjectAsString()+"&";data+=this.app.getModel().getUserProfileObjectAsString()+"&";data+="persona="+this.app.getModel().environmentSub.profileKey+"&";data+="galleryKey="+this.app.getModel().environmentSub.galleryKey+"&";data+="galleryAuthToken="+this.app.getModel().environment.galleryAuthToken+"&";data+=sort+"&"+this.app.getModel().getGalleryPagingOptionObjectAsString()+"&";data+=ResultFilterOptions;this.serviceProvider.galleryAPIService.getGalleryDetailswithResultFilter({command:this,app:this.app,successHandler:this.getGalleryWithItemsSuccess,errorHandler:this.getGalleryWithItemsError,beforeSendHandler:function(){}},data);}
break;case this.app.events.UPDATE_GALLERY_TITLE_DESC:var gallery=this.app.getModel().getSelectedGalleryClone();if(this.app.getModel().isRoomView){var sourceGallery=this.app.getRoomViewProxy().currentWall.gallery;gallery={};gallery.GalleryId=sourceGallery.GalleryId;gallery.ItemKey=sourceGallery.ItemKey;}
if(this.app.getModel().galleyNameIsAvailable(note.body.title,gallery.GalleryId)){this.currentNote=note;var name=encodeURIComponent(note.body.title);gallery.Name=escape(name);gallery.LongDescription=encodeURIComponent(escape(note.body.desc));gallery.GalleryIconURL="";gallery.IconUrl="";gallery.Icon=null;if(gallery.GalleryImage!=null&&gallery.GalleryImage.LargeImage!=null&&gallery.GalleryImage.LargeImage.HttpImageURL!=null){if(note.body.bannerUrl.length>0)
gallery.GalleryImage.LargeImage.HttpImageURL=encodeURIComponent(escape(note.body.bannerUrl));}
var galleryText=JSON.stringify(gallery);galleryText=galleryText.replace(/#/g,'');var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"gallery="+galleryText;this.serviceProvider.galleryAPIService.updateGallery({command:this,app:this.app,successHandler:this.updateGallerySuccess,errorHandler:this.updateGalleryError,beforeSendHandler:function(){}},data);}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_GALLERY_TITLE_DESC_FAILED,{msg:"duplicate"}));}
break;case this.app.events.ADD_ITEM_TO_EXISTING_GALLERY:var galleryItems=[{}];if(this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=null||this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=undefined)
{galleryItems[0]=this.app.getModel().getNewItemToGalleryFromFramingStudio();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGalleryFromFramingStudio().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);}
else
{galleryItems[0]=this.app.getModel().getNewItemToGallery();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGallery().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);if(this.app.getModel().selectedImageObject.FrameSku!=undefined&&this.app.getModel().selectedImageObject.FrameSku!=null&&this.app.getModel().selectedImageObject.FrameSku.length>0)
{}}
var galleryId='';if(this.app.getModel().environmentSub.selectedGalleryID!=undefined)
galleryId=this.app.getModel().environmentSub.selectedGalleryID;else
galleryId=this.app.getModel().environment.selectedGalleryID;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryItems="+JSON.stringify(galleryItems)+"&"+"galleryID="+galleryId+"&"+"allowDuplicate=true";this.serviceProvider.galleryAPIService.addItemsToGallery({command:this,app:this.app,successHandler:this.addItemsToGallerySuccess,errorHandler:this.addItemsToGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_ITEM_TO_DEFAULT_GALLERY:var galleryItems=[{}];galleryItems[0]=this.app.getModel().getNewItemToGallery();var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryItems="+JSON.stringify(galleryItems)+"&"+"GalleryDefaultType=3";this.serviceProvider.galleryAPIService.addItemsToDefaultGallery({command:this,app:this.app,successHandler:this.addItemsToDefaultGallerySuccess,errorHandler:this.addItemsToDefaultGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_DP:var galleryItems=[{}];if(this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=null||this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=undefined)
{galleryItems[0]=this.app.getModel().getNewItemToGalleryFromFramingStudio();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGalleryFromFramingStudio().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);}
else
{galleryItems[0]=this.app.getModel().getNewItemToGallery();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGallery().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);if(this.app.getModel().selectedImageObject.FrameSku!=undefined&&this.app.getModel().selectedImageObject.FrameSku!=null&&this.app.getModel().selectedImageObject.FrameSku.length>0)
{}}
var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryItems="+JSON.stringify(galleryItems)+"&"+"galleryID="+this.app.getModel().environmentSub.selectedGalleryID+"&"+"allowDuplicate=true";this.serviceProvider.galleryAPIService.addItemsToGallery({command:this,app:this.app,successHandler:this.detailPageAddItemsToGallerySuccess,errorHandler:this.detailPageAddItemsToGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_GALLERY_TITLE_DESC:var gallery=this.app.getModel().setCreateGallery();var parentGalleryId=1;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"parentGalleryId="+parentGalleryId+"&"+"gallery="+JSON.stringify(gallery);this.serviceProvider.galleryAPIService.createGallery({command:this,app:this.app,successHandler:this.addGallerySuccess,errorHandler:this.addGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.MOVE_ADD_ITEM_TO_NEW_GALLERY:var gallery=this.app.getModel().setCreateGallery();var parentGalleryId=1;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"parentGalleryId="+parentGalleryId+"&"+"gallery="+JSON.stringify(gallery);this.serviceProvider.galleryAPIService.createGallery({command:this,app:this.app,successHandler:this.moveAddNewItemsToGallerySuccess,errorHandler:this.moveAddNewItemsToGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.MOVE_ADD_ITEM_TO_EXISTING_GALLERY:var galleryItems=[{}];galleryItems[0]=this.app.getModel().getExisitngItemToGallery(true);var destinationGalleries=[{}];var gallery=this.app.getModel().galleryTemplate;gallery.GalleryId=this.app.getModel().getDestinationSelectedGalleryId();destinationGalleries[0]=gallery;galleryItems[0].ItemURL="";galleryItems[0].Item.Title=escape(galleryItems[0].Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"sourceGalleryID="+this.app.getModel().environmentSub.selectedGalleryID+"&"+"galleryItem="+JSON.stringify(galleryItems)+"&"+"destinationGalleries="+JSON.stringify(destinationGalleries)+"&"+this.app.getModel().getMoveOptions();this.serviceProvider.galleryAPIService.moveGalleryItem({command:this,app:this.app,successHandler:this.moveExistingItemsToGallerySuccess,errorHandler:this.moveExistingItemsToGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_ITEM_TO_NEW_GALLERY:var gallery=this.app.getModel().setCreateGallery();var parentGalleryId=1;this.printFileName=note.body;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"parentGalleryId="+parentGalleryId+"&"+"gallery="+JSON.stringify(gallery);this.serviceProvider.galleryAPIService.createGallery({command:this,app:this.app,successHandler:this.addNewItemsToGallerySuccess,errorHandler:this.addNewItemsToGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP:var gallery=this.app.getModel().setCreateGallery();var parentGalleryId=1;this.printFileName=note.body;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"parentGalleryId="+parentGalleryId+"&"+"gallery="+JSON.stringify(gallery);this.serviceProvider.galleryAPIService.createGallery({command:this,app:this.app,successHandler:this.detailpageaddNewItemsToGallerySuccess,errorHandler:this.detailpageaddNewItemsToGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.REGISTER_ACCOUNT:this.username=note.body.username;this.password=note.body.password;this.registerAccountSuccess(note.body.coreresponse);break;case this.app.events.LOGIN_ACCOUNT:this.fromExternalModule=note.type.fromExternalModule?true:false;this.referredModule=note.type.modulename;this.requestfromforb=note.type.logintfob;this.username=note.body.username;this.password=note.body.password;var data="account=LoginAccount&usr="+this.username+"&"+"pwd="+this.password;this.loginAccountSuccess(note.body.coreresponse);break;case this.app.events.LOGOUT_MYGALLERY:var cookieobject=new com.art.core.cookie.Cookie();var sesssionID=cookieobject.getCookieBase('sessionid');var data="myaccount=LogoutMyGallery&sessionID="+sesssionID;this.serviceProvider.galleryAPIService.callMyAccountProxy({command:this,app:this.app,successHandler:this.logoutAccountSuccess,errorHandler:this.logoutAccountError,beforeSendHandler:function(){}},data);break;case this.app.events.CREATE_WALL:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&wall="+this.app.getUserLibraryProxy().getWallObjectAsStringForCreateWall();this.serviceProvider.galleryAPIService.createWall({command:this,app:this.app,successHandler:this.createWallSuccess,errorHandler:this.createWallError,beforeSendHandler:function(){}},data);break;case this.app.events.UPDATE_WALL:var items=note.body;var wid=this.app.getUserLibraryProxy().getSelectedWallId();var wallStr=this.app.getUserLibraryProxy().getWallObjectAsStringForUpdateWall(note.body,wid);var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&WallID="+wid+"&Wall="+wallStr;this.serviceProvider.galleryAPIService.updateWall({command:this,app:this.app,successHandler:this.updateWallItemsSuccess,errorHandler:this.updateWallItemsError,beforeSendHandler:function(){}},data);break;case this.app.events.UPDATE_WALL_ITEMS:var items=note.body;var wid=this.app.getUserLibraryProxy().getSelectedWallId();var wallStr=this.app.getUserLibraryProxy().getWallObjectAsStringForUpdateWall(note.body,wid);var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()
data+="&WallID="+wid+"&Wall="+wallStr;this.serviceProvider.galleryAPIService.updateWallItems({command:this,app:this.app,successHandler:this.updateWallItemsSuccess,errorHandler:this.updateWallItemsError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_SIMILAR_ARTIST_ITEM:var data={};data.Apnum=this.app.getModel().cacheByGalleryItemList[this.app.getModel().environment.selectedGalleryItemId].APNum;data.ImageFilePath=this.app.getModel().cacheByGalleryItemList[this.app.getModel().environment.selectedGalleryItemId].ItemDetails.ImageInformation.LargeImage.HttpImageURL;this.serviceProvider.searchAPIService.getSimilarImagesForImage({command:this,app:this.app,successHandler:this.searchSimilarArtistSuccess,errorHandler:this.searchSimilarArtistError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_WALLS:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString();data+='&libraryResultFilter={"IncludeAutoSavedWalls":"true","IncludeBareWalls":"true"}';this.serviceProvider=new com.art.core.services.ServiceProvider(this.app.getEnvironment());this.serviceProvider.galleryAPIService.getUserLibrary({command:this,app:this.app,successHandler:this.getWallsSuccess,errorHandler:this.y,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_BARE_WALLS:var data=this.app.getModel().getAccessKeyObjectAsString()+"&";data+=this.app.getModel().getUserProfileObjectAsString()+"&";data+="galleryID="+this.app.getModel().environmentSub.selectedGalleryID+"&";data+="Wall="+JSON.stringify([note.body]);this.serviceProvider.galleryAPIService.addBareWalls({command:this,app:this.app,successHandler:this.addBareWallSuccess,errorHandler:this.addBareWallError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_USER_LIBRARY:if(this.app.getModel().userLibraryObject==undefined)
{var sort="gallerySortOption="+JSON.stringify({"DefaultSort":false,"SortBy":"0","SortDirection":1});var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&"+sort+"&"+this.app.getModel().getGalleryPagingOptionObjectAsString();this.serviceProvider.galleryAPIService.getUserLibrary({command:this,app:this.app,successHandler:this.getUserLibrarySuccess,errorHandler:this.getUserLibraryError,beforeSendHandler:function(){}},data);}
else
{return this.app.getModel().userLibraryObject;}
break;case this.app.events.SHARE_WALL:var rvp=MyGalleriesCore.getRoomViewProxy();rvp.shareWall(function(response){_this.shareWallSuccess(response);});break;case this.app.events.DELETE_GALLERY:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"gallery="+JSON.stringify(note.body);this.serviceProvider.galleryAPIService.deleteGallery({command:this,app:this.app,successHandler:this.deleteGallerySuccess,errorHandler:this.deleteGalleryError,beforeSendHandler:function(){}},data);break;case this.app.events.REMOVE_WALL:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"wall="+JSON.stringify(note.body);this.serviceProvider.galleryAPIService.removeWall({command:this,app:this.app,successHandler:this.deleteRoomSuccess,errorHandler:this.deleteRoomError,beforeSendHandler:function(){}},data);break;case this.app.events.DELETE_GALLERY_ITEM:var deleteItem=[{}];deleteItem[0].ItemGalleryItemID=note.body.ItemId;deleteItem[0].APNum=note.body.APNum;deleteItem[0].PODConfigID=note.body.PodConfigId;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&itemstoRemove="+JSON.stringify(deleteItem)+"&removeOptions=1";this.serviceProvider.galleryAPIService.deleteGalleryItem({command:this,app:this.app,successHandler:this.deleteGalleryItemSuccess,errorHandler:this.deleteGalleryItemError,beforeSendHandler:function(){}},data);break;case this.app.events.DELETE_GALLERY_ITEM_DP:var deleteItem=[{}];deleteItem[0].ItemGalleryItemID=note.body;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&itemstoRemove="+JSON.stringify(deleteItem)+"&removeOptions=1";this.serviceProvider.galleryAPIService.deleteGalleryItem({command:this,app:this.app,successHandler:this.detailPageDeleteGalleryItemSuccess,errorHandler:this.detailPageDeleteGalleryItemError,beforeSendHandler:function(){}},data);break;case this.app.events.UPDATE_BARE_WALL:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&";data+="galleryId="+this.app.getModel().environmentSub.selectedGalleryID+"&";data+="Wall="+JSON.stringify(this.app.getUserLibraryProxy().getSelectedPersonalBareWallWithUpdates(note.body));this.serviceProvider.galleryAPIService.updateBareWall({command:this,app:this.app,successHandler:this.updateBareWallSuccess,errorHandler:this.updateBareWallError,beforeSendHandler:function(){}},data);break;case this.app.events.UPDATE_PRIVACY_SETTINGS:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"gallery="+JSON.stringify(note.body);this.serviceProvider.galleryAPIService.updateGallery({command:this,app:this.app,successHandler:this.privacyUpdateGalleryItemSuccess,errorHandler:this.privacyUpdateGalleryItemError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_FRAME_SKU:var data="dfeEngineParameters="+JSON.stringify(note.body);this.serviceProvider.dfeAPIService.GetFrameSkuForFrameConfiguration({command:this,app:this.app,successHandler:this.getFrameSKUSuccess,errorHandler:this.getFrameSKUError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_WALL_BY_ID:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&";data+="wallId="+this.app.getUserLibraryProxy().sharedWallId+"&";data+="profileKey="+this.app.getModel().environmentSub.profileKey+"&";data+="galleryKey="+this.app.getModel().environmentSub.galleryKey+"&";data+="galleryAccessKey="+this.app.getModel().environment.galleryAuthToken;this.serviceProvider.galleryAPIService.getWallByWallId({command:this,app:this.app,successHandler:this.getWallByIdSuccess,errorHandler:this.getWallByIdError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_WALL_BY_PROFILE_KEY:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&";data+="profileKey="+this.app.getModel().environmentSub.profileKey+"&";data+="roomKey="+this.app.getModel().savedRoomKey+"&";this.serviceProvider.galleryAPIService.getWallByProfileKey({command:this,app:this.app,successHandler:this.getWallByProfileKeySuccess,errorHandler:this.getWallByProfileKeyError,beforeSendHandler:function(){}},data);break;case this.app.events.GET_USER_LIBRARY_BY_PROFILE:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&";data+=this.app.getModel().getGalleryPagingOptionObjectAsString+"&";data+="gallerySortOption="+JSON.stringify({"DefaultSort":false,"SortBy":"0","SortDirection":1})+"&";data+="profileKey="+this.app.getModel().environmentSub.profileKey+"&";this.serviceProvider.galleryAPIService.getUserLibraryByProfileKey({command:this,app:this.app,successHandler:this.getUserLibraryByProfileKeySuccess,errorHandler:this.getUserLibraryByProfileKeyError,beforeSendHandler:function(){}},data);break;case this.app.events.FACEBOOK_MERGE_ACCOUNTS:var fromAuthToken=this.app.getModel().environment.authToken;var toAuthToken=note.body.authToken;this.referredModule=note.type.modulename;this.requestfromforb=note.type.logintfob;this.accountMerge(fromAuthToken,toAuthToken,true);break;case this.app.events.GET_FRAME_ID:var data=this.app.getModel();var DFEunitOfMeasure=(com.art.core.utils.LocalizationManager.determineConvertToCm("",data.environment.currencyCode,""))?this.app.constants.DFEUNITOFMEASURECM:this.app.constants.DFEUNITOFMEASUREINCH;var props="ui="+data.environment.sessionId+"&frameSKU="+note.body.frameConfigurationId+"&imageMaxW="+this.app.constants.DFEIMAGEMAXW+"&imageMaxH="+this.app.constants.DFEIMAGEMAXH;props+="&unitofmeasure="+DFEunitOfMeasure+"&customerZoneId="+data.environment.customerZoneId+"&languageId="+data.environment.languageId+"&currencyId="+data.environment.currencyId+"&currencyCode="+data.environment.currencyCode;props+="&IsDFEAjax=Y";this.serviceProvider.framingServiceAPI.getFrameIdForDFE({command:this,app:this.app,successHandler:this.getFrameIdForDFESuccess,errorHandler:this.getFrameIdForDFEError,beforeSendHandler:function(){}},props);break;case this.app.events.ADD_DATA_GRAPH:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getGraphInfoObjectAsString();this.serviceProvider.graphServiceAPI.UpdateUserRelationship({command:this,app:this.app,successHandler:this.addItemsToGraphSuccess,errorHandler:this.addItemsToGraphError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_GALLERY_TO_BOOKMARK:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getBookmarkObjectAsString();data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_BOOKMARK);data=data.replace("placeholder3",note.body);this.serviceProvider.graphServiceAPI.UpdateUserRelationshipForFollowsAndBookmark({command:this,app:this.app,successHandler:this.addGalleryToBookmarkSuccess,errorHandler:this.addGalleryToBookmarkError,beforeSendHandler:function(){}},data);break;case this.app.events.REMOVE_GALLERY_FROM_BOOKMARK:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getBookmarkObjectAsString();data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_REMOVE);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_BOOKMARK);data=data.replace("placeholder3",note.body);this.serviceProvider.graphServiceAPI.UpdateUserRelationshipForFollowsAndBookmark({command:this,app:this.app,successHandler:this.removeGalleryFromBookmarkSuccess,errorHandler:this.removeGalleryFromBookmarkError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_ROOM_TO_BOOKMARK:trace("ADD_ROOM_TO_BOOKMARK");var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getBookmarkObjectAsString();data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_BOOKMARK);data=data.replace("GalleryId","WallId");data=data.replace("placeholder3",note.body);this.serviceProvider.graphServiceAPI.UpdateUserRelationshipForFollowsAndBookmark({command:this,app:this.app,successHandler:this.addRoomToBookmarkSuccess,errorHandler:this.addRoomToBookmarkError,beforeSendHandler:function(){}},data);break;case this.app.events.REMOVE_ROOM_FROM_BOOKMARK:trace("REMOVE_ROOM_TO_BOOKMARK");var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getBookmarkObjectAsString();data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_REMOVE);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_BOOKMARK);data=data.replace("GalleryId","WallId");data=data.replace("placeholder3",note.body);this.serviceProvider.graphServiceAPI.UpdateUserRelationshipForFollowsAndBookmark({command:this,app:this.app,successHandler:this.removeRoomFromBookmarkSuccess,errorHandler:this.removeRoomFromBookmarkError,beforeSendHandler:function(){}},data);break;case this.app.events.ADD_FOLLOW_PROFILE:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getFollowsObjectAsString();data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_ADD);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_FOLLOWS);data=data.replace("placeholder3",note.body);this.serviceProvider.graphServiceAPI.UpdateUserRelationshipForFollowsAndBookmark({command:this,app:this.app,successHandler:this.addFollowProfileSuccess,errorHandler:this.addFollowProfileError,beforeSendHandler:function(){}},data);break;case this.app.events.REMOVE_FOLLOW_PROFILE:var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getFollowsObjectAsString();data=data.replace("placeholder1",com.art.core.services.GraphAPIService.RelationshipChangeAction_REMOVE);data=data.replace("placeholder2",com.art.core.services.GraphAPIService.UserRelationshipType_FOLLOWS);data=data.replace("placeholder3",note.body);this.serviceProvider.graphServiceAPI.UpdateUserRelationshipForFollowsAndBookmark({command:this,app:this.app,successHandler:this.removeFollowProfileSuccess,errorHandler:this.removeFollowProfileError,beforeSendHandler:function(){}},data);break;case this.app.events.SAVE_ROOM:var rvp=MyGalleriesCore.getRoomViewProxy();rvp.saveRoom(this.saveRoomSuccess);break;case this.app.events.SAVE_ROOM_AS:var afterSuccess='edit';if(note&&note.body&&note.body.afterSuccess)afterSuccess=note.body.afterSuccess;var rvp=MyGalleriesCore.getRoomViewProxy();rvp.saveRoom(function(response){if(response.OperationResponse.ResponseMessage!='Success'){MyGalleriesCore.sendNotification(new com.art.core.utils.Note(MyGalleriesCore.events.SAVE_ROOM_ERROR,{message:response.OperationResponse.ResponseMessage}));}else{var newWallId=response.Library.Galleries[0].Walls[0].WallId;rvp.currentWall.id=newWallId;rvp.currentWall.name=response.Library.Galleries[0].Walls[0].Name;rvp.updateWall(rvp.currentWall,function(){rvp.updateWallItems(rvp.currentWall,function(response){_this.saveExistingRoomSuccess(response,afterSuccess);});});};});break;case this.app.events.SAVE_EXISTING_ROOM:var rvp=this.app.getRoomViewProxy();rvp.updateWall(rvp.currentWall,function(){rvp.updateWallItems(rvp.currentWall,_this.saveExistingRoomSuccess);});break;case this.app.events.GET_PRODUCT_INFO:var url="itemId="+note.body;url+="&imageId=";url+="&lookupType=ItemNumber";url+="&targetDomain=ArtCom";url+="&CurrencyCode=USD";url+="&languageCode=EN";url+="&includePODServiceOptions=true";url+="&includeRelatedCategories=true";url+="&includeRelatedItems=true";url+="&includeProductContent=true";url+="&includeRatingAndReview=true";this.serviceProvider.productServiceAPI.GetProductInformation(url,this);break;case this.app.events.SHARE_GALLERY_ITEM:var GalleryID=this.app.getModel().environmentSub.selectedGalleryID;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"GalleryID="+GalleryID+"&"+"createSnapshot=false";this.serviceProvider.galleryAPIService.shareGalleryItem({command:this,app:this.app,successHandler:this.shareGalleryItemSuccess,errorHandler:this.shareGalleryItemError,beforeSendHandler:function(){}},data);break;default:throw new Error("ApplicationCommand failure! Invalid event: "+note.name);}};com.art.myGalleries.commands.ApplicationCommand.prototype.getFrameSKUSuccess=function(response){var data=[{}];data.ImageUrl=response.d.FrameConfigurations[0].FrameImageUrl;data.FrameSku=response.d.FrameConfigurations[0].FrameSku;data.Height=response.d.FrameConfigurations[0].ImageHeight;data.Width=response.d.FrameConfigurations[0].ImageWidth;data.Price=response.d.FrameConfigurations[0].PriceConfig.Price;data.DisplayPrice=response.d.FrameConfigurations[0].PriceConfig.DisplayPrice;data.Title=response.d.FrameConfigurations[0].Print.Title;data.APNum=response.d.FrameConfigurations[0].Print.APNum;data.ArtistID=response.d.FrameConfigurations[0].Print.ArtistCategoryID;data.Imageid=response.d.FrameConfigurations[0].Print.ImageID;data.ItemDisplayedTypeID=response.d.FrameConfigurations[0].Print.ItemDisplayedTypeID;data.PODConfigID=response.d.FrameConfigurations[0].Print.PODConfigID;data.ArtistName=response.d.FrameConfigurations[0].Print.ArtistLastName+" "+response.d.FrameConfigurations[0].Print.ArtistFirstName;var imageurl=response.d.FrameConfigurations[0].Print.FileName;imageurl="http://"+this.app.getModel().environment.ImageDynPath+"/lrg"+imageurl;imageurl=imageurl.replace(/\134/g,"/");data.FileName=imageurl;data.Source="FramingStudioPage";this.app.getModel().setSelectedImageObject(data);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_FRAME_SKU_SUCCESS,data));};com.art.myGalleries.commands.ApplicationCommand.prototype.getFrameSKUError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_FRAME_SKU_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.privacyUpdateGalleryItemSuccess=function(response){window.location.href=window.location.href;};com.art.myGalleries.commands.ApplicationCommand.prototype.privacyUpdateGalleryItemError=function(response){};com.art.myGalleries.commands.ApplicationCommand.prototype.detailPageDeleteGalleryItemSuccess=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.DELETE_GALLERY_ITEM_DP_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.detailPageDeleteGalleryItemError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.DELETE_GALLERY_ITEM_DP_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.deleteGallerySuccess=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.DELETE_GALLERY_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.deleteGalleryError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.DELETE_GALLERY_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.deleteRoomSuccess=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_WALL_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.deleteRoomError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_WALL_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.deleteGalleryItemSuccess=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.DELETE_GALLERY_ITEM_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.deleteGalleryItemError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.DELETE_GALLERY_ITEM_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.logoutAccountSuccess=function(response){};com.art.myGalleries.commands.ApplicationCommand.prototype.logoutAccountError=function(response){var _this=this;if(response.responseText=="{'success'}"){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGOUT_MYGALLERY_SUCCESS));}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGOUT_MYGALLERY_FAILED));}};com.art.myGalleries.commands.ApplicationCommand.prototype.loginAccountSuccess=function(response){var _this=this;if(response.OperationResponse.ResponseMessage=="Success"&&response.OperationResponse.ResponseCode=="200"){var _toAuthToken=response.AuthenticationToken;var fromAuthToken=this.app.getModel().environment.authToken;this.app.getModel().environment.authToken=_toAuthToken;this.accountMerge(fromAuthToken,_toAuthToken,false,response);}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGIN_ACCOUNT_FAILED,"failure"));}};com.art.myGalleries.commands.ApplicationCommand.prototype.loginAccountError=function(response){var _this=this;if(response.responseText=="{'success'}"){var cookieobject=new com.art.core.cookie.Cookie();var sesssionID=cookieobject.getCookieBase('sessionid');var data="myaccount=myLoginAccount&usr="+this.command.username+"&"+"pwd="+this.command.password+"&"+"sessionID="+sesssionID;this.command.serviceProvider.galleryAPIService.callMyAccountProxy({command:this.command,app:this.app,successHandler:this.command.loginMyAccountSuccess,errorHandler:this.command.loginMyAccountError,beforeSendHandler:function(){}},data);}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGIN_ACCOUNT_FAILED,"failure"));}};com.art.myGalleries.commands.ApplicationCommand.prototype.loginMyAccountSuccess=function(response){var fromAuthToken=this.app.getModel().environment.authToken;this.app.getModel().environment.authToken=this.toAuthToken;this.appCmd.accountMerge(fromAuthToken,this.toAuthToken,false,response);};com.art.myGalleries.commands.ApplicationCommand.prototype.loginMyAccountError=function(response){var fromAuthToken=this.app.getModel().environment.authToken;this.app.getModel().environment.authToken=this.toAuthToken;this.appCmd.accountMerge(fromAuthToken,this.toAuthToken,false,response);};com.art.myGalleries.commands.ApplicationCommand.prototype.registerMyAccountSuccess=function(response){if(this.app.getModel().registerSource!=""){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_TRAY_SUCCESS));}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_SUCCESS));}};com.art.myGalleries.commands.ApplicationCommand.prototype.registerMyAccountError=function(response){if(response.responseText=="{'success'}"){if(this.app.getModel().registerSource!=""){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_TRAY_SUCCESS));}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_SUCCESS));}}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_FAILED,"failure"));}};com.art.myGalleries.commands.ApplicationCommand.prototype.registerAccountSuccess=function(response){if(response.OperationResponse.ResponseMessage=="Success"&&response.OperationResponse.ResponseCode=="200"){this.registerMyAccountSuccess();}
else if(response.OperationResponse.ResponseMessage=="exist"){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_FAILED,"exist"));}
else if(response.OperationResponse.ResponseMessage=="invalidemail"){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_FAILED,"invalidemail"));}
else if(response.OperationResponse.ResponseMessage=="invalidpassword"){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_FAILED,"invalidpassword"));}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_FAILED,"failure"));}};com.art.myGalleries.commands.ApplicationCommand.prototype.moveAddNewItemsToGallerySuccess=function(response){if(response.OperationResponse.OperationStatus==0){var galleryItems=[{}];galleryItems[0]=this.app.getModel().getExisitngItemToGallery(true);galleryItems[0].ItemURL="";galleryItems[0].Item.Title=escape(galleryItems[0].Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);var destinationGalleries=[{}];var gallery=this.app.getModel().galleryTemplate;gallery.GalleryId=response.Library.Galleries[0].GalleryId;this.command.tempNewCreatedGalleryId=response.Library.Galleries[0].ItemKey;this.command.tempLastSelectedGalleryId=response.Library.Galleries[0].GalleryId;destinationGalleries[0]=gallery;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"sourceGalleryID="+this.app.getModel().environmentSub.selectedGalleryID+"&"+"galleryItem="+JSON.stringify(galleryItems)+"&"+"destinationGalleries="+JSON.stringify(destinationGalleries)+"&"+this.app.getModel().getMoveOptions();this.command.serviceProvider.galleryAPIService.moveGalleryItem({command:this.command,app:this.app,successHandler:this.command.moveAddItemsToGallerySuccess,errorHandler:this.command.moveAddItemsToGalleryError,beforeSendHandler:function(){}},data);}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.MOVE_ADD_ITEM_TO_NEW_GALLERY_SUCCESS,response));}};com.art.myGalleries.commands.ApplicationCommand.prototype.accountMerge=function(fromAuthToken,toAuthToken,facebookLogin,response)
{var handlers=this.serviceProvider.createHandlers(this.accountMergeSuccess,this.accountMergeFailure,function(){});handlers.app=this.app;handlers.appCmd=this;handlers.facebookLogin=facebookLogin;handlers.optionalResponseObject=response;var a=this.app.getModel().environment;this.serviceProvider.accountAuthorizationAPIService.accountMerge(handlers,a.apiKey,a.sessionId,fromAuthToken,toAuthToken);};com.art.myGalleries.commands.ApplicationCommand.prototype.accountMergeSuccess=function(response)
{if(this.facebookLogin)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS,{},{modulename:this.appCmd.referredModule,reqfromforb:this.appCmd.requestfromforb}));}
else
{if(this.app.getModel().loginSource==this.app.constants.LOGINTRAY){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGIN_ACCOUNT_TRAY_SUCCESS,{},{modulename:this.appCmd.referredModule,reqfromforb:this.appCmd.requestfromforb}));}
else{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.LOGIN_ACCOUNT_SUCCESS,{fromExternalModule:this.appCmd.fromExternalModule},{modulename:this.appCmd.referredModule,reqfromforb:this.appCmd.requestfromforb}));}}};com.art.myGalleries.commands.ApplicationCommand.prototype.accountMergeFailure=function(response)
{};com.art.myGalleries.commands.ApplicationCommand.prototype.moveAddNewItemsToGalleryError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.MOVE_ADD_ITEM_TO_NEW_GALLERY_FAILED,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.moveAddItemsToGallerySuccess=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.MOVE_ADD_ITEM_TO_NEW_GALLERY_SUCCESS,this.command.tempNewCreatedGalleryId));};com.art.myGalleries.commands.ApplicationCommand.prototype.moveAddItemsToGalleryError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.MOVE_ADD_ITEM_TO_NEW_GALLERY_FAILED,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.addNewItemsToGallerySuccess=function(response){if(response.Library!=null||response.Library!=undefined){var galleryItems=[{}];if(this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=null||this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=undefined)
{galleryItems[0]=this.app.getModel().getNewItemToGalleryFromFramingStudio();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGalleryFromFramingStudio().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);}
else
{galleryItems[0]=this.app.getModel().getNewItemToGallery();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGallery().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);if(this.app.getModel().selectedImageObject.FrameSku!=undefined&&this.app.getModel().selectedImageObject.FrameSku!=null&&this.app.getModel().selectedImageObject.FrameSku.length>0)
{}}
var galleryID=response.Library.Galleries[0].GalleryId;this.command.tempNewCreatedGalleryId=response.Library.Galleries[0].ItemKey;this.command.tempLastSelectedGalleryId=response.Library.Galleries[0].GalleryId;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryItems="+JSON.stringify(galleryItems)+"&"+"galleryID="+galleryID+"&"+"allowDuplicate=true";this.command.serviceProvider.galleryAPIService.addItemsToGallery({command:this.command,app:this.app,successHandler:this.command.addItemsToGallerySuccess,errorHandler:this.command.addItemsToGalleryError,beforeSendHandler:function(){}},data);}
else{var galleryData=[{}];galleryData=response;galleryData.GalleryName=this.command.tempNewCreatedGalleryId;galleryData.GalleryID=this.command.tempLastSelectedGalleryId;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_SUCCESS,galleryData));}};com.art.myGalleries.commands.ApplicationCommand.prototype.addNewItemsToGalleryError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_FAILED,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.detailpageaddNewItemsToGallerySuccess=function(response){if(response.Library!=null||response.Library!=undefined){var galleryItems=[{}];if(this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=null||this.app.getModel().getNewItemToGalleryFromFramingStudio().FrameSku!=undefined)
{galleryItems[0]=this.app.getModel().getNewItemToGalleryFromFramingStudio();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGalleryFromFramingStudio().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);}
else
{galleryItems[0]=this.app.getModel().getNewItemToGallery();galleryItems[0].Item.Title=escape(this.app.getModel().getNewItemToGallery().Item.Title);galleryItems[0].Item.ArtistName=escape(galleryItems[0].Item.ArtistName);if(this.app.getModel().selectedImageObject.FrameSku!=undefined&&this.app.getModel().selectedImageObject.FrameSku!=null&&this.app.getModel().selectedImageObject.FrameSku.length>0)
{}}
var galleryID=response.Library.Galleries[0].GalleryId;this.command.tempNewCreatedGalleryId=response.Library.Galleries[0].ItemKey;this.command.tempLastSelectedGalleryId=response.Library.Galleries[0].GalleryId;var data=this.app.getModel().getAccessKeyObjectAsString()+"&"+this.app.getModel().getUserProfileObjectAsString()+"&"+"galleryItems="+JSON.stringify(galleryItems)+"&"+"galleryID="+galleryID+"&"+"allowDuplicate=true";this.command.serviceProvider.galleryAPIService.addItemsToGallery({command:this.command,app:this.app,successHandler:this.command.detailpageaddItemsToGallerySuccess,errorHandler:this.command.detailpageaddItemsToGalleryError,beforeSendHandler:function(){}},data);}
else{var galleryData=[{}];galleryData=response;galleryData.GalleryName=this.command.tempNewCreatedGalleryId;galleryData.GalleryID=this.command.tempLastSelectedGalleryId;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP_SUCCESS,galleryData));}};com.art.myGalleries.commands.ApplicationCommand.prototype.detailpageaddNewItemsToGalleryError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP_FAILED,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.moveExistingItemsToGallerySuccess=function(response){var eventName="";if(this.app.getModel().selectedImageObject.Source=="ProductPage")
eventName="Product Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="GalleryPage")
eventName="Gallery Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="ServicesPage")
eventName="Services Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="FramingStudioPage")
eventName="Framing Studio Page Add - Completed";if(eventName!="")
mygalleriesGA.trackEventWithCategory(eventName,eventName);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.MOVE_ADD_ITEM_TO_EXISTING_GALLERY_SUCCESS));};com.art.myGalleries.commands.ApplicationCommand.prototype.moveExistingItemsToGalleryError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.MOVE_ADD_ITEM_TO_EXISTING_GALLERY_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.addItemsToGalleryError=function(response){this.app.sendNotification(this.app.events.MOVE_ADD_ITEM_TO_EXISTING_GALLERY_FAILED);};com.art.myGalleries.commands.ApplicationCommand.prototype.addItemsToGallerySuccess=function(response){var eventName="";var catName="Save to Gallery";if(this.app.getModel().selectedImageObject.Source=="ProductPage")
eventName="Product Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="GalleryPage")
eventName="Gallery Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="ServicesPage")
eventName="Services Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="FramingStudioPage")
eventName="Framing Studio Page Add - Completed";if(eventName!="")
mygalleriesGA.trackEventWithCategory(catName,eventName);var galleryData=[{}];galleryData=response;this.command.tempNewCreatedGalleryId=response.Library.Galleries[0].ItemKey;this.command.tempLastSelectedGalleryId=response.Library.Galleries[0].GalleryId;galleryData.GalleryName=this.command.tempNewCreatedGalleryId;galleryData.GalleryID=this.command.tempLastSelectedGalleryId;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_SUCCESS,galleryData));};com.art.myGalleries.commands.ApplicationCommand.prototype.addItemsToDefaultGallerySuccess=function(response){};com.art.myGalleries.commands.ApplicationCommand.prototype.addItemsToDefaultGalleryError=function(response){};com.art.myGalleries.commands.ApplicationCommand.prototype.addItemsToGalleryError=function(response){this.app.sendNotification(this.app.events.ADD_ITEM_TO_EXISTING_GALLERY_FAILED);};com.art.myGalleries.commands.ApplicationCommand.prototype.detailPageAddItemsToGallerySuccess=function(response){var eventName="";var catName="Save to Gallery";if(this.app.getModel().selectedImageObject.Source=="ProductPage")
eventName="Product Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="GalleryPage")
eventName="Gallery Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="ServicesPage")
eventName="Services Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="FramingStudioPage")
eventName="Framing Studio Page Add - Completed";if(eventName!="")
mygalleriesGA.trackEventWithCategory(catName,eventName);var galleryData=[{}];galleryData=response;this.command.tempNewCreatedGalleryId=response.Library.Galleries[0].ItemKey;this.command.tempLastSelectedGalleryId=response.Library.Galleries[0].GalleryId;galleryData.GalleryName=this.command.tempNewCreatedGalleryId;galleryData.GalleryID=this.command.tempLastSelectedGalleryId;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP_SUCCESS,galleryData));};com.art.myGalleries.commands.ApplicationCommand.prototype.detailPageAddItemsToGalleryError=function(response){this.app.sendNotification(this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP_FAILED);};com.art.myGalleries.commands.ApplicationCommand.prototype.detailpageaddItemsToGallerySuccess=function(response){var eventName="";var catName="Save to Gallery";if(this.app.getModel().selectedImageObject.Source=="ProductPage")
eventName="Product Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="GalleryPage")
eventName="Gallery Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="ServicesPage")
eventName="Services Page Add - Completed";else if(this.app.getModel().selectedImageObject.Source=="FramingStudioPage")
eventName="Framing Studio Page Add - Completed";if(eventName!="")
mygalleriesGA.trackEventWithCategory(catName,eventName);var galleryData=[{}];galleryData=response;this.command.tempNewCreatedGalleryId=response.Library.Galleries[0].ItemKey;this.command.tempLastSelectedGalleryId=response.Library.Galleries[0].GalleryId;galleryData.GalleryName=this.command.tempNewCreatedGalleryId;galleryData.GalleryID=this.command.tempLastSelectedGalleryId;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP_SUCCESS,galleryData));};com.art.myGalleries.commands.ApplicationCommand.prototype.detailpageaddItemsToGalleryError=function(response){this.app.sendNotification(this.app.events.ADD_ITEM_TO_NEW_GALLERY_DP_FAILED);};com.art.myGalleries.commands.ApplicationCommand.prototype.updateGallerySuccess=function(response){var galleries=response.Library.Galleries;this.app.getModel().setCookieGalleryIDCountCookie(response.Library.Galleries[0].ItemKey);this.app.getModel().setLastSelectedGalleryKey(response.Library.Galleries[0].ItemKey);this.app.getModel().setLastSelectedGalleryName(response.Library.Galleries[0].Name);if(this.app.getModel().isRoomView){location.href+='';return;}
location.href="http://"+location.host+galleries[0].VanityURL;this.app.getModel().setSelectedGalleryTitle(this.command.currentNote.body.title);this.app.getModel().setSelectedGalleryDesc(this.command.currentNote.body.desc);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_GALLERY_TITLE_DESC_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.updateGalleryError=function(response){this.app.sendNotification(this.app.events.UPDATE_GALLERY_TITLE_DESC_FAILED,response);};com.art.myGalleries.commands.ApplicationCommand.prototype.addGallerySuccess=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_GALLERY_TITLE_DESC_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.addGalleryError=function(response){this.app.sendNotification(this.app.events.ADD_GALLERY_TITLE_DESC_FAILED);};com.art.myGalleries.commands.ApplicationCommand.prototype.getGalleryWithItemsSuccess=function(response){var _this=this;if(response.Library.Galleries==null){throw new Error("ApplicationCommand.getGalleryWithItemsSuccess failed! response.Library.Galleries is undefined.");}
else{this.app.getModel().setGalleryItems(response.Library.Galleries[0].Items);this.app.getUserLibraryProxy().flatten(response.Library.Galleries[0].Walls);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERY_ITEMS_SUCCESS,this.command.currentNote.body));this.processing=false;}};com.art.myGalleries.commands.ApplicationCommand.prototype.getGalleryWithItemsError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERY_ITEMS_FAILED,error,'ajax'));this.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.galleryItemSortSuccess=function(response){var galleryItems=response.Library.Galleries[0].Items;this.app.getModel().flattenGalleryItemDetails(galleryItems);this.app.getModel().galleryItemList=[];this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GALLERY_ITEM_SORT_SUCCESS,{items:galleryItems},""));this.command.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.galleryItemSortError=function(response){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GALLERY_ITEM_LIST_REQUEST_FAILED,error,'ajax'));this.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.getSystemLibrarySuccess=function(response)
{if(response.Library!=null)
{this.app.getUserLibraryProxy().setSystemLibrary(response.Library);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_SYSTEM_LIBRARY_SUCCESS,{},'ajax'));}
else
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_SYSTEM_LIBRARY_FAILED,{},'ajax'));}};com.art.myGalleries.commands.ApplicationCommand.prototype.getSystemLibraryError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_SYSTEM_LIBRARY_FAILED,{},'ajax'));};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserGalleriesSuccess=function(response)
{var _this=this;if(response.Library==null||response.Library.Galleries.length==0){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES_FAILED));}
else{var galleries=this.app.getModel().filterGalleries(response.Library.Galleries);this.app.getModel().setGalleryList(galleries);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES_SUCCESS));this.processing=false;}};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserGalleriesError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES_FAILED,error,'ajax'));this.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserGalleriesSuccessForWebUser=function(response)
{var _this=this;if(response.Library==null||response.Library.Galleries.length==0){this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES_FAILED_FOR_WEBUSER,{fromGridModule:this.command.fromGridModule}));}
else{var galleries=this.app.getModel().filterGalleries(response.Library.Galleries);this.app.getModel().setGalleryListForWebUser(galleries);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES_SUCCESS_FOR_WEBUSER,{fromGridModule:this.command.fromGridModule}));this.processing=false;}};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserGalleriesErrorForWebUser=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_ALL_GALLERIES_FAILED_FOR_WEBUSER,error,'ajax'));this.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.createWallSuccess=function(response)
{if(response.Library)
{var wall=response.Library.Galleries[0].Walls[0];var n=this.app.getUserLibraryProxy().selectedWallName.indexOf("hex")>-1?this.app.getUserLibraryProxy().selectedWallGalleryName:this.app.getUserLibraryProxy().selectedWallName;wall.WallDetails.Name=n;this.app.getUserLibraryProxy().wallsObject.push(wall);this.app.getUserLibraryProxy().flatten(this.app.getUserLibraryProxy().wallsObject);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.CREATE_WALL_SUCCESS));}
else
throw new Error("ApplicationCommand createWallSuccess Error! Response does not have wallid.");};com.art.myGalleries.commands.ApplicationCommand.prototype.createWallError=function(response)
{this.sendNotification(new com.art.core.utils.Note(this.app.events.CREATE_WALL_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.updateWallItemsSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_WALL_ITEMS_SUCCESS));this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_WALLS));};com.art.myGalleries.commands.ApplicationCommand.prototype.updateWallItemsError=function(response)
{this.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_WALL_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.searchSimilarArtistSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_SIMILAR_ARTIST_ITEM_SUCCESS,response));this.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.searchSimilarArtistError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_SIMILAR_ARTIST_ITEM_FAILED,'ajax'));this.processing=false;};com.art.myGalleries.commands.ApplicationCommand.prototype.getWallsSuccess=function(response)
{if(response.Library)
{this.app.getUserLibraryProxy().setLastUpdatedWall(response.Library.Walls);this.app.getUserLibraryProxy().wallsObject=response.Library.Walls;if(!this.app.getModel().isEditingSavedRoom)
this.app.getUserLibraryProxy().flatten(response.Library.Walls);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_WALLS_SUCCESS,{},'ajax'));}
else
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_WALLS_SUCCESS,{},'ajax'));}};com.art.myGalleries.commands.ApplicationCommand.prototype.getWallsError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_WALLS_FAILED,{},'ajax'));};com.art.myGalleries.commands.ApplicationCommand.prototype.addBareWallSuccess=function(response)
{if(response.Library)
{if(response.Library.BareWallGalleries.length>0)
{this.command.setBareWallNamesLibrary(response.Library);}
this.app.getUserLibraryProxy().refreshUserBareWalls(response.Library.BareWallGalleries[0]);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_BARE_WALLS_SUCCESS,{},'ajax'));}};com.art.myGalleries.commands.ApplicationCommand.prototype.addBareWallError=function(response)
{};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserLibrarySuccess=function(response)
{if(response.Library)
{if(response.Library.BareWallGalleries.length>0)
this.command.setBareWallNamesLibrary(response.Library);this.app.getUserLibraryProxy().userLibraryObject=response.Library;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_USER_LIBRARY_SUCCESS,{},'ajax'));}
else
throw new Error("ApplicationCommand.getUserLibrary failed! UserLibrary is null.");};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserLibraryError=function(response)
{};com.art.myGalleries.commands.ApplicationCommand.prototype.updateBareWallSuccess=function(response)
{if(response!=undefined)
{for(var i=0;i<this.app.getUserLibraryProxy().userLibraryObject.BareWallGalleries[0].BareWalls.length;i++)
{var w=this.app.getUserLibraryProxy().userLibraryObject.BareWallGalleries[0].BareWalls[i];if(w.BareWallId==response.Library.BareWalls[0].BareWallId)
{this.command.setBareWallName(response.Library.BareWalls[0])
this.app.getUserLibraryProxy().userLibraryObject.BareWallGalleries[0].BareWalls[i]=response.Library.BareWalls[0];return;}}
this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_BARE_WALL_SUCCESS));}
else
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_BARE_WALL_ERROR));}};com.art.myGalleries.commands.ApplicationCommand.prototype.updateBareWallError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.UPDATE_BARE_WALL_ERROR));};com.art.myGalleries.commands.ApplicationCommand.prototype.shareWallSuccess=function(response)
{if(response.Library.Galleries[0]==undefined)
throw new Error("ApplicationCommand.shareWallSuccess failed! Galleries is undefined.");var rvp=MyGalleriesCore.getRoomViewProxy();var sharedFromRoomView=typeof(rvp.currentWall)!='undefined';var selectedGallery=null;if(sharedFromRoomView)selectedGallery=rvp.currentWall.gallery;else selectedGallery=_this.app.getModel().cacheByGalleryList[_this.app.getModel().environmentSub.selectedGalleryID];var rvo=new com.art.myGalleries.vos.ShareRequestVO();rvo.viewMode=this.app.constants.ROOM_VIEW;rvo.title=selectedGallery.Name;rvo.additionalArgs=selectedGallery.ItemCount;rvo.imageURL=response.SharedItemImageURL.MediumImage.HttpImageURL;var hexColor='';if(sharedFromRoomView)hexColor=rvp.currentWall.bareWall.roomType=='hex'?'/'+rvp.currentWall.name:'';else hexColor=this.app.getUserLibraryProxy().selectedWallName.indexOf("hex")>-1?"/"+this.app.getUserLibraryProxy().selectedWallName:"";if(sharedFromRoomView)rvo.galleryURL="http://"+window.location.host+response.Library.Galleries[0].VanityURL+"room/"+rvp.currentWall.key+"/?mode=view&type="+rvp.currentWall.saveType;else rvo.galleryURL="http://"+window.location.host+response.Library.Galleries[0].VanityURL+"?viewmode="+this.app.constants.ROOM_VIEW+"/"+response.Library.Galleries[0].Walls[0].WallId+hexColor;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.SHARE_ACTION_SUCCESS,{rvo:rvo}));};com.art.myGalleries.commands.ApplicationCommand.prototype.getWallByIdSuccess=function(response)
{if(response.Library)
{this.app.getUserLibraryProxy().wallsObject=response.Library.Galleries[0].Walls;this.app.getUserLibraryProxy().flatten(response.Library.Galleries[0].Walls);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_WALL_BY_ID_SUCCESS,{},'ajax'));}};com.art.myGalleries.commands.ApplicationCommand.prototype.getWallByIdError=function(response)
{throw new Error("ApplicationCommand.getWallByIdError bad response.");};com.art.myGalleries.commands.ApplicationCommand.prototype.getWallByProfileKeySuccess=function(response)
{if(response.Library)
{this.app.getUserLibraryProxy().savedWallsObject=response.Library.Galleries[0].Walls;this.app.getUserLibraryProxy().flatten(response.Library.Galleries[0].Walls);this.app.getModel().setGalleryItems(response.Library.Galleries[0].Walls[0].WallItems);this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_WALL_BY_PROFILE_KEY_SUCCESS,{response:response},'ajax'));}};com.art.myGalleries.commands.ApplicationCommand.prototype.getWallByProfileKeyError=function(response)
{throw new Error("ApplicationCommand.getWallByProfileKeyError bad response.");};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserLibraryByProfileKeySuccess=function(response)
{if(response.Library)
{if(response.Library.BareWallGalleries.length>0)
this.command.setBareWallNamesLibrary(response.Library);this.command.setBareWallNames(response.Library);this.app.getUserLibraryProxy().userLibraryObject=response.Library;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_USER_LIBRARY_BY_PROFILE_SUCCESS,{},'ajax'));}};com.art.myGalleries.commands.ApplicationCommand.prototype.getUserLibraryByProfileKeyError=function(response)
{throw new Error("ApplicationCommand.getUserLibraryByProfileKeyError bad response.");};com.art.myGalleries.commands.ApplicationCommand.prototype.setBareWallNamesLibrary=function(library)
{if(library.BareWallGalleries==undefined||library.BareWallGalleries[0]==undefined||library.BareWallGalleries[0].BareWalls==undefined)
throw new Error("ApplicationCommand.setBareWallNames failed! BareWallGalleries is undefined.");var bareWalls=library.BareWallGalleries[0].BareWalls;this.setBareWallNames(bareWalls);};com.art.myGalleries.commands.ApplicationCommand.prototype.setBareWallNames=function(bareWalls)
{for(var i=0;i<bareWalls.length;i++)
{this.setBareWallName(bareWalls[i]);}};com.art.myGalleries.commands.ApplicationCommand.prototype.setBareWallName=function(bareWall)
{if(bareWall.Name==undefined)
throw new Error("ApplicationCommand.setBareWallName failed! Name property is undefined.");if(bareWall.Name.indexOf(this.app.getUserLibraryProxy().userBareWallNamePrefix)==-1)
bareWall.Name=this.app.getUserLibraryProxy().userBareWallNamePrefix+bareWall.BareWallId;};com.art.myGalleries.commands.ApplicationCommand.prototype.getFrameIdForDFESuccess=function(response)
{if(response!=null&&response.trim().length>1)
{var apNum=this.app.getModel().cacheByGalleryItemList[this.app.getModel().selectedItemId].APNum;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_FRAME_ID_SUCCESS,{frameid:response,apNum:apNum}));}
else
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_FRAME_ID_FAILED,{}));}};com.art.myGalleries.commands.ApplicationCommand.prototype.addGalleryToBookmarkSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_GALLERY_TO_BOOKMARK_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.addGalleryToBookmarkError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_GALLERY_TO_BOOKMARK_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.removeGalleryFromBookmarkSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_GALLERY_FROM_BOOKMARK_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.removeGalleryFromBookmarkError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_GALLERY_FROM_BOOKMARK_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.addRoomToBookmarkSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ROOM_TO_BOOKMARK_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.addRoomToBookmarkError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_ROOM_TO_BOOKMARK_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.removeRoomFromBookmarkSuccess=function(response)
{trace("REMOVE_ROOM_TO_BOOKMARK_SUCCESS");this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_ROOM_FROM_BOOKMARK_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.removeRoomFromBookmarkError=function(response)
{trace("REMOVE_ROOM_TO_BOOKMARK_ERROR");this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_ROOM_FROM_BOOKMARK_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.addFollowProfileSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_FOLLOW_PROFILE_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.addFollowProfileError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.ADD_FOLLOW_PROFILE_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.removeFollowProfileSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_FOLLOW_PROFILE_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.removeFollowProfileError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REMOVE_FOLLOW_PROFILE_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.saveRoomSuccess=function(response)
{if(response.OperationResponse.ResponseMessage!='Success'){MyGalleriesCore.sendNotification(new com.art.core.utils.Note(MyGalleriesCore.events.SAVE_ROOM_ERROR,{message:response.OperationResponse.ResponseMessage}));}else{var url=response.Library.Galleries[0].Walls[0].VanityURL;if(url!=''){url+='?mode=edit&type=user';window.location=url;}
MyGalleriesCore.sendNotification(new com.art.core.utils.Note(MyGalleriesCore.events.SAVE_ROOM_SUCCESS,{}));};};com.art.myGalleries.commands.ApplicationCommand.prototype.saveRoomError=function(response)
{MyGalleriesCore.sendNotification(new com.art.core.utils.Note(MyGalleriesCore.events.SAVE_ROOM_ERROR,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.saveExistingRoomSuccess=function(response,afterSuccess)
{var url=response.Library.Galleries[0].Walls[0].VanityURL;if(url!=''){if(afterSuccess){if(url.indexOf('?')>-1)url+='&mode='+afterSuccess;else url+='?mode='+afterSuccess;url+='&type=user';}else{url+='?mode=edit&type=user';}
window.location=url;}
MyGalleriesCore.sendNotification(new com.art.core.utils.Note(MyGalleriesCore.events.SAVE_ROOM_SUCCESS,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.saveExistingRoomError=function(response)
{MyGalleriesCore.sendNotification(new com.art.core.utils.Note(MyGalleriesCore.events.SAVE_ROOM_ERROR,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.getFrameIdForDFEError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_FRAME_ID_FAILED,{}));};com.art.myGalleries.commands.ApplicationCommand.prototype.getProductInfoSuccess=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_PRODUCT_INFO_SUCCESS,response));};com.art.myGalleries.commands.ApplicationCommand.prototype.getProductInfoError=function(response)
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.GET_PRODUCT_INFO_FAILED));};com.art.myGalleries.commands.ApplicationCommand.prototype.getProductInfoBeforeSend=function(response)
{};com.art.myGalleries.commands.ApplicationCommand.prototype.shareGalleryItemSuccess=function(response)
{if(response.Library.Galleries[0]==undefined)
throw new Error("ApplicationCommand.shareGalleryItemSuccess failed! Galleries is undefined.");var selectedGallery=null;selectedGallery=this.app.getModel().cacheByGalleryList[this.app.getModel().environmentSub.selectedGalleryID];var rvo=new com.art.myGalleries.vos.ShareRequestVO();rvo.viewMode=this.app.getModel().currentViewMode;rvo.shareType=this.app.getModel().shareType;rvo.title=selectedGallery.Name;rvo.additionalArgs=selectedGallery.ItemCount;if(response.OperationResponse.ResponseMessage=="Success")
{rvo.imageURL=response.SharedItemImageURL.MediumImage.HttpImageURL;rvo.galleryURL="http://"+window.location.host+response.SharedOGURL+"&viewmode="+this.app.getModel().currentViewMode;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.SHARE_REQUEST,rvo));}
else
{rvo.imageURL=selectedGallery.GalleryIconURL;rvo.galleryURL=window.location.href+"?viewmode="+this.app.getModel().currentViewMode;this.app.sendNotification(new com.art.core.utils.Note(this.app.events.SHARE_REQUEST,rvo));}
this.app.getModel().shareRequestObject=rvo;this.app.getModel().shareRequestFlag=true;};com.art.myGalleries.commands.ApplicationCommand.prototype.shareGalleryItemError=function(response)
{};com.art.myGalleries.commands.ShareCommand=function(data,app)
{this.data=data;this.app=app;};com.art.myGalleries.commands.ShareCommand.prototype.init=function()
{};com.art.myGalleries.commands.ShareCommand.prototype.listNotificationInterests=function()
{return[];};com.art.myGalleries.commands.ShareCommand.prototype.handleNotification=function(note)
{switch(note.name)
{default:throw new Error("ShareCommand Failure! Unrecognized note.name");}};com.art.myGalleries.components.MenuContainerComponent=function(imagepath)
{this.id="MenuContainerComponent";this.data;this.LOGIN_CLICK=com.art.myGalleries.components.MenuContainerComponent.LOGIN_CLICK;this.REGISTER_CLICK=com.art.myGalleries.components.MenuContainerComponent.REGISTER_CLICK;this.imagePath=imagepath;this.callbacks={};};com.art.myGalleries.components.MenuContainerComponent.LOGIN_CLICK="loginClick";com.art.myGalleries.components.MenuContainerComponent.REGISTER_CLICK="registerClick";com.art.myGalleries.components.MenuContainerComponent.prototype.init=function()
{var _this=this;};com.art.myGalleries.components.MenuContainerComponent.prototype.render=function()
{this.init();return this.getTemplate();};com.art.myGalleries.components.MenuContainerComponent.prototype.registerCallback=function(name,callback){this.callbacks[name]=callback;};com.art.myGalleries.components.MenuContainerComponent.prototype.registerEvents=function(){var _this=this;$("#autoSave").click(function(){if($('#autoSave').attr('checked'))
{MyGalleriesCore.getModel().setOneClickAddToGalleryEnabled(true);}
else
{MyGalleriesCore.getModel().setOneClickAddToGalleryEnabled(false);MyGalleriesCore.getModel().resetGalleryItemCountCookie(0);}});$("#loginTray").click(function(){_this.callbacks[com.art.myGalleries.components.MenuContainerComponent.LOGIN_CLICK]();});$("#registerTray").click(function(){_this.callbacks[com.art.myGalleries.components.MenuContainerComponent.REGISTER_CLICK]();});$("#loginTray, #registerTray, #lastGalleryName").hover(function(){$(this).addClass("loginhover");},function(){$(this).removeClass("loginhover");});};com.art.myGalleries.components.MenuContainerComponent.prototype.getTemplate=function()
{var returnValue=this.template;returnValue=returnValue.replace('$ID',this.id);returnValue=returnValue.replace(/\[IMAGE_DOMAIN\]/gi,this.imagePath);return returnValue;};com.art.myGalleries.components.MenuContainerComponent.prototype.template="<div id='$ID' class='tray_container'>"
/*+"<div class='tray'>"
+"<div class='galleryBadge gCustomFont'></div>"
+"<div class='MenuContainerComponent_TopRow'>"
+"<div class='MyGalleriesTrayModuleTopRowLeft'><img src='[IMAGE_DOMAIN]/images/mygallery/trayLogo.gif'></div>"
+"<div class='MyGalleriesTrayModuleTabClose'></div>"
+"</div>"
+"<div class='clear'></div>"
+"<div class='tray_subSection'>"
+"<div class='labelSaveSuccess'><span class='labelTrayCount'></span></div>"
+"<span id='lastGalleryName' name='lastGalleryName' class='lastGalleryName gCustomFont uCase'></span>"
+"<div class='labelAutoSave'>"
+"<label ><input id='autoSave' name='autoSave' type='checkbox' checked='true'/>Auto-save to this gallery</label>"
+"</div>"
+"</div>"
+"   <div class='viewGalleryButton gCustomFont cPointer'>View My Galleries</div>"
+"</div>"
+"<div class='tray_login'>"
+"<span id ='loginTray' class='login'>Log In</span> or <span id ='registerTray' class='login'>Sign Up</span><br />to collect and share art."
+"</div>"*/
+"</div>";com.art.myGalleries.vos.RequestVO=function(obj)
{this.properties=obj;this.NAME=com.art.myGalleries.vos.RequestVO.NAME;this.sessionid=false;this.authToken=false;this.apiKey=false;this.accountid=false;this.pageNumber=-1;};com.art.myGalleries.vos.RequestVO.NAME="RequestVO";com.art.myGalleries.vos.RequestVO.prototype.init=function(sessionid,authToken,apiKey,pageNumber)
{this.pageNumber=pageNumber;};com.art.myGalleries.vos.GalleryItemVO=function(obj)
{if(obj==undefined)
return;this.ItemId=obj.ItemGalleryItemID;this.ItemStatus=obj.ItemDetails.ItemStatus||0;this.AvailableInOtherSizes=obj.AvailableInOtherSizes||false;this.APNum=obj.ItemDetails.APNum||"";this.ItemDisplayedType=obj.ItemDetails.ItemDisplayType||"";this.Imageid=obj.ItemDetails.ImageId||"";if(obj.FrameSku&&obj.FrameSku!="")
this.FrameSku=obj.FrameSku||"";this.Sku=obj.ItemDetails.Sku||"";this.Title=obj.ItemDetails.Title||"";this.ArtistName=obj.ItemDetails.Artist.FirstName||"";this.ArtistUrl="";this.ImageUrl="";this.Height=obj.ItemDetails.ImageInformation.LargeImage.Dimensions.Height;this.Width=obj.ItemDetails.ImageInformation.LargeImage.Dimensions.Width;this.PhysicalDimensionHeight=obj.ItemDetails.PhysicalDimensions.Height;this.PhysicalDimensionWidth=obj.ItemDetails.PhysicalDimensions.Width;this.Price=obj.ItemDetails.ItemPrice.DisplayPrice;this.DisplayMSRP=obj.ItemDetails.ItemPrice.DisplayMSRP;this.MarkDownPrice=obj.ItemDetails.ItemPrice.MarkDownPrice;this.ShowMarkDownPrice=obj.ItemDetails.ItemPrice.ShowMarkDownPrice;this.CanFrame=obj.ItemDetails.ServiceFlags.CanFrame||false;this.AppendShadow=obj.ItemDetails.AppendShadow;this.DateCreated=obj.DateCreated;this.DateCreated=obj.DateUpdated;this.ZoomUrl="";this.CropperUrl="";this.AddToCartUrl="";this.ProductPageUrl="";this.PODConfigID=obj.PODConfigID||0;this.VanityURL=obj.VanityURL||"";this.ItemDetails=obj.ItemDetails||null;if(obj.SpecialHandlingID!=null&&obj.SpecialHandlingID!=undefined)
this.SpecialHandlingID=obj.SpecialHandlingID;};com.art.myGalleries.vos.GalleryVO=function(obj)
{this.GalleryId=obj.GalleryId;this.Name=obj.Name;this.ShortDescription=obj.ShortDescription;this.LongDescription=obj.LongDescription;this.Visibility=obj.Visibility;this.GalleryItems=obj.GalleryItems;this.WallImages=obj.WallImages;this.DateCreated=obj.DateCreated;this.DateModified=obj.DateModified;this.galleryItemCount=obj.GalleryItemCount;this.LastGalleryImageUrl=obj.LastGalleryImageUrl;};com.art.myGalleries.vos.ShareRequestVO=function(viewMode,shareType,title,imageURL,productURL,additionalArgs)
{this.viewMode=viewMode;this.shareType=shareType;this.title=title;this.imageURL=imageURL;this.galleryURL=productURL;this.additionalArgs=additionalArgs;};com.art.myGalleries.vos.WallItemVO=function(id,x,y,tx,ty)
{this.Item={ItemGalleryItemID:id};this.ProductCenterPositionX=x;this.ProductCenterPositionY=y;this.ProductTargetAreaPosX=tx;this.ProductTargetAreaPosY=ty;};com.art.myGalleries.components.CommonComponent=function(id,contentTitle,width,height,galleryId,galleryTitle,galleryDesc,privacy,contentName,content,imageURL,skuname,artistName,price,galleryList)
{this.init();this.id=id;this.contentTitle=contentTitle;this.width=width;this.height=height;this.galleryList=galleryList;this.galleryId=galleryId;this.galleryTitle=galleryTitle;this.galleryDesc=galleryDesc;this.privacy=privacy;this.contentName=contentName;this.content=content;this.imageURL=imageURL;this.skuName=skuname;this.artistName=artistName;this.price=price;this.data;this.UPDATE_GALLERY_TITLE=com.art.myGalleries.components.CommonComponent.UPDATE_GALLERY_TITLE;};com.art.myGalleries.components.CommonComponent.NAME="CommonComponent";com.art.myGalleries.components.CommonComponent.CLICK="click";com.art.myGalleries.components.CommonComponent.UPDATE_GALLERY_TITLE="CommonComponentUpdateGalleryTitle";com.art.myGalleries.components.CommonComponent.prototype.render=function(){return this.getTemplate();};com.art.myGalleries.components.CommonComponent.prototype.setData=function(data){$('.modalGallerytxtTitle').val(data);};com.art.myGalleries.components.CommonComponent.prototype.setBannerValue=function(data){$('.modalGalleryBanner').val(data);};com.art.myGalleries.components.CommonComponent.prototype.registerCallback=function(name,callback){this.callbacks[name]=callback;};com.art.myGalleries.components.CommonComponent.prototype.registerEvents=function(){var _this=this;if(this.galleryTitle=='Enter Title'){$('input:text').css("color","#666666");}
if(this.galleryDesc=='Enter a Description (optional)'){$("textarea:#editGalleryTitle_txtDesc").css("color","#666666");}
var rdName="#"+this.id+"_rdGallery";var txtName="#"+this.id+"_txtNewGallery";$('input:radio').change(function(){if($("input[@name='"+rdName+"']:checked").val()=='Existing'){$(txtName).val('');$(txtName).attr("disabled",true);$("#txtExistingDrpDownGallery").live("click",function(){$("#drpDownLstGallery").css("visibility","visible");});$(".ExistingGalleryLI").live("click",function(){$("#drpdownSelection").text($("#drpdownSelection").text().replace(($("#drpdownSelection").text()),($(this).attr('id'))));$("#drpDownLstGallery").css("visibility","hidden");});}
else if($("input[@name='"+rdName+"']:checked").val()=='New'){$("input[@name='"+txtName+"']:input").removeAttr('disabled');$("#drpdownSelection").text($("#drpdownSelection").text().replace(($("#drpdownSelection").text()),"Select Existing Gallery"));$("#txtExistingDrpDownGallery").unbind("live");$("#txtExistingDrpDownGallery").unbind("click");$("#txtExistingDrpDownGallery").unbind("mouseenter");$("#txtExistingDrpDownGallery").die();$("#drpDownLstGallery").css("visibility","hidden");}});$("txtExistingDrpDownGallery").live("click",function(){if($("input[@name='"+rdName+"']:checked").val()=='New'){$("#drpDownLstGallery").css("visibility","hidden");};});$("#existingDrpDownGalleries").mouseleave(function(){$("#drpDownLstGallery").css("visibility","hidden");});$("#existingDrpDownGalleries").mouseenter(function(){if($("input[@name='"+rdName+"']:checked").val()=='New')
{$("#drpDownLstGallery").css("visibility","hidden");}});$("#"+this.id+"_txtTitle").focus(function()
{$(this).css("color","#333333");$(this).css("background-color","#fff");var txtVal=$(this).val();if(txtVal=='')
{$(this).val('');}});$("#"+this.id+"_txtTitle").blur(function(){$(this).css("color","#666666");$(this).css("background-color","#F1F1F1");});$('textarea[maxlength]').keyup(function(){var max=parseInt($(this).attr('maxlength'));if($(this).val().length>max){$(this).val($(this).val().substr(0,$(this).attr('maxlength')));}});$("#"+this.id+"_txtDesc").focus(function(){$(this).css("color","#333333");$(this).css("background-color","#fff");var txtAreaVal=$(this).val();if(txtAreaVal==''||txtAreaVal=='Enter a Description (optional)'){$(this).val('');}});$("#"+this.id+"_txtDesc").blur(function(){$(this).css("color","#666666");$(this).css("background-color","#F1F1F1");if($(this).val()==""){$(this).val('Enter a Description (optional)');}});};com.art.myGalleries.components.CommonComponent.prototype.existingGalleryEvent=function(){_this=this;};com.art.myGalleries.components.CommonComponent.prototype.validateTitle=function(){var isValid=true;if($("#"+this.id+"_txtTitle").val()=='Enter Title'){$("#"+this.id+"_txtTitle").val('');}
if($("#"+this.id+"_txtDesc").val()=='Enter a Description (optional)'){$("#"+this.id+"_txtDesc").val('');}
var title=$("#"+this.id+"_txtTitle").val();title=title.trim();var txtTitleLen=title.length;if(txtTitleLen<=0){isValid=false;$("#"+this.id+"_txtTitle").css("border","1px solid red");$("#showErrorMsgContainer").show();$("#showErrorMsg").text("Please provide a unique gallery name.");}
$("#"+this.id+"_txtTitle").keypress(function(){$("#"+this.id).css("border","1px solid #9E9E9E");$("#showErrorMsgContainer").hide();$("#showErrorMsg").text('');});return isValid;};com.art.myGalleries.components.CommonComponent.prototype.getAddTitleData=function(){var galleryTitle=$("#addGalleryTitle_txtTitle").val();galleryTitle=$.trim(galleryTitle);var galleryDesc=$("#addGalleryTitle_txtDesc").val();galleryDesc=$.trim(galleryDesc);var bannerUrl=$("#addGalleryTitle_txtGalleryBanner").val();bannerUrl=$.trim(bannerUrl);return{title:galleryTitle,desc:galleryDesc,banner:bannerUrl};};com.art.myGalleries.components.CommonComponent.prototype.getEditTitleData=function()
{var galleryTitle=$("#editGalleryTitle_txtTitle").val();galleryTitle=$.trim(galleryTitle);var galleryDesc=$("#editGalleryTitle_txtDesc").val();galleryDesc=$.trim(galleryDesc);var bannerUrl="";bannerUrl=$("#editGalleryTitle_txtGalleryBanner").val();bannerUrl=$.trim(bannerUrl);return{title:galleryTitle,desc:galleryDesc,bannerUrl:bannerUrl};};com.art.myGalleries.components.CommonComponent.prototype.ContinueToMove=function(){};com.art.myGalleries.components.CommonComponent.prototype.getTemplate=function(){var str;if(this.id=="editGalleryTitle"){if(this.galleryTitle==''){this.galleryTitle='';}
if(this.galleryDesc==''){this.galleryDesc='Enter a Description (optional)';}
str=this.editGalleryTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$GDESC",this.galleryDesc).replace("$DESCTITLE","Enter a Description");}
else if(this.id=="addGalleryTitle"){str=this.addGalleryTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle);}
else if(this.id=='deleteArtComponent'){str=this.deleteArtTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$ARTNAME",this.contentName).replace("$CONTENT",this.content);}
else if(this.id=='deleteGalleryComponent'){str=this.deleteGalleryTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$GALLERYNAME",this.contentName).replace("$CONTENT",this.content);}
else if(this.id=='deleteRoomComponent'){str=this.deleteGalleryTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$GALLERYNAME",this.contentName).replace("$CONTENT",this.content);}
else if(this.id=='wishlistMyAccount'){str=this.wishlistMyAccountTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$CONTENT",this.content);}
else if(this.id=='moveToGalleryComponent'){var existingGalleryList="<ul class='ExistingGallery' style='background-color:#FFFFFF;font-family:verdana;font-size:11x;'>";var strList="";for(var i=0;i<this.galleryList.length;i++){strList+="<li class='ExistingGalleryLI' id='"+this.galleryList[i].galleryName+"'><a href='#'>"+this.galleryList[i].galleryName+"</a></li>";}
existingGalleryList=existingGalleryList+strList+"</ul>";var GalleryList=this.existingGalleryItemsTemplate.replace("$existingListItems",existingGalleryList);str=this.moveToGalleryTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$SKUNAME",this.skuName).replace("$ARTISTNAME",this.artistName).replace("$PRICE",this.price).replace("$EXISTINGITEMSNAME",GalleryList).replace("$CONTENT",this.content).replace('$IMAGEURL',this.imageURL);}
else if(this.id=='shareWithoutLoggedIn'){str=this.shareWithoutLoggedInTemplate.replace(/\$NAME/g,this.id).replace("$CONTENTTITLE",this.contentTitle).replace("$CONTENT",this.content);;}
return str;};com.art.myGalleries.components.CommonComponent.prototype.moveToGalleryTemplate="<div id='$NAME' class='MainMoveToGalleryContainer'>"+"<div id='$NAME_LeftModalContainer' class='LeftModalContainer'>"+"<div id='$NAME_LeftInnerContainer' class='LeftInnerContainer'>"+"<div style='1px solid #B7B7B7;margin-bottom:10px;'><img src='$IMAGEURL' width='160px' style='1px solid red;' height='300px' alt='' title='' /> </div>"+"<div><span>SKU Name</span><span>$SKUNAME</span></div>"+"<div><span>Artist Name</span><span>$ARTISTNAME</span></div>"+"<div><span>Price</span><span>$PRICE</span></div>"+"</div>"+"</div>"+"<div id='$NAME_RightModalContainer' class='RightModalContainer'>"+"<div id='$NAME_RightInnerContainer' class='RightInnerContainer'>"+"<div id='$NAME_Title' class='MoveToGalleryTitle'>$CONTENTTITLE</div>"+"<div id='$NAME_GallerySpliter' class='MovetoGallerySpliter'>"+"<div class='MoveToExistingItems'>"+"<div style='margin-bottom:10px;'><input type='radio' id='$NAME_rdGallery' name='$NAME_rdGallery' value='Existing' class='radioModal' /><span id='spMsg' class='spRdMsg'>Existing Gallery</div>"+"$EXISTINGITEMSNAME"+"</div>"+"<div class='MoveToNewItems'>"+"<div style='margin-bottom:10px;'><input type='radio' id='$NAME_rdGallery' name='$NAME_rdGallery' value='New' class='radioModal' /><span id='spMsg' class='spRdMsg'>New Gallery</div>"+"<div><input type='text' id='$NAME_txtNewGallery' name='$NAME_txtNewGallery' class='modalGallerytxtTitle' disabled='true' /></div>"+"</div>"+"</div>"+"</div>"+"<div style='font-family:verdana;font-size:11px;margin-top:280px;margin-right:30px'>$CONTENT</div>"+"</div>"+"<div class='clear'></div>"+"</div>";com.art.myGalleries.components.CommonComponent.prototype.existingGalleryItemsTemplate='<div id="existingDrpDownGalleries">'+'<div id="txtExistingDrpDownGallery" style="display:inline-block;float:left;width:175px;height:24px;padding-left:20px;padding-top:6px;color:#FFFFFF;font-size:13px;font-family:arial,sans-serif;background-image:url(http://cache1.artprintimages.com/images/coreimages/core-components-sprites.png); background-position:0px 0px;background-repeat:no-repeat;"><label id="drpdownSelection">Select Existing Gallery</label></div>'+'<div id="txtExistingDrpDownGallery" style="display:inline-block;float:left;height:30px; width:20px;background-image:url(http://cache1.artprintimages.com/images/coreimages/core-components-sprites.png); background-position:-280px 0px;background-repeat:no-repeat;"></div>'+'<div id="drpDownLstGallery" style="visibility:hidden;">$existingListItems</div>'+'</div>';com.art.myGalleries.components.CommonComponent.prototype.editGalleryTemplate="<div id='$NAME'>"+"<div id='$NAME_Title'>$CONTENTTITLE<span id='spError' class='ErrorMsg'> *</span></div>"+"<div style='float:left;display:none;' class='ErrorMsg dErrorMessage' id='showErrorMsgContainer'><div class='loginModalErrorMsgImg floatLeft'></div><div class='floatLeft galErrorMsg' id='showErrorMsg'></div></div>"+"<div style='margin-top:1px;width:222px;padding-bottom: 10px;height:27px;float:left;'><input type='text' id='$NAME_txtTitle' name='$NAME_txtTitle' class='modalGallerytxtTitle' maxlength='25' value='' /></div>"+"<div id='$NAME_Title'>$DESCTITLE</div>"+"<div style='margin-top:2px;float:left;'><pre><textarea id='$NAME_txtDesc' rows='6' cols='20' class='modalGallerytxtDesc' maxlength='500'>$GDESC</textarea></pre></div>"+"<div class='clear'></div><div class='bannerContainerEdit' style='display:none'><div id='$NAME_Title'>Enter Gallery Banner Url</div>"+"<div style='margin-top:1px;width:222px;padding-bottom: 10px;height:27px;float:left;'><input type='text' id='$NAME_txtGalleryBanner' name='$NAME_txtGalleryBanner' class='modalGalleryBanner' maxlength='150' value='' /></div>"+"</div><div class='clear'></div>"+"<div style='float:left' class='ErrorMsg'>*<span id='ErrorMsg'>Required Field</span></div><br/>"+"<div class='clear'></div>"+"</div>";com.art.myGalleries.components.CommonComponent.prototype.shareWithoutLoggedInTemplate="<div id='$NAME' style='margin-left:25px;margin-right:20px;'>"+"<div id='$NAME_Title' class='MainModalTitle'>$CONTENTTITLE</div>"+"<div id='txtContent' class='MyGalleriesLoginContainer' style='margin-top:10px;'>$CONTENT</div>"+"<div class='clear'></div>"+"</div>";com.art.myGalleries.components.CommonComponent.prototype.wishlistMyAccountTemplate="<div id='$NAME' style='margin-left:25px;margin-top:60px;margin-right:20px;'>"+"<div id='$NAME_Title' class='MainModalTitle'>$CONTENTTITLE</div>"+"<div id='txtContent' class='MyGalleriesLoginContainer' style='margin-top:10px;'>Wish lists are now called My Galleries. Items saved to your galleries can be organized, compared, viewed in a room, and shared with friends via email or Facebook.</div>"+"<div class='clear'></div>"+"</div>";com.art.myGalleries.components.CommonComponent.prototype.addGalleryTemplate="<div id='$NAME'>"+"<div id='$NAME_Title'>$CONTENTTITLE<span id='spError' class='ErrorMsg'> *</span></div>"+"<div style='float:left;display:none;' class='ErrorMsg dErrorMessage' id='showErrorMsgContainer'><div class='loginModalErrorMsgImg floatLeft'></div><div class='floatLeft galErrorMsg' id='showErrorMsg'></div></div>"+"<div style='margin-top:1px;width:222px;padding-bottom: 10px;height:27px;'><input type='text' id='$NAME_txtTitle' name='$NAME_txtTitle' class='modalGallerytxtTitle' style='color:#666666;' maxlength='25' value='' /></div>"+"<div id='$NAME_Title'>Enter a Description</div>"+"<div style='margin-top:2px;float:left;'><pre><textarea id='$NAME_txtDesc' rows='6' cols='20' class='modalGallerytxtDesc' style='color:#666666;' maxlength='500'></textarea></pre></div>"+"<div class='clear'></div><div class='bannerContainer' style='display:none'><div id='$NAME_Title'>Enter Gallery Banner Url</div>"+"<div style='margin-top:1px;width:222px;padding-bottom: 10px;height:27px;float:left;'><input type='text' id='$NAME_txtGalleryBanner' name='$NAME_txtGalleryBanner' class='modalGalleryBanner' maxlength='150' value='' /></div>"+"</div>"+"<div class='clear'></div><div style='float:left' class='ErrorMsg'>*<span id='ErrorMsg'>Required Field</span></div><br>"+"<div class='clear'></div>"+"</div>";com.art.myGalleries.components.CommonComponent.prototype.deleteArtTemplate="<div id='$NAME'>"+"<div id='$NAME_Title'>$CONTENTTITLE "+"\"$ARTNAME\"?</div>"+"<div id='$NAME_Content' class='modalContent'>$CONTENT</div>"+"<div class='clear'></div>"+"</div>";com.art.myGalleries.components.CommonComponent.prototype.deleteGalleryTemplate="<div id='$NAME'>"+"<div id='$NAME_Title'>$CONTENTTITLE "+" $GALLERYNAME</div>"+"<div id='$NAME_Content' class='modalContent'>$CONTENT</div>"+"<div class='clear'></div>"+"</div>";com.art.core.components.BaseComponent.extend(com.art.myGalleries.components.CommonComponent.prototype);com.art.myGalleries.components.MyGalleriesModal=function(modal){this.init();if(modal==null||modal==undefined)return false;this.id=modal.id;this.modal=modal;this.selectedGalleryId;this.btn;this.LOGIN_CLICKED=com.art.myGalleries.components.MyGalleriesModal.LOGIN_CLICKED;this.REGISTER_CLICKED=com.art.myGalleries.components.MyGalleriesModal.REGISTER_CLICKED;};com.art.myGalleries.components.MyGalleriesModal.NAME="MyGalleriesModal";com.art.myGalleries.components.MyGalleriesModal.CLICK="click";com.art.myGalleries.components.MyGalleriesModal.UPDATE_GALLERY_TITLE="MyGalleriesModalUpdateGalleryTitle";com.art.myGalleries.components.MyGalleriesModal.LOGIN_CLICKED="LoginClicked";com.art.myGalleries.components.MyGalleriesModal.REGISTER_CLICKED="RegisterClicked";com.art.myGalleries.components.MyGalleriesModal.prototype.render=function()
{return this.getTemplate();};com.art.myGalleries.components.MyGalleriesModal.prototype.registerEvents=function(){$("#doneBtn").css("visibility","hidden");$("#visitGallery").css("visibility","hidden");if($.browser.msie)
{$("#continue").css("width","155px");}
var rdName="#"+this.modal.id+"_rdGallery";var rdNewName="#"+this.modal.id+"_rdNewGalery";var txtName="#"+this.modal.id+"_txtNewGallery";var _this=this;if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!=""&&MyGalleriesCore.getModel().getLastSelectedGalleryName()!=null)
{if(this.modal.id=='SaveToGallery')
{var lastSelectedGalName=MyGalleriesCore.getModel().getLastSelectedGalleryName();lastSelectedGalName=com.art.core.utils.StringUtil.autoEllipseText(lastSelectedGalName,15);_this.selectedGalleryId=MyGalleriesCore.getModel().getLastSelectedGalleryID();$("#drpdownSelection").text($("#drpdownSelection").text().replace(($("#drpdownSelection").text()),lastSelectedGalName));}}
if($.browser.msie&&parseInt($.browser.version)==7)
{if(this.modal.id=='MoveToGallery')
{$('.MyGalleriesLeftContainer').css('height','365');}
else
{$('.MyGalleriesLeftContainer').css('height','385');}}
if($.browser.msie&&parseInt($.browser.version)==8)
{if(this.modal.id=='MoveToGallery')
{$('#baseModalButtonBarRight_myModalMoveToGallery').css('height','0px');}}
var t=false;if(this.modal.galleryList.length>0){for(var i=0;i<this.modal.galleryList.length;i++){if(this.modal.galleryList[i].Permissions!=50){t=true;}}}
if(t)
{$("[class=radioModal]").removeAttr("checked");$("[class=radioModal]").filter("[value=Existing]").attr("checked","checked");$(txtName).attr("disabled","true");$("#existingDrpDownGalleries").removeClass('existingDrpDownGalleriesOpacity');}
else
{$("[class=radioModal]").removeAttr("checked");$("[class=radioModal]").filter("[value=New]").attr("checked","checked");$("input[@name='"+txtName+"']:input").removeAttr('disabled');$(rdName).attr('disabled','disabled');$("#existingDrpDownGalleries").addClass('existingDrpDownGalleriesOpacity');var alpha=0.3;$("#txtExistingDrpDownGallery").css({"filter":"alpha (opacity="+(alpha*100)+")","filter":"progid:DXImageTransform.Microsoft.Alpha(style=0, opacity="+(alpha*100)+")","-moz-opacity":alpha,"opacity":alpha,"-khtml-opacity":alpha});}
$("#privacyChk").css("visibility","hidden");$("#privacyTxt").css("visibility","hidden");$('input:radio').change(function(){if($("input[name='SaveToGallery_rdGallery']:checked").val()=='Existing'||$("input[name='MoveToGallery_rdGallery']:checked").val()=='Existing'){$(txtName).val('Untitled Gallery');$(txtName).attr("disabled","true");$("#privacyChk").css("visibility","hidden");$("#privacyTxt").css("visibility","hidden");$(".commonErrorMsg").text('');$(".commonErrorMsg").hide();}
else if($("input[name='SaveToGallery_rdGallery']:checked").val()=='New'||$("input[name='MoveToGallery_rdGallery']:checked").val()=='New'){$("input[@name='"+txtName+"']:input").removeAttr('disabled');$("#drpdownSelection").text($("#drpdownSelection").text().replace(($("#drpdownSelection").text()),"Select Gallery"));var cookieobject=new com.art.core.cookie.Cookie();var accountType=cookieobject.getCookieDictionary('ap','accounttype');if(accountType!="1")
{$("#privacyChk").css("visibility","visible");$("#privacyTxt").css("visibility","visible");}
$("#txtExistingDrpDownGallery").unbind("live");$("#txtExistingDrpDownGallery").unbind("click");$("#txtExistingDrpDownGallery").unbind("mouseenter");$("#txtExistingDrpDownGallery").die();$(".commonErrorMsg").text('');$(".commonErrorMsg").hide();$("#drpDownLstGallery").hide();}
if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!=""&&MyGalleriesCore.getModel().getLastSelectedGalleryName()!=null)
{if(_this.modal.id=='SaveToGallery')
{var lastSelectedGalName=MyGalleriesCore.getModel().getLastSelectedGalleryName();lastSelectedGalName=com.art.core.utils.StringUtil.autoEllipseText(lastSelectedGalName,15);_this.selectedGalleryId=MyGalleriesCore.getModel().getLastSelectedGalleryID();$("#drpdownSelection").text($("#drpdownSelection").text().replace(($("#drpdownSelection").text()),lastSelectedGalName));}}});$("#txtExistingDrpDownGallery").live("click",function(){if($("input[@name='"+rdName+"']:checked").val()=='New'){$("#drpDownLstGallery").hide();}});$("#drpDownLstGallery").mouseenter(function(){$(this).show();$(".commonErrorMsg").hide();});$("#existingDrpDownGalleries, #drpDownLstGallery").mouseleave(function(){$("#drpDownLstGallery").hide();$(".commonErrorMsg").show();});$("#existingDrpDownGalleries").click(function(){$(".commonErrorMsg").text('');if($("input[name='SaveToGallery_rdGallery']:checked").val()=='New'||$("input[name='MoveToGallery_rdGallery']:checked").val()=='New'){$("#drpDownLstGallery").hide();}
else if($("input[name='SaveToGallery_rdGallery']:checked").val()=='Existing'||$("input[name='MoveToGallery_rdGallery']:checked").val()=='Existing'){$("#drpDownLstGallery").show();}});$('.drpDownLstItem').live('click',function(){_this.selectedGalleryId=$(this).attr('id');var strExistingGallery=$("#drpdownSelection").text().replace(($("#drpdownSelection").text()),($(this).text()));var strEclipseExistingGallery=com.art.core.utils.StringUtil.autoEllipseText(strExistingGallery,15);$("#drpdownSelection").text(strEclipseExistingGallery);$("#drpDownLstGallery").hide();});$("#"+this.modal.id+"_txtNewGallery").keypress(function(){$(".commonErrorMsg").text('');$(".commonErrorMsg").hide();});$("#"+this.modal.id+"_txtNewGallery").focus(function()
{$(this).css("color","#333333");$(this).css("background-color","#fff");var txtVal=$(this).val();if(txtVal==''||txtVal=='Untitled Gallery')
{$(this).val('');}});$("#"+this.modal.id+"_txtNewGallery").blur(function(){$(this).css("color","#666666");$(this).css("background-color","#F1F1F1");if($(this).val()==""){$(this).val('Untitled Gallery');}});$("#registerSavetogallery").live("click",function(){if(_this.callbacks[_this.REGISTER_CLICKED]!=undefined)
_this.callbacks[_this.REGISTER_CLICKED]();});};com.art.myGalleries.components.MyGalleriesModal.prototype.GetGalleryID=function(){if(this.selectedGalleryId!=""&&this.selectedGalleryId!=undefined)
{return this.selectedGalleryId;}};com.art.myGalleries.components.MyGalleriesModal.prototype.ContinueToMove=function(){if($("input[name="+this.modal.id+"_rdGallery]:checked").val()==undefined){$(".commonErrorMsg").text('Please select a option.');$(".commonErrorMsg").show();}
else{var GalleryVal=$("input[name="+this.modal.id+"_rdGallery]:checked").val();switch(GalleryVal){case'New':if($("#"+this.modal.id+"_txtNewGallery").val().trim().length<=0){$(".commonErrorMsg").text('Please enter a gallery name. ');$(".commonErrorMsg").show();}
else{return'New';}
break;case'Existing':if($("#drpdownSelection").text()=='Select Gallery'){$(".commonErrorMsg").text('Please select an existing gallery from the dropdown menu.');$(".commonErrorMsg").show();}
else{return'Existing';}
break;default:return GalleryVal;break;}}};com.art.myGalleries.components.MyGalleriesModal.prototype.getAddTitleData=function(){var txtName="#"+this.modal.id+"_txtNewGallery";return{title:$(txtName).val()};};com.art.myGalleries.components.MyGalleriesModal.prototype.getTemplate=function()
{var strHtml="";switch(this.modal.id){case"MoveToGallery":case"SaveToGallery":strHtml=this.getTemplateForMoveToGallery();break;case"DeleteGallery":strHtml=this.getTemplateForDeleteGallery();break;default:throw new Error("Modal Failure! Unknown note.name");}
return strHtml;};com.art.myGalleries.components.MyGalleriesModal.prototype.getTemplateForMoveToGallery=function()
{var str="<div id='"+this.modal.id+"' class='MyGalleriesModalContainer'>"
+this.ModalLeftContainer()
+this.ModalRightContainer()
+this.ModalConfirmContainer()
+"</div>"
+"<div class='clear'></div>";return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.getTemplateForDeleteGallery=function(){var str="<div id='"+this.modal.id+"' class='MyGalleriesModalContainer'>"
+this.ModalLeftContainer()
+this.ModalRightContainer()
+"</div>"
+"<div class='clear'></div>";return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.ModalLeftContainer=function()
{var _this=this;var str="";var ImgContainer="";var strDropShadow="";var ItemGalleryItemID="1";var ImageUrl='';var strTitle='';var strArtistName='';if(!MyGalleriesCore.getModel().environmentSub.isExternalPage){ImageUrl=_this.modal.galleryItem.ItemDetails.ImageInformation.LargeImage.HttpImageURL;strArtistName=(_this.modal.galleryItem.ItemDetails.Artist.FirstName||"")+" "+(_this.modal.galleryItem.ItemDetails.Artist.LastName||"");;strTitle=_this.modal.galleryItem.ItemDetails.Title;}
else{ImageUrl=_this.modal.galleryItem.ImageUrl;strArtistName=(_this.modal.galleryItem.ArtistName!=undefined)?_this.modal.galleryItem.ArtistName:'';strTitle=_this.modal.galleryItem.Title;}
var ImageWidth=_this.modal.galleryItem.Width;var ImageHeight=_this.modal.galleryItem.Height;var length=180;var w=0,h=0,mt=0,ml=0;var aspectRatio=ImageWidth/ImageHeight;if(aspectRatio>1.0)
{w=length;h=length/aspectRatio;mt=(w-h)/2;}
else
{w=length*aspectRatio;h=length;ml=(h-w)/2;}
ImageHeight=Math.floor(h);ImageWidth=Math.floor(w);var _HD=(220-ImageHeight);var _WD=(220-ImageWidth);var tp,bt,rp,lp;if(_HD>0)
{tp=_HD/2;bp=(_HD-tp);}
if(_WD>0)
{rp=_WD/2;lp=(_WD-rp);}
lp=Math.floor(lp);tp=Math.floor(tp)+41;ImgContainer='<img style="position:absolute;left:'+lp+'px;margin-top:20px" width="'+ImageWidth+'" height="'+ImageHeight+'" class="mg-modalImage mg-shadow" alt="" title="" src="'+ImageUrl+'" />';var ImgRightTop='<img alt="" style="top:'+tp+'px; left: '+(ImageWidth+lp)+'px;" class="abs w8 h10" src="http://cache1.artprintimages.com/images/photostoart/shadow_righttop_E5E7DC.png" />';var ImgRightTiling='<img height="'+(ImageHeight-10)+'" alt="" style="top:'+(tp+10)+'px; left:'+(ImageWidth+lp)+'px;" class="abs w8" src="http://cache1.artprintimages.com/images/mygallery/shadow_righttiling_E5E7DC.png" />';var ImgBottomLeft='<img alt="" style="top:'+(ImageHeight+tp)+'px; left: '+(lp)+'px;" class="abs w8 h8" src="http://cache1.artprintimages.com/images/photostoart/shadow_bottomleft_E5E7DC.png" />';if(ImageWidth=='NaN')
{var ImgBottomTiling='<img width="220px" alt="" style="top:'+(ImageHeight+tp)+'px; left: '+(lp+8)+'px;" class="abs h8" src="http://cache1.artprintimages.com/images/mygallery/shadow_bottomtiling_E5E7DC.png" />';}
else
{var ImgBottomTiling='<img width="'+(ImageWidth-8)+'" alt="" style="top:'+(ImageHeight+tp)+'px; left: '+(lp+8)+'px;" class="abs h8" src="http://cache1.artprintimages.com/images/mygallery/shadow_bottomtiling_E5E7DC.png" />';}
var ImgBottomRight='<img alt="" style="top:'+(ImageHeight+tp)+'px; left: '+(ImageWidth+lp)+'px;" class="abs w8 h8" src="http://cache1.artprintimages.com/images/photostoart/shadow_bottomright_E5E7DC.png" />';var strItemSkuName='<div id="mg-modalSkuName" class="MyGalleriesText SiteFont"  >'+strTitle+'</div>';if(strArtistName!='')
{var strItemArtistName='<div id="mg-modalArtistName" class="MyGalleriesText SiteFont gTxtPrimary">'+decodeURI(strArtistName)+'</div>';}
else
{var strItemArtistName="";}
if(_this.modal.galleryItem.DisplayPrice!=undefined)
{var strItemPrice="<div id='mg-modalItemPrice' class='MyGalleriesText SiteFont'>"+_this.modal.galleryItem.DisplayPrice+"</div>";}
else
{var strItemPrice="<div id='mg-modalItemPrice' class='MyGalleriesText SiteFont'>"+_this.modal.galleryItem.Price+"</div>";}
str="<div class='MyGalleriesLeftContainer'>"
+'<div class="MyGalleriesLeftImgContainer" style="width:'+ImageWidth+'px;height:'+ImageHeight+'px;">'
+ImgContainer
+strDropShadow
+"</div>"
+"<div class='MyGalleriesLeftItemDetailsContainer' >"
+strItemSkuName
+strItemArtistName
+strItemPrice
+"</div>"
+"</div>";return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.ModalRightContainer=function()
{var strModalTitle="<div class='MainModalTitle'>"+this.modal.Title+"</div>";var strModalGalleryContainer=this.getTemplateForGalleryContent();var str="<div class='MyGalleriesRightContainer'>"
+strModalGalleryContainer
+"</div>";return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.getTemplateForGalleryContent=function()
{var str="",hiddenClass="";var strExistingDropDownTextBox=this.getExistingDropDownTextBox();var strExistingDropDown=this.getExistingDropDownList();var strLoginText;var cookieobject=new com.art.core.cookie.Cookie();var accountType=cookieobject.getCookieDictionary('ap','accounttype');if(this.modal.id=='SaveToGallery'&&accountType=="1")
{strLoginText="<div class='MyGalleriesLoginContainer'>Don't see your existing galleries? <br><div id ='loginSavetogallery'>Close this dialog and login to your account.</div></div>";}
else
{strLoginText="";}
hiddenClass=this.modal.id=='SaveToGallery'?"":"hidden";var strModalExistingGallery="<div class='ModalExistingGallery'>"
+"<input type='radio' id='"+this.modal.id+"_rdGallery' name='"+this.modal.id+"_rdGallery' value='Existing' class='radioModal' style='vertical-align:top;margin-right:10px;margin-left:0px;' /><span id='ModalExistingGalleryLabel' class='ModalExistingGalleryLabel gCustomFont'>Existing Gallery</span>"
+"<div class='clear'></div>"
+strExistingDropDownTextBox
+"<div class='clear'></div>"
+strExistingDropDown
+"<div class='clear'></div>"
+strLoginText
+"<div class='commonErrorMsg fontsize12'></div>"
+"</div>";var strModalDashLine="<div class='MygalleriesDashlines'></div>";var strModalNewGallery="<div class='ModalNewGallery floatRight'>"
+"<input type='radio' id='"+this.modal.id+"_rdNewGallery' name='"+this.modal.id+"_rdGallery' value='New' class='radioModal' style='vertical-align:top;margin-right:10px;margin-left:0;' /><span id='ModalNewGalleryLabel' class='ModalNewGalleryLabel gCustomFont'>New Gallery</span>"
+"<div id='mg-newGallery' class='newGalleryTextBox'><input type='text' id='"+this.modal.id+"_txtNewGallery' name='"+this.modal.id+"_txtNewGallery' class='modalGallerytxtTitle SiteFont' maxlength='25'  value='Untitled Gallery' /></div>"
+"</div>";str="<div class='MyGalleriesModalGalleryContainer floatLeft'>"
+strModalExistingGallery
+strModalNewGallery
+"</div>";return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.ModalConfirmContainer=function()
{if(this.modal.id=='SaveToGallery')
{var strConfirmTitle="<div class='MainModalTitle gCustomFont uCase' style='margin-bottom:20px;'>Successfully Saved!</div>";var strConfirmGalleryContainer="<div id='txtConfirmationMessage' class='MyGalleriesText'>"+'"'+this.modal.galleryItem.Title+'"'+" was added to your <span id='galleryName'></span>&nbsp;gallery. You can access your gallery at any time from the My Galleries link at the top of each page, or by selecting Visit Gallery below.</div>";var strLoginConfirmContainer;var cookieobject=new com.art.core.cookie.Cookie();var accountType=cookieobject.getCookieDictionary('ap','accounttype');if(this.modal.id=='SaveToGallery'&&accountType=="1")
{strLoginConfirmContainer="<hr/><div id='txtLoginConfirm' class='MyGalleriesText'>To take full advantage of gallery features, including accessing your saved items from any computer and sharing with friends, please <span id ='loginSavetogallery'>Login</span> or <span id ='registerSavetogallery'>Sign Up.</span></div>";}
else
{strLoginConfirmContainer="";}
var strBtnContainer="<div id='btnContainer'></div>";var str="<div id='SavetoGalleryConfirm' style='visibility:hidden;' class='MyGalleriesConfirmRightContainer'>"
+strConfirmTitle
+strConfirmGalleryContainer
+strLoginConfirmContainer
+strBtnContainer
+"</div>";}
else
{var strConfirmTitle="<div class='MainModalTitle gCustomFont uCase'  style='margin-bottom:20px;'>Successfully Saved!</div>";var strConfirmGalleryContainer="<div id='txtConfirmationMessage' class='MyGalleriesText'>"+'"'+this.modal.galleryItem.Title+'"'+" was added to your <span id='galleryName'></span>&nbsp;gallery. You can access your gallery at any time from the My Galleries link at the top of each page, or by selecting Visit Gallery below.</div>";var strBtnContainer="<div id='btnContainer'></div>";var str="<div id='MoveToGalleryConfirm' style='visibility:hidden;' class='MyGalleriesConfirmRightContainer'>"
+strConfirmTitle
+strConfirmGalleryContainer
+strBtnContainer
+"</div>";}
return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.getExistingDropDownTextBox=function()
{var cookieobject=new com.art.core.cookie.Cookie();var galleryID=cookieobject.getCookieDictionary('arts',this.modal.id);var galleryName="";if(this.modal.galleryList.length>0){for(var i=0;i<this.modal.galleryList.length;i++){if(this.modal.galleryList[i].Permissions!=50){if(this.modal.galleryList[i].ItemKey==galleryID)
{galleryName=unescape(this.modal.galleryList[i].Name);galleryName=com.art.core.utils.StringUtil.autoEllipseText(galleryName,15);this.selectedGalleryId=this.modal.galleryList[i].GalleryId;break;}}}}
if(galleryName=="")
galleryName="Select Gallery";else
{if(MyGalleriesCore.getModel().getLastSelectedGalleryName()!=""&&MyGalleriesCore.getModel().getLastSelectedGalleryName()!=null)
{if(this.modal.id=='SaveToGallery')
{galleryName=MyGalleriesCore.getModel().getLastSelectedGalleryName();galleryName=com.art.core.utils.StringUtil.autoEllipseText(galleryName,15);this.selectedGalleryId=MyGalleriesCore.getModel().getLastSelectedGalleryID();}}}
if(this.modal.id=='SaveToGallery')
{var str='<div id="existingDrpDownGalleries">'
+'<div id="txtExistingDrpDownGallery"><div id="txtExistingDrpDownGallery_label" class=""><div id="drpdownSelection" class="floatLeft">'+galleryName+'</div><div style="float: left; background-image: url(&quot;http://cache1.artprintimages.com/images/coreimages/core-components-sprites.png&quot;); background-repeat: no-repeat; width: 20px; height: 25px;#height: 18px; background-position: -315px -73px;"></div></div></div>'
+'</div>';}
else
{var str='<div id="existingDrpDownGalleries">'
+'<div id="txtExistingDrpDownGallery"><div id="txtExistingDrpDownGallery_label"><div style="float: left;width:150px;" id="drpdownSelection">'+galleryName+'</div><div style="float: left; background-image: url(&quot;http://cache1.artprintimages.com/images/coreimages/core-components-sprites.png&quot;); background-repeat: no-repeat; width: 20px; height: 25px; background-position: -315px -73px;"></div></div></div>'
+'</div>';}
return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.getExistingDropDownList=function(){var strLi="",str="";if(this.modal.galleryList.length>0){for(var i=0;i<this.modal.galleryList.length;i++){if(this.modal.galleryList[i].Permissions!=50){galleryName=com.art.core.utils.StringUtil.autoEllipseText(this.modal.galleryList[i].Name,15);strLi+='<li class="drpDownLstItem" id="'+this.modal.galleryList[i].GalleryId+'">'+unescape(galleryName)+'</li>';}}
str='<ul id="drpDownLstGallery" class="floatLeft">'
+strLi
+'</ul>';}
return str;};com.art.myGalleries.components.MyGalleriesModal.prototype.getDestinationSelectedGalleryId=function(){return this.selectedGalleryId;};com.art.core.components.BaseComponent.extend(com.art.myGalleries.components.MyGalleriesModal.prototype);com.art.myGalleries.components.LoginInvokeComponent=function(data,app,loginoption)
{this.id="LoginInvokeComponent";this.NAME=com.art.myGalleries.components.LoginInvokeComponent.NAME;this.LOGIN_CLICK=com.art.myGalleries.components.LoginInvokeComponent.LOGIN_CLICK;this.REGISTER_CLICK=com.art.myGalleries.components.LoginInvokeComponent.REGISTER_CLICK;this.imagePath="";this.callbacks={};this.loginOption=com.art.core.components.LoginModal.LOGIN;this.app=app;this.calledmodule="";this.loginclickedFForB=false;};com.art.myGalleries.components.LoginInvokeComponent.NAME="LoginInvokeComponent";com.art.myGalleries.components.LoginInvokeComponent.prototype.init=function()
{};com.art.myGalleries.components.LoginInvokeComponent.prototype.showLoginModal=function(modulename){var _this=this;this.loginLB=new com.art.core.components.LightBox('myLoginLB','body',.7);this.loginLB.zindex=this.app.getModel().getNextHighestZIndex();this.loginLB.show();var config={defaultFacebookAccountId:this.app.getModel().environment.facebookAccountId};this.login=new com.art.core.components.LoginModal('myGalleryLogin','Login to your Art.com account','Sign up for a new Art.com account ',{},this.loginOption,{},{},config);var sd={serviceUrlAccountAuthenticationApi:this.app.getModel().environment.serviceUrlAccountAuthenticationApi,apiKey:this.app.getModel().environment.apiKey,sessionId:this.app.getModel().environment.sessionId};this.login.setServiceDetails(sd);$("body").append(this.login.render(this.app.getModel().getNextHighestZIndex()+1));this.login.initSubmitButtons();this.login.registerEvents();this.login.close(function(){if(_this.loginLB)
_this.loginLB.close();});this.login.login(function(response){if(response.success)
{var r=response.facebookResponse!=undefined?response.artComResponse:response;if(response.facebookResponse!=undefined&&response.facebookResponse!=null){var authToken=response.artComResponse.AuthenticationToken;var profileUrl=response.artComResponse.Account.ProfileInfo.ProfileKey;var accountid=response.artComResponse.Account.ProfileInfo.AccountId;_this.app.sendNotification(new com.art.core.utils.Note(_this.app.events.FACEBOOK_MERGE_ACCOUNTS,{authToken:authToken},{modulename:_this.calledmodule,logintfob:_this.loginclickedFForB}));}
else{var authToken=response.AuthenticationToken;var profileUrl=response.Account.ProfileInfo.ProfileKey;var accountid=response.Account.ProfileInfo.AccountId;var data=_this.login.getLoginAccountData();var note=new com.art.core.utils.Note(_this.app.events.LOGIN_ACCOUNT,{username:data.username,password:data.password,coreresponse:response},{fromExternalModule:false,modulename:_this.calledmodule,logintfob:_this.loginclickedFForB});_this.app.sendNotification(note);}}
else
{this.app.sendNotification(new com.art.core.utils.Note(this.app.events.REGISTER_ACCOUNT_FAILED,"failure"));}});this.login.register(function(response){var authToken=response.AuthenticationToken;var profileUrl=response.Account.ProfileInfo.ProfileKey;var accountid=response.Account.ProfileInfo.AccountId;var data=_this.login.getLoginAccountData();var note=new com.art.core.utils.Note(_this.app.events.LOGIN_ACCOUNT,{username:data.username,password:data.password,coreresponse:response},{fromExternalModule:false,modulename:_this.calledmodule,logintfob:_this.loginclickedFForB});_this.app.sendNotification(note);});this.login.close(function(){if(_this.loginLB)
_this.loginLB.close();});};com.art.myGalleries.components.LoginInvokeComponent.prototype.notify=function()
{this.app.sendNotification(note);};com.art.myGalleries.components.LoginInvokeComponent.prototype.listNotificationInterests=function()
{return[this.app.events.SHOW_GLOBAL_LOGINMODAL,this.app.events.REGISTER_ACCOUNT_SUCCESS,this.app.events.REGISTER_ACCOUNT_FAILED,this.app.events.LOGIN_ACCOUNT_SUCCESS,this.app.events.LOGIN_ACCOUNT_FAILED,this.app.events.LOGOUT_MYGALLERY_SUCCESS,this.app.events.LOGOUT_MYGALLERY_FAILED,this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS,this.app.events.LOGIN_FACEBOOK_MYGALLERY_FAILED,];};com.art.myGalleries.components.LoginInvokeComponent.prototype.refreshpage=function()
{var h=location.href;var pos=h.indexOf("#");if(pos>-1){h=h.substring(0,pos)}
window.location.href=h;};com.art.myGalleries.components.LoginInvokeComponent.prototype.handleNotification=function(note)
{switch(note.name)
{case this.app.events.SHOW_GLOBAL_LOGINMODAL:this.loginOption=note.body.loginOption;this.calledmodule=note.type.modulename;if(note.type.clickedLoginThroughFollowOrBookMark)
this.loginclickedFForB=note.type.clickedLoginThroughFollowOrBookMark;var cookieobject=new com.art.core.cookie.Cookie();if(cookieobject.getCookieDictionary('ap','accounttype')!=this.app.constants.ANONYMOUS){window.location.href=getProfileKey()+"?ac=true";}
else{this.showLoginModal();}
break;case this.app.events.REGISTER_ACCOUNT_SUCCESS:if(note.body&&note.body.fromExternalModule)
return;_gaq.push(['t1._setCustomVar',3,'logged-in','true',1]);_gaq.push(['global._setCustomVar',3,'logged-in','true',1]);if(this.doNotRefreshOnLogin){try{dle_handleLoginSuccess();}catch(e){}
return;}
var cookieobject=new com.art.core.cookie.Cookie();if(location.href.indexOf("/me/")>-1||location.href.indexOf("mygalleries.asp")>-1){if(cookieobject.getCookieDictionary('ap','profileURL')!=""){var profileURL=cookieobject.getCookieDictionary('ap','profileURL');window.location.href=profileURL;}}
else{this.refreshpage();}
break;case this.app.events.REGISTER_ACCOUNT_FAILED:window.location.href=window.location.href;$(".loginModalErrorMsg").css("display","block");if(note.body=="exist"){if($.browser.msie&&parseInt($.browser.version)==7)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","60px");}}
else
{$(".loginErrorMsg").css('top','70px');}
$(".loginErrorMsg").text('The email address you entered is already associated with an Art.com account.');}
else if(note.body=="invalidemail"){$(".loginErrorMsg").text('Please enter a valid email address.');}
else if(note.body=="invalidpassword"){$(".loginErrorMsg").text('Password must be at least 8 characters.');}
else if(note.body=="failure"){if($.browser.msie)
{if(this.id!="myGalleryLogin")
{$(".loginErrorMsg").css("top","40px");}
else
{$(".loginErrorMsg").css("top","70px");}}
$(".loginErrorMsg").text('We were unable to find an account associated with that email address.');}
break;case this.app.events.LOGIN_ACCOUNT_SUCCESS:if(note.type.modulename=="GlobalHeader"){trace("logging ga for login success");_gaq.push(['t1._setCustomVar',3,'logged-in','true',1]);_gaq.push(['global._setCustomVar',3,'logged-in','true',1]);var cookieobject=new com.art.core.cookie.Cookie();if(location.href.indexOf("/me/")>-1||location.href.indexOf("mygalleries.asp")>-1){if(cookieobject.getCookieDictionary('ap','profileURL')!=""){var profileURL=cookieobject.getCookieDictionary('ap','profileURL');window.location.href=profileURL;}}
else{if(this.doNotRefreshOnLogin){try{dle_handleLoginSuccess();}catch(e){}
return;}
this.refreshpage();}}
break;case this.app.events.LOGIN_ACCOUNT_FAILED:if(note.body=="failure"){$(".loginModalErrorMsg").css("display","block");if($.browser.msie)
{$(".loginErrorMsg").css("top","70px");}
$(".loginErrorMsg").text('We were unable to find an account associated with that email address.');}
break;case this.app.events.LOGOUT_MYGALLERY_SUCCESS:var galKey=MyGalleriesCore.getModel().getLastSelectedGalleryKey();MyGalleriesCore.getModel().resetGalleryIDCountCookie(galKey);MyGalleriesCore.getModel().resetLastSelectedGalleryName("");MyGalleriesCore.getModel().setOneClickAddToGalleryEnabled(false);$('#autoSave').attr('checked',true);FB.getLoginStatus(function(response){if(response.status==='connected'){FB.logout(function(response){});var dest="http://"+location.host+_this.app.getModel().environment.profileURL+"?logout=yes";location.href="https://www.facebook.com/logout.php?next="+dest+"&access_token="+FB._authResponse.accessToken;}
else
{var cookieobject=new com.art.core.cookie.Cookie();if(cookieobject.getCookieDictionary('ap','profileURL')!=""){var profileURL=cookieobject.getCookieDictionary('ap','profileURL');window.location.href=profileURL+"?logout=yes";}
else{window.location.href="http://"+location.host+_this.app.getModel().environment.profileURL+"?logout=yes";}}});break;case this.app.events.LOGOUT_MYGALLERY_FAILED:window.location.href=window.location.href;break;case this.app.events.LOGIN_FACEBOOK_MYGALLERY_SUCCESS:_gaq.push(['t1._setCustomVar',3,'logged-in','true',1]);_gaq.push(['global._setCustomVar',3,'logged-in','true',1]);if(this.doNotRefreshOnLogin){try{dle_handleLoginSuccess();}catch(e){}
return;}
if(note.type.modulename=="GlobalHeader"){var cookieobject=new com.art.core.cookie.Cookie();if(cookieobject.getCookieDictionary('ap','profileURL')!=""&&location.href.indexOf("/me/")>-1){var profileURL=cookieobject.getCookieDictionary('ap','profileURL');window.location.href=profileURL;}
else
{window.location.href=window.location.href;}}
break;case this.app.events.LOGIN_FACEBOOK_MYGALLERY_FAILED:break;default:}};var mygalleriesGA={};var isMygalleriesMainLoaded=false;$(document).ready(function(){mygalleriesGA=new com.art.core.tracking.GoogleAnalytics("My Galleries");mygalleriesGA.init();var viewMode="";var loc=window.location.href;if(loc.indexOf('item/')>-1){viewMode=MyGalleriesCore.constants.DETAIL_VIEW;}
else{var regex=/gallery\/.+/;if(loc.match(regex)==undefined||com.art.core.utils.BrowserUtil.getQueryString("logout"))
viewMode=MyGalleriesCore.constants.GALLERY_HOME;else
viewMode=MyGalleriesCore.constants.GRID_VIEW;}
if(typeof MyGalleriesEnvironmentVariables=="undefined"){eval('MyGalleriesEnvironmentVariables={};');}
if(typeof MyGalleriesEnvironmentVariablesDynamic=="undefined"){eval('MyGalleriesEnvironmentVariablesDynamic={};');}
MyGalleriesEnvironmentVariablesDynamic.selectedGalleryID="";var urlValue=location.href;if(urlValue.indexOf("/gallery/")>-1){if($('.mg-selected').length>0){var getId=$('.mg-selected').attr('id');getId=getId.split("_");MyGalleriesEnvironmentVariablesDynamic.selectedGalleryID=getId[1];}}
if($('.MyGalleriesDefault').length>0)
{var getId=$('.MyGalleriesDefault').attr('id');getId=getId.split("_");MyGalleriesEnvironmentVariablesDynamic.selectedGalleryID=getId[1];}
if(MyGalleriesEnvironmentVariablesDynamic.selectedGalleryID==""&&typeof mygalPageInfo!='undefined'){MyGalleriesEnvironmentVariablesDynamic.selectedGalleryID=mygalPageInfo.UserModeGalleryId;}
MyGalleriesCore.init(MyGalleriesEnvironmentVariables,viewMode,MyGalleriesEnvironmentVariablesDynamic);MyGalleriesCore.addToSubEnvironment('isMyGalleryPage',(location.href.indexOf("/me/")>-1||location.href.indexOf("mygalleries.asp"))>-1);MyGalleriesCore.addToSubEnvironment('isExternalPage',location.href.indexOf("/me/")==-1);MyGalleriesCore.addToSubEnvironment('isMyAccountPage',location.href.indexOf("/asp/secure")>-1);MyGalleriesCore.addToSubEnvironment('isMyPhotosPage',location.href.indexOf("/photostoart")>-1);if(MyGalleriesEnvironmentVariablesDynamic.isExternalPage)
{MyGalleriesCore.registerModule(new com.art.myGalleries.modules.ExternalModule({},MyGalleriesCore));MyGalleriesCore.registerModule(new com.art.myGalleries.components.LoginInvokeComponent({},MyGalleriesCore));MyGalleriesCore.registerSubscriber(new com.art.myGalleries.commands.ApplicationCommand({target:''},MyGalleriesCore));MyGalleriesCore.startModule(com.art.myGalleries.modules.ExternalModule.NAME);MyGalleriesCore.startModule(com.art.myGalleries.components.LoginInvokeComponent.NAME);if(!(MyGalleriesEnvironmentVariablesDynamic.isMyAccountPage||MyGalleriesEnvironmentVariablesDynamic.isMyPhotosPage)){MyGalleriesCore.registerModule(new com.art.myGalleries.modules.TrayModule({target:"body"},MyGalleriesCore));MyGalleriesCore.startModule(com.art.myGalleries.modules.TrayModule.NAME);}
if(MyGalleriesCore.getModel().getIfLoggedInCookieNew())
{$('.tray_login').hide();}
else
{$('.tray_login').show();}}
MyGalleriesCore.registerModule(new com.art.myGalleries.components.LoginInvokeComponent({},MyGalleriesCore));MyGalleriesCore.startModule(com.art.myGalleries.components.LoginInvokeComponent.NAME);});var isVSALoaded=false;var VSjsFilepath='/scripts/VisualSearchApplication.js';$(document).ready(function(){var vsdContent={"intro":{"title":"","continueButton":"CONTINUE","bodyHeader":"Provide us with an image you like","body":'<div class="VSIntroRadioContainer"><span class="VSradio1"></span><input type="hidden" name="radiovs" value="upload"/><div id="IntroRadioTxt1" class="IntroRadioTxt">Upload a file from my computer</div><div class="clear"></div><span class="VSradio2"></span><input type="hidden" name="radiovs" value="link"/><div id="IntroRadioTxt2" class="IntroRadioTxt">Enter a link to the image I like</div></div>',"contentRight":""},"upload":{"title":"Upload File","continueButton":"UPLOAD & CONTINUE","bodyHeader":"","body":"<span class='uploadtxt'>Upload  a file from my computer</span>","contentRight":"<div><p>&bull; We accept the following formats: jpeg, jpg, png, or gif.<p>&bull; Please select an image between 25KB and 10MB in size.</p></div>"},"link":{"title":"Enter Link","continueButton":"UPLOAD & CONTINUE","bodyHeader":"","body":"Please enter the link to the image you like","contentRight":"<div><p>&bull; The link you provide must end in jpeg, jpg, png, or gif.</p><p> &bull; File size must be greater than 25KB.</p></div>"}};$("#vs-upload,#vs-upload2,#vs-upload3,#vs-upload4,#vs-upload5,#vs-upload6").bind("click",function(){if(!isVSALoaded)
$.getScript(VSjsFilepath,function(){VisualSearchApplication_upload(VisualSearchCore);isVSALoaded=true;});else{VisualSearchApplication_upload(VisualSearchCore);}});$("#vs-wizard, #vs-wizard2, #vs-wizard3, #vs-wizard4, #vs-wizard5, #vs-wizard6").bind("click",function(){if(!isVSALoaded)
$.getScript(VSjsFilepath,function(){VisualSearchApplication_Inspire();isVSALoaded=true;});else{VisualSearchApplication_Inspire();}});$("#vs-wizardStep3").bind("click",function(){if(!isVSALoaded)
$.getScript(VSjsFilepath,function(){VisualSearchApplication_step3();isVSALoaded=true;});else{VisualSearchApplication_step3();}});$("#vs-wizard-lp, #vs-wizard-lp2, #vs-wizard-lp3, #vs-wizard-lp4, #vs-wizard-lp5, #vs-wizard-lp6").bind("click",function(){if(!isVSALoaded)
$.getScript(VSjsFilepath,function(){VisualSearchApplication_VsWizardLp();isVSALoaded=true;});else{VisualSearchApplication_VsWizardLp();}});$("#vs-get-images").bind("click",function(){if(!isVSALoaded)
$.getScript(VSjsFilepath,function(){VisualSearchApplication_VsGetImages();isVSALoaded=true;});else{VisualSearchApplication_VsGetImages();}});VisualSearchApplication_upload=function(){VisualSearchCore.init(visualSearchCoreEnvironment);var evtName=$(this).attr('id')=="vs-upload"?"VSexactsearchLN":"VSexactsearchblock";VisualSearchCore.GATrackEvent(evtName);VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleLightbox({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleUpload({"target":"body","content":vsdContent},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleCurrentSearch({"target":"body","content":{}},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleSearchResults({"target":".VSResultsContentRight","content":{}},VisualSearchCore));VisualSearchCore.startModule("ModuleLightbox");VisualSearchCore.startModule("ModuleUpload");VisualSearchCore.getModule('ModuleUpload').updateContent('intro');};VisualSearchApplication_Inspire=function(){VisualSearchCore.init(visualSearchCoreEnvironment);var evtName=$(this).attr('id')=="vs-wizard"?"VS HP left nav Inspire me":"VS HP block Inspire me";VisualSearchCore.GATrackEvent(evtName);VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleLightbox({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleMultipleItemSearch({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleWizard({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleWizardIntro({"target":"body"},VisualSearchCore));VisualSearchCore.startModule("ModuleLightbox");VisualSearchCore.startModule("ModuleWizardIntro");};VisualSearchApplication_step3=function(){VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleLightbox({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleMultipleItemSearchResults({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleWizard({"target":"body"},VisualSearchCore));VisualSearchCore.startModule("ModuleLightbox");VisualSearchCore.startModule("ModuleMultipleItemSearchResults");};VisualSearchApplication_VsWizardLp=function(){VisualSearchCore.init(visualSearchCoreEnvironment);VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleLightbox({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleMultipleItemSearch({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleWizard({"target":"body"},VisualSearchCore));VisualSearchCore.startModule("ModuleLightbox");VisualSearchCore.startModule("ModuleWizard");};VisualSearchApplication_VsGetImages=function(){VisualSearchCore.init(visualSearchCoreEnvironment);var pi=new com.art.core.vos.ImageVO();pi.getTestCatalogImage();VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleLightbox({"target":"body"},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleCurrentSearch({"target":"body","content":{}},VisualSearchCore));VisualSearchCore.registerModule(new art.visualSearch.modules.ModuleSearchResults({"target":".VSResultsContentRight","content":{}},VisualSearchCore));VisualSearchCore.startModule("ModuleLightbox");VisualSearchCore.sendNotification(new art.core.Note(VisualSearchCore.events.SEARCH_FROM_CATALOG,{pivotImage:pi},'vo'));};});ABTestListBuilt=false;var isQuirksMode=false;var countryArray=new Array();if(typeof currentCountryCode!="undefined")
buildCountryList();$(document).ready(function(){isQuirksMode=(!jQuery.support.boxModel);if(isQuirksMode){$('#css-toolbar-inner').css('height','37px');$('.cst-error, .cst-waiting').css('float','left');}
if(typeof currentCountryCode!="undefined"){getCurrentCountry();if(typeof currentCountry!="undefined")$('#cst-current-country').text(currentCountry);}
$('.cst-button').live('mouseover mouseout',function(event){if(event.type=='mouseover')$(this).addClass('cst-button-hover');else $(this).removeClass('cst-button-hover');});$('#cst-save-cart').live('click',function(){var $this=$(this);var $popup=$('#cst-popup-save-cart');$(this).siblings().removeClass('cst-button-active');hideCSPopup();if($(this).hasClass('cst-button-active'))$(this).removeClass('cst-button-active');else{positionCSTPopup($this,$popup);$this.addClass('cst-button-active');}});$('#cst-abtests').live('click',function(){var $this=$(this);var $popup=$('#cst-popup-abtests');$(this).siblings().removeClass('cst-button-active');buildABTestList();hideCSPopup();if($(this).hasClass('cst-button-active'))$(this).removeClass('cst-button-active');else{positionCSTPopup($this,$popup);$this.addClass('cst-button-active');}});$('#cst-login').live('click',function(){var $this=$(this);var $popup=$('#cst-popup-login');$(this).siblings().removeClass('cst-button-active');hideCSPopup();if($(this).hasClass('cst-button-active'))$(this).removeClass('cst-button-active');else{positionCSTPopup($this,$popup);$this.addClass('cst-button-active');}});$('#cst-agent-container').live('click',function(){var $this=$(this);var $popup=$('#cst-popup-login');positionCSTPopup($this,$popup);});$('#cst-country-container').live('click',function(){var $this=$(this);var $popup=$('#cst-popup-country');$(this).siblings().removeClass('cst-button-active');getCountries();hideCSPopup();positionCSTPopup($this,$popup);});$('#cst-links').live('click',function(){var $this=$(this);var $popup=$('#cst-popup-links');$(this).siblings().removeClass('cst-button-active');hideCSPopup();if($(this).hasClass('cst-button-active'))$(this).removeClass('cst-button-active');else{positionCSTPopup($this,$popup);$this.addClass('cst-button-active');}});$('.cst-double-container').live('mouseover mouseout',function(event){if(event.type=='mouseover'){$(this).find('.cst-double-first').addClass('cst-double-first-hover');$(this).find('.cst-double-second').fadeIn('fast');}
else{$(this).find('.cst-double-first').removeClass('cst-double-first-hover');$(this).find('.cst-double-second').hide();}});$('.cst-link').live('mouseover mouseout',function(event){if(event.type=='mouseover'){$(this).addClass('cst-link-hover');}
else{$(this).removeClass('cst-link-hover');}});$('.cst-close').live('click',function(){hideCSPopup();$('.cst-button').removeClass('cst-button-active');});$('#cst-hide').live('click',function(){if(isQuirksMode){$('#css-toolbar').hide();$('#css-toolbar-hidden').show();}
else{$('#css-toolbar').slideUp('fast',function(){$('#css-toolbar-hidden').show();});}});$('#css-toolbar-hidden').live('click',function(){$(this).hide();if(isQuirksMode)
$('#css-toolbar').show();else{$('#css-toolbar').slideDown('fast');}});$('.cst-exp-group').live('mouseenter',function(){$(this).find('.cst-exp-text').addClass('cst-exp-text-hover');$(this).find('.cst-button').addClass('cst-button-hover');});$('.cst-exp-group').live('mouseleave',function(){$(this).find('.cst-exp-text').removeClass('cst-exp-text-hover');$(this).find('.cst-button').removeClass('cst-button-hover');});$(window).resize(function(){if($('.cst-popup').is(':visible')){var $button=$('.cst-button-active');var $popup=$('.cst-popup:visible');positionCSTPopup($button,$popup);}});$('#cst-popup-country-list ul li').live('click',function(){hideCSPopup();$('#cst-current-country').text('loading...');countryCode=$(this).attr('class');countryCode=countryCode.substr(countryCode.length-2);var randomNumber=Math.floor(Math.random()*1000000);if(currentCountryCode=='GB')
location.href='/asp/misc/csstoolbar_action.asp?ACTION=ChangeCountry&CountryName=US&_r='+randomNumber;else location.href='/asp/misc/csstoolbar_action.asp?ACTION=ChangeCountry&CountryName='+countryCode+'&_r='+randomNumber;});$('#cst-new-session').live('click',function(){location.href='/asp/misc/csstoolbar_action.asp?ACTION=NewSession';});$('#cst-update-payment').live('click',function(){location.href='https://www.art.com/ADC.Net/Root/Pages/Secure/PaymentUpdateForm/default.aspx?formMode=css';});$('#cst-empty-cart').live('click',function(){location.href='/asp/misc/csstoolbar_action.asp?ACTION=EmptyCart';});$('#cst-report-problem').live('click',function(){sendDiagnosticReport('true');});$('.cst-exp-group').live('click',function(){var expID=$(this).index()+1;var currentURL=document.location.href;var addWTStaging=false;currentURL=currentURL.replace('&_wt.mode=staging','');currentURL=currentURL.replace(/[&?]testgroup=exp\d/i,'');if(currentURL.indexOf('?')>1)currentURL=currentURL+'&';else currentURL=currentURL+'?';urlString='testgroup=exp'+expID;if(addWTStaging)urlString=urlString+'&_wt.mode=staging';location.href=currentURL+urlString;});$('#cst-email-submit').live('click',function(){$(this).siblings('.cst-error').fadeOut();var validEmail=false;var emailInput=$('.cst-save-cart-text').val();var pattern=/^([a-zA-Z0-9])(([a-zA-Z0-9])*([\._\+-])*([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/;if(emailInput.match(pattern))location.href='/asp/misc/csstoolbar_action.asp?ACTION=SaveCart&SCEmail='+emailInput;else $(this).siblings('.cst-error').fadeIn();});$('#cst-login-submit').live('click',function(){$(this).siblings('.cst-error').hide();$('#cst-login-waiting').show();var theURL='/asp/misc/csstoolbar_action.asp?ACTION=Login&UserID='+$('.cst-login-text').val();$.ajax({url:theURL,type:'GET',success:function(data){$('#cst-login-waiting').hide();if(data.length>1){$('#cst-agent-name').html(data);if(data.indexOf('error')>-1)$('#cst-login-submit').siblings('.cst-error').fadeIn();else{hideCSPopup();$('#cst-login').hide();$('#cst-agent-container').show();}}else $('#cst-login-submit').siblings('.cst-error').fadeIn();},error:function(request,status,error){$('#cst-login-waiting').hide();$('#cst-login-submit').siblings('.cst-error').fadeIn();}});});$('#cst-login-text').focus(function(){if($(this).val()=='Enter your name')$(this).select();});$('#cst-login-text').blur(function(){if($(this).val()=='')$(this).val('Enter your name');});$('.cst-input').keypress(function(event){if(event.which==13)$(this).siblings('.cst-submit').trigger('click');});csAgentName='';csAgentName=GetCookieDictionary('cs','EN');csAgentCurrentName=$('#cst-agent-name').text();if(csAgentName.length>2&&csAgentCurrentName.length<1){csAgentName=csAgentName.replace('|',' ');$('#cst-login').hide();$('#cst-agent-container').show();$('#cst-agent-name').text(csAgentName);}});function hideCSPopup(){$('.cst-popup').hide();$('#cst-arrow-up').hide();}
function positionCSTPopup($button,$popup){var btnOffset=$button.offset();var toolbarOffset=$('#css-toolbar').offset();var $arrow=$('#cst-arrow-up');var topPos=toolbarOffset.top+$('#css-toolbar').height();var leftPos=btnOffset.left;if(leftPos+$popup.width()>toolbarOffset.left+$('#css-toolbar-inner').width()){leftPos=leftPos-$popup.width()+$button.width()-20;}
arrowTopPos=toolbarOffset.top+$('#css-toolbar').height()-13;if(isQuirksMode)arrowTopPos=arrowTopPos-13;arrowLeftPos=btnOffset.left+($button.width()/2);$popup.css('top',topPos).css('left',leftPos);$arrow.css('top',arrowTopPos);$arrow.css('left',arrowLeftPos);$arrow.show();$popup.slideDown('fast');}
function buildABTestList(){var hasTest=false;ABTestListBuilt=true;var abHTML='';if(typeof wt_test_name!="undefined"){if(wt_test_name.length>1){$('#cst-ab-test-title').text(wt_test_name);$('#cst-ab-top').show();hasTest=true;}}
if(typeof wt_test_groups!="undefined"){if(wt_test_groups.length>1){console.log('has groups');$.each(wt_test_groups,function(i){i=i+1;abHTML=abHTML+'<div class="cst-exp-group">'+'<div id="cs-exp'+i+'" class="cst-button">'+i+'</div>'+'<div class="cst-exp-text">'+this+'</div>'+'<div class="clear"></div>'+'</div>';});$('#cst-ab-top').show();$('#cst-ab-group-list').html(abHTML);}}
if(!hasTest){$('.cst-exp-off').show();}}
function addCountry(country,code,popularRank){if(popularRank==null)popularRank=0;countryArray.push([country,code,popularRank]);}
function buildCountryList(){addCountry('Australia','AU');addCountry('Austria','AT');addCountry('Belgium','BE');addCountry('Canada','CA');addCountry('Denmark','DK');addCountry('Finland','FI');addCountry('France','FR');addCountry('Germany','DE');addCountry('Greece','GR');addCountry('Hong Kong','HK');addCountry('Ireland','IE');addCountry('Italy','IT');addCountry('Japan','JP');addCountry('Luxembourg','LU');addCountry('Mexico','MX');addCountry('Netherlands','NL');addCountry('New Zealand','NZ');addCountry('Norway','NO');addCountry('Portugal','PT');addCountry('Singapore','SG');addCountry('South Africa','ZA');addCountry('Spain','ES');addCountry('Sweden','SE');addCountry('Switzerland','CH');addCountry('United Kingdom','GB');addCountry('United States','US');}
function getCountries(){var listHTML='';$.each(countryArray,function(i){if(i%10==0)listHTML=listHTML+'<ul>';listHTML=listHTML+'<li class="cstCountry-'+countryArray[i][1]+'">'+countryArray[i][0]+'</li>';if(((i+1)%10)==0||i==countryArray.length-1)listHTML=listHTML+'</ul>';});listHTML=listHTML+'<div class="clear"></div>';$('#cst-popup-country-list').html(listHTML);}
function getCurrentCountry(){$.each(countryArray,function(i){if(countryArray[i][1]==currentCountryCode){currentCountry=countryArray[i][0];return true;}});}
var csPopupIsOpen=false;var bIsLoggedIn=false;var changeLink=document.getElementById("CSCurrentUserChange");function ChangeLinkStatus(status){var changeLink=document.getElementById("CSCurrentUserChange");if(status=='true')changeLink.style.display='block';}
var XMLHttpFactories=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function createXMLHTTPObject(){var xmlhttp=false;for(var i=0;i<XMLHttpFactories.length;i++){try{xmlhttp=XMLHttpFactories[i]();}
catch(e){continue;}
break;}
return xmlhttp;}
req=createXMLHTTPObject();function mouseButton(obj,action){var buttonBkImg='https://secureimg.art.com/images/nav/CSToolbar/button_bk_art.gif';if(action=='over'){obj.style.background='none';obj.style.background='#F7ECCC';}
else if(action=='out'){obj.style.backgroundImage="url("+buttonBkImg+")";}}
function mouseLink(obj,action){if(action=='over'){obj.style.color='#FFFFFF';obj.style.textDecoration='underline';}
else if(action=='out'){obj.style.color='#EFD998';}}
function csEmptyCart(action){window.location="/asp/misc/csstoolbar_action.asp?ACTION=EmptyCart"}
function csNewSession(action){window.location="/asp/misc/csstoolbar_action.asp?ACTION=NewSession"}
function getChangeUserResponse(){if(req.readyState==4){var theCSMessage=document.getElementById('CSCurrentUserName');var receivedUserName=req.responseText
theCSMessage.innerHTML=receivedUserName;bIsLoggedIn=true;csChangeUser('hide');}}
function csSaveCart(action){saveCartModule=document.getElementById("CSModuleSaveCartContainer");saveCartPlacement=document.getElementById("CSBtn_SaveCart");SCEmail=document.getElementById("CSSaveCartEmail").value;if(action=="show"){if(csPopupIsOpen)closeAllCSPopups();saveCartModule.style.left='152px';saveCartModule.style.display='block';csPopupIsOpen=true;}
else if(action=="hide"){saveCartModule.style.display='none';csPopupIsOpen=false;}
else if(action=="submit"){var errorline='EmailError';var emailOK=false;var x=document.getElementById('CSSaveCartEmail').value;var filter=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(filter.test(x)){document.getElementById(errorline).style.visibility='hidden';emailOK=true;}
else{document.getElementById(errorline).style.visibility='visible';return(false);}
if(emailOK)window.location="/asp/misc/csstoolbar_action.asp?ACTION=SaveCart&SCEmail="+SCEmail;}}
function csChangeCountry(action){var theModule=document.getElementById("CSModuleChangeCountryContainer");var changeLink=document.getElementById("CSCurrentCountryChange");var cancelLink=document.getElementById("CSCurrentCountryCancel");var randomnumber=Math.floor(Math.random()*10000);if(action=="show"){if(csPopupIsOpen)closeAllCSPopups();theModule.style.left='515px';theModule.style.display='block';changeLink.style.display='none';cancelLink.style.display='block';csPopupIsOpen=true;}
else if(action=="hide"){theModule.style.display='none';changeLink.style.display='block';cancelLink.style.display='none';csPopupIsOpen=false;}
else if(action=="special"){document.getElementById('CSCurrentCountry').innerHTML='Loading..';window.location="/asp/misc/csstoolbar_action.asp?ACTION=ChangeCountry&CountryName=US"+"&randomnumber="+randomnumber;}
else{document.getElementById('CSCurrentCountry').innerHTML='Loading..';window.location="/asp/misc/csstoolbar_action.asp?ACTION=ChangeCountry&CountryName="+action+"&randomnumber="+randomnumber;}}
function csChangeLanguage(action){var theModule=document.getElementById("CSModuleChangeLanguageContainer");var changeLink=document.getElementById("CSCurrentLanguageChange");var cancelLink=document.getElementById("CSCurrentLanguageCancel");if(action=="show"){if(csPopupIsOpen)closeAllCSPopups();theModule.style.left='515px';changeLink.style.display='none';cancelLink.style.display='block';theModule.style.display='block';csPopupIsOpen=true;}
else if(action=="hide"){theModule.style.display='none';changeLink.style.display='block';cancelLink.style.display='none';csPopupIsOpen=false;}
else if(action=="submit"){}}
function csChangeUser(action){var userName=document.getElementById("CSCurrentUserName");var userBox=document.getElementById("CSCurrentUserEdit");var changeLink=document.getElementById("CSCurrentUserChange");var cancelLink=document.getElementById("CSCurrentUserCancel");var theTextBox=document.getElementById("CSCurrentUserTextBox");var theInitBox=document.getElementById("CSCurrentUserInit");var initLink=document.getElementById("CSCurrentUserLogin");if(action=="show"){if(csPopupIsOpen)closeAllCSPopups();theInitBox.style.display='none';initLink.style.display='none';theTextBox.value='Type your username';userName.style.display='none';changeLink.style.display='none';userBox.style.display='block';cancelLink.style.display='block';csPopupIsOpen=true;}
else if(action=="hide"){userBox.style.display='none';cancelLink.style.display='none';if(bIsLoggedIn){userName.style.display='block';changeLink.style.display='block';}
else{theInitBox.style.display='block';initLink.style.display='block';}
csPopupIsOpen=false;}
else if(action=="submit"){if(!req)return;var sendString;sendString="ACTION=Login&UserID="+document.getElementById('CSCurrentUserTextBox').value;req.open("GET","/asp/misc/csstoolbar_action.asp?"+(sendString),true);req.onreadystatechange=getChangeUserResponse;req.send(null);return true;}}
function closeAllCSPopups(){if(csPopupIsOpen){csChangeCountry('hide');csChangeUser('hide');csSaveCart('hide');csPopupIsOpen=false;}
return false;}
function csChangeABTest(newID){document.getElementById('CSCurrentABTest').innerHTML='Loading..';var theID=parseInt(newID);var randomnumber=Math.floor(Math.random()*10000);window.location="/asp/default.asp?ABTESTID="+theID+"&randomnumber="+randomnumber;}
function CSToolbar(action){var theTopBar=document.getElementById("CSTopBar");var theMessageBar=document.getElementById("CSMessage");var theBottomBar=document.getElementById("CSBottomBar");var CSOpenText=document.getElementById("CSOpen");if(action=='show'){theTopBar.style.display='block';theMessageBar.innerHTML='';CSOpenText.style.display='none';}
else if(action=='hide'){closeAllCSPopups();theTopBar.style.display='none';theBottomBar.style.display='none';CSOpenText.style.display='block';}}
function GetCookieDictionary(dictName,dictKey){var retval="";var tempString=String(GetCookieBase(dictName));var arPairs;var arKeyValue;if(tempString!=null){arPairs=tempString.split("&");for(var i=0;i<arPairs.length;i++){arKeyValue=arPairs[i].split("=");if(arKeyValue[0]==dictKey){retval=arKeyValue[1];return retval;}}}
return retval;}
function GetCookieBase(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){return GetCookieVal(j);}
i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}
return null;}
function GetCookieVal(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1)endstr=document.cookie.length;return unescape(document.cookie.substring(offset,endstr));}
function submitActionOnEnter(module,e){if(window.event)
keynum=e.keyCode;else if(e.which)
keynum=e.which;keychar=String.fromCharCode(keynum);if(keynum=="13")if(module=="saveCart")csSaveCart('submit')
else if(module=="login")csChangeUser('submit')
return keychar=="13";}